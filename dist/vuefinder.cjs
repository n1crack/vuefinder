"use strict";var Q=(n,o,r)=>{if(!o.has(n))throw TypeError("Cannot "+r)};var W=(n,o,r)=>(Q(n,o,"read from private field"),r?r.call(n):o.get(n)),Z=(n,o,r)=>{if(o.has(n))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(n):o.set(n,r)},ee=(n,o,r,t)=>(Q(n,o,"write to private field"),t?t.call(n,r):o.set(n,r),r);const e=require("vue"),le=require("mitt"),se=require("dragselect"),ie=require("vanilla-lazyload");require("cropperjs/dist/cropper.css");const ce=require("cropperjs"),de=require("@uppy/core"),ue=require("@uppy/xhr-upload");require("microtip/microtip.css");var re;const G=(re=document.querySelector('meta[name="csrf-token"]'))==null?void 0:re.getAttribute("content");var H;class me{constructor(o){Z(this,H,void 0);ee(this,H,o)}get config(){return W(this,H)}transformRequestParams(o){const r=W(this,H),t={};G!=null&&G!==""&&(t[r.xsrfHeaderName]=G);const a=Object.assign({},r.headers,t,o.headers),d=Object.assign({},r.params,o.params),s=o.body,c=r.baseUrl+o.url,m=o.method;let l;m!=="get"&&(s instanceof FormData?(l=s,r.body!=null&&Object.entries(this.config.body).forEach(([u,b])=>{l.append(u,b)})):(l={...s},r.body!=null&&Object.assign(l,this.config.body)));const i={url:c,method:m,headers:a,params:d,body:l};if(r.transformRequest!=null){const u=r.transformRequest({url:c,method:m,headers:a,params:d,body:l});u.url!=null&&(i.url=u.url),u.method!=null&&(i.method=u.method),u.params!=null&&(i.params=u.params??{}),u.headers!=null&&(i.headers=u.headers??{}),u.body!=null&&(i.body=u.body)}return i}getDownloadUrl(o,r){if(r.url!=null)return r.url;const t=this.transformRequestParams({url:"",method:"get",params:{q:"download",adapter:o,path:r.path}});return t.url+"?"+new URLSearchParams(t.params).toString()}getPreviewUrl(o,r){if(r.url!=null)return r.url;const t=this.transformRequestParams({url:"",method:"get",params:{q:"preview",adapter:o,path:r.path}});return t.url+"?"+new URLSearchParams(t.params).toString()}async send(o){const r=this.transformRequestParams(o),t=o.responseType||"json",a={method:o.method,headers:r.headers,signal:o.abortSignal},d=r.url+"?"+new URLSearchParams(r.params);if(r.method!=="get"&&r.body!=null){let c;r.body instanceof FormData?c=o.body:(c=JSON.stringify(r.body),a.headers["Content-Type"]="application/json"),a.body=c}const s=await fetch(d,a);if(s.ok)return await s[t]();throw await s.json()}}H=new WeakMap;function pe(n){const o={baseUrl:"",headers:{},params:{},body:{},xsrfHeaderName:"X-CSRF-Token"};return typeof n=="string"?Object.assign(o,{baseUrl:n}):Object.assign(o,n),new me(o)}function J(n){let o=localStorage.getItem(n+"_storage");const r=e.ref(JSON.parse(o));e.watch(r,t);function t(){r.value===null||r.value===""?localStorage.removeItem(n+"_storage"):localStorage.setItem(n+"_storage",JSON.stringify(r.value))}function a(c,m){r.value=Object.assign({...r.value},{[c]:m})}function d(){r.value=null}return{getStore:(c,m=null)=>r.value===null||r.value===""?m:r.value.hasOwnProperty(c)?r.value[c]:m,setStore:a,clearStore:d}}const j={EDIT:"edit",NEW_FILE:"newfile",NEW_FOLDER:"newfolder",PREVIEW:"preview",ARCHIVE:"archive",UNARCHIVE:"unarchive",SEARCH:"search",RENAME:"rename",UPLOAD:"upload",DELETE:"delete",DOWNLOAD:"download",LANGUAGE:"language"},fe=Object.values(j),ve={class:"border-neutral-300 flex justify-between items-center py-1 text-sm"},he={key:0,class:"flex text-center"},ge=["aria-label"],ke=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 10.5v6m3-3H9m4.06-7.19l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z"})],-1),ye=[ke],xe=["aria-label"],we=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})],-1),be=[we],_e=["aria-label"],Ee=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"},null,-1),Ne=[Ee],Ve=["aria-label"],$e=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"},null,-1),Be=[$e],Ce=["aria-label"],Se=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})],-1),De=[Se],je=["aria-label"],Me=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5m6 4.125l2.25 2.25m0 0l2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"},null,-1),Te=[Me],ze=["aria-label"],Oe=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"},null,-1),Fe=[Oe],Le={key:1,class:"flex text-center"},Ae={class:"pl-2"},qe={class:"dark:bg-gray-700 bg-gray-200 text-xs px-2 py-1 rounded"},He={key:0,class:"animate-spin p-0.5 h-5 w-5 text-white ml-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Ue=e.createElementVNode("circle",{class:"opacity-25 stroke-blue-900 dark:stroke-blue-100",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),Re=e.createElementVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),Pe=[Ue,Re],Ie={class:"flex text-center items-center justify-end"},We=["aria-label"],Ge={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},Ke={key:0,"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5l5.25 5.25"},Ye={key:1,"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"},Je=["aria-label"],Xe={key:0,"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"},Qe={key:1,"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z"},Ze={name:"VFToolbar"},et=Object.assign(Ze,{props:{data:Object},setup(n){const o=e.inject("emitter");e.inject("usePropDarkMode");const{getStore:r,setStore:t}=e.inject("storage"),{t:a}=e.inject("i18n"),d=e.ref(r("viewport","grid")),s=e.ref([]),c=e.ref(r("full-screen",!1)),m=e.inject("features"),l=e.ref("");o.on("vf-search-query",({newQuery:k})=>{l.value=k});const i=e.inject("loadingState"),u=()=>i.value,b=()=>{c.value=!c.value,o.emit("vf-fullscreen-toggle")};return o.on("vf-nodes-selected",k=>{s.value=k}),o.on("vf-view-toggle",k=>{t("viewport",k),d.value=k}),(k,y)=>(e.openBlock(),e.createElementBlock("div",ve,[l.value.length?(e.openBlock(),e.createElementBlock("div",Le,[e.createElementVNode("div",Ae,[e.createTextVNode(e.toDisplayString(e.unref(a)("Search results for"))+" ",1),e.createElementVNode("span",qe,e.toDisplayString(l.value),1)]),u()?(e.openBlock(),e.createElementBlock("svg",He,Pe)):e.createCommentVNode("",!0)])):(e.openBlock(),e.createElementBlock("div",he,[e.unref(m).includes(e.unref(j).NEW_FOLDER)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"mx-1.5","aria-label":e.unref(a)("New Folder"),"data-microtip-position":"bottom-right",role:"tooltip",onClick:y[0]||(y[0]=v=>e.unref(o).emit("vf-modal-show",{type:"new-folder",items:s.value}))},ye,8,ge)):e.createCommentVNode("",!0),e.unref(m).includes(e.unref(j).NEW_FILE)?(e.openBlock(),e.createElementBlock("div",{key:1,class:"mx-1.5","aria-label":e.unref(a)("New File"),"data-microtip-position":"bottom",role:"tooltip",onClick:y[1]||(y[1]=v=>e.unref(o).emit("vf-modal-show",{type:"new-file",items:s.value}))},be,8,xe)):e.createCommentVNode("",!0),e.unref(m).includes(e.unref(j).RENAME)?(e.openBlock(),e.createElementBlock("div",{key:2,class:"mx-1.5","aria-label":e.unref(a)("Rename"),"data-microtip-position":"bottom",role:"tooltip",onClick:y[2]||(y[2]=v=>s.value.length!=1||e.unref(o).emit("vf-modal-show",{type:"rename",items:s.value}))},[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",class:e.normalizeClass([s.value.length==1?"cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300":"stroke-gray-200  dark:stroke-gray-700","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},Ne,2))],8,_e)):e.createCommentVNode("",!0),e.unref(m).includes(e.unref(j).DELETE)?(e.openBlock(),e.createElementBlock("div",{key:3,class:"mx-1.5","aria-label":e.unref(a)("Delete"),"data-microtip-position":"bottom",role:"tooltip",onClick:y[3]||(y[3]=v=>!s.value.length||e.unref(o).emit("vf-modal-show",{type:"delete",items:s.value}))},[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",class:e.normalizeClass([s.value.length?"cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300":"stroke-gray-200  dark:stroke-gray-700","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},Be,2))],8,Ve)):e.createCommentVNode("",!0),e.unref(m).includes(e.unref(j).UPLOAD)?(e.openBlock(),e.createElementBlock("div",{key:4,class:"mx-1.5","aria-label":e.unref(a)("Upload"),"data-microtip-position":"bottom",role:"tooltip",onClick:y[4]||(y[4]=v=>e.unref(o).emit("vf-modal-show",{type:"upload",items:s.value}))},De,8,Ce)):e.createCommentVNode("",!0),e.unref(m).includes(e.unref(j).UNARCHIVE)&&s.value.length==1&&s.value[0].mime_type=="application/zip"?(e.openBlock(),e.createElementBlock("div",{key:5,class:"mx-1.5","aria-label":e.unref(a)("Unarchive"),"data-microtip-position":"bottom",role:"tooltip",onClick:y[5]||(y[5]=v=>!s.value.length||e.unref(o).emit("vf-modal-show",{type:"unarchive",items:s.value}))},[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",class:e.normalizeClass([s.value.length?"cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300":"stroke-gray-200  dark:stroke-gray-700","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},Te,2))],8,je)):e.createCommentVNode("",!0),e.unref(m).includes(e.unref(j).ARCHIVE)?(e.openBlock(),e.createElementBlock("div",{key:6,class:"mx-1.5","aria-label":e.unref(a)("Archive"),"data-microtip-position":"bottom",role:"tooltip",onClick:y[6]||(y[6]=v=>!s.value.length||e.unref(o).emit("vf-modal-show",{type:"archive",items:s.value}))},[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",class:e.normalizeClass([s.value.length?"cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300":"stroke-gray-200  dark:stroke-gray-700","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},Fe,2))],8,ze)):e.createCommentVNode("",!0)])),e.createElementVNode("div",Ie,[e.createElementVNode("div",{class:"mx-1.5","aria-label":e.unref(a)("Toggle Full Screen"),"data-microtip-position":"bottom-left",role:"tooltip",onClick:b},[(e.openBlock(),e.createElementBlock("svg",Ge,[c.value?(e.openBlock(),e.createElementBlock("path",Ke)):(e.openBlock(),e.createElementBlock("path",Ye))]))],8,We),e.createElementVNode("div",{class:"mx-1.5","aria-label":e.unref(a)("Change View"),"data-microtip-position":"bottom-left",role:"tooltip",onClick:y[7]||(y[7]=v=>l.value.length||e.unref(o).emit("vf-view-toggle",d.value=="list"?"grid":"list"))},[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",class:e.normalizeClass([l.value.length?"stroke-gray-200  dark:stroke-gray-700":"cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[d.value=="grid"?(e.openBlock(),e.createElementBlock("path",Xe)):e.createCommentVNode("",!0),d.value=="list"?(e.openBlock(),e.createElementBlock("path",Qe)):e.createCommentVNode("",!0)],2))],8,Je)])]))}}),ne=(n,o=null)=>new Date(n*1e3).toLocaleString(o??navigator.language??"en-US"),tt={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},ot=e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1),rt=[ot],nt={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},at=e.createElementVNode("path",{"fill-rule":"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z","clip-rule":"evenodd"},null,-1),lt=[at],st={name:"VFSortIcon"},R=Object.assign(st,{props:{direction:String},setup(n){return(o,r)=>(e.openBlock(),e.createElementBlock("div",null,[n.direction=="down"?(e.openBlock(),e.createElementBlock("svg",tt,rt)):e.createCommentVNode("",!0),n.direction=="up"?(e.openBlock(),e.createElementBlock("svg",nt,lt)):e.createCommentVNode("",!0)]))}}),it=["onClick"],ct={name:"VFToast.vue"},dt=Object.assign(ct,{setup(n){const o=e.inject("emitter"),{getStore:r}=e.inject("storage"),t=e.ref(r("full-screen",!1)),a=m=>m=="error"?"text-red-400 border-red-400 dark:text-red-300 dark:border-red-300":"text-lime-600 border-lime-600 dark:text-lime-300 dark:border-lime-1300",d=e.ref([]),s=m=>{d.value.splice(m,1)},c=m=>{let l=d.value.findIndex(i=>i.id===m);l!==-1&&s(l)};return o.on("vf-toast-clear",()=>{d.value=[]}),o.on("vf-toast-push",m=>{let l=new Date().getTime().toString(36).concat(performance.now().toString(),Math.random().toString()).replace(/\./g,"");m.id=l,d.value.push(m),setTimeout(()=>{c(l)},5e3)}),(m,l)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass([t.value.value?"fixed":"absolute","bottom-0 max-w-fit flex flex-col bottom-0 left-1/2 -translate-x-1/2"])},[e.createVNode(e.TransitionGroup,{name:"vf-toast-item","leave-active-class":"transition-all duration-1000","leave-to-class":"opacity-0"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,(i,u)=>(e.openBlock(),e.createElementBlock("div",{onClick:b=>s(u),key:i,class:e.normalizeClass([a(i.type),"inline-block mx-auto my-0.5 py-0.5 px-2 min-w-max bg-gray-50 dark:bg-gray-600 border text-xs sm:text-sm rounded cursor-pointer"])},e.toDisplayString(i.label),11,it))),128))]),_:1})],2))}});function X(n,o=14){let r=`((?=([\\w\\W]{0,${o}}))([\\w\\W]{8,})([\\w\\W]{8,}))`;return n.replace(new RegExp(r),"$2..$4")}const ut={class:"relative flex-auto flex flex-col overflow-hidden"},mt={key:0,class:"grid grid-cols-12 border-b border-neutral-300 border-gray-200 dark:border-gray-700 text-xs select-none"},pt={class:"absolute"},ft=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"absolute h-6 w-6 md:h-12 md:w-12 m-auto stroke-neutral-500 fill-white dark:fill-gray-700 dark:stroke-gray-600 z-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1),vt={class:"text-neutral-700 dark:text-neutral-300 p-1 absolute text-center top-4 right-[-2rem] md:top-5 md:right-[-2.4rem] z-20 text-xs"},ht=["onDblclick","onContextmenu","data-type","data-item","data-index"],gt={class:"grid grid-cols-12 items-center"},kt={class:"flex col-span-7 items-center"},yt={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},xt=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),wt=[xt],bt={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},_t=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),Et=[_t],Nt={class:"overflow-ellipsis overflow-hidden whitespace-nowrap"},Vt={class:"col-span-5 overflow-ellipsis overflow-hidden whitespace-nowrap"},$t=["onDblclick","onContextmenu","onDragstart","onDragover","onDrop","data-type","data-item","data-index"],Bt={class:"grid grid-cols-12 items-center"},Ct={class:"flex col-span-7 items-center"},St={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Dt=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),jt=[Dt],Mt={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Tt=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),zt=[Tt],Ot={class:"overflow-ellipsis overflow-hidden whitespace-nowrap"},Ft={class:"col-span-2 text-center"},Lt={class:"col-span-3 overflow-ellipsis overflow-hidden whitespace-nowrap"},At=["onDblclick","onContextmenu","onDragstart","onDragover","onDrop","data-type","data-item","data-index"],qt={class:"relative"},Ht={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 md:h-12 md:w-12 m-auto fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Ut=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),Rt=[Ut],Pt=["data-src","alt"],It={key:2,xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 md:h-12 md:w-12 m-auto text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Wt=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),Gt=[Wt],Kt={key:3,class:"absolute hidden md:block top-1/2 w-full text-center text-neutral-500"},Yt={class:"break-all"},Jt={name:"VFExplorer"},Xt=Object.assign(Jt,{props:{view:String,data:Object,search:Object},setup(n){const o=n,r=e.inject("requester"),t=e.inject("emitter"),{setStore:a,getStore:d}=e.inject("storage"),s=e.inject("adapter"),c=p=>p==null?void 0:p.substring(0,3),m=e.ref(null),l=e.ref(null),i=e.ref(0),u=e.ref(null),{t:b}=e.inject("i18n"),k=Math.floor(Math.random()*2**32),y=e.ref(d("full-screen",!1)),v=e.inject("filesize");let N;t.on("vf-fullscreen-toggle",()=>{m.value.style.height=null,y.value=!y.value,a("full-screen",y.value)});const x=e.ref("");t.on("vf-search-query",({newQuery:p})=>{x.value=p,p?t.emit("vf-fetch",{params:{q:"search",adapter:o.data.adapter,path:o.data.dirname,filter:p},onSuccess:h=>{h.files.length||t.emit("vf-toast-push",{label:b("No search result found.")})}}):t.emit("vf-fetch",{params:{q:"index",adapter:o.data.adapter,path:o.data.dirname}})});let B=null;const E=()=>{B&&clearTimeout(B)},V=e.ref(!0),_=p=>{p.touches.length>1&&(V.value?(u.value.stop(),t.emit("vf-toast-push",{label:b("Drag&Drop: off")})):(u.value.start(),t.emit("vf-toast-push",{label:b("Drag&Drop: on")}),t.emit("vf-explorer-update")),V.value=!V.value)},D=p=>{B=setTimeout(()=>{const h=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!1,view:window,button:2,buttons:0,clientX:p.target.getBoundingClientRect().x,clientY:p.target.getBoundingClientRect().y});p.target.dispatchEvent(h)},500)},C=p=>{p.type=="dir"?(t.emit("vf-search-exit"),t.emit("vf-fetch",{params:{q:"index",adapter:o.data.adapter,path:p.path}})):t.emit("vf-modal-show",{type:"preview",adapter:o.data.adapter,item:p})},$=e.reactive({active:!1,column:"",order:""}),O=(p=!0)=>{let h=[...o.data.files],f=$.column,w=$.order=="asc"?1:-1;if(!p)return h;const g=(S,M)=>typeof S=="string"&&typeof M=="string"?S.toLowerCase().localeCompare(M.toLowerCase()):S<M?-1:S>M?1:0;return $.active&&(h=h.slice().sort((S,M)=>g(S[f],M[f])*w)),h},A=p=>{$.active&&$.column==p?($.active=$.order=="asc",$.column=p,$.order="desc"):($.active=!0,$.column=p,$.order="asc")},F=()=>u.value.getSelection().map(p=>JSON.parse(p.dataset.item)),q=(p,h)=>{if(p.altKey||p.ctrlKey||p.metaKey)return p.preventDefault(),!1;p.dataTransfer.setDragImage(l.value,0,15),p.dataTransfer.effectAllowed="all",p.dataTransfer.dropEffect="copy",p.dataTransfer.setData("items",JSON.stringify(F()))},T=(p,h)=>{p.preventDefault();let f=JSON.parse(p.dataTransfer.getData("items"));if(f.find(w=>w.storage!=s.value)){alert("Moving items between different storages is not supported yet.");return}t.emit("vf-modal-show",{type:"move",items:{from:f,to:h}})},U=(p,h)=>{p.preventDefault(),!h||h.type!=="dir"||u.value.getSelection().find(f=>f==p.currentTarget)?(p.dataTransfer.dropEffect="none",p.dataTransfer.effectAllowed="none"):p.dataTransfer.dropEffect="copy"},P=()=>{u.value=new se({area:m.value,keyboardDrag:!1,selectedClass:"vf-explorer-selected",selectorClass:"vf-explorer-selector"}),t.on("vf-explorer-update",()=>e.nextTick(()=>{u.value.clearSelection(),u.value.setSettings({selectables:document.getElementsByClassName("vf-item-"+k)})})),u.value.subscribe("predragstart",({event:p,isDragging:h})=>{if(h)i.value=u.value.getSelection().length,u.value.break();else{const f=p.target.offsetWidth-p.offsetX,w=p.target.offsetHeight-p.offsetY;f<15&&w<15&&(u.value.clearSelection(),u.value.break())}}),u.value.subscribe("predragmove",({isDragging:p})=>{p&&u.value.break()}),u.value.subscribe("callback",({items:p,event:h,isDragging:f})=>{t.emit("vf-nodes-selected",F()),i.value=u.value.getSelection().length})};return e.onMounted(()=>{N=new ie(m.value),P()}),e.onUpdated(()=>{u.value.Area.reset(),u.value.SelectorArea.updatePos(),N.update()}),e.onMounted(()=>{e.watch(()=>o.view,()=>t.emit("vf-explorer-update"))}),e.onBeforeUnmount(()=>{N.destroy()}),(p,h)=>(e.openBlock(),e.createElementBlock("div",ut,[n.view=="list"||x.value.length?(e.openBlock(),e.createElementBlock("div",mt,[e.createElementVNode("div",{onClick:h[0]||(h[0]=f=>A("basename")),class:"col-span-7 py-1 leading-6 hover:bg-neutral-100 bg-neutral-50 dark:bg-gray-800 dark:hover:bg-gray-700/10 flex items-center pl-1"},[e.createTextVNode(e.toDisplayString(e.unref(b)("Name"))+" ",1),e.withDirectives(e.createVNode(R,{direction:$.order=="asc"?"down":"up"},null,8,["direction"]),[[e.vShow,$.active&&$.column=="basename"]])]),x.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,onClick:h[1]||(h[1]=f=>A("file_size")),class:"col-span-2 py-1 leading-6 hover:bg-neutral-100 bg-neutral-50 dark:bg-gray-800 dark:hover:bg-gray-700/10 flex items-center justify-center border-l border-r dark:border-gray-700"},[e.createTextVNode(e.toDisplayString(e.unref(b)("Size"))+" ",1),e.withDirectives(e.createVNode(R,{direction:$.order=="asc"?"down":"up"},null,8,["direction"]),[[e.vShow,$.active&&$.column=="file_size"]])])),x.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:1,onClick:h[2]||(h[2]=f=>A("last_modified")),class:"col-span-3 py-1 leading-6 hover:bg-neutral-100 bg-neutral-50 dark:bg-gray-800 dark:hover:bg-gray-700/10 flex items-center justify-center"},[e.createTextVNode(e.toDisplayString(e.unref(b)("Date"))+" ",1),e.withDirectives(e.createVNode(R,{direction:$.order=="asc"?"down":"up"},null,8,["direction"]),[[e.vShow,$.active&&$.column=="last_modified"]])])),x.value.length?(e.openBlock(),e.createElementBlock("div",{key:2,onClick:h[3]||(h[3]=f=>A("path")),class:"col-span-5 py-1 leading-6 hover:bg-neutral-100 bg-neutral-50 dark:bg-gray-800 dark:hover:bg-gray-700/10 flex items-center justify-center border-l dark:border-gray-700"},[e.createTextVNode(e.toDisplayString(e.unref(b)("Filepath"))+" ",1),e.withDirectives(e.createVNode(R,{direction:$.order=="asc"?"down":"up"},null,8,["direction"]),[[e.vShow,$.active&&$.column=="path"]])])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.createElementVNode("div",pt,[e.createElementVNode("div",{ref_key:"dragImage",ref:l,class:"absolute -z-50 -top-96"},[ft,e.createElementVNode("div",vt,e.toDisplayString(i.value),1)],512)]),e.createElementVNode("div",{onTouchstart:_,onContextmenu:h[10]||(h[10]=e.withModifiers(f=>e.unref(t).emit("vf-contextmenu-show",{event:f,area:m.value,items:F()}),["self","prevent"])),class:e.normalizeClass([y.value?"":"resize-y","h-full w-full text-xs vf-selector-area vf-scrollbar min-h-[150px] overflow-auto p-1 z-0"]),ref_key:"selectorArea",ref:m},[x.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(O(),(f,w)=>(e.openBlock(),e.createElementBlock("div",{onDblclick:g=>C(f),onTouchstart:h[4]||(h[4]=g=>D(g)),onTouchend:h[5]||(h[5]=g=>E()),onContextmenu:e.withModifiers(g=>e.unref(t).emit("vf-contextmenu-show",{event:g,area:m.value,items:F(),target:f}),["prevent"]),class:e.normalizeClass(["vf-item-"+e.unref(k),"grid grid-cols-1 border hover:bg-neutral-50 dark:hover:bg-gray-700 border-transparent my-0.5 w-full select-none"]),"data-type":f.type,"data-item":JSON.stringify(f),"data-index":w},[e.createElementVNode("div",gt,[e.createElementVNode("div",kt,[f.type=="dir"?(e.openBlock(),e.createElementBlock("svg",yt,wt)):(e.openBlock(),e.createElementBlock("svg",bt,Et)),e.createElementVNode("span",Nt,e.toDisplayString(f.basename),1)]),e.createElementVNode("div",Vt,e.toDisplayString(f.path),1)])],42,ht))),256)):e.createCommentVNode("",!0),n.view=="list"&&!x.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(O(),(f,w)=>(e.openBlock(),e.createElementBlock("div",{draggable:"true",onDblclick:g=>C(f),onTouchstart:h[6]||(h[6]=g=>D(g)),onTouchend:h[7]||(h[7]=g=>E()),onContextmenu:e.withModifiers(g=>e.unref(t).emit("vf-contextmenu-show",{event:g,area:m.value,items:F(),target:f}),["prevent"]),onDragstart:g=>q(g),onDragover:g=>U(g,f),onDrop:g=>T(g,f),class:e.normalizeClass(["vf-item-"+e.unref(k),"grid grid-cols-1 border hover:bg-neutral-50 dark:hover:bg-gray-700 border-transparent my-0.5 w-full select-none"]),"data-type":f.type,"data-item":JSON.stringify(f),"data-index":w},[e.createElementVNode("div",Bt,[e.createElementVNode("div",Ct,[f.type=="dir"?(e.openBlock(),e.createElementBlock("svg",St,jt)):(e.openBlock(),e.createElementBlock("svg",Mt,zt)),e.createElementVNode("span",Ot,e.toDisplayString(f.basename),1)]),e.createElementVNode("div",Ft,e.toDisplayString(f.file_size?e.unref(v)(f.file_size):""),1),e.createElementVNode("div",Lt,e.toDisplayString(e.unref(ne)(f.last_modified)),1)])],42,$t))),256)):e.createCommentVNode("",!0),n.view=="grid"&&!x.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:2},e.renderList(O(!1),(f,w)=>(e.openBlock(),e.createElementBlock("div",{draggable:"true",onDblclick:g=>C(f),onTouchstart:h[8]||(h[8]=g=>D(g)),onTouchend:h[9]||(h[9]=g=>E()),onContextmenu:e.withModifiers(g=>e.unref(t).emit("vf-contextmenu-show",{event:g,area:m.value,items:F(),target:f}),["prevent"]),onDragstart:g=>q(g),onDragover:g=>U(g,f),onDrop:g=>T(g,f),class:e.normalizeClass(["vf-item-"+e.unref(k),"border border-transparent hover:bg-neutral-50 m-1 dark:hover:bg-gray-700 inline-flex w-[5.5rem] h-20 md:w-24 text-center justify-center select-none"]),"data-type":f.type,"data-item":JSON.stringify(f),"data-index":w},[e.createElementVNode("div",null,[e.createElementVNode("div",qt,[f.type=="dir"?(e.openBlock(),e.createElementBlock("svg",Ht,Rt)):(f.mime_type??"").startsWith("image")?(e.openBlock(),e.createElementBlock("img",{key:1,class:"lazy h-10 md:h-12 m-auto","data-src":e.unref(r).getPreviewUrl(e.unref(s).value,f),alt:f.basename},null,8,Pt)):(e.openBlock(),e.createElementBlock("svg",It,Gt)),!(f.mime_type??"").startsWith("image")&&f.type!="dir"?(e.openBlock(),e.createElementBlock("div",Kt,e.toDisplayString(c(f.extension)),1)):e.createCommentVNode("",!0)]),e.createElementVNode("span",Yt,e.toDisplayString(e.unref(X)(f.basename)),1)])],42,At))),256)):e.createCommentVNode("",!0)],34),e.createVNode(dt)]))}}),Qt={class:"p-1 text-xs border-t border-neutral-300 dark:border-gray-700/50 flex justify-between select-none"},Zt={class:"flex leading-5 items-center"},eo=["aria-label"],to=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"})],-1),oo=[to],ro=["value"],no={class:"ml-3"},ao={key:0},lo={class:"ml-1"},so={class:"flex leading-5 items-center justify-end"},io=["aria-label"],co=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 stroke-slate-500 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),uo=[co],mo={name:"VFStatusbar"},po=Object.assign(mo,{props:{data:Object},setup(n){const o=e.inject("emitter"),{getStore:r,setStore:t}=e.inject("storage"),a=e.ref(0),d=e.inject("adapter"),{t:s}=e.inject("i18n"),c=()=>{o.emit("vf-search-exit"),o.emit("vf-fetch",{params:{q:"index",adapter:d.value}}),t("adapter",d.value)};o.on("vf-nodes-selected",l=>{a.value=l.length});const m=e.ref("");return o.on("vf-search-query",({newQuery:l})=>{m.value=l}),(l,i)=>(e.openBlock(),e.createElementBlock("div",Qt,[e.createElementVNode("div",Zt,[e.createElementVNode("div",{class:"mx-2","aria-label":e.unref(s)("Storage"),"data-microtip-position":"top-right",role:"tooltip"},oo,8,eo),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":i[0]||(i[0]=u=>e.isRef(d)?d.value=u:null),onChange:c,class:"py-0.5 text-sm text-slate-500 border dark:border-gray-600 dark:text-neutral-50 dark:bg-gray-700 rounded pl-2 pr-8"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.data.storages,u=>(e.openBlock(),e.createElementBlock("option",{value:u},e.toDisplayString(u),9,ro))),256))],544),[[e.vModelSelect,e.unref(d)]]),e.createElementVNode("div",no,[m.value.length?(e.openBlock(),e.createElementBlock("span",ao,e.toDisplayString(n.data.files.length)+" items found. ",1)):e.createCommentVNode("",!0),e.createElementVNode("span",lo,e.toDisplayString(a.value>0?a.value+" "+e.unref(s)("item(s) selected."):""),1)])]),e.createElementVNode("div",so,[e.createElementVNode("span",{class:"mr-1","aria-label":e.unref(s)("About"),"data-microtip-position":"top-left",role:"tooltip",onClick:i[1]||(i[1]=u=>e.unref(o).emit("vf-modal-show",{type:"about"}))},uo,8,io)])]))}}),fo=(n,o=0,r=!1)=>{let t;return(...a)=>{r&&!t&&n(...a),clearTimeout(t),t=setTimeout(()=>{n(...a)},o)}},vo=(n,o,r)=>{const t=e.ref(n);return e.customRef((d,s)=>({get(){return d(),t.value},set:fo(c=>{t.value=c,s()},o,r)}))},ho={class:"flex p-1.5 bg-neutral-100 dark:bg-gray-800 border-t border-b border-neutral-300 dark:border-gray-700/50 items-center select-none text-xs"},go=["aria-label"],ko=e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z","clip-rule":"evenodd"},null,-1),yo=[ko],xo=["aria-label"],wo=e.createElementVNode("path",{d:"M463.5 224H472c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2L413.4 96.6c-87.6-86.5-228.7-86.2-315.8 1c-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8H463.5z"},null,-1),bo=[wo],_o=["aria-label"],Eo=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1),No=[Eo],Vo=e.createElementVNode("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"},null,-1),$o=[Vo],Bo={class:"flex leading-5"},Co=e.createElementVNode("span",{class:"text-neutral-300 dark:text-gray-600 mx-0.5"},"/",-1),So=["title","onClick"],Do={key:0,class:"animate-spin p-1 h-6 w-6 text-white ml-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},jo=e.createElementVNode("circle",{class:"opacity-25 stroke-blue-900 dark:stroke-blue-100",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),Mo=e.createElementVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),To=[jo,Mo],zo={key:3,class:"relative flex bg-white dark:bg-gray-700 justify-between items-center rounded p-1 ml-2 w-full"},Oo=e.createElementVNode("div",null,[e.createElementVNode("svg",{class:"h-6 w-6 p-1 m-auto stroke-gray-400 fill-gray-100 dark:stroke-gray-400 dark:fill-gray-400/20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})])],-1),Fo=["placeholder"],Lo=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1),Ao=[Lo],qo={name:"VFBreadcrumb"},Ho=Object.assign(qo,{props:{data:Object},setup(n){const o=e.inject("emitter"),r=e.inject("adapter"),t=e.ref(null),a=e.ref([]),d=e.ref(!1),s=e.ref(null),c=e.inject("features"),m=n,{t:l}=e.inject("i18n"),i=e.inject("loadingState");o.on("vf-explorer-update",()=>{let E=[],V=[];t.value=m.data.dirname??r.value+"://",t.value.length==0&&(a.value=[]),t.value.replace(r.value+"://","").split("/").forEach(function(_){E.push(_),E.join("/")!=""&&V.push({basename:_,name:_,path:r.value+"://"+E.join("/"),type:"dir"})}),V.length>4&&(V=V.slice(-5),V[0].name=".."),a.value=V});const u=()=>{d.value=!1,k.value=""};o.on("vf-search-exit",()=>{u()});const b=()=>{c.value.includes(j.SEARCH)&&(d.value=!0,e.nextTick(()=>s.value.focus()))},k=vo("",400),y=()=>i.value;e.watch(k,E=>{o.emit("vf-toast-clear"),o.emit("vf-search-query",{newQuery:E})});const v=()=>a.value.length&&!d.value,N=E=>{E.preventDefault();let V=JSON.parse(E.dataTransfer.getData("items"));if(V.find(_=>_.storage!=r.value)){alert("Moving items between different storages is not supported yet.");return}o.emit("vf-modal-show",{type:"move",items:{from:V,to:a.value[a.value.length-2]??{path:r.value+"://"}}})},x=E=>{E.preventDefault(),v()?E.dataTransfer.dropEffect="copy":(E.dataTransfer.dropEffect="none",E.dataTransfer.effectAllowed="none")},B=()=>{k.value==""&&u()};return(E,V)=>(e.openBlock(),e.createElementBlock("div",ho,[e.createElementVNode("span",{"aria-label":e.unref(l)("Go up a directory"),"data-microtip-position":"bottom-right",role:"tooltip"},[(e.openBlock(),e.createElementBlock("svg",{onDragover:V[0]||(V[0]=_=>x(_)),onDrop:V[1]||(V[1]=_=>N(_)),onClick:V[2]||(V[2]=_=>{var D;return!v()||e.unref(o).emit("vf-fetch",{params:{q:"index",adapter:n.data.adapter,path:((D=a.value[a.value.length-2])==null?void 0:D.path)??e.unref(r)+"://"}})}),class:e.normalizeClass(["h-6 w-6 p-0.5 rounded",v()?"text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer":"text-gray-400 dark:text-neutral-500"]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},yo,34))],8,go),y()?(e.openBlock(),e.createElementBlock("span",{key:1,"aria-label":e.unref(l)("Cancel"),"data-microtip-position":"bottom-right",role:"tooltip"},[(e.openBlock(),e.createElementBlock("svg",{onClick:V[4]||(V[4]=_=>e.unref(o).emit("vf-fetch-abort")),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer"},No))],8,_o)):(e.openBlock(),e.createElementBlock("span",{key:0,"aria-label":e.unref(l)("Refresh"),"data-microtip-position":"bottom-right",role:"tooltip"},[(e.openBlock(),e.createElementBlock("svg",{onClick:V[3]||(V[3]=_=>{e.unref(o).emit("vf-fetch",{params:{q:"index",adapter:n.data.adapter,path:n.data.dirname}})}),class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer",xmlns:"http://www.w3.org/2000/svg",viewBox:"-40 -40 580 580",fill:"currentColor"},bo))],8,xo)),d.value?(e.openBlock(),e.createElementBlock("div",zo,[Oo,e.withDirectives(e.createElementVNode("input",{ref_key:"searchInput",ref:s,onKeydown:e.withKeys(u,["esc"]),onBlur:B,"onUpdate:modelValue":V[6]||(V[6]=_=>e.isRef(k)?k.value=_:null),placeholder:e.unref(l)("Search anything.."),class:"w-full pt-1 pb-0 px-2 border-0 text-sm ring-0 outline-0 text-gray-600 focus:ring-transparent focus:border-transparent dark:focus:ring-transparent dark:focus:border-transparent dark:text-gray-300 bg-transparent",type:"text"},null,40,Fo),[[e.vModelText,e.unref(k)]]),(e.openBlock(),e.createElementBlock("svg",{class:"w-6 h-6 cursor-pointer",onClick:u,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Ao))])):(e.openBlock(),e.createElementBlock("div",{key:2,class:"group flex bg-white dark:bg-gray-700 items-center rounded p-1 ml-2 w-full",onClick:e.withModifiers(b,["self"])},[(e.openBlock(),e.createElementBlock("svg",{onClick:V[5]||(V[5]=_=>e.unref(o).emit("vf-fetch",{params:{q:"index",adapter:n.data.adapter}})),class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-gray-800 cursor-pointer",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},$o)),e.createElementVNode("div",Bo,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,(_,D)=>(e.openBlock(),e.createElementBlock("div",{key:D},[Co,e.createElementVNode("span",{class:"px-1.5 py-1 text-slate-700 dark:text-slate-200 hover:bg-neutral-100 dark:hover:bg-gray-800 rounded cursor-pointer",title:_.basename,onClick:C=>e.unref(o).emit("vf-fetch",{params:{q:"index",adapter:n.data.adapter,path:_.path}})},e.toDisplayString(_.name),9,So)]))),128))]),y()?(e.openBlock(),e.createElementBlock("svg",Do,To)):e.createCommentVNode("",!0)]))]))}}),Uo=["onClick"],Ro=e.createElementVNode("span",{class:"px-1"},null,-1),Po={name:"VFContextMenu"},Io=Object.assign(Po,{props:{current:Object},setup(n){const o=e.inject("emitter"),r=e.ref(null),t=e.inject("root"),a=e.inject("requester"),d=e.inject("features"),s=n,c=e.reactive({active:!1,items:[],positions:{left:0,top:0}}),m=e.computed(()=>c.items.filter(v=>v.key==null||d.value.includes(v.key))),l=e.ref([]);o.on("vf-context-selected",v=>{l.value=v});const{t:i}=e.inject("i18n"),u={newfolder:{key:j.NEW_FOLDER,title:()=>i("New Folder"),action:()=>{o.emit("vf-modal-show",{type:"new-folder"})}},delete:{key:j.DELETE,title:()=>i("Delete"),action:()=>{o.emit("vf-modal-show",{type:"delete",items:l})}},refresh:{title:()=>i("Refresh"),action:()=>{o.emit("vf-fetch",{params:{q:"index",adapter:s.current.adapter,path:s.current.dirname}})}},preview:{key:j.PREVIEW,title:()=>i("Preview"),action:()=>{o.emit("vf-modal-show",{type:"preview",adapter:s.current.adapter,item:l.value[0]})}},open:{title:()=>i("Open"),action:()=>{o.emit("vf-search-exit"),o.emit("vf-fetch",{params:{q:"index",adapter:s.current.adapter,path:l.value[0].path}})}},openDir:{title:()=>i("Open containing folder"),action:()=>{o.emit("vf-search-exit"),o.emit("vf-fetch",{params:{q:"index",adapter:s.current.adapter,path:l.value[0].dir}})}},download:{key:j.DOWNLOAD,title:()=>i("Download"),action:()=>{const v=a.getDownloadUrl(s.current.adapter,l.value[0]);o.emit("vf-download",v)}},archive:{key:j.ARCHIVE,title:()=>i("Archive"),action:()=>{o.emit("vf-modal-show",{type:"archive",items:l})}},unarchive:{key:j.UNARCHIVE,title:()=>i("Unarchive"),action:()=>{o.emit("vf-modal-show",{type:"unarchive",items:l})}},rename:{key:j.RENAME,title:()=>i("Rename"),action:()=>{o.emit("vf-modal-show",{type:"rename",items:l})}}},b=v=>{o.emit("vf-contextmenu-hide"),v.action()},k=e.ref("");o.on("vf-search-query",({newQuery:v})=>{k.value=v}),o.on("vf-contextmenu-show",({event:v,area:N,items:x,target:B=null})=>{if(c.items=[],k.value)if(B)c.items.push(u.openDir),o.emit("vf-context-selected",[B]);else return;else!B&&!k.value?(c.items.push(u.refresh),c.items.push(u.newfolder),o.emit("vf-context-selected",[])):x.length>1&&x.some(E=>E.path===B.path)?(c.items.push(u.refresh),c.items.push(u.archive),c.items.push(u.delete),o.emit("vf-context-selected",x)):(B.type=="dir"?c.items.push(u.open):(c.items.push(u.preview),c.items.push(u.download)),c.items.push(u.rename),B.mime_type=="application/zip"?c.items.push(u.unarchive):c.items.push(u.archive),c.items.push(u.delete),o.emit("vf-context-selected",[B]));y(v,N)}),o.on("vf-contextmenu-hide",()=>{c.active=!1});const y=(v,N)=>{c.active=!0,e.nextTick(()=>{const x=t.value.getBoundingClientRect(),B=N.getBoundingClientRect();let E=v.pageX-x.left,V=v.pageY-x.top,_=r.value.offsetHeight,D=r.value.offsetWidth;E=B.right-v.pageX+window.scrollX<D?E-D:E,V=B.bottom-v.pageY+window.scrollY<_?V-_:V,c.positions={left:E+"px",top:V+"px"}})};return(v,N)=>c.active?(e.openBlock(),e.createElementBlock("ul",{key:0,class:"z-30 absolute text-xs bg-neutral-50 dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-neutral-300 dark:border-gray-600 shadow rounded select-none",ref_key:"contextmenu",ref:r,style:e.normalizeStyle(c.positions)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.value,x=>(e.openBlock(),e.createElementBlock("li",{class:"px-2 py-1.5 cursor-pointer hover:bg-neutral-200 dark:hover:bg-gray-700",key:x.title,onClick:B=>b(x)},[Ro,e.createElementVNode("span",null,e.toDisplayString(x.title()),1)],8,Uo))),128))],4)):e.createCommentVNode("",!0)}}),Wo=(n,o)=>{const r=n[o];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((t,a)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+o)))})};async function Go(n){return(await Wo(Object.assign({"../locales/de.js":()=>Promise.resolve().then(()=>require("./de-e4938207.cjs")),"../locales/en.js":()=>Promise.resolve().then(()=>require("./en-39d37375.cjs")),"../locales/fa.js":()=>Promise.resolve().then(()=>require("./fa-64c35e1a.cjs")),"../locales/fr.js":()=>Promise.resolve().then(()=>require("./fr-c1251c6e.cjs")),"../locales/he.js":()=>Promise.resolve().then(()=>require("./he-6b2ea6a2.cjs")),"../locales/hi.js":()=>Promise.resolve().then(()=>require("./hi-7d3118ac.cjs")),"../locales/ru.js":()=>Promise.resolve().then(()=>require("./ru-f208af8a.cjs")),"../locales/sv.js":()=>Promise.resolve().then(()=>require("./sv-acbe2c28.cjs")),"../locales/tr.js":()=>Promise.resolve().then(()=>require("./tr-2fed3777.cjs")),"../locales/zhCN.js":()=>Promise.resolve().then(()=>require("./zhCN-44a2ca81.cjs")),"../locales/zhTW.js":()=>Promise.resolve().then(()=>require("./zhTW-73ae00d7.cjs"))}),`../locales/${n}.js`)).default}function Ko(n,o,r){const{getStore:t,setStore:a}=J(n),d=e.ref({}),s=e.ref(t("locale",o)),c=(i,u="en")=>{Go(i).then(b=>{d.value=b,a("locale",i),s.value=i,a("translations",b),r.emit("vf-toast-push",{label:"The language is set to "+i}),r.emit("vf-language-saved")}).catch(b=>{u?(r.emit("vf-toast-push",{label:"The selected locale is not yet supported!",type:"error"}),c(u,null)):r.emit("vf-toast-push",{label:"Locale cannot be loaded!",type:"error"})})};t("locale")?d.value=t("translations"):c(o);const m=(i,...u)=>u.length?m(i=i.replace("%s",u.shift()),...u):i;function l(i,...u){return d.value.hasOwnProperty(i)?m(d.value[i],...u):m(i,...u)}return{t:l,changeLocale:c,locale:s}}function te(n,o,r,t,a){return(o=Math,r=o.log,t=1024,a=r(n)/r(t)|0,n/o.pow(t,a)).toFixed(0)+" "+(a?"KMGTPEZY"[--a]+"iB":"B")}function oe(n,o,r,t,a){return(o=Math,r=o.log,t=1e3,a=r(n)/r(t)|0,n/o.pow(t,a)).toFixed(0)+" "+(a?"KMGTPEZY"[--a]+"B":"B")}function Yo(n){const o={k:1,m:2,g:3,t:4},t=/(\d+(?:\.\d+)?)\s?(k|m|g|t)?b?/i.exec(n);return t[1]*Math.pow(1024,o[t[2].toLowerCase()])}const Jo={name:"VueFinder"},Xo=Object.assign(Jo,{props:{request:{type:[String,Object],required:!0},features:{type:[Array,Boolean],default:!0},debug:{type:Boolean,default:!1},id:{type:String,default:"vf"},dark:{type:Boolean,default:!1},usePropDarkMode:{type:Boolean,default:!1},locale:{type:String,default:"en"},maxHeight:{type:String,default:"600px"},maxFileSize:{type:String,default:"10mb"}},emits:["select"],setup(n,{emit:o}){const r=n,t=le(),{setStore:a,getStore:d}=J(r.id),s=e.ref(d("adapter")),c=o,m=e.ref(null);e.provide("root",m),e.provide("emitter",t),e.provide("storage",J(r.id)),e.provide("adapter",s),e.provide("maxFileSize",r.maxFileSize),e.provide("usePropDarkMode",r.usePropDarkMode),e.provide("debug",r.debug);const l=pe(r.request);e.provide("requester",l);const i=e.ref([]);Array.isArray(r.features)?i.value.push(...r.features):r.features===!0&&i.value.push(...fe),e.provide("features",i);const u=Ko(r.id,r.locale,t);e.provide("i18n",u);const b=e.reactive({adapter:s.value,storages:[],dirname:".",files:[]}),k=e.ref(d("viewport","grid")),y=r.usePropDarkMode?e.computed(()=>r.dark):e.ref(d("darkMode",r.dark));e.provide("darkMode",y),t.on("vf-darkMode-toggle",()=>{y.value=!y.value,a("darkMode",y.value)});const v=e.ref(d("metricUnits",!1));e.provide("metricUnits",v);const N=e.ref(v.value?oe:te);e.watch(v,C=>{N.value=C?oe:te}),e.provide("filesize",N),t.on("vf-metric-units-saved",C=>{v.value=C,a("metricUnits",C)});const x=e.ref(!1);e.provide("loadingState",x);const B=e.ref(d("full-screen",!1));t.on("vf-fullscreen-toggle",()=>{B.value=!B.value,a("full-screen",B.value)}),t.on("vf-view-toggle",C=>{k.value=C});const E=e.reactive({active:!1,type:"delete",data:{}});t.on("vf-modal-close",()=>{E.active=!1}),t.on("vf-modal-show",C=>{E.active=!0,E.type=C.type,E.data=C});const V=C=>{Object.assign(b,C),t.emit("vf-nodes-selected",{}),t.emit("vf-explorer-update")};t.on("vf-nodes-selected",C=>{c("select",C)});let _;t.on("vf-fetch-abort",()=>{_.abort(),x.value=!1}),t.on("vf-fetch",({params:C,body:$=null,onSuccess:O=null,onError:A=null,noCloseModal:F=!1})=>{["index","search"].includes(C.q)&&(_&&_.abort(),x.value=!0),_=new AbortController;const q=_.signal;l.send({url:"",method:C.m||"get",params:C,body:$,abortSignal:q}).then(T=>{s.value=T.adapter,["index","search"].includes(C.q)&&(x.value=!1),F||t.emit("vf-modal-close"),V(T),O&&O(T)}).catch(T=>{console.error(T),A&&A(T)})});const D=e.ref(null);return t.on("vf-download",C=>{D.value.src=C,t.emit("vf-modal-close")}),e.onMounted(()=>{t.emit("vf-fetch",{params:{q:"index",adapter:s.value}})}),(C,$)=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder",ref_key:"root",ref:m},[e.createElementVNode("div",{class:e.normalizeClass(e.unref(y)?"dark":"")},[e.createElementVNode("div",{class:e.normalizeClass([B.value?"fixed w-screen inset-0 z-20":"relative rounded-md","border flex flex-col bg-white dark:bg-gray-800 text-gray-700 dark:text-neutral-400 border-neutral-300 dark:border-gray-900 min-w-min select-none"]),style:e.normalizeStyle(B.value?"":"max-height: "+n.maxHeight),onMousedown:$[0]||($[0]=O=>e.unref(t).emit("vf-contextmenu-hide")),onTouchstart:$[1]||($[1]=O=>e.unref(t).emit("vf-contextmenu-hide"))},[e.createVNode(et,{data:b},null,8,["data"]),e.createVNode(Ho,{data:b},null,8,["data"]),e.createVNode(Xt,{view:k.value,data:b},null,8,["view","data"]),e.createVNode(po,{data:b},null,8,["data"])],38),e.createVNode(e.Transition,{name:"fade"},{default:e.withCtx(()=>[E.active?(e.openBlock(),e.createBlock(e.resolveDynamicComponent("v-f-modal-"+E.type),{key:0,selection:E.data,current:b},null,8,["selection","current"])):e.createCommentVNode("",!0)]),_:1}),e.createVNode(Io,{current:b},null,8,["current"]),e.createElementVNode("iframe",{ref_key:"downloadFrame",ref:D,style:{display:"none"}},null,512)],2)],512))}}),Qo=e.createElementVNode("div",{class:"fixed inset-0 bg-gray-500 dark:bg-gray-600 dark:bg-opacity-75 bg-opacity-75 transition-opacity"},null,-1),Zo={class:"fixed z-10 inset-0 overflow-hidden"},er={class:"relative bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:max-w-4xl md:max-w-2xl lg:max-w-3xl xl:max-w-5xl w-full"},tr={class:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},or={class:"bg-gray-50 dark:bg-gray-800 dark:border-t dark:border-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},z={__name:"ModalLayout",setup(n){const o=e.inject("emitter");return e.onMounted(()=>{const r=document.querySelector(".v-f-modal input");r&&r.focus()}),(r,t)=>(e.openBlock(),e.createElementBlock("div",{class:"v-f-modal relative z-30","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",onKeyup:t[1]||(t[1]=e.withKeys(a=>e.unref(o).emit("vf-modal-close"),["esc"])),tabindex:"0"},[Qo,e.createElementVNode("div",Zo,[e.createElementVNode("div",{class:"flex items-end sm:items-center justify-center min-h-full p-4 text-center sm:p-0",onMousedown:t[0]||(t[0]=e.withModifiers(a=>e.unref(o).emit("vf-modal-close"),["self"]))},[e.createElementVNode("div",er,[e.createElementVNode("div",tr,[e.renderSlot(r.$slots,"default")]),e.createElementVNode("div",or,[e.renderSlot(r.$slots,"buttons")])])],32)])],32))}},rr=["aria-label"],nr=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),ar=[nr],lr={name:"Message"},L=Object.assign(lr,{props:{error:{type:Boolean,default:!1}},emits:["hidden"],setup(n,{emit:o}){var m;const{t:r}=e.inject("i18n"),t=e.ref(!1),a=e.ref(null),d=e.ref((m=a.value)==null?void 0:m.strMessage),s=o;e.watch(d,()=>t.value=!1);const c=()=>{s("hidden"),t.value=!0};return(l,i)=>(e.openBlock(),e.createElementBlock("div",null,[t.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"strMessage",ref:a,class:e.normalizeClass(["flex mt-2 p-1 px-2 rounded text-sm break-all dark:opacity-75",n.error?"bg-red-100 text-red-600 ":"bg-emerald-100 text-emerald-600"])},[e.renderSlot(l.$slots,"default"),e.createElementVNode("div",{class:"ml-auto cursor-pointer",onClick:c,"aria-label":e.unref(r)("Close"),"data-microtip-position":"top-left",role:"tooltip"},ar,8,rr)],2))]))}}),sr={class:"sm:flex sm:items-start"},ir=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-red-600 dark:stroke-red-200",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})])],-1),cr={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},dr={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},ur={class:"mt-2"},mr={class:"text-sm text-gray-500"},pr={class:"text-gray-500 text-sm mb-1 overflow-auto vf-scrollbar",style:{"max-height":"200px"}},fr={class:"flex text-sm text-gray-800 dark:text-gray-400"},vr={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},hr=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),gr=[hr],kr={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},yr=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),xr=[yr],wr={class:"ml-1.5"},br={class:"m-auto font-bold text-red-500 text-sm dark:text-red-200 text-center"},_r={name:"VFModalDelete"},Er=Object.assign(_r,{props:{selection:Object,current:Object},setup(n){const o=e.inject("emitter");e.inject("storage");const r=e.inject("adapter"),{t}=e.inject("i18n"),a=n,d=e.ref(a.selection.items),s=e.ref(""),c=()=>{d.value.length&&o.emit("vf-fetch",{params:{q:"delete",m:"post",adapter:r.value,path:a.current.dirname},body:{items:d.value.map(({path:m,type:l})=>({path:m,type:l}))},onSuccess:()=>{o.emit("vf-toast-push",{label:t("Files deleted.")})},onError:m=>{s.value=t(m.message)}})};return(m,l)=>(e.openBlock(),e.createBlock(z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:c,class:"vf-btn vf-btn-danger"},e.toDisplayString(e.unref(t)("Yes, Delete!")),1),e.createElementVNode("button",{type:"button",onClick:l[1]||(l[1]=i=>e.unref(o).emit("vf-modal-close")),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(t)("Cancel")),1),e.createElementVNode("div",br,e.toDisplayString(e.unref(t)("This action cannot be undone.")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",sr,[ir,e.createElementVNode("div",cr,[e.createElementVNode("h3",dr,e.toDisplayString(e.unref(t)("Delete files")),1),e.createElementVNode("div",ur,[e.createElementVNode("p",mr,e.toDisplayString(e.unref(t)("Are you sure you want to delete these files?")),1),e.createElementVNode("div",pr,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,i=>(e.openBlock(),e.createElementBlock("p",fr,[i.type==="dir"?(e.openBlock(),e.createElementBlock("svg",vr,gr)):(e.openBlock(),e.createElementBlock("svg",kr,xr)),e.createElementVNode("span",wr,e.toDisplayString(i.basename),1)]))),256))]),s.value.length?(e.openBlock(),e.createBlock(L,{key:0,onHidden:l[0]||(l[0]=i=>s.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(s.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),Nr={class:"sm:flex sm:items-start"},Vr=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1),$r={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Br={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Cr={class:"mt-2"},Sr={class:"text-sm text-gray-500"},Dr={name:"VFModalMessage"},jr=Object.assign(Dr,{props:{selection:Object},setup(n){const o=e.inject("emitter"),{t:r}=e.inject("i18n");return(t,a)=>(e.openBlock(),e.createBlock(z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:a[0]||(a[0]=d=>e.unref(o).emit("vf-modal-close")),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(r)("Close")),1)]),default:e.withCtx(()=>{var d,s;return[e.createElementVNode("div",Nr,[Vr,e.createElementVNode("div",$r,[e.createElementVNode("h3",Br,e.toDisplayString(((d=n.selection)==null?void 0:d.title)??"Title"),1),e.createElementVNode("div",Cr,[e.createElementVNode("p",Sr,e.toDisplayString(((s=n.selection)==null?void 0:s.message)??"Message"),1)])])])]}),_:1}))}}),Mr={class:"sm:flex sm:items-start"},Tr=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})])],-1),zr={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Or={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Fr={class:"mt-2"},Lr={class:"text-sm text-gray-500"},Ar=["placeholder"],qr={name:"VFModalNewFolder"},Hr=Object.assign(qr,{props:{selection:Object,current:Object},setup(n){const o=e.inject("emitter");e.inject("storage");const r=e.inject("adapter"),{t}=e.inject("i18n"),a=n,d=e.ref(""),s=e.ref(""),c=()=>{d.value!=""&&o.emit("vf-fetch",{params:{q:"newfolder",m:"post",adapter:r.value,path:a.current.dirname},body:{name:d.value},onSuccess:()=>{o.emit("vf-toast-push",{label:t("%s is created.",d.value)})},onError:m=>{s.value=t(m.message)}})};return(m,l)=>(e.openBlock(),e.createBlock(z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:c,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(t)("Create")),1),e.createElementVNode("button",{type:"button",onClick:l[2]||(l[2]=i=>e.unref(o).emit("vf-modal-close")),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(t)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",Mr,[Tr,e.createElementVNode("div",zr,[e.createElementVNode("h3",Or,e.toDisplayString(e.unref(t)("New Folder")),1),e.createElementVNode("div",Fr,[e.createElementVNode("p",Lr,e.toDisplayString(e.unref(t)("Create a new folder")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":l[0]||(l[0]=i=>d.value=i),onKeyup:e.withKeys(c,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-700/25 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:e.unref(t)("Folder Name"),type:"text"},null,40,Ar),[[e.vModelText,d.value]]),s.value.length?(e.openBlock(),e.createBlock(L,{key:0,onHidden:l[1]||(l[1]=i=>s.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(s.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),Ur={class:"sm:flex sm:items-start"},Rr=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1),Pr={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Ir={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Wr={class:"mt-2"},Gr={class:"text-sm text-gray-500"},Kr=["placeholder"],Yr={name:"VFModalNewFile"},Jr=Object.assign(Yr,{props:{selection:Object,current:Object},setup(n){const o=e.inject("emitter");e.inject("storage");const r=e.inject("adapter"),{t}=e.inject("i18n"),a=n,d=e.ref(""),s=e.ref(""),c=()=>{d.value!=""&&o.emit("vf-fetch",{params:{q:"newfile",m:"post",adapter:r.value,path:a.current.dirname},body:{name:d.value},onSuccess:()=>{o.emit("vf-toast-push",{label:t("%s is created.",d.value)})},onError:m=>{s.value=t(m.message)}})};return(m,l)=>(e.openBlock(),e.createBlock(z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:c,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(t)("Create")),1),e.createElementVNode("button",{type:"button",onClick:l[2]||(l[2]=i=>e.unref(o).emit("vf-modal-close")),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(t)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",Ur,[Rr,e.createElementVNode("div",Pr,[e.createElementVNode("h3",Ir,e.toDisplayString(e.unref(t)("New File")),1),e.createElementVNode("div",Wr,[e.createElementVNode("p",Gr,e.toDisplayString(e.unref(t)("Create a new file")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":l[0]||(l[0]=i=>d.value=i),onKeyup:e.withKeys(c,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-700/25 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:e.unref(t)("File Name"),type:"text"},null,40,Kr),[[e.vModelText,d.value]]),s.value.length?(e.openBlock(),e.createBlock(L,{key:0,onHidden:l[1]||(l[1]=i=>s.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(s.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),Xr={class:"flex"},Qr=["aria-label"],Zr={class:"ml-auto mb-2"},en={key:0,class:"p-2 border font-normal whitespace-pre-wrap border-gray-200 dark:border-gray-700/50 dark:text-gray-200 rounded min-h-[200px] max-h-[60vh] text-xs overflow-auto"},tn={key:1},on={__name:"Text",props:{selection:Object},emits:["load"],setup(n,{emit:o}){const r=o,t=e.ref(""),a=e.ref(""),d=e.ref(null),s=e.ref(!1),c=n,m=e.ref(""),l=e.ref(!1),i=e.inject("requester"),u=e.inject("features"),{t:b}=e.inject("i18n");e.onMounted(()=>{i.send({url:"",method:"get",params:{q:"preview",adapter:c.selection.adapter,path:c.selection.item.path},responseType:"text"}).then(v=>{t.value=v,r("load")})});const k=()=>{s.value=!s.value,a.value=t.value,s.value==!0&&e.nextTick(()=>{d.value.focus()})},y=()=>{m.value="",l.value=!1,i.send({url:"",method:"post",params:{q:"save",adapter:c.selection.adapter,path:c.selection.item.path},body:{content:a.value},responseType:"text"}).then(v=>{m.value=b("Updated."),t.value=v,r("load"),s.value=!s.value}).catch(v=>{m.value=b(v.message),l.value=!0})};return(v,N)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",Xr,[e.createElementVNode("div",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":n.selection.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(n.selection.item.basename),9,Qr),e.createElementVNode("div",Zr,[s.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:y,class:"ml-1 px-2 py-1 rounded border border-transparent shadow-sm bg-blue-700/75 hover:bg-blue-700 dark:bg-gray-700 dark:hover:bg-gray-700/50 text-base font-medium text-white sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(b)("Save")),1)):e.createCommentVNode("",!0),e.unref(u).includes(e.unref(j).EDIT)?(e.openBlock(),e.createElementBlock("button",{key:1,class:"ml-1 px-2 py-1 text-blue-500",onClick:N[0]||(N[0]=x=>k())},e.toDisplayString(s.value?e.unref(b)("Cancel"):e.unref(b)("Edit")),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("div",null,[s.value?(e.openBlock(),e.createElementBlock("div",tn,[e.withDirectives(e.createElementVNode("textarea",{ref_key:"editInput",ref:d,"onUpdate:modelValue":N[1]||(N[1]=x=>a.value=x),class:"w-full p-2 rounded dark:bg-gray-700 dark:text-gray-200 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:selection:bg-gray-500 min-h-[200px] max-h-[60vh] text-xs",name:"text",id:"",cols:"30",rows:"10"},null,512),[[e.vModelText,a.value]])])):(e.openBlock(),e.createElementBlock("pre",en,e.toDisplayString(t.value),1)),m.value.length?(e.openBlock(),e.createBlock(L,{key:2,onHidden:N[2]||(N[2]=x=>m.value=""),error:l.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(m.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)])],64))}},rn={class:"flex"},nn=["aria-label"],an={class:"ml-auto mb-2"},ln={class:"w-full flex justify-center"},sn=["src"],cn={__name:"Image",props:{selection:Object},emits:["load"],setup(n,{emit:o}){const r=o,t=n,{t:a}=e.inject("i18n"),d=e.inject("requester"),s=e.inject("features"),c=e.ref(null),m=e.ref(null),l=e.ref(!1),i=e.ref(""),u=e.ref(!1),b=()=>{l.value=!l.value,l.value?m.value=new ce(c.value,{crop(y){}}):m.value.destroy()},k=()=>{m.value.getCroppedCanvas({width:795,height:341}).toBlob(y=>{i.value="",u.value=!1;const v=new FormData;v.set("file",y),d.send({url:"",method:"post",params:{q:"upload",adapter:t.selection.adapter,path:t.selection.item.path},body:v}).then(N=>{i.value=a("Updated."),c.value.src=d.getPreviewUrl(t.selection.adapter,t.selection.item),b(),r("load")}).catch(N=>{i.value=a(N.message),u.value=!0})})};return e.onMounted(()=>{r("load")}),(y,v)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",rn,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":n.selection.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(n.selection.item.basename),9,nn),e.createElementVNode("div",an,[l.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:k,class:"ml-1 px-2 py-1 rounded border border-transparent shadow-sm bg-blue-700/75 hover:bg-blue-700 dark:bg-gray-700 dark:hover:bg-gray-700/50 text-base font-medium text-white sm:ml-3 sm:w-auto sm:text-sm"},e.toDisplayString(e.unref(a)("Crop")),1)):e.createCommentVNode("",!0),e.unref(s).includes(e.unref(j).EDIT)?(e.openBlock(),e.createElementBlock("button",{key:1,class:"ml-1 px-2 py-1 text-blue-500",onClick:v[0]||(v[0]=N=>b())},e.toDisplayString(l.value?e.unref(a)("Cancel"):e.unref(a)("Edit")),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("div",ln,[e.createElementVNode("img",{ref_key:"image",ref:c,class:"max-w-[50vh] max-h-[50vh]",src:e.unref(d).getPreviewUrl(t.selection.adapter,t.selection.item),alt:""},null,8,sn)]),i.value.length?(e.openBlock(),e.createBlock(L,{key:0,onHidden:v[1]||(v[1]=N=>i.value=""),error:u.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)],64))}},dn={class:"flex"},un=["aria-label"],mn=e.createElementVNode("div",null,null,-1),pn={__name:"Default",props:{selection:Object},emits:["load"],setup(n,{emit:o}){const r=o;return e.onMounted(()=>{r("load")}),(t,a)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",dn,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":n.selection.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(n.selection.item.basename),9,un)]),mn],64))}},fn=["aria-label"],vn={class:"w-full",preload:"",controls:""},hn=["src"],gn={__name:"Video",props:{selection:Object},emits:["load"],setup(n,{emit:o}){const r=n,t=o,a=e.inject("requester"),d=()=>a.getPreviewUrl(r.selection.adapter,r.selection.item);return e.onMounted(()=>{t("load")}),(s,c)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":n.selection.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(n.selection.item.basename),9,fn),e.createElementVNode("div",null,[e.createElementVNode("video",vn,[e.createElementVNode("source",{src:d(),type:"video/mp4"},null,8,hn),e.createTextVNode(" Your browser does not support the video tag. ")])])],64))}},kn=["aria-label"],yn={class:"w-full",controls:""},xn=["src"],wn={__name:"Audio",props:{selection:Object},emits:["load"],setup(n,{emit:o}){const r=n,t=e.inject("requester"),a=o,d=()=>t.getPreviewUrl(r.selection.adapter,r.selection.item);return e.onMounted(()=>{a("load")}),(s,c)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":n.selection.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(n.selection.item.basename),9,kn),e.createElementVNode("div",null,[e.createElementVNode("audio",yn,[e.createElementVNode("source",{src:d(),type:"audio/mpeg"},null,8,xn),e.createTextVNode(" Your browser does not support the audio element. ")])])],64))}},bn=["aria-label"],_n=["data"],En=["src"],Nn=e.createElementVNode("p",null,[e.createTextVNode(" Your browser does not support PDFs. "),e.createElementVNode("a",{href:"https://example.com/test.pdf"},"Download the PDF"),e.createTextVNode(" . ")],-1),Vn=[Nn],$n={__name:"Pdf",props:{selection:Object},emits:["load"],setup(n,{emit:o}){const r=n,t=o,a=e.inject("requester"),d=()=>a.getPreviewUrl(r.selection.adapter,r.selection.item);return e.onMounted(()=>{t("load")}),(s,c)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":n.selection.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},e.toDisplayString(n.selection.item.basename),9,bn),e.createElementVNode("div",null,[e.createElementVNode("object",{class:"h-[60vh]",data:d(),type:"application/pdf",width:"100%",height:"100%"},[e.createElementVNode("iframe",{class:"border-0",src:d(),width:"100%",height:"100%"},Vn,8,En)],8,_n)])],64))}},Bn={class:"sm:flex sm:items-start"},Cn={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},Sn={key:0},Dn={class:"text-gray-700 dark:text-gray-200 text-sm"},jn={key:0,class:"flex leading-5"},Mn=e.createElementVNode("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e.createElementVNode("circle",{class:"opacity-25 stroke-blue-900 dark:stroke-blue-100",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e.createElementVNode("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),Tn={class:"py-2 flex font-normal break-all dark:text-gray-200 rounded text-xs"},zn={class:"font-bold pl-2"},On={class:"font-bold pl-2"},Fn={name:"VFModalPreview"},Ln=Object.assign(Fn,{props:{selection:Object},setup(n){const o=e.inject("emitter"),{t:r}=e.inject("i18n"),t=e.ref(!1),a=e.inject("filesize"),d=e.inject("requester"),s=e.inject("features"),c=b=>t.value=b,m=n,l=b=>(m.selection.item.mime_type??"").startsWith(b),i=()=>{const b=d.getDownloadUrl(m.selection.adapter,m.selection.item);o.emit("vf-download",b)},u=s.value.includes(j.PREVIEW);return u||c(!0),(b,k)=>(e.openBlock(),e.createBlock(z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:k[6]||(k[6]=y=>e.unref(o).emit("vf-modal-close")),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(r)("Close")),1),e.unref(s).includes(e.unref(j).DOWNLOAD)?(e.openBlock(),e.createElementBlock("button",{key:0,type:"button",onClick:k[7]||(k[7]=y=>i()),class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(r)("Download")),1)):e.createCommentVNode("",!0)]),default:e.withCtx(()=>[e.createElementVNode("div",Bn,[e.createElementVNode("div",Cn,[e.unref(u)?(e.openBlock(),e.createElementBlock("div",Sn,[l("text")?(e.openBlock(),e.createBlock(on,{key:0,selection:n.selection,onLoad:k[0]||(k[0]=y=>c(!0))},null,8,["selection"])):l("image")?(e.openBlock(),e.createBlock(cn,{key:1,selection:n.selection,onLoad:k[1]||(k[1]=y=>c(!0))},null,8,["selection"])):l("video")?(e.openBlock(),e.createBlock(gn,{key:2,selection:n.selection,onLoad:k[2]||(k[2]=y=>c(!0))},null,8,["selection"])):l("audio")?(e.openBlock(),e.createBlock(wn,{key:3,selection:n.selection,onLoad:k[3]||(k[3]=y=>c(!0))},null,8,["selection"])):l("application/pdf")?(e.openBlock(),e.createBlock($n,{key:4,selection:n.selection,onLoad:k[4]||(k[4]=y=>c(!0))},null,8,["selection"])):(e.openBlock(),e.createBlock(pn,{key:5,selection:n.selection,onLoad:k[5]||(k[5]=y=>c(!0))},null,8,["selection"]))])):e.createCommentVNode("",!0),e.createElementVNode("div",Dn,[t.value==!1?(e.openBlock(),e.createElementBlock("div",jn,[Mn,e.createElementVNode("span",null,e.toDisplayString(e.unref(r)("Loading")),1)])):e.createCommentVNode("",!0)])])]),e.createElementVNode("div",Tn,[e.createElementVNode("div",null,[e.createElementVNode("span",zn,e.toDisplayString(e.unref(r)("File Size"))+": ",1),e.createTextVNode(e.toDisplayString(e.unref(a)(n.selection.item.file_size)),1)]),e.createElementVNode("div",null,[e.createElementVNode("span",On,e.toDisplayString(e.unref(r)("Last Modified"))+": ",1),e.createTextVNode(" "+e.toDisplayString(e.unref(ne)(n.selection.item.last_modified)),1)])])]),_:1}))}}),An={class:"sm:flex sm:items-start"},qn=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])],-1),Hn={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Un={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Rn={class:"mt-2"},Pn={class:"flex text-sm text-gray-800 dark:text-gray-400 py-2"},In={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Wn=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),Gn=[Wn],Kn={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Yn=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),Jn=[Yn],Xn={class:"ml-1.5"},Qn={name:"VFModalRename"},Zn=Object.assign(Qn,{props:{selection:Object,current:Object},setup(n){const o=e.inject("emitter");e.inject("storage");const r=e.inject("adapter"),{t}=e.inject("i18n"),a=n,d=e.ref(a.selection.items[0]),s=e.ref(a.selection.items[0].basename),c=e.ref(""),m=()=>{s.value!=""&&o.emit("vf-fetch",{params:{q:"rename",m:"post",adapter:r.value,path:a.current.dirname},body:{item:d.value.path,name:s.value},onSuccess:()=>{o.emit("vf-toast-push",{label:t("%s is renamed.",s.value)})},onError:l=>{c.value=t(l.message)}})};return(l,i)=>(e.openBlock(),e.createBlock(z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:m,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(t)("Rename")),1),e.createElementVNode("button",{type:"button",onClick:i[2]||(i[2]=u=>e.unref(o).emit("vf-modal-close")),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(t)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",An,[qn,e.createElementVNode("div",Hn,[e.createElementVNode("h3",Un,e.toDisplayString(e.unref(t)("Rename")),1),e.createElementVNode("div",Rn,[e.createElementVNode("p",Pn,[d.value.type=="dir"?(e.openBlock(),e.createElementBlock("svg",In,Gn)):(e.openBlock(),e.createElementBlock("svg",Kn,Jn)),e.createElementVNode("span",Xn,e.toDisplayString(d.value.basename),1)]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":i[0]||(i[0]=u=>s.value=u),onKeyup:e.withKeys(m,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-700/25 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:"Name",type:"text"},null,544),[[e.vModelText,s.value]]),c.value.length?(e.openBlock(),e.createBlock(L,{key:0,onHidden:i[1]||(i[1]=u=>c.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),ea={class:"sm:flex sm:items-start"},ta=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})])],-1),oa={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},ra={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},na={class:"mt-2"},aa={key:0,class:"pointer-events-none"},la={key:1,class:"pointer-events-none"},sa=["disabled"],ia=["disabled"],ca={class:"text-gray-500 text-sm mb-1 pr-1 max-h-[200px] overflow-y-auto vf-scrollbar"},da={class:"rounded flex flex-shrink-0 w-6 h-6 border bg-gray-50 text-xs cursor-default dark:border-gray-700 dark:bg-gray-800 dark:text-gray-50"},ua=["textContent"],ma={class:"ml-1 w-full h-fit"},pa={class:"text-left hidden md:block"},fa={class:"text-left md:hidden"},va={key:0,class:"ml-auto"},ha=["title","disabled","onClick"],ga=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),ka=[ga],ya={key:0,class:"py-2"},xa=["disabled"],wa={name:"VFModalUpload"},ba=Object.assign(wa,{props:{current:Object},setup(n){const o=e.inject("debug"),r=e.inject("emitter"),{t}=e.inject("i18n"),a=e.inject("maxFileSize"),d=e.inject("filesize"),s=e.inject("requester"),c=n,m=t("uppy"),l={PENDING:0,CANCELED:1,UPLOADING:2,ERROR:3,DONE:10},i=e.ref({QUEUE_ENTRY_STATUS:l}),u=e.ref(null),b=e.ref(null),k=e.ref(null),y=e.ref(null),v=e.ref(null),N=e.ref(null),x=e.ref([]),B=e.ref(""),E=e.ref(!1),V=e.ref(!1);let _;function D(p){return x.value.findIndex(h=>h.id===p)}function C(p,h=null){h=h??(p.webkitRelativePath||p.name),_.addFile({name:h,type:p.type,data:p,source:"Local"})}function $(p){switch(p.status){case l.DONE:return"text-green-600";case l.ERROR:return"text-red-600";case l.CANCELED:return"text-red-600";case l.PENDING:default:return""}}const O=p=>{switch(p.status){case l.DONE:return"";case l.ERROR:case l.CANCELED:return"!";case l.PENDING:default:return"..."}};function A(){y.value.click()}function F(){if(!E.value){if(!x.value.filter(p=>p.status!==l.DONE).length){B.value=t("Please select file to upload first.");return}B.value="",_.retryAll(),_.upload()}}function q(){_.cancelAll({reason:"user"}),x.value.forEach(p=>{p.status!==l.DONE&&(p.status=l.CANCELED,p.statusName=t("Canceled"))}),E.value=!1}function T(p){E.value||(_.removeFile(p.id,"removed-by-user"),x.value.splice(D(p.id),1))}function U(p){if(!E.value){if(_.cancelAll({reason:"user"}),p){const h=[];x.value.forEach(f=>{f.status!==l.DONE&&h.push(f)}),x.value=[],h.forEach(f=>{C(f.originalFile,f.name)});return}x.value.splice(0)}}function P(){r.emit("vf-modal-close")}return e.onMounted(async()=>{_=new de({debug:o,restrictions:{maxFileSize:Yo(a)},locale:m,onBeforeFileAdded(w,g){if(g[w.id]!=null){const M=D(w.id);x.value[M].status===l.PENDING&&(B.value=_.i18n("noDuplicates",{fileName:w.name})),x.value=x.value.filter(I=>I.id!==w.id)}return x.value.push({id:w.id,name:w.name,size:d.value(w.size),status:l.PENDING,statusName:t("Pending upload"),percent:null,originalFile:w.data}),!0}});const p=s.transformRequestParams({url:"",method:"post",params:{q:"upload",adapter:c.current.adapter,path:c.current.dirname}});o&&p.body!=null&&(p.body instanceof FormData||Object.keys(p.body).length>0)&&console.warn(`Cannot set body on upload, make sure request.transformRequest didn't set body when upload.
Will ignore for now.`),_.use(ue,{method:p.method,endpoint:p.url+"?"+new URLSearchParams(p.params),headers:p.headers,limit:5,timeout:0,getResponseError(w,g){let S;try{S=JSON.parse(w).message}catch{S=t("Cannot parse server response.")}return new Error(S)}}),_.on("restriction-failed",(w,g)=>{const S=x.value[D(w.id)];T(S),B.value=g.message}),_.on("upload",()=>{E.value=!0,x.value.forEach(w=>{w.status!==l.DONE&&(w.percent=null,w.status=l.UPLOADING,w.statusName=t("Pending upload"))})}),_.on("upload-progress",(w,g)=>{const S=Math.floor(g.bytesUploaded/g.bytesTotal*100);x.value[D(w.id)].percent=`${S}%`}),_.on("upload-success",w=>{const g=x.value[D(w.id)];g.status=l.DONE,g.statusName=t("Done")}),_.on("upload-error",(w,g)=>{const S=x.value[D(w.id)];S.percent=null,S.status=l.ERROR,g.isNetworkError?S.statusName=t("Network Error, Unable establish connection to the server or interrupted."):S.statusName=g?g.message:t("Unknown Error")}),_.on("error",w=>{B.value=w.message,E.value=!1,r.emit("vf-fetch",{params:{q:"index",adapter:c.current.adapter,path:c.current.dirname},noCloseModal:!0})}),_.on("complete",()=>{E.value=!1,r.emit("vf-fetch",{params:{q:"index",adapter:c.current.adapter,path:c.current.dirname},noCloseModal:!0})}),y.value.addEventListener("click",()=>{b.value.click()}),v.value.addEventListener("click",()=>{k.value.click()}),N.value.addEventListener("dragover",w=>{w.preventDefault(),V.value=!0}),N.value.addEventListener("dragleave",w=>{w.preventDefault(),V.value=!1});function h(w,g){g.isFile&&g.file(S=>w(g,S)),g.isDirectory&&g.createReader().readEntries(S=>{S.forEach(M=>{h(w,M)})})}N.value.addEventListener("drop",w=>{w.preventDefault(),V.value=!1;const g=/^[/\\](.+)/;[...w.dataTransfer.items].forEach(S=>{S.kind==="file"&&h((M,I)=>{const ae=g.exec(M.fullPath);C(I,ae[1])},S.webkitGetAsEntry())})});const f=({target:w})=>{const g=w.files;for(const S of g)C(S);w.value=""};b.value.addEventListener("change",f),k.value.addEventListener("change",f)}),e.onBeforeUnmount(()=>{_==null||_.close({reason:"unmount"})}),(p,h)=>(e.openBlock(),e.createBlock(z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",class:e.normalizeClass(["vf-btn vf-btn-primary",E.value?"bg-blue-200 hover:bg-blue-200 dark:bg-gray-700/50 dark:hover:bg-gray-700/50 dark:text-gray-500":"bg-blue-600 hover:bg-blue-700 dark:bg-gray-700 dark:hover:bg-gray-500"]),disabled:E.value,onClick:e.withModifiers(F,["prevent"])},e.toDisplayString(e.unref(t)("Upload")),11,xa),E.value?(e.openBlock(),e.createElementBlock("button",{key:0,type:"button",class:"vf-btn vf-btn-secondary",onClick:e.withModifiers(q,["prevent"])},e.toDisplayString(e.unref(t)("Cancel")),1)):(e.openBlock(),e.createElementBlock("button",{key:1,type:"button",class:"vf-btn vf-btn-secondary",onClick:e.withModifiers(P,["prevent"])},e.toDisplayString(e.unref(t)("Close")),1))]),default:e.withCtx(()=>[e.createElementVNode("div",ea,[ta,e.createElementVNode("div",oa,[e.createElementVNode("h3",ra,e.toDisplayString(e.unref(t)("Upload Files")),1),e.createElementVNode("div",na,[e.createElementVNode("div",{ref_key:"dropArea",ref:N,class:"flex items-center justify-center text-lg mb-4 text-gray-500 border-2 border-gray-300 rounded border-dashed select-none cursor-pointer dark:border-gray-600 h-[120px]",onClick:A},[V.value?(e.openBlock(),e.createElementBlock("div",aa,e.toDisplayString(e.unref(t)("Release to drop these files.")),1)):(e.openBlock(),e.createElementBlock("div",la,e.toDisplayString(e.unref(t)("Drag and drop the files/folders to here or click here.")),1))],512),e.createElementVNode("div",{ref_key:"container",ref:u,class:"text-gray-500 mb-1"},[e.createElementVNode("button",{ref_key:"pickFiles",ref:y,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(t)("Select Files")),513),e.createElementVNode("button",{ref_key:"pickFolders",ref:v,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(t)("Select Folders")),513),e.createElementVNode("button",{type:"button",class:"vf-btn vf-btn-secondary",disabled:E.value,onClick:h[0]||(h[0]=f=>U(!1))},e.toDisplayString(e.unref(t)("Clear all")),9,sa),e.createElementVNode("button",{type:"button",class:"vf-btn vf-btn-secondary",disabled:E.value,onClick:h[1]||(h[1]=f=>U(!0))},e.toDisplayString(e.unref(t)("Clear only successful")),9,ia)],512),e.createElementVNode("div",ca,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(x.value,f=>(e.openBlock(),e.createElementBlock("div",{class:"flex hover:bg-gray-100 dark:hover:bg-gray-800 dark:hover:text-gray-300",key:f.id},[e.createElementVNode("span",da,[e.createElementVNode("span",{class:e.normalizeClass(["text-base m-auto",$(f)]),textContent:e.toDisplayString(O(f))},null,10,ua)]),e.createElementVNode("div",ma,[e.createElementVNode("div",pa,e.toDisplayString(e.unref(X)(f.name,40))+" ("+e.toDisplayString(f.size)+")",1),e.createElementVNode("div",fa,e.toDisplayString(e.unref(X)(f.name,16))+" ("+e.toDisplayString(f.size)+")",1),e.createElementVNode("div",{class:e.normalizeClass(["flex break-all text-left",$(f)])},[e.createTextVNode(e.toDisplayString(f.statusName)+" ",1),f.status===i.value.QUEUE_ENTRY_STATUS.UPLOADING?(e.openBlock(),e.createElementBlock("b",va,e.toDisplayString(f.percent),1)):e.createCommentVNode("",!0)],2)]),e.createElementVNode("button",{type:"button",class:e.normalizeClass(["rounded w-5 h-5 border-1 text-base leading-none font-medium focus:outline-none dark:border-gray-200 dark:text-gray-400 dark:hover:text-gray-200 dark:bg-gray-600 ml-auto sm:text-xs hover:text-red-600",E.value?"disabled:bg-gray-100 text-white text-opacity-50":"bg-gray-100"]),title:e.unref(t)("Delete"),disabled:E.value,onClick:w=>T(f)},ka,10,ha)]))),128)),x.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",ya,e.toDisplayString(e.unref(t)("No files selected!")),1))]),B.value.length?(e.openBlock(),e.createBlock(L,{key:0,onHidden:h[2]||(h[2]=f=>B.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(B.value),1)]),_:1})):e.createCommentVNode("",!0)])])]),e.createElementVNode("input",{ref_key:"internalFileInput",ref:b,type:"file",multiple:"",class:"hidden"},null,512),e.createElementVNode("input",{ref_key:"internalFolderInput",ref:k,type:"file",multiple:"",webkitdirectory:"",class:"hidden"},null,512)]),_:1}))}}),_a={class:"sm:flex sm:items-start"},Ea=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})])],-1),Na={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Va={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},$a={class:"mt-2"},Ba={class:"text-gray-500 text-sm mb-1 overflow-auto vf-scrollbar",style:{"max-height":"200px"}},Ca={class:"flex text-sm text-gray-800 dark:text-gray-400"},Sa={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Da=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),ja=[Da],Ma={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Ta=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),za=[Ta],Oa={class:"ml-1.5"},Fa=["placeholder"],La={name:"VFModalArchive"},Aa=Object.assign(La,{props:{selection:Object,current:Object},setup(n){const o=e.inject("emitter");e.inject("storage");const r=e.inject("adapter"),{t}=e.inject("i18n"),a=n,d=e.ref(""),s=e.ref(""),c=e.ref(a.selection.items),m=()=>{c.value.length&&o.emit("vf-fetch",{params:{q:"archive",m:"post",adapter:r.value,path:a.current.dirname},body:{items:c.value.map(({path:l,type:i})=>({path:l,type:i})),name:d.value},onSuccess:()=>{o.emit("vf-toast-push",{label:t("The file(s) archived.")})},onError:l=>{s.value=t(l.message)}})};return(l,i)=>(e.openBlock(),e.createBlock(z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:m,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(t)("Archive")),1),e.createElementVNode("button",{type:"button",onClick:i[2]||(i[2]=u=>e.unref(o).emit("vf-modal-close")),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(t)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",_a,[Ea,e.createElementVNode("div",Na,[e.createElementVNode("h3",Va,e.toDisplayString(e.unref(t)("Archive the files")),1),e.createElementVNode("div",$a,[e.createElementVNode("div",Ba,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,u=>(e.openBlock(),e.createElementBlock("p",Ca,[u.type=="dir"?(e.openBlock(),e.createElementBlock("svg",Sa,ja)):(e.openBlock(),e.createElementBlock("svg",Ma,za)),e.createElementVNode("span",Oa,e.toDisplayString(u.basename),1)]))),256))]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":i[0]||(i[0]=u=>d.value=u),onKeyup:e.withKeys(m,["enter"]),class:"my-1 px-2 py-1 border rounded dark:bg-gray-700/25 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:e.unref(t)("Archive name. (.zip file will be created)"),type:"text"},null,40,Fa),[[e.vModelText,d.value]]),s.value.length?(e.openBlock(),e.createBlock(L,{key:0,onHidden:i[1]||(i[1]=u=>s.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(s.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),qa={class:"sm:flex sm:items-start"},Ha=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5m6 4.125l2.25 2.25m0 0l2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})])],-1),Ua={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Ra={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Pa={class:"mt-2"},Ia={class:"flex text-sm text-gray-800 dark:text-gray-400"},Wa={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Ga=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),Ka=[Ga],Ya={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Ja=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),Xa=[Ja],Qa={class:"ml-1.5"},Za={class:"my-1 text-sm text-gray-500"},el={name:"VFModalUnarchive"},tl=Object.assign(el,{props:{selection:Object,current:Object},setup(n){const o=e.inject("emitter");e.inject("storage");const r=e.inject("adapter"),{t}=e.inject("i18n"),a=n;e.ref("");const d=e.ref(a.selection.items[0]),s=e.ref(""),c=e.ref([]),m=()=>{o.emit("vf-fetch",{params:{q:"unarchive",m:"post",adapter:r.value,path:a.current.dirname},body:{item:d.value.path},onSuccess:()=>{o.emit("vf-toast-push",{label:t("The file unarchived.")})},onError:l=>{s.value=t(l.message)}})};return(l,i)=>(e.openBlock(),e.createBlock(z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:m,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(t)("Unarchive")),1),e.createElementVNode("button",{type:"button",onClick:i[1]||(i[1]=u=>e.unref(o).emit("vf-modal-close")),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(t)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",qa,[Ha,e.createElementVNode("div",Ua,[e.createElementVNode("h3",Ra,e.toDisplayString(e.unref(t)("Unarchive")),1),e.createElementVNode("div",Pa,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,u=>(e.openBlock(),e.createElementBlock("p",Ia,[u.type=="dir"?(e.openBlock(),e.createElementBlock("svg",Wa,Ka)):(e.openBlock(),e.createElementBlock("svg",Ya,Xa)),e.createElementVNode("span",Qa,e.toDisplayString(u.basename),1)]))),256)),e.createElementVNode("p",Za,e.toDisplayString(e.unref(t)("The archive will be unarchived at"))+" ("+e.toDisplayString(n.current.dirname)+")",1),s.value.length?(e.openBlock(),e.createBlock(L,{key:0,onHidden:i[0]||(i[0]=u=>s.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(s.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),ol={class:"sm:flex sm:items-start"},rl=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{class:"h-6 w-6 stroke-red-600 dark:stroke-red-200",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1),nl={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},al={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},ll={class:"mt-2"},sl={class:"flex text-sm text-gray-800 dark:text-gray-400"},il={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},cl=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),dl=[cl],ul={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},ml=e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),pl=[ml],fl={class:"ml-1.5"},vl={class:"text-sm text-gray-500 pb-1 pt-3"},hl={class:"flex text-sm text-gray-800 dark:text-gray-400"},gl=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1),kl={class:"ml-1.5 overflow-auto"},yl={name:"VFModalMove"},xl=Object.assign(yl,{props:{selection:Object,current:Object},setup(n){const o=e.inject("emitter"),{t:r}=e.inject("i18n");e.inject("storage");const t=e.inject("adapter"),a=n,d=e.ref(a.selection.items.from),s=e.ref(""),c=()=>{d.value.length&&o.emit("vf-fetch",{params:{q:"move",m:"post",adapter:t.value,path:a.current.dirname},body:{items:d.value.map(({path:m,type:l})=>({path:m,type:l})),item:a.selection.items.to.path},onSuccess:()=>{o.emit("vf-toast-push",{label:r("Files moved.",a.selection.items.to.name)})},onError:m=>{s.value=r(m.message)}})};return(m,l)=>(e.openBlock(),e.createBlock(z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:c,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(r)("Yes, Move!")),1),e.createElementVNode("button",{type:"button",onClick:l[1]||(l[1]=i=>e.unref(o).emit("vf-modal-close")),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(r)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",ol,[rl,e.createElementVNode("div",nl,[e.createElementVNode("h3",al,e.toDisplayString(e.unref(r)("Move files")),1),e.createElementVNode("div",ll,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,i=>(e.openBlock(),e.createElementBlock("p",sl,[i.type=="dir"?(e.openBlock(),e.createElementBlock("svg",il,dl)):(e.openBlock(),e.createElementBlock("svg",ul,pl)),e.createElementVNode("span",fl,e.toDisplayString(i.path),1)]))),256)),e.createElementVNode("p",vl,e.toDisplayString(e.unref(r)("Are you sure you want to move these files?")),1),e.createElementVNode("p",hl,[gl,e.createElementVNode("span",kl,e.toDisplayString(n.selection.items.to.path),1)]),s.value.length?(e.openBlock(),e.createBlock(L,{key:0,onHidden:l[0]||(l[0]=i=>s.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(s.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),wl=(n,o)=>{const r=n.__vccOpts||n;for(const[t,a]of o)r[t]=a;return r},bl={props:{on:{type:String,required:!0}},setup(n,{emit:o,slots:r}){const t=e.inject("emitter"),a=e.ref(!1),{t:d}=e.inject("i18n");let s=null;const c=()=>{clearTimeout(s),a.value=!0,s=setTimeout(()=>{a.value=!1},2e3)};return e.onMounted(()=>{t.on(n.on,c)}),e.onUnmounted(()=>{clearTimeout(s)}),{shown:a,t:d}}},_l={key:1};function El(n,o,r,t,a,d){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["text-sm text-green-600 dark:text-green-600 transition-opacity duration-500 ease-out",[{"opacity-0":!t.shown}]])},[n.$slots.default?e.renderSlot(n.$slots,"default",{key:0}):(e.openBlock(),e.createElementBlock("span",_l,e.toDisplayString(t.t("Saved.")),1))],2)}const K=wl(bl,[["render",El]]),Nl="2.0.0",Vl={class:"sm:flex sm:items-start"},$l=e.createElementVNode("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])],-1),Bl={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Cl={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Sl={class:"mt-2"},Dl={class:"text-sm text-gray-500"},jl={class:"text-sm font-semibold mt-5 text-gray-900 dark:text-gray-400 tracking-wider"},Ml={class:"mt-3 text-left"},Tl={class:"space-y-2"},zl={class:"flex relative gap-x-3"},Ol={class:"h-6 items-center"},Fl={class:"flex-1 block text-sm"},Ll={for:"dark_mode",class:"flex w-full font-medium text-gray-900 dark:text-gray-400"},Al={class:"flex relative gap-x-3"},ql={class:"h-6 items-center"},Hl={class:"flex-1 block text-sm"},Ul={for:"metric_unit",class:"flex w-full font-medium text-gray-900 dark:text-gray-400"},Rl={key:0,class:"flex relative gap-x-3"},Pl={class:"h-6 items-center"},Il={class:"flex w-full font-medium text-gray-900 dark:text-gray-400 text-sm"},Wl={class:"flex text-sm"},Gl=["label"],Kl=["value"],Yl={name:"VFModalAbout"},Jl=Object.assign(Yl,{props:{selection:Object,current:Object},setup(n){const o=e.inject("emitter"),{getStore:r,clearStore:t}=e.inject("storage");e.inject("adapter");const{t:a,changeLocale:d,locale:s}=e.inject("i18n"),c=e.inject("features");e.ref(""),e.ref("");const m=e.inject("darkMode"),l=async()=>{t(),location.reload()},i=()=>{o.emit("vf-darkMode-toggle"),o.emit("vf-darkMode-saved")},u=e.inject("metricUnits"),b=()=>{o.emit("vf-metric-units-saved",!u.value)},k={en:"English",fr:"French (Franais)",de:"German (Deutsch)",fa:"Persian ()",he:"Hebrew ()",hi:"Hindi ()",ru:"Russian (P)",sv:"Swedish (Svenska)",tr:"Turkish (Trke)",zhCN:"Simplified Chinese ()",zhTW:"Traditional Chinese ()"};return(y,v)=>(e.openBlock(),e.createBlock(z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:v[4]||(v[4]=N=>e.unref(o).emit("vf-modal-close")),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(a)("Close")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",Vl,[$l,e.createElementVNode("div",Bl,[e.createElementVNode("h3",Cl,e.toDisplayString(e.unref(a)("About %s","Vuefinder "+e.unref(Nl))),1),e.createElementVNode("div",Sl,[e.createElementVNode("p",Dl,e.toDisplayString(e.unref(a)("Vuefinder is a file manager component for vue 3.")),1),e.createElementVNode("div",null,[e.createElementVNode("h3",jl,e.toDisplayString(e.unref(a)("Settings")),1)]),e.createElementVNode("div",Ml,[e.createElementVNode("fieldset",null,[e.createElementVNode("div",Tl,[e.createElementVNode("div",zl,[e.createElementVNode("div",Ol,[e.withDirectives(e.createElementVNode("input",{id:"dark_mode",name:"dark_mode","onUpdate:modelValue":v[0]||(v[0]=N=>e.isRef(m)?m.value=N:null),type:"checkbox",onClick:i,class:"h-4 w-4 rounded border-gray-300 text-indigo-600 dark:accent-slate-400 focus:ring-indigo-600"},null,512),[[e.vModelCheckbox,e.unref(m)]])]),e.createElementVNode("div",Fl,[e.createElementVNode("label",Ll,[e.createTextVNode(e.toDisplayString(e.unref(a)("Dark Mode"))+" ",1),e.createVNode(K,{class:"ms-3",on:"vf-darkMode-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(a)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",Al,[e.createElementVNode("div",ql,[e.withDirectives(e.createElementVNode("input",{id:"metric_unit",name:"metric_unit",type:"checkbox","onUpdate:modelValue":v[1]||(v[1]=N=>e.isRef(u)?u.value=N:null),onClick:b,class:"h-4 w-4 rounded border-gray-300 text-indigo-600 dark:accent-slate-400 focus:ring-indigo-600"},null,512),[[e.vModelCheckbox,e.unref(u)]])]),e.createElementVNode("div",Hl,[e.createElementVNode("label",Ul,[e.createTextVNode(e.toDisplayString(e.unref(a)("Use Metric Units"))+" ",1),e.createVNode(K,{class:"ms-3",on:"vf-metric-units-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(a)("Saved.")),1)]),_:1})])])]),e.unref(c).includes(e.unref(j).LANGUAGE)?(e.openBlock(),e.createElementBlock("div",Rl,[e.createElementVNode("div",Pl,[e.createElementVNode("div",Il,e.toDisplayString(e.unref(a)("Language")),1)]),e.createElementVNode("div",Wl,[e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":v[2]||(v[2]=N=>e.isRef(s)?s.value=N:null),onChange:v[3]||(v[3]=N=>e.unref(d)(N.target.value)),class:"w-full text-sm text-slate-500 border dark:border-gray-600 dark:text-neutral-50 dark:bg-gray-700 rounded"},[e.createElementVNode("optgroup",{label:e.unref(a)("Language")},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(k,(N,x)=>e.createElementVNode("option",{value:x},e.toDisplayString(N),9,Kl)),64))],8,Gl)],544),[[e.vModelSelect,e.unref(s)]]),e.createTextVNode(),e.createVNode(K,{class:"ms-3",on:"vf-language-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(a)("Saved.")),1)]),_:1})])])):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:l,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(a)("Clear Local Storage")),1)])])])])])])]),_:1}))}}),Xl=Object.freeze(Object.defineProperty({__proto__:null,ModalAbout:Jl,ModalArchive:Aa,ModalDelete:Er,ModalMessage:jr,ModalMove:xl,ModalNewFile:Jr,ModalNewFolder:Hr,ModalPreview:Ln,ModalRename:Zn,ModalUnarchive:tl,ModalUpload:ba},Symbol.toStringTag,{value:"Module"})),Y={VueFinder:Xo,...Xl};const Ql={install(n){for(const o in Y)if(Y.hasOwnProperty(o)){const r=Y[o];n.component(r.name,r)}}};module.exports=Ql;
