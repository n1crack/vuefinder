"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),L=require("@nanostores/vue"),Sn=require("mitt"),Bn=require("@nanostores/persistent"),Z=require("nanostores"),$n=require("@tanstack/vue-query"),Dn=require("vue-advanced-cropper"),Wt=require("vanilla-lazyload"),Ye=require("overlayscrollbars"),Tn=require("@uppy/core"),Fn=require("@viselect/vanilla");function Mn(n){let t=localStorage.getItem(n+"_storage");const o=e.reactive(JSON.parse(t??"{}"));e.watch(o,r);function r(){Object.keys(o).length?localStorage.setItem(n+"_storage",JSON.stringify(o)):localStorage.removeItem(n+"_storage")}function l(d,u){o[d]=u}function s(d){delete o[d]}function a(){Object.keys(o).forEach(d=>s(d))}return{getStore:(d,u=null)=>d in o?o[d]:u,setStore:l,removeStore:s,clearStore:a}}async function An(n,t){const o=t[n];return typeof o=="function"?(await o()).default:o}function In(n,t,o,r){const{getStore:l,setStore:s}=n,a=e.ref({}),c=e.ref(l("locale",t)),d=(i,v=t)=>{An(i,r).then(_=>{a.value=_,s("locale",i),c.value=i,s("translations",_),Object.values(r).length>1&&(o.emit("vf-toast-push",{label:"The language is set to "+i}),o.emit("vf-language-saved"))}).catch(_=>{v?(o.emit("vf-toast-push",{label:"The selected locale is not yet supported!",type:"error"}),d(v,null)):(console.error(_),o.emit("vf-toast-push",{label:"Locale cannot be loaded!",type:"error"}))})};e.watch(c,i=>{d(i)}),!l("locale")&&!Object.keys(r).length?d(t):a.value=l("translations");const u=(i,...v)=>v.length?u(i=i.replace("%s",String(v.shift())),...v):i;function m(i,...v){return a.value&&Object.prototype.hasOwnProperty.call(a.value,i)?u(a.value[i]||i,...v):u(i,...v)}return e.reactive({t:m,locale:c})}const z={EDIT:"edit",NEW_FILE:"newfile",NEW_FOLDER:"newfolder",PREVIEW:"preview",ARCHIVE:"archive",UNARCHIVE:"unarchive",SEARCH:"search",RENAME:"rename",UPLOAD:"upload",DELETE:"delete",FULL_SCREEN:"fullscreen",DOWNLOAD:"download",LANGUAGE:"language",MOVE:"move",COPY:"copy"},On=Object.values(z),Ln="4.0.0-dev";function vt(n,t,o,r,l){return t=Math,o=t.log,r=1024,l=o(n)/o(r)|0,(n/t.pow(r,l)).toFixed(0)+" "+(l?"KMGTPEZY"[--l]+"iB":"B")}function Gt(n,t,o,r,l){return t=Math,o=t.log,r=1e3,l=o(n)/o(r)|0,(n/t.pow(r,l)).toFixed(0)+" "+(l?"KMGTPEZY"[--l]+"B":"B")}function Rn(n){if(typeof n=="number")return n;const t={k:1,m:2,g:3,t:4},r=/(\d+(?:\.\d+)?)\s?(k|m|g|t)?b?/i.exec(n);if(!r)return 0;const l=parseFloat(r[1]||"0"),s=(r[2]||"").toLowerCase(),a=t[s]??0;return Math.round(l*Math.pow(1024,a))}function Pn(){const n=e.shallowRef(null),t=e.ref(!1),o=e.ref(),r=e.ref(!1);return{visible:t,type:n,data:o,open:(c,d=null)=>{document.querySelector("body").style.overflow="hidden",t.value=!0,n.value=c,o.value=d},close:()=>{document.querySelector("body").style.overflow="",t.value=!1,n.value=null},setEditMode:c=>{r.value=c},editMode:r}}const ct={view:"grid",theme:"light",fullScreen:!1,showTreeView:!1,showHiddenFiles:!0,compactListView:!0,metricUnits:!1,showThumbnails:!0,persist:!1,path:"",initialPath:null,loadingIndicator:"circular",maxFileSize:null,pinnedFolders:[]},zn=(n,t={})=>{const o=`vuefinder_config_${n}`,r=Bn.persistentAtom(o,{...ct,...t},{encode:JSON.stringify,decode:JSON.parse}),l=(m={})=>{const i=r.get(),v={...ct,...m,...i};r.set(v)},s=m=>r.get()[m],a=()=>r.get(),c=(m,i)=>{const v=r.get();typeof m=="object"&&m!==null?r.set({...v,...m}):r.set({...v,[m]:i})};return{state:r,init:l,get:s,set:c,toggle:m=>{const i=r.get();c(m,!i[m])},all:a,reset:()=>{r.set({...ct})}}};function Hn(n,t){if(typeof n=="string"&&typeof t=="string")return n.toLowerCase().localeCompare(t.toLowerCase());const o=Number(n)||0,r=Number(t)||0;return o===r?0:o<r?-1:1}const Un=()=>{const n=Z.atom(""),t=Z.atom([]),o=Z.atom(!1),r=Z.atom([]),l=Z.atom({active:!1,column:"",order:""}),s=Z.atom({kind:"all",showHidden:!1}),a=Z.atom(new Set),c=Z.atom({type:"copy",path:"",items:new Set}),d=Z.atom(null),u=Z.atom(0),m=Z.atom(!1),i=Z.atom([]),v=Z.atom(-1),_=Z.computed([n],S=>{const $=(S||"local://").trim(),M=$.indexOf("://"),I=M>=0?$.slice(0,M):"",oe=(M>=0?$.slice(M+3):$).split("/").filter(Boolean);let re="";const it=oe.map(se=>(re=re?`${re}/${se}`:se,{basename:se,name:se,path:I?`${I}://${re}`:re,type:"dir"}));return{storage:I,breadcrumb:it,path:$}}),V=Z.computed([r,l,s],(S,$,M)=>{let I=S;M.kind==="files"?I=I.filter(se=>se.type==="file"):M.kind==="folders"&&(I=I.filter(se=>se.type==="dir")),M.showHidden||(I=I.filter(se=>!se.basename.startsWith(".")));const{active:J,column:oe,order:re}=$;if(!J||!oe)return I;const it=re==="asc"?1:-1;return I.slice().sort((se,Cn)=>Hn(se[oe],Cn[oe])*it)}),b=Z.computed([r,a],(S,$)=>$.size===0?[]:S.filter(M=>$.has(M.path))),h=(S,$)=>{const M=n.get();if(($??!0)&&M!==S){const I=i.get(),J=v.get();J<I.length-1&&I.splice(J+1),I.length===0&&M&&I.push(M),I.push(S),i.set([...I]),v.set(I.length-1)}n.set(S)},f=S=>{r.set(S??[])},w=S=>{t.set(S??[])},p=(S,$)=>{l.set({active:!0,column:S,order:$})},g=S=>{const $=l.get();$.active&&$.column===S?l.set({active:$.order==="asc",column:S,order:"desc"}):l.set({active:!0,column:S,order:"asc"})},C=()=>{l.set({active:!1,column:"",order:""})},N=(S,$)=>{s.set({kind:S,showHidden:$})},B=()=>{s.set({kind:"all",showHidden:!1})},A=(S,$="multiple")=>{const M=new Set(a.get());$==="single"&&M.clear(),M.add(S),a.set(M),u.set(M.size)},T=S=>{const $=new Set(a.get());$.delete(S),a.set($),u.set($.size)},H=S=>a.get().has(S),K=(S,$="multiple")=>{const M=new Set(a.get());M.has(S)?M.delete(S):($==="single"&&M.clear(),M.add(S)),a.set(M),u.set(M.size)},X=(S="multiple",$)=>{if(S==="single"){const M=r.get()[0];if(M){const I=M.path;a.set(new Set([I])),u.set(1)}}else if($?.selectionFilterType||$?.selectionFilterMimeIncludes&&$.selectionFilterMimeIncludes.length>0){const M=r.get().filter(I=>{const J=$.selectionFilterType,oe=$.selectionFilterMimeIncludes;return J==="files"&&I.type==="dir"||J==="dirs"&&I.type==="file"?!1:oe&&Array.isArray(oe)&&oe.length>0&&I.type!=="dir"?I.mime_type?oe.some(re=>I.mime_type?.startsWith(re)):!1:!0}).map(I=>I.path);a.set(new Set(M)),u.set(M.length)}else{const M=new Set(r.get().map(I=>I.path));a.set(M),u.set(M.size)}},R=()=>{a.set(new Set),u.set(0)},j=S=>{const $=new Set(S??[]);a.set($),u.set($.size)},Y=S=>{u.set(S)},Q=S=>{m.set(!!S)},E=()=>m.get(),y=(S,$)=>{const M=r.get().filter(I=>$.has(I.path));c.set({type:S,path:_.get().path,items:new Set(M)})},k=S=>Z.computed([c],$=>$.type==="cut"&&Array.from($.items).some(M=>M.path===S)),x=S=>Z.computed([c],$=>$.type==="copy"&&Array.from($.items).some(M=>M.path===S)),F=S=>{const $=k(S);return L.useStore($).value??!1},O=S=>{const $=x(S);return L.useStore($).value??!1},q=()=>{c.set({type:"copy",path:"",items:new Set})},G=()=>c.get(),ve=S=>{d.set(S)},he=()=>d.get(),Ve=()=>{d.set(null)},$e=()=>{const S=i.get(),$=v.get();if($>0){const M=$-1,I=S[M];I&&(v.set(M),h(I,!1))}},Oe=()=>{const S=i.get(),$=v.get();if($<S.length-1){const M=$+1,I=S[M];I&&(v.set(M),h(I,!1))}},Le=Z.computed([v],S=>S>0),D=Z.computed([i,v],(S,$)=>$<S.length-1);return{files:r,storages:t,currentPath:n,sort:l,filter:s,selectedKeys:a,selectedCount:u,loading:m,draggedItem:d,clipboardItems:c,path:_,sortedFiles:V,selectedItems:b,setPath:h,setFiles:f,setStorages:w,setSort:p,toggleSort:g,clearSort:C,setFilter:N,clearFilter:B,select:A,deselect:T,toggleSelect:K,selectAll:X,isSelected:H,clearSelection:R,setSelection:j,setSelectedCount:Y,setLoading:Q,isLoading:E,setClipboard:y,createIsCut:k,createIsCopied:x,isCut:F,isCopied:O,clearClipboard:q,getClipboard:G,setDraggedItem:ve,getDraggedItem:he,clearDraggedItem:Ve,setReadOnly:S=>{o.set(S)},getReadOnly:()=>o.get(),isReadOnly:S=>o.get()?!0:S.read_only??!1,goBack:$e,goForward:Oe,canGoBack:Le,canGoForward:D,navigationHistory:i,historyIndex:v}},Tt={list:n=>["adapter","list",n],search:(n,t,o,r)=>["adapter","search",n,t,o,r],delete:n=>["adapter","delete",n],rename:()=>["adapter","rename"],copy:()=>["adapter","copy"],move:()=>["adapter","move"],archive:()=>["adapter","archive"],unarchive:()=>["adapter","unarchive"],createFile:()=>["adapter","createFile"],createFolder:()=>["adapter","createFolder"]};class jn{adapter;queryClient;config;onBeforeOpen;onAfterOpen;constructor(t,o={}){this.adapter=t,this.onBeforeOpen=o.onBeforeOpen,this.onAfterOpen=o.onAfterOpen,this.queryClient=o.queryClient||new $n.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:o.refetchOnWindowFocus??!1,staleTime:o.staleTime??300*1e3,retry:o.retry??2},mutations:{retry:o.retry??1}}}),this.config={queryClient:this.queryClient,refetchOnWindowFocus:o.refetchOnWindowFocus??!1,staleTime:o.staleTime??300*1e3,cacheTime:o.cacheTime??600*1e3,retry:o.retry??2,onBeforeOpen:this.onBeforeOpen??(()=>{}),onAfterOpen:this.onAfterOpen??(()=>{})}}getAdapter(){return this.adapter}getQueryClient(){return this.queryClient}async list(t){const o=Tt.list(t);return await this.queryClient.fetchQuery({queryKey:o,queryFn:()=>this.adapter.list({path:t}),staleTime:this.config.staleTime})}async open(t){this.onBeforeOpen&&this.onBeforeOpen();const o=await this.list(t);return this.onAfterOpen&&this.onAfterOpen(o),o}async delete(t){const o=await this.adapter.delete(t);return this.invalidateListQueries(),o}async rename(t){const o=await this.adapter.rename(t);return this.invalidateListQueries(),o}async copy(t){const o=await this.adapter.copy(t);return this.invalidateListQueries(),o}async move(t){const o=await this.adapter.move(t);return this.invalidateListQueries(),o}async archive(t){const o=await this.adapter.archive(t);return this.invalidateListQueries(),o}async unarchive(t){const o=await this.adapter.unarchive(t);return this.invalidateListQueries(),o}async createFile(t){const o=await this.adapter.createFile(t);return this.invalidateListQueries(),o}async createFolder(t){const o=await this.adapter.createFolder(t);return this.invalidateListQueries(),o}async getContent(t){const o=["adapter","content",t.path];return await this.queryClient.fetchQuery({queryKey:o,queryFn:()=>this.adapter.getContent(t),staleTime:this.config.staleTime})}getPreviewUrl(t){return this.adapter.getPreviewUrl(t)}getDownloadUrl(t){return this.adapter.getDownloadUrl(t)}async search(t){const o=Tt.search(t.path,t.filter,t.deep,t.size);return await this.queryClient.fetchQuery({queryKey:o,queryFn:()=>this.adapter.search(t),staleTime:this.config.staleTime})}async save(t){const o=await this.adapter.save(t);return this.invalidateListQueries(),o}invalidateListQueries(){this.queryClient.invalidateQueries({queryKey:["adapter"],exact:!1})}invalidateListQuery(t){this.queryClient.invalidateQueries({queryKey:["adapter","list",t],exact:!0})}clearCache(){this.queryClient.clear()}}const Kn=(n,t)=>{const o=Mn(n.id),r=Sn(),l=t.i18n,s=n.locale??t.locale,a=zn(n.id,n.config??{}),c=Un(),d=i=>Array.isArray(i)?i:On,u=n.adapter,m=new jn(u);return e.reactive({version:Ln,config:a,fs:c,root:e.useTemplateRef("root"),debug:n.debug,emitter:r,storage:o,i18n:In(o,s,r,l),modal:Pn(),adapter:e.markRaw(m),features:d(n.features),selectionMode:n.selectionMode||"multiple",selectionFilterType:e.computed(()=>n.selectionFilterType||"both"),selectionFilterMimeIncludes:e.computed(()=>n.selectionFilterMimeIncludes||[]),treeViewData:[],filesize:a.get("metricUnits")?Gt:vt,contextMenuItems:n.contextMenuItems})},Wn=["data-theme"],Gn={class:"vuefinder__modal-layout__container"},qn={class:"vuefinder__modal-layout__content"},Yn={key:0,class:"vuefinder__modal-layout__footer"},Qn={key:0,class:"vuefinder__modal-drag-overlay"},Xn={class:"vuefinder__modal-drag-message"},de=e.defineComponent({__name:"ModalLayout",props:{showDragOverlay:{type:Boolean},dragOverlayText:{}},setup(n){const t=e.ref(null),o=e.inject("ServiceContainer"),r=o.config,l=n,s=r.get("theme");console.log(s),e.onMounted(()=>{const c=document.querySelector(".v-f-modal input");c&&c.focus(),e.nextTick(()=>{if(document.querySelector(".v-f-modal input")&&window.innerWidth<768&&t.value){const d=t.value.getBoundingClientRect().bottom+16;window.scrollTo({top:d,left:0,behavior:"smooth"})}})});const a=c=>{c.target.classList.contains("vuefinder__modal-layout__wrapper")&&(c.preventDefault(),c.stopPropagation())};return(c,d)=>(e.openBlock(),e.createElementBlock("div",{"data-theme":e.unref(s),class:"vuefinder__themer vuefinder__modal-layout","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",onKeyup:d[1]||(d[1]=e.withKeys(u=>e.unref(o).modal.close(),["esc"])),tabindex:"0"},[d[2]||(d[2]=e.createElementVNode("div",{class:"vuefinder__modal-layout__overlay"},null,-1)),e.createElementVNode("div",Gn,[e.createElementVNode("div",{class:"vuefinder__modal-layout__wrapper",onContextmenu:a,onMousedown:d[0]||(d[0]=e.withModifiers(u=>e.unref(o).modal.close(),["self"]))},[e.createElementVNode("div",{ref_key:"modalBody",ref:t,class:"vuefinder__modal-layout__body"},[e.createElementVNode("div",qn,[e.renderSlot(c.$slots,"default")]),c.$slots.buttons?(e.openBlock(),e.createElementBlock("div",Yn,[e.renderSlot(c.$slots,"buttons")])):e.createCommentVNode("",!0)],512)],32)]),l.showDragOverlay?(e.openBlock(),e.createElementBlock("div",Qn,[e.createElementVNode("div",Xn,e.toDisplayString(l.dragOverlayText||"Drag and drop the files/folders to here."),1)])):e.createCommentVNode("",!0)],40,Wn))}}),Jn={class:"vuefinder__modal-header"},Zn={class:"vuefinder__modal-header__icon-container"},eo={class:"vuefinder__modal-header__title",id:"modal-title"},fe=e.defineComponent({__name:"ModalHeader",props:{title:{},icon:{}},setup(n){return(t,o)=>(e.openBlock(),e.createElementBlock("div",Jn,[e.createElementVNode("div",Zn,[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.icon),{class:"vuefinder__modal-header__icon"}))]),e.createElementVNode("h3",eo,e.toDisplayString(n.title),1)]))}}),to={props:{on:{type:String,required:!0}},setup(n,{emit:t,slots:o}){const r=e.inject("ServiceContainer"),l=e.ref(!1),{t:s}=r.i18n;let a=null;const c=()=>{clearTimeout(a),l.value=!0,a=setTimeout(()=>{l.value=!1},2e3)};return e.onMounted(()=>{r.emitter.on(n.on,c)}),e.onUnmounted(()=>{clearTimeout(a)}),{shown:l,t:s}}},no=(n,t)=>{const o=n.__vccOpts||n;for(const[r,l]of t)o[r]=l;return o},oo={key:1};function ro(n,t,o,r,l,s){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__action-message",{"vuefinder__action-message--hidden":!r.shown}])},[n.$slots.default?e.renderSlot(n.$slots,"default",{key:0}):(e.openBlock(),e.createElementBlock("span",oo,e.toDisplayString(r.t("Saved.")),1))],2)}const Ne=no(to,[["render",ro]]),lo=[{name:"light",displayName:"Light"},{name:"dark",displayName:"Dark"},{name:"midnight",displayName:"Midnight"},{name:"latte",displayName:"Latte"},{name:"rose",displayName:"Rose"},{name:"mythril",displayName:"Mythril"},{name:"lime",displayName:"lime"},{name:"sky",displayName:"Sky"},{name:"ocean",displayName:"Oceanic"},{name:"palenight",displayName:"Palenight"},{name:"arctic",displayName:"Arctic"},{name:"code",displayName:"Code"}],ao=(n,t)=>{t?.setAttribute("data-theme",n.get("theme")),n.state.subscribe(o=>{t?.setAttribute("data-theme",o.theme)})},so={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"};function io(n,t){return e.openBlock(),e.createElementBlock("svg",so,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87q.11.06.22.127c.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a8 8 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a7 7 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a7 7 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a7 7 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124q.108-.066.22-.128c.332-.183.582-.495.644-.869z"},null,-1),e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0"},null,-1)])])}const qt={render:io},co={class:"vuefinder__about-modal__content"},uo={class:"vuefinder__about-modal__main"},mo={class:"vuefinder__about-modal__tabs","aria-label":"Tabs"},fo=["onClick","aria-current"],po={key:0,class:"vuefinder__about-modal__tab-content"},vo={class:"vuefinder__about-modal__description"},_o={href:"https://vuefinder.ozdemir.be",class:"vuefinder__about-modal__link",target:"_blank"},ho={href:"https://github.com/n1crack/vuefinder",class:"vuefinder__about-modal__link",target:"_blank"},go={key:1,class:"vuefinder__about-modal__tab-content"},wo={class:"vuefinder__about-modal__description"},yo={class:"vuefinder__about-modal__settings"},ko={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},bo={class:"vuefinder__about-modal__setting-input"},Eo=["checked"],Vo={class:"vuefinder__about-modal__setting-label"},No={for:"metric_unit",class:"vuefinder__about-modal__label"},xo={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},Co={class:"vuefinder__about-modal__setting-input"},So=["checked"],Bo={class:"vuefinder__about-modal__setting-label"},$o={for:"large_icons",class:"vuefinder__about-modal__label"},Do={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},To={class:"vuefinder__about-modal__setting-input"},Fo=["checked"],Mo={class:"vuefinder__about-modal__setting-label"},Ao={for:"persist_path",class:"vuefinder__about-modal__label"},Io={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},Oo={class:"vuefinder__about-modal__setting-input"},Lo=["checked"],Ro={class:"vuefinder__about-modal__setting-label"},Po={for:"show_thumbnails",class:"vuefinder__about-modal__label"},zo={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},Ho={class:"vuefinder__about-modal__setting-input"},Uo={for:"theme",class:"vuefinder__about-modal__label"},jo={class:"vuefinder__about-modal__setting-label"},Ko=["value"],Wo=["label"],Go=["value"],qo={key:0,class:"vuefinder__about-modal__setting"},Yo={class:"vuefinder__about-modal__setting-input"},Qo={for:"language",class:"vuefinder__about-modal__label"},Xo={class:"vuefinder__about-modal__setting-label"},Jo=["label"],Zo=["value"],er={key:2,class:"vuefinder__about-modal__tab-content"},tr={class:"vuefinder__about-modal__shortcuts"},nr={class:"vuefinder__about-modal__shortcut"},or={class:"vuefinder__about-modal__shortcut"},rr={class:"vuefinder__about-modal__shortcut"},lr={class:"vuefinder__about-modal__shortcut"},ar={class:"vuefinder__about-modal__shortcut"},sr={class:"vuefinder__about-modal__shortcut"},ir={class:"vuefinder__about-modal__shortcut"},cr={class:"vuefinder__about-modal__shortcut"},dr={class:"vuefinder__about-modal__shortcut"},ur={class:"vuefinder__about-modal__shortcut"},mr={key:3,class:"vuefinder__about-modal__tab-content"},fr={class:"vuefinder__about-modal__description"},_t=e.defineComponent({__name:"ModalAbout",setup(n){const t=e.inject("ServiceContainer"),o=t.config,{clearStore:r}=t.storage,{t:l}=t.i18n,s={ABOUT:"about",SETTINGS:"settings",SHORTCUTS:"shortcuts",RESET:"reset"},a=e.computed(()=>[{name:l("About"),key:s.ABOUT,current:!1},{name:l("Settings"),key:s.SETTINGS,current:!1},{name:l("Shortcuts"),key:s.SHORTCUTS,current:!1},{name:l("Reset"),key:s.RESET,current:!1}]),c=e.ref("about"),d=async()=>{o.reset(),r(),location.reload()},u=w=>{o.set("theme",w),t.emitter.emit("vf-theme-saved")},m=()=>{o.toggle("metricUnits"),t.filesize=o.get("metricUnits")?Gt:vt,t.emitter.emit("vf-metric-units-saved")},i=()=>{o.toggle("compactListView"),t.emitter.emit("vf-compact-view-saved")},v=()=>{o.toggle("showThumbnails"),t.emitter.emit("vf-show-thumbnails-saved")},_=()=>{o.toggle("persist"),t.emitter.emit("vf-persist-path-saved")},{i18n:V}=e.inject("VueFinderOptions"),h=Object.fromEntries(Object.entries({ar:"Arabic (العربيّة)",en:"English",fr:"French (Français)",de:"German (Deutsch)",fa:"Persian (فارسی)",he:"Hebrew (עִברִית)",hi:"Hindi (हिंदी)",pl:"Polish (Polski)",ru:"Russian (Pусский)",sv:"Swedish (Svenska)",tr:"Turkish (Türkçe)",nl:"Dutch (Nederlands)",zhCN:"Simplified Chinese (简体中文)",zhTW:"Traditional Chinese (繁體中文)"}).filter(([w])=>Object.keys(V).includes(w))),f=e.computed(()=>lo.reduce((w,p)=>(w[p.name]=p.displayName,w),{}));return(w,p)=>(e.openBlock(),e.createBlock(de,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:p[2]||(p[2]=g=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(l)("Close")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",co,[e.createVNode(fe,{icon:e.unref(qt),title:"Vuefinder "+e.unref(t).version},null,8,["icon","title"]),e.createElementVNode("div",uo,[e.createElementVNode("div",null,[e.createElementVNode("div",null,[e.createElementVNode("nav",mo,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,g=>(e.openBlock(),e.createElementBlock("button",{key:g.name,onClick:C=>c.value=g.key,class:e.normalizeClass([g.key===c.value?"vuefinder__about-modal__tab--active":"vuefinder__about-modal__tab--inactive","vuefinder__about-modal__tab"]),"aria-current":g.current?"page":void 0},e.toDisplayString(g.name),11,fo))),128))])])]),c.value===s.ABOUT?(e.openBlock(),e.createElementBlock("div",po,[e.createElementVNode("div",vo,e.toDisplayString(e.unref(l)("Vuefinder is a simple, lightweight, and fast file manager library for Vue.js applications")),1),e.createElementVNode("a",_o,e.toDisplayString(e.unref(l)("Project home")),1),e.createElementVNode("a",ho,e.toDisplayString(e.unref(l)("Follow on GitHub")),1)])):e.createCommentVNode("",!0),c.value===s.SETTINGS?(e.openBlock(),e.createElementBlock("div",go,[e.createElementVNode("div",wo,e.toDisplayString(e.unref(l)("Customize your experience with the following settings")),1),e.createElementVNode("div",yo,[e.createElementVNode("fieldset",null,[e.createElementVNode("div",ko,[e.createElementVNode("div",bo,[e.createElementVNode("input",{id:"metric_unit",name:"metric_unit",type:"checkbox",checked:e.unref(o).get("metricUnits"),onChange:m,class:"vuefinder__about-modal__checkbox"},null,40,Eo)]),e.createElementVNode("div",Vo,[e.createElementVNode("label",No,[e.createTextVNode(e.toDisplayString(e.unref(l)("Use Metric Units"))+" ",1),e.createVNode(Ne,{class:"ms-3",on:"vf-metric-units-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(l)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",xo,[e.createElementVNode("div",Co,[e.createElementVNode("input",{id:"large_icons",name:"large_icons",type:"checkbox",checked:e.unref(o).get("compactListView"),onChange:i,class:"vuefinder__about-modal__checkbox"},null,40,So)]),e.createElementVNode("div",Bo,[e.createElementVNode("label",$o,[e.createTextVNode(e.toDisplayString(e.unref(l)("Compact list view"))+" ",1),e.createVNode(Ne,{class:"ms-3",on:"vf-compact-view-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(l)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",Do,[e.createElementVNode("div",To,[e.createElementVNode("input",{id:"persist_path",name:"persist_path",type:"checkbox",checked:e.unref(o).get("persist"),onChange:_,class:"vuefinder__about-modal__checkbox"},null,40,Fo)]),e.createElementVNode("div",Mo,[e.createElementVNode("label",Ao,[e.createTextVNode(e.toDisplayString(e.unref(l)("Persist path on reload"))+" ",1),e.createVNode(Ne,{class:"ms-3",on:"vf-persist-path-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(l)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",Io,[e.createElementVNode("div",Oo,[e.createElementVNode("input",{id:"show_thumbnails",name:"show_thumbnails",type:"checkbox",checked:e.unref(o).get("showThumbnails"),onChange:v,class:"vuefinder__about-modal__checkbox"},null,40,Lo)]),e.createElementVNode("div",Ro,[e.createElementVNode("label",Po,[e.createTextVNode(e.toDisplayString(e.unref(l)("Show thumbnails"))+" ",1),e.createVNode(Ne,{class:"ms-3",on:"vf-show-thumbnails-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(l)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",zo,[e.createElementVNode("div",Ho,[e.createElementVNode("label",Uo,e.toDisplayString(e.unref(l)("Theme")),1)]),e.createElementVNode("div",jo,[e.createElementVNode("select",{id:"theme",value:e.unref(o).get("theme"),onChange:p[0]||(p[0]=g=>u(g.target?.value)),class:"vuefinder__about-modal__select"},[e.createElementVNode("optgroup",{label:e.unref(l)("Theme")},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.value,(g,C)=>(e.openBlock(),e.createElementBlock("option",{value:C},e.toDisplayString(g),9,Go))),256))],8,Wo)],40,Ko),e.createVNode(Ne,{class:"ms-3",on:"vf-theme-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(l)("Saved.")),1)]),_:1})])]),e.unref(t).features.includes(e.unref(z).LANGUAGE)&&Object.keys(e.unref(h)).length>1?(e.openBlock(),e.createElementBlock("div",qo,[e.createElementVNode("div",Yo,[e.createElementVNode("label",Qo,e.toDisplayString(e.unref(l)("Language")),1)]),e.createElementVNode("div",Xo,[e.withDirectives(e.createElementVNode("select",{id:"language","onUpdate:modelValue":p[1]||(p[1]=g=>e.unref(t).i18n.locale=g),class:"vuefinder__about-modal__select"},[e.createElementVNode("optgroup",{label:e.unref(l)("Language")},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(h),(g,C)=>(e.openBlock(),e.createElementBlock("option",{value:C},e.toDisplayString(g),9,Zo))),256))],8,Jo)],512),[[e.vModelSelect,e.unref(t).i18n.locale]]),e.createVNode(Ne,{class:"ms-3",on:"vf-language-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(l)("Saved.")),1)]),_:1})])])):e.createCommentVNode("",!0)])])])):e.createCommentVNode("",!0),c.value===s.SHORTCUTS?(e.openBlock(),e.createElementBlock("div",er,[e.createElementVNode("div",tr,[e.createElementVNode("div",nr,[e.createElementVNode("div",null,e.toDisplayString(e.unref(l)("Rename")),1),p[3]||(p[3]=e.createElementVNode("kbd",null,"F2",-1))]),e.createElementVNode("div",or,[e.createElementVNode("div",null,e.toDisplayString(e.unref(l)("Refresh")),1),p[4]||(p[4]=e.createElementVNode("kbd",null,"F5",-1))]),e.createElementVNode("div",rr,[e.createTextVNode(e.toDisplayString(e.unref(l)("Delete"))+" ",1),p[5]||(p[5]=e.createElementVNode("kbd",null,"Del",-1))]),e.createElementVNode("div",lr,[e.createTextVNode(e.toDisplayString(e.unref(l)("Escape"))+" ",1),p[6]||(p[6]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Esc")],-1))]),e.createElementVNode("div",ar,[e.createTextVNode(e.toDisplayString(e.unref(l)("Select All"))+" ",1),p[7]||(p[7]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"A")],-1))]),e.createElementVNode("div",sr,[e.createTextVNode(e.toDisplayString(e.unref(l)("Search"))+" ",1),p[8]||(p[8]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"F")],-1))]),e.createElementVNode("div",ir,[e.createTextVNode(e.toDisplayString(e.unref(l)("Toggle Sidebar"))+" ",1),p[9]||(p[9]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"E")],-1))]),e.createElementVNode("div",cr,[e.createTextVNode(e.toDisplayString(e.unref(l)("Open Settings"))+" ",1),p[10]||(p[10]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,",")],-1))]),e.createElementVNode("div",dr,[e.createTextVNode(e.toDisplayString(e.unref(l)("Toggle Full Screen"))+" ",1),p[11]||(p[11]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"Enter")],-1))]),e.createElementVNode("div",ur,[e.createTextVNode(e.toDisplayString(e.unref(l)("Preview"))+" ",1),p[12]||(p[12]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Space")],-1))])])])):e.createCommentVNode("",!0),c.value===s.RESET?(e.openBlock(),e.createElementBlock("div",mr,[e.createElementVNode("div",fr,e.toDisplayString(e.unref(l)("Reset all settings to default")),1),e.createElementVNode("button",{onClick:d,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(l)("Reset Settings")),1)])):e.createCommentVNode("",!0)])])]),_:1}))}}),pr={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",viewBox:"0 0 24 24"};function vr(n,t){return e.openBlock(),e.createElementBlock("svg",pr,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21q.512.078 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48 48 0 0 0-3.478-.397m-12 .562q.51-.089 1.022-.165m0 0a48 48 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a52 52 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a49 49 0 0 0-7.5 0"},null,-1)])])}const Yt={render:vr},_r={class:"vuefinder__delete-modal__content"},hr={class:"vuefinder__delete-modal__form"},gr={class:"vuefinder__delete-modal__description"},wr={class:"vuefinder__delete-modal__files vf-scrollbar"},yr={class:"vuefinder__delete-modal__file"},kr={key:0,class:"vuefinder__delete-modal__icon vuefinder__delete-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},br={key:1,class:"vuefinder__delete-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Er={class:"vuefinder__delete-modal__file-name"},Vr={class:"vuefinder__delete-modal__warning"},Qe=e.defineComponent({__name:"ModalDelete",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=L.useStore(r.path),s=e.ref(t.modal.data.items),a=e.ref(""),c=()=>{console.log(s.value.map(({path:d,type:u})=>({path:d,type:u}))),s.value.length&&t.adapter.delete({path:l.value.path,items:s.value.map(({path:d,type:u})=>({path:d,type:u}))}).then(d=>{t.emitter.emit("vf-toast-push",{label:o("Files deleted.")}),t.fs.setFiles(d.files),t.modal.close()}).catch(d=>{t.emitter.emit("vf-toast-push",{label:o(d.message),type:"error"})})};return(d,u)=>(e.openBlock(),e.createBlock(de,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:c,class:"vf-btn vf-btn-danger"},e.toDisplayString(e.unref(o)("Yes, Delete!")),1),e.createElementVNode("button",{type:"button",onClick:u[1]||(u[1]=m=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1),e.createElementVNode("div",Vr,e.toDisplayString(e.unref(o)("This action cannot be undone.")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(fe,{icon:e.unref(Yt),title:e.unref(o)("Delete files")},null,8,["icon","title"]),e.createElementVNode("div",_r,[e.createElementVNode("div",hr,[e.createElementVNode("p",gr,e.toDisplayString(e.unref(o)("Are you sure you want to delete these files?")),1),e.createElementVNode("div",wr,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,m=>(e.openBlock(),e.createElementBlock("p",yr,[m.type==="dir"?(e.openBlock(),e.createElementBlock("svg",kr,[...u[2]||(u[2]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",br,[...u[3]||(u[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),e.createElementVNode("span",Er,e.toDisplayString(m.basename),1)]))),256))]),a.value.length?(e.openBlock(),e.createBlock(e.unref(a),{key:0,onHidden:u[0]||(u[0]=m=>a.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),Nr={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",viewBox:"0 0 24 24"};function xr(n,t){return e.openBlock(),e.createElementBlock("svg",Nr,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"},null,-1)])])}const Qt={render:xr},Cr={class:"vuefinder__rename-modal__content"},Sr={class:"vuefinder__rename-modal__item"},Br={class:"vuefinder__rename-modal__item-info"},$r={key:0,class:"vuefinder__rename-modal__icon vuefinder__rename-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Dr={key:1,class:"vuefinder__rename-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Tr={class:"vuefinder__rename-modal__item-name"},Xe=e.defineComponent({__name:"ModalRename",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=L.useStore(r.path),s=e.ref(t.modal.data.items[0]),a=e.ref(s.value.basename),c=e.ref(""),d=()=>{a.value!=s.value.basename&&t.adapter.rename({path:l.value.path,item:s.value.path,name:a.value}).then(u=>{t.emitter.emit("vf-toast-push",{label:o("%s is renamed.",a.value)}),t.fs.setFiles(u.files),t.modal.close()}).catch(u=>{t.emitter.emit("vf-toast-push",{label:o(u.message),type:"error"})})};return(u,m)=>(e.openBlock(),e.createBlock(de,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:d,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Rename")),1),e.createElementVNode("button",{type:"button",onClick:m[2]||(m[2]=i=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(fe,{icon:e.unref(Qt),title:e.unref(o)("Rename")},null,8,["icon","title"]),e.createElementVNode("div",Cr,[e.createElementVNode("div",Sr,[e.createElementVNode("p",Br,[s.value.type==="dir"?(e.openBlock(),e.createElementBlock("svg",$r,[...m[3]||(m[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",Dr,[...m[4]||(m[4]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),e.createElementVNode("span",Tr,e.toDisplayString(s.value.basename),1)]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":m[0]||(m[0]=i=>a.value=i),onKeyup:e.withKeys(d,["enter"]),class:"vuefinder__rename-modal__input",placeholder:"Name",type:"text"},null,544),[[e.vModelText,a.value]]),c.value.length?(e.openBlock(),e.createBlock(e.unref(c),{key:0,onHidden:m[1]||(m[1]=i=>c.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),Fr={class:"vuefinder__text-preview"},Mr={class:"vuefinder__text-preview__header"},Ar=["title"],Ir={class:"vuefinder__text-preview__actions"},Or={key:0,class:"vuefinder__text-preview__content"},Lr={key:1},Rr=e.defineComponent({__name:"Text",emits:["success"],setup(n,{emit:t}){const o=t,r=e.ref(""),l=e.ref(""),s=e.ref(null),a=e.ref(!1),c=e.ref(""),d=e.ref(!1),u=e.inject("ServiceContainer"),{t:m}=u.i18n;e.onMounted(async()=>{try{const _=await u.adapter.getContent({path:u.modal.data.item.path});r.value=_.content,o("success")}catch(_){console.error("Failed to load text content:",_),o("success")}});const i=()=>{a.value=!a.value,l.value=r.value,u.modal.setEditMode(a.value)},v=async()=>{c.value="",d.value=!1;try{const _=u.modal.data.item.path;await u.adapter.save({path:_,content:l.value}),r.value=l.value,c.value=m("Updated."),o("success"),a.value=!a.value}catch(_){const V=_;c.value=m(V.message||"Error"),d.value=!0}};return(_,V)=>(e.openBlock(),e.createElementBlock("div",Fr,[e.createElementVNode("div",Mr,[e.createElementVNode("div",{class:"vuefinder__text-preview__title",id:"modal-title",title:e.unref(u).modal.data.item.path},e.toDisplayString(e.unref(u).modal.data.item.basename),9,Ar),e.createElementVNode("div",Ir,[a.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:v,class:"vuefinder__text-preview__save-button"},e.toDisplayString(e.unref(m)("Save")),1)):e.createCommentVNode("",!0),e.unref(u).features.includes(e.unref(z).EDIT)?(e.openBlock(),e.createElementBlock("button",{key:1,class:"vuefinder__text-preview__edit-button",onClick:V[0]||(V[0]=b=>i())},e.toDisplayString(a.value?e.unref(m)("Cancel"):e.unref(m)("Edit")),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("div",null,[a.value?(e.openBlock(),e.createElementBlock("div",Lr,[e.withDirectives(e.createElementVNode("textarea",{ref_key:"editInput",ref:s,"onUpdate:modelValue":V[1]||(V[1]=b=>l.value=b),class:"vuefinder__text-preview__textarea",name:"text",cols:"30",rows:"10"},null,512),[[e.vModelText,l.value]])])):(e.openBlock(),e.createElementBlock("pre",Or,e.toDisplayString(r.value),1)),c.value.length?(e.openBlock(),e.createBlock(e.unref(c),{key:2,onHidden:V[2]||(V[2]=b=>c.value=""),error:d.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)])]))}}),Pr={class:"vuefinder__image-preview"},zr={class:"vuefinder__image-preview__header"},Hr=["title"],Ur={class:"vuefinder__image-preview__actions"},jr={class:"vuefinder__image-preview__image-container"},Kr=["src"],Wr=e.defineComponent({name:"ImagePreview",__name:"Image",emits:["success"],setup(n,{emit:t}){const o=t,r=e.inject("ServiceContainer"),{t:l}=r.i18n,s=e.ref(!1),a=e.ref(""),c=e.ref(!1),d=e.ref(r.adapter.getPreviewUrl({path:r.modal.data.item.path})),u=e.ref(d.value),m=e.useTemplateRef("cropperRef"),i=async()=>{s.value=!s.value,r.modal.setEditMode(s.value)},v=async()=>{const V=m.value?.getResult({size:{width:795,height:341},fillColor:"#ffffff"})?.canvas;V&&V.toBlob(async b=>{if(b){a.value="",c.value=!1;try{const h=new File([b],r.modal.data.item.basename,{type:"image/png"}),w=r.modal.data.item.path.split("/"),p=w.pop(),g=w.join("/");await r.adapter.upload({path:g,files:[h]}),a.value=l("Updated."),fetch(d.value,{cache:"reload",mode:"no-cors"});const C=r.root.querySelector('[data-src="'+d.value+'"]');C&&Wt.resetStatus(C),r.emitter.emit("vf-refresh-thumbnails"),i(),o("success")}catch(h){const f=h?.message??"Error";a.value=l(f),c.value=!0}}})};return e.onMounted(()=>{o("success")}),(_,V)=>(e.openBlock(),e.createElementBlock("div",Pr,[e.createElementVNode("div",zr,[e.createElementVNode("h3",{class:"vuefinder__image-preview__title",id:"modal-title",title:e.unref(r).modal.data.item.path},e.toDisplayString(e.unref(r).modal.data.item.basename),9,Hr),e.createElementVNode("div",Ur,[s.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:v,class:"vuefinder__image-preview__crop-button"},e.toDisplayString(e.unref(l)("Crop")),1)):e.createCommentVNode("",!0),e.unref(r).features.includes(e.unref(z).EDIT)?(e.openBlock(),e.createElementBlock("button",{key:1,class:"vuefinder__image-preview__edit-button",onClick:V[0]||(V[0]=b=>i())},e.toDisplayString(s.value?e.unref(l)("Cancel"):e.unref(l)("Edit")),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("div",jr,[s.value?(e.openBlock(),e.createBlock(e.unref(Dn.Cropper),{key:1,ref_key:"cropperRef",ref:m,class:"w-full h-full",crossorigin:"anonymous",src:u.value,"auto-zoom":!0,priority:"image",transitions:!0},null,8,["src"])):(e.openBlock(),e.createElementBlock("img",{key:0,style:{},src:e.unref(r).adapter.getPreviewUrl({path:e.unref(r).modal.data.item.path}),class:"vuefinder__image-preview__image w-full h-full"},null,8,Kr))]),a.value.length?(e.openBlock(),e.createBlock(e.unref(a),{key:0,onHidden:V[1]||(V[1]=b=>a.value=""),error:c.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)]))}}),Gr={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function qr(n,t){return e.openBlock(),e.createElementBlock("svg",Gr,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 0 0 2-2V9.414a1 1 0 0 0-.293-.707l-5.414-5.414A1 1 0 0 0 12.586 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2"},null,-1)])])}const Pe={render:qr},Yr={class:"vuefinder__default-preview"},Qr={class:"vuefinder__default-preview__content"},Xr={class:"vuefinder__default-preview__header"},Jr=["title"],Zr={class:"vuefinder__default-preview__icon-container"},el=["title"],tl=e.defineComponent({__name:"Default",emits:["success"],setup(n,{emit:t}){const o=e.inject("ServiceContainer"),r=t;return e.onMounted(()=>{r("success")}),(l,s)=>(e.openBlock(),e.createElementBlock("div",Yr,[e.createElementVNode("div",Qr,[e.createElementVNode("div",Xr,[e.createElementVNode("h3",{class:"vuefinder__default-preview__title",id:"modal-title",title:e.unref(o).modal.data.item.path},e.toDisplayString(e.unref(o).modal.data.item.basename),9,Jr)]),e.createElementVNode("div",Zr,[e.createVNode(e.unref(Pe),{class:"vuefinder__default-preview__file-icon"}),e.createElementVNode("div",{class:"vuefinder__default-preview__file-name",id:"modal-title",title:e.unref(o).modal.data.item.path},e.toDisplayString(e.unref(o).modal.data.item.basename),9,el)])])]))}}),nl={class:"vuefinder__video-preview"},ol=["title"],rl={class:"vuefinder__video-preview__video",preload:"metadata",controls:""},ll=["src"],al=e.defineComponent({__name:"Video",emits:["success"],setup(n,{emit:t}){const o=e.inject("ServiceContainer"),r=t,l=()=>o.adapter.getPreviewUrl({path:o.modal.data.item.path});return e.onMounted(()=>{r("success")}),(s,a)=>(e.openBlock(),e.createElementBlock("div",nl,[e.createElementVNode("h3",{class:"vuefinder__video-preview__title",id:"modal-title",title:e.unref(o).modal.data.item.path},e.toDisplayString(e.unref(o).modal.data.item.basename),9,ol),e.createElementVNode("div",null,[e.createElementVNode("video",rl,[e.createElementVNode("source",{src:l(),type:"video/mp4"},null,8,ll),a[0]||(a[0]=e.createTextVNode(" Your browser does not support the video tag. ",-1))])])]))}}),sl={class:"vuefinder__audio-preview"},il=["title"],cl={class:"vuefinder__audio-preview__audio",controls:""},dl=["src"],ul=e.defineComponent({__name:"Audio",emits:["success"],setup(n,{emit:t}){const o=t,r=e.inject("ServiceContainer"),l=()=>r.adapter.getPreviewUrl({path:r.modal.data.item.path});return e.onMounted(()=>{o("success")}),(s,a)=>(e.openBlock(),e.createElementBlock("div",sl,[e.createElementVNode("h3",{class:"vuefinder__audio-preview__title",id:"modal-title",title:e.unref(r).modal.data.item.path},e.toDisplayString(e.unref(r).modal.data.item.basename),9,il),e.createElementVNode("div",null,[e.createElementVNode("audio",cl,[e.createElementVNode("source",{src:l(),type:"audio/mpeg"},null,8,dl),a[0]||(a[0]=e.createTextVNode(" Your browser does not support the audio element. ",-1))])])]))}}),ml={class:"vuefinder__pdf-preview"},fl=["title"],pl=["data"],vl=["src"],_l=e.defineComponent({__name:"Pdf",emits:["success"],setup(n,{emit:t}){const o=e.inject("ServiceContainer"),r=t,l=()=>o.adapter.getPreviewUrl({path:o.modal.data.item.path});return e.onMounted(()=>{r("success")}),(s,a)=>(e.openBlock(),e.createElementBlock("div",ml,[e.createElementVNode("h3",{class:"vuefinder__pdf-preview__title",id:"modal-title",title:e.unref(o).modal.data.item.path},e.toDisplayString(e.unref(o).modal.data.item.basename),9,fl),e.createElementVNode("div",null,[e.createElementVNode("object",{class:"vuefinder__pdf-preview__object",data:l(),type:"application/pdf",width:"100%",height:"100%"},[e.createElementVNode("iframe",{class:"vuefinder__pdf-preview__iframe",src:l(),width:"100%",height:"100%"}," Your browser does not support PDFs ",8,vl)],8,pl)])]))}});function hl(n,t=null){return new Date(n*1e3).toLocaleString(t??navigator.language??"en-US")}const gl={key:0,class:"vuefinder__preview-modal__nav-overlay"},wl=["disabled","title"],yl=["disabled","title"],kl={class:"vuefinder__preview-modal__content"},bl={key:0},El={class:"vuefinder__preview-modal__loading"},Vl={key:0,class:"vuefinder__preview-modal__loading-indicator"},Nl={class:"vuefinder__preview-modal__details"},xl={class:"font-bold"},Cl={class:"font-bold pl-2"},Sl={key:0,class:"vuefinder__preview-modal__note"},Bl=["download","href"],Je=e.defineComponent({__name:"ModalPreview",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=e.ref(!1),l=b=>(t.modal.data.item.mime_type??"").startsWith(b),s=t.features.includes(z.PREVIEW);s||(r.value=!0);const a=e.computed(()=>t.modal.data.item),c=L.useStore(t.fs.sortedFiles),d=e.computed(()=>c.value.filter(b=>b.type==="file")),u=e.computed(()=>d.value.findIndex(b=>b.path===a.value.path)),m=e.computed(()=>u.value>0),i=e.computed(()=>u.value<d.value.length-1),v=()=>{if(t.modal.editMode.value||!m.value)return;const b=d.value[u.value-1];t.fs.clearSelection(),t.fs.select(b.path),t.modal.data.item=b,t.modal.data.storage=t.modal.data.storage},_=()=>{if(t.modal.editMode.value||!i.value)return;const b=d.value[u.value+1];t.fs.clearSelection(),t.fs.select(b.path),t.modal.data.item=b,t.modal.data.storage=t.modal.data.storage},V=b=>{if(b.key==="Escape"){b.preventDefault(),b.stopPropagation(),t.modal.close();return}(b.key==="ArrowLeft"||b.key==="ArrowRight")&&(b.preventDefault(),b.stopPropagation(),b.key==="ArrowLeft"?v():_())};return e.onMounted(()=>{const b=document.querySelector(".vuefinder__preview-modal");b&&b.focus()}),(b,h)=>(e.openBlock(),e.createBlock(de,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:h[6]||(h[6]=f=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Close")),1),e.unref(t).features.includes(e.unref(z).DOWNLOAD)?(e.openBlock(),e.createElementBlock("a",{key:0,target:"_blank",class:"vf-btn vf-btn-primary",download:e.unref(t).adapter.getDownloadUrl({path:e.unref(t).modal.data.item.path}),href:e.unref(t).adapter.getDownloadUrl({path:e.unref(t).modal.data.item.path})},e.toDisplayString(e.unref(o)("Download")),9,Bl)):e.createCommentVNode("",!0)]),default:e.withCtx(()=>[e.createElementVNode("div",{class:"vuefinder__preview-modal",onKeydown:V,tabindex:"0"},[e.unref(t).modal.editMode?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",gl,[e.createElementVNode("button",{onClick:v,disabled:!m.value,class:"vuefinder__preview-modal__nav-side vuefinder__preview-modal__nav-side--left",title:e.unref(o)("Previous file")},[...h[7]||(h[7]=[e.createElementVNode("svg",{class:"vuefinder__preview-modal__nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e.createElementVNode("polyline",{points:"15,18 9,12 15,6"})],-1)])],8,wl),e.createElementVNode("button",{onClick:_,disabled:!i.value,class:"vuefinder__preview-modal__nav-side vuefinder__preview-modal__nav-side--right",title:e.unref(o)("Next file")},[...h[8]||(h[8]=[e.createElementVNode("svg",{class:"vuefinder__preview-modal__nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e.createElementVNode("polyline",{points:"9,18 15,12 9,6"})],-1)])],8,yl)])),e.createElementVNode("div",kl,[e.unref(s)?(e.openBlock(),e.createElementBlock("div",bl,[l("text")?(e.openBlock(),e.createBlock(Rr,{key:0,onSuccess:h[0]||(h[0]=f=>r.value=!0)})):l("image")?(e.openBlock(),e.createBlock(Wr,{key:1,onSuccess:h[1]||(h[1]=f=>r.value=!0)})):l("video")?(e.openBlock(),e.createBlock(al,{key:2,onSuccess:h[2]||(h[2]=f=>r.value=!0)})):l("audio")?(e.openBlock(),e.createBlock(ul,{key:3,onSuccess:h[3]||(h[3]=f=>r.value=!0)})):l("application/pdf")?(e.openBlock(),e.createBlock(_l,{key:4,onSuccess:h[4]||(h[4]=f=>r.value=!0)})):(e.openBlock(),e.createBlock(tl,{key:5,onSuccess:h[5]||(h[5]=f=>r.value=!0)}))])):e.createCommentVNode("",!0),e.createElementVNode("div",El,[r.value===!1?(e.openBlock(),e.createElementBlock("div",Vl,[h[9]||(h[9]=e.createElementVNode("svg",{class:"vuefinder__preview-modal__spinner",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e.createElementVNode("circle",{class:"vuefinder__preview-modal__spinner-circle",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e.createElementVNode("path",{class:"vuefinder__preview-modal__spinner-path",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e.createElementVNode("span",null,e.toDisplayString(e.unref(o)("Loading")),1)])):e.createCommentVNode("",!0)])])],32),e.createElementVNode("div",Nl,[e.createElementVNode("div",null,[e.createElementVNode("span",xl,e.toDisplayString(e.unref(o)("File Size"))+": ",1),e.createTextVNode(e.toDisplayString(e.unref(t).filesize(e.unref(t).modal.data.item.file_size)),1)]),e.createElementVNode("div",null,[e.createElementVNode("span",Cl,e.toDisplayString(e.unref(o)("Last Modified"))+": ",1),e.createTextVNode(" "+e.toDisplayString(e.unref(hl)(e.unref(t).modal.data.item.last_modified)),1)])]),e.unref(t).features.includes(e.unref(z).DOWNLOAD)?(e.openBlock(),e.createElementBlock("div",Sl,[e.createElementVNode("span",null,e.toDisplayString(e.unref(o)(`Download doesn't work? You can try right-click "Download" button, select "Save link as...".`)),1)])):e.createCommentVNode("",!0)]),_:1}))}}),$l={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",viewBox:"0 0 24 24"};function Dl(n,t){return e.openBlock(),e.createElementBlock("svg",$l,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3"},null,-1)])])}const Tl={render:Dl},Fl={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function Ml(n,t){return e.openBlock(),e.createElementBlock("svg",Fl,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-6l-2-2H5a2 2 0 0 0-2 2"},null,-1)])])}const _e={render:Ml},Al={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"};function Il(n,t){return e.openBlock(),e.createElementBlock("svg",Al,[...t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M12 5v14M5 12h14"},null,-1)])])}const Ze={render:Il},Ol={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"};function Ll(n,t){return e.openBlock(),e.createElementBlock("svg",Ol,[...t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M5 12h14"},null,-1)])])}const et={render:Ll},Rl={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"h-5 w-5",viewBox:"0 0 24 24"};function Pl(n,t){return e.openBlock(),e.createElementBlock("svg",Rl,[...t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"m15 4.5-4 4L7 10l-1.5 1.5 7 7L14 17l1.5-4 4-4M9 15l-4.5 4.5M14.5 4 20 9.5"},null,-1)])])}const ht={render:Pl},zl={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function Hl(n,t){return e.openBlock(),e.createElementBlock("svg",zl,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"},null,-1)])])}const gt={render:Hl},Ul={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"};function jl(n,t){return e.openBlock(),e.createElementBlock("svg",Ul,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 9.776q.168-.026.344-.026h15.812q.176 0 .344.026m-16.5 0a2.25 2.25 0 0 0-1.883 2.542l.857 6a2.25 2.25 0 0 0 2.227 1.932H19.05a2.25 2.25 0 0 0 2.227-1.932l.857-6a2.25 2.25 0 0 0-1.883-2.542m-16.5 0V6A2.25 2.25 0 0 1 6 3.75h3.879a1.5 1.5 0 0 1 1.06.44l2.122 2.12a1.5 1.5 0 0 0 1.06.44H18A2.25 2.25 0 0 1 20.25 9v.776"},null,-1)])])}const wt={render:jl},Kl={class:"vuefinder__modal-tree__folder-item"},Wl={class:"vuefinder__modal-tree__folder-content"},Gl={key:1,class:"vuefinder__modal-tree__folder-spacer"},ql={class:"vuefinder__modal-tree__folder-text"},Yl={key:0,class:"vuefinder__modal-tree__subfolders"},Ql=300,Xl=e.defineComponent({__name:"ModalTreeFolderItem",props:{folder:{},storage:{},modelValue:{},expandedFolders:{},modalTreeData:{},currentPath:{}},emits:["update:modelValue","selectAndClose","toggleFolder"],setup(n,{emit:t}){const o=e.inject("ServiceContainer"),{t:r}=o.i18n,l=o.fs,s=n,a=t;L.useStore(l.path);const c=e.computed(()=>{const f=`${s.storage}:${s.folder.path}`;return s.expandedFolders[f]||!1}),d=e.computed(()=>s.modelValue?.path===s.folder.path),u=e.computed(()=>s.currentPath?.path===s.folder.path),m=e.computed(()=>s.modalTreeData[s.folder.path]||[]),i=e.computed(()=>m.value.length>0||s.folder.type==="dir"),v=()=>{a("toggleFolder",s.storage,s.folder.path)},_=()=>{a("update:modelValue",s.folder)},V=()=>{a("update:modelValue",s.folder),a("selectAndClose",s.folder)};let b=0;const h=()=>{const f=Date.now();f-b<Ql?V():_(),b=f};return(f,w)=>{const p=e.resolveComponent("ModalTreeFolderItem",!0);return e.openBlock(),e.createElementBlock("div",Kl,[e.createElementVNode("div",Wl,[i.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"vuefinder__modal-tree__folder-toggle",onClick:v},[c.value?(e.openBlock(),e.createBlock(e.unref(et),{key:1,class:"vuefinder__modal-tree__folder-toggle-icon"})):(e.openBlock(),e.createBlock(e.unref(Ze),{key:0,class:"vuefinder__modal-tree__folder-toggle-icon"}))])):(e.openBlock(),e.createElementBlock("div",Gl)),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__modal-tree__folder-link",{"vuefinder__modal-tree__folder-link--selected":d.value,"vuefinder__modal-tree__folder-link--current":u.value}]),onClick:_,onDblclick:V,onTouchend:h},[c.value?(e.openBlock(),e.createBlock(e.unref(wt),{key:1,class:"vuefinder__item-icon__folder--open vuefinder__modal-tree__folder-icon"})):(e.openBlock(),e.createBlock(e.unref(_e),{key:0,class:"vuefinder__modal-tree__folder-icon vuefinder__item-icon__folder"})),e.createElementVNode("span",ql,e.toDisplayString(n.folder.basename),1)],34)]),c.value&&i.value?(e.openBlock(),e.createElementBlock("div",Yl,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.value,g=>(e.openBlock(),e.createBlock(p,{key:g.path,folder:g,storage:n.storage,modelValue:n.modelValue,expandedFolders:n.expandedFolders,modalTreeData:n.modalTreeData,currentPath:n.currentPath,"onUpdate:modelValue":w[0]||(w[0]=C=>f.$emit("update:modelValue",C)),onSelectAndClose:w[1]||(w[1]=C=>f.$emit("selectAndClose",C)),onToggleFolder:w[2]||(w[2]=(C,N)=>f.$emit("toggleFolder",C,N))},null,8,["folder","storage","modelValue","expandedFolders","modalTreeData","currentPath"]))),128))])):e.createCommentVNode("",!0)])}}}),Jl={class:"vuefinder__modal-tree"},Zl={class:"vuefinder__modal-tree__header"},ea={class:"vuefinder__modal-tree__title"},ta={key:0,class:"vuefinder__modal-tree__section"},na={class:"vuefinder__modal-tree__section-title"},oa={class:"vuefinder__modal-tree__list"},ra=["onClick","onDblclick","onTouchend"],la={class:"vuefinder__modal-tree__text"},aa={class:"vuefinder__modal-tree__text-storage"},sa={class:"vuefinder__modal-tree__section-title"},ia={class:"vuefinder__modal-tree__list"},ca={class:"vuefinder__modal-tree__storage-item"},da={class:"vuefinder__modal-tree__storage-content"},ua=["onClick"],ma=["onClick","onDblclick","onTouchend"],fa={class:"vuefinder__modal-tree__storage-text"},pa={key:0,class:"vuefinder__modal-tree__subfolders"},Ft=300,yt=e.defineComponent({__name:"ModalTreeSelector",props:{modelValue:{},showPinnedFolders:{type:Boolean},currentPath:{}},emits:["update:modelValue","selectAndClose"],setup(n,{emit:t}){const o=e.inject("ServiceContainer"),{t:r}=o.i18n,l=o.fs,s=o.config,a=t,c=L.useStore(l.sortedFiles),d=L.useStore(l.storages),u=L.useStore(l.path),m=e.ref(null),i=e.ref({}),v=e.ref({});e.watch(c,N=>{const B=N.filter(T=>T.type==="dir"),A=u.value?.path||"";A&&(v.value[A]=B.map(T=>({...T,type:"dir"})))});const _=(N,B)=>{const A=`${N}:${B}`;i.value={...i.value,[A]:!i.value[A]},i.value[A]&&!v.value[B]&&o.adapter.list(B).then(({files:T})=>{if(T){const H=Object.values(T).filter(K=>K.type==="dir");v.value[B]=H.map(K=>({...K,type:"dir"}))}})},V=N=>v.value[N]||[],b=N=>{N&&a("update:modelValue",N)},h=N=>{N&&(a("update:modelValue",N),a("selectAndClose",N))},f=N=>{const B={storage:N,path:N+"://",basename:N,type:"dir",extension:"",file_size:null,last_modified:null,mime_type:null,visibility:"public",dir:N+"://"};a("update:modelValue",B)},w=N=>{const B={storage:N,path:N+"://",basename:N,type:"dir",extension:"",file_size:null,last_modified:null,mime_type:null,visibility:"public",dir:N+"://"};a("update:modelValue",B),a("selectAndClose",B)};let p=0;const g=N=>{if(!N)return;const B=Date.now();B-p<Ft?h(N):b(N),p=B},C=N=>{const B=Date.now();B-p<Ft?w(N):f(N),p=B};return e.onMounted(()=>{m.value&&Ye.OverlayScrollbars(m.value,{overflow:{x:"hidden"},scrollbars:{theme:"vf-scrollbars-theme"}})}),(N,B)=>(e.openBlock(),e.createElementBlock("div",Jl,[e.createElementVNode("div",Zl,[e.createElementVNode("div",ea,e.toDisplayString(e.unref(r)("Select Target Folder")),1)]),e.createElementVNode("div",{ref_key:"modalContentElement",ref:m,class:"vuefinder__modal-tree__content"},[n.showPinnedFolders&&e.unref(s).get("pinnedFolders").length?(e.openBlock(),e.createElementBlock("div",ta,[e.createElementVNode("div",na,e.toDisplayString(e.unref(r)("Pinned Folders")),1),e.createElementVNode("div",oa,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(s).get("pinnedFolders"),A=>(e.openBlock(),e.createElementBlock("div",{key:A.path,class:e.normalizeClass(["vuefinder__modal-tree__item",{"vuefinder__modal-tree__item--selected":n.modelValue?.path===A.path}]),onClick:T=>b(A),onDblclick:T=>h(A),onTouchend:T=>g(A)},[e.createVNode(e.unref(_e),{class:"vuefinder__modal-tree__icon vuefinder__item-icon__folder"}),e.createElementVNode("div",la,e.toDisplayString(A.basename),1),e.createElementVNode("div",aa,e.toDisplayString(A.storage),1),e.createVNode(e.unref(ht),{class:"vuefinder__modal-tree__icon vuefinder__modal-tree__icon--pin"})],42,ra))),128))])])):e.createCommentVNode("",!0),e.createElementVNode("div",sa,e.toDisplayString(e.unref(r)("Storages")),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Array.isArray(e.unref(d))?e.unref(d):e.unref(d).value||[],A=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__modal-tree__section",key:A},[e.createElementVNode("div",ia,[e.createElementVNode("div",ca,[e.createElementVNode("div",da,[e.createElementVNode("div",{class:"vuefinder__modal-tree__storage-toggle",onClick:e.withModifiers(T=>_(A,A+"://"),["stop"])},[i.value[`${A}:${A}://`]?(e.openBlock(),e.createBlock(e.unref(et),{key:1,class:"vuefinder__modal-tree__toggle-icon"})):(e.openBlock(),e.createBlock(e.unref(Ze),{key:0,class:"vuefinder__modal-tree__toggle-icon"}))],8,ua),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__modal-tree__storage-link",{"vuefinder__modal-tree__storage-link--selected":n.modelValue?.path===A+"://"}]),onClick:T=>f(A),onDblclick:T=>w(A),onTouchend:T=>C(A)},[e.createVNode(e.unref(gt),{class:"vuefinder__modal-tree__storage-icon"}),e.createElementVNode("span",fa,e.toDisplayString(A),1)],42,ma)]),i.value[`${A}:${A}://`]?(e.openBlock(),e.createElementBlock("div",pa,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(V(A+"://"),T=>(e.openBlock(),e.createBlock(Xl,{key:T.path,folder:T,storage:A,modelValue:n.modelValue,expandedFolders:i.value,modalTreeData:v.value,currentPath:n.currentPath,"onUpdate:modelValue":b,onSelectAndClose:h,onToggleFolder:_},null,8,["folder","storage","modelValue","expandedFolders","modalTreeData","currentPath"]))),128))])):e.createCommentVNode("",!0)])])]))),128))],512)]))}}),va={class:"vuefinder__move-modal__content"},_a={class:"vuefinder__move-modal__description"},ha={class:"vuefinder__move-modal__files vf-scrollbar"},ga={key:0,class:"vuefinder__move-modal__icon vuefinder__move-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},wa={key:1,class:"vuefinder__move-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},ya={class:"vuefinder__move-modal__file-name"},ka={class:"vuefinder__move-modal__target-title"},ba={class:"vuefinder__move-modal__target-container"},Ea={class:"vuefinder__move-modal__target-path"},Va={class:"vuefinder__move-modal__target-storage"},Na={key:0,class:"vuefinder__move-modal__Destination-folder"},xa={class:"vuefinder__move-modal__target-badge"},Ca={class:"vuefinder__move-modal__options"},Sa={class:"vuefinder__move-modal__checkbox-label"},Ba={class:"vuefinder__move-modal__checkbox-text"},$a={class:"vuefinder__move-modal__selected-items"},Xt=e.defineComponent({__name:"ModalTransfer",props:{copy:{type:Boolean}},setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=n,l=e.ref(t.modal.data.items.from),s=e.ref(t.modal.data.items.to),a=e.ref(""),c=e.ref(r.copy||!1),d=e.computed(()=>c.value?"copy":"move"),u=e.ref(!1),m=e.computed(()=>c.value?o("Copy files"):o("Move files")),i=e.computed(()=>c.value?o("Are you sure you want to copy these files?"):o("Are you sure you want to move these files?")),v=e.computed(()=>c.value?o("Yes, Copy!"):o("Yes, Move!"));e.computed(()=>c.value?o("Files copied."):o("Files moved."));const _=f=>{f&&(s.value=f)},V=f=>{f&&(s.value=f,u.value=!1)},b=()=>{const f=s.value.path;if(!f)return{storage:"local",path:""};if(f.endsWith("://"))return{storage:f.replace("://",""),path:""};const w=f.split("://");return{storage:w[0]||"local",path:w[1]||""}},h=async()=>{l.value.length&&await t.adapter[d.value]({sources:l.value.map(({path:f})=>f),destination:s.value.path})};return(f,w)=>(e.openBlock(),e.createBlock(de,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:h,class:"vf-btn vf-btn-primary"},e.toDisplayString(v.value),1),e.createElementVNode("button",{type:"button",onClick:w[4]||(w[4]=p=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1),e.createElementVNode("div",$a,e.toDisplayString(e.unref(o)("%s item(s) selected.",l.value.length)),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(fe,{icon:e.unref(Tl),title:m.value},null,8,["icon","title"]),e.createElementVNode("div",va,[e.createElementVNode("p",_a,e.toDisplayString(i.value),1),e.createElementVNode("div",ha,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,p=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__move-modal__file",key:p.path},[e.createElementVNode("div",null,[p.type==="dir"?(e.openBlock(),e.createElementBlock("svg",ga,[...w[5]||(w[5]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",wa,[...w[6]||(w[6]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])]))]),e.createElementVNode("div",ya,e.toDisplayString(p.path),1)]))),128))]),e.createElementVNode("h4",ka,e.toDisplayString(e.unref(o)("Target Directory")),1),e.createElementVNode("div",ba,[e.createElementVNode("div",{class:"vuefinder__move-modal__target-display",onClick:w[0]||(w[0]=p=>u.value=!u.value)},[e.createElementVNode("div",Ea,[e.createElementVNode("span",Va,e.toDisplayString(b().storage)+"://",1),b().path?(e.openBlock(),e.createElementBlock("span",Na,e.toDisplayString(b().path),1)):e.createCommentVNode("",!0)]),e.createElementVNode("span",xa,e.toDisplayString(e.unref(o)("Browse")),1)])]),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__move-modal__tree-selector",u.value?"vuefinder__move-modal__tree-selector--expanded":"vuefinder__move-modal__tree-selector--collapsed"])},[e.createVNode(yt,{modelValue:s.value,"onUpdate:modelValue":[w[1]||(w[1]=p=>s.value=p),_],"show-pinned-folders":!0,onSelectAndClose:V},null,8,["modelValue"])],2),e.createElementVNode("div",Ca,[e.createElementVNode("label",Sa,[e.withDirectives(e.createElementVNode("input",{type:"checkbox","onUpdate:modelValue":w[2]||(w[2]=p=>c.value=p),class:"vuefinder__move-modal__checkbox"},null,512),[[e.vModelCheckbox,c.value]]),e.createElementVNode("span",Ba,e.toDisplayString(e.unref(o)("Create a copy instead of moving")),1)])]),a.value.length?(e.openBlock(),e.createBlock(e.unref(a),{key:0,onHidden:w[3]||(w[3]=p=>a.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value),1)]),_:1})):e.createCommentVNode("",!0)])])]),_:1}))}}),Ce=e.defineComponent({__name:"ModalMove",setup(n){return(t,o)=>(e.openBlock(),e.createBlock(Xt,{copy:!1}))}}),kt=e.defineComponent({__name:"ModalCopy",setup(n){return(t,o)=>(e.openBlock(),e.createBlock(Xt,{copy:!0}))}}),Da=(n,t=0,o=!1)=>{let r;return(...l)=>{o&&!r&&n(...l),clearTimeout(r),r=setTimeout(()=>{n(...l)},t)}},Jt=(n,t,o)=>{const r=e.ref(n);return e.customRef((l,s)=>({get(){return l(),r.value},set:Da(a=>{r.value=a,s()},t,!1)}))},Ta={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"};function Fa(n,t){return e.openBlock(),e.createElementBlock("svg",Ta,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607"},null,-1)])])}const bt={render:Fa},Ma={xmlns:"http://www.w3.org/2000/svg",fill:"none",class:"animate-spin p-0.5 h-5 w-5 text-white ml-auto",viewBox:"0 0 24 24"};function Aa(n,t){return e.openBlock(),e.createElementBlock("svg",Ma,[...t[0]||(t[0]=[e.createElementVNode("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",class:"opacity-25 stroke-blue-900 dark:stroke-blue-100"},null,-1),e.createElementVNode("path",{fill:"currentColor",d:"M4 12a8 8 0 0 1 8-8V0C5.373 0 0 5.373 0 12zm2 5.291A7.96 7.96 0 0 1 4 12H0c0 3.042 1.135 5.824 3 7.938z",class:"opacity-75"},null,-1)])])}const tt={render:Aa},Ia={class:"vuefinder__search-modal__search-input"},Oa=["value","placeholder","disabled"],La={key:0,class:"vuefinder__search-modal__loading"},Ra=e.defineComponent({name:"SearchInput",__name:"SearchInput",props:{modelValue:{},isSearching:{type:Boolean},disabled:{type:Boolean}},emits:["update:modelValue","keydown"],setup(n,{expose:t,emit:o}){const r=o,l=e.inject("ServiceContainer"),{t:s}=l.i18n,a=e.ref(null),c=u=>{const m=u.target;r("update:modelValue",m.value)},d=u=>{r("keydown",u)};return t({focus:()=>{a.value&&a.value.focus()}}),(u,m)=>(e.openBlock(),e.createElementBlock("div",Ia,[e.createVNode(e.unref(bt),{class:"vuefinder__search-modal__search-icon"}),e.createElementVNode("input",{ref_key:"searchInput",ref:a,value:n.modelValue,type:"text",placeholder:e.unref(s)("Search Files"),disabled:n.disabled,class:"vuefinder__search-modal__input",onKeydown:d,onKeyup:m[0]||(m[0]=e.withModifiers(()=>{},["stop"])),onInput:c},null,40,Oa),n.isSearching?(e.openBlock(),e.createElementBlock("div",La,[e.createVNode(e.unref(tt),{class:"vuefinder__search-modal__loading-icon"})])):e.createCommentVNode("",!0)]))}}),ze=Math.min,ke=Math.max,He=Math.round,Re=Math.floor,ue=n=>({x:n,y:n}),Pa={left:"right",right:"left",bottom:"top",top:"bottom"},za={start:"end",end:"start"};function Mt(n,t,o){return ke(n,ze(t,o))}function nt(n,t){return typeof n=="function"?n(t):n}function be(n){return n.split("-")[0]}function ot(n){return n.split("-")[1]}function Zt(n){return n==="x"?"y":"x"}function en(n){return n==="y"?"height":"width"}const Ha=new Set(["top","bottom"]);function ge(n){return Ha.has(be(n))?"y":"x"}function tn(n){return Zt(ge(n))}function Ua(n,t,o){o===void 0&&(o=!1);const r=ot(n),l=tn(n),s=en(l);let a=l==="x"?r===(o?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=Ue(a)),[a,Ue(a)]}function ja(n){const t=Ue(n);return[mt(n),t,mt(t)]}function mt(n){return n.replace(/start|end/g,t=>za[t])}const At=["left","right"],It=["right","left"],Ka=["top","bottom"],Wa=["bottom","top"];function Ga(n,t,o){switch(n){case"top":case"bottom":return o?t?It:At:t?At:It;case"left":case"right":return t?Ka:Wa;default:return[]}}function qa(n,t,o,r){const l=ot(n);let s=Ga(be(n),o==="start",r);return l&&(s=s.map(a=>a+"-"+l),t&&(s=s.concat(s.map(mt)))),s}function Ue(n){return n.replace(/left|right|bottom|top/g,t=>Pa[t])}function Ya(n){return{top:0,right:0,bottom:0,left:0,...n}}function Qa(n){return typeof n!="number"?Ya(n):{top:n,right:n,bottom:n,left:n}}function je(n){const{x:t,y:o,width:r,height:l}=n;return{width:r,height:l,top:o,left:t,right:t+r,bottom:o+l,x:t,y:o}}function Ot(n,t,o){let{reference:r,floating:l}=n;const s=ge(t),a=tn(t),c=en(a),d=be(t),u=s==="y",m=r.x+r.width/2-l.width/2,i=r.y+r.height/2-l.height/2,v=r[c]/2-l[c]/2;let _;switch(d){case"top":_={x:m,y:r.y-l.height};break;case"bottom":_={x:m,y:r.y+r.height};break;case"right":_={x:r.x+r.width,y:i};break;case"left":_={x:r.x-l.width,y:i};break;default:_={x:r.x,y:r.y}}switch(ot(t)){case"start":_[a]-=v*(o&&u?-1:1);break;case"end":_[a]+=v*(o&&u?-1:1);break}return _}const Xa=async(n,t,o)=>{const{placement:r="bottom",strategy:l="absolute",middleware:s=[],platform:a}=o,c=s.filter(Boolean),d=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:n,floating:t,strategy:l}),{x:m,y:i}=Ot(u,r,d),v=r,_={},V=0;for(let b=0;b<c.length;b++){const{name:h,fn:f}=c[b],{x:w,y:p,data:g,reset:C}=await f({x:m,y:i,initialPlacement:r,placement:v,strategy:l,middlewareData:_,rects:u,platform:a,elements:{reference:n,floating:t}});m=w??m,i=p??i,_={..._,[h]:{..._[h],...g}},C&&V<=50&&(V++,typeof C=="object"&&(C.placement&&(v=C.placement),C.rects&&(u=C.rects===!0?await a.getElementRects({reference:n,floating:t,strategy:l}):C.rects),{x:m,y:i}=Ot(u,v,d)),b=-1)}return{x:m,y:i,placement:v,strategy:l,middlewareData:_}};async function nn(n,t){var o;t===void 0&&(t={});const{x:r,y:l,platform:s,rects:a,elements:c,strategy:d}=n,{boundary:u="clippingAncestors",rootBoundary:m="viewport",elementContext:i="floating",altBoundary:v=!1,padding:_=0}=nt(t,n),V=Qa(_),h=c[v?i==="floating"?"reference":"floating":i],f=je(await s.getClippingRect({element:(o=await(s.isElement==null?void 0:s.isElement(h)))==null||o?h:h.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(c.floating)),boundary:u,rootBoundary:m,strategy:d})),w=i==="floating"?{x:r,y:l,width:a.floating.width,height:a.floating.height}:a.reference,p=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c.floating)),g=await(s.isElement==null?void 0:s.isElement(p))?await(s.getScale==null?void 0:s.getScale(p))||{x:1,y:1}:{x:1,y:1},C=je(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:w,offsetParent:p,strategy:d}):w);return{top:(f.top-C.top+V.top)/g.y,bottom:(C.bottom-f.bottom+V.bottom)/g.y,left:(f.left-C.left+V.left)/g.x,right:(C.right-f.right+V.right)/g.x}}const Ja=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(t){var o,r;const{placement:l,middlewareData:s,rects:a,initialPlacement:c,platform:d,elements:u}=t,{mainAxis:m=!0,crossAxis:i=!0,fallbackPlacements:v,fallbackStrategy:_="bestFit",fallbackAxisSideDirection:V="none",flipAlignment:b=!0,...h}=nt(n,t);if((o=s.arrow)!=null&&o.alignmentOffset)return{};const f=be(l),w=ge(c),p=be(c)===c,g=await(d.isRTL==null?void 0:d.isRTL(u.floating)),C=v||(p||!b?[Ue(c)]:ja(c)),N=V!=="none";!v&&N&&C.push(...qa(c,b,V,g));const B=[c,...C],A=await nn(t,h),T=[];let H=((r=s.flip)==null?void 0:r.overflows)||[];if(m&&T.push(A[f]),i){const j=Ua(l,a,g);T.push(A[j[0]],A[j[1]])}if(H=[...H,{placement:l,overflows:T}],!T.every(j=>j<=0)){var K,X;const j=(((K=s.flip)==null?void 0:K.index)||0)+1,Y=B[j];if(Y&&(!(i==="alignment"?w!==ge(Y):!1)||H.every(y=>ge(y.placement)===w?y.overflows[0]>0:!0)))return{data:{index:j,overflows:H},reset:{placement:Y}};let Q=(X=H.filter(E=>E.overflows[0]<=0).sort((E,y)=>E.overflows[1]-y.overflows[1])[0])==null?void 0:X.placement;if(!Q)switch(_){case"bestFit":{var R;const E=(R=H.filter(y=>{if(N){const k=ge(y.placement);return k===w||k==="y"}return!0}).map(y=>[y.placement,y.overflows.filter(k=>k>0).reduce((k,x)=>k+x,0)]).sort((y,k)=>y[1]-k[1])[0])==null?void 0:R[0];E&&(Q=E);break}case"initialPlacement":Q=c;break}if(l!==Q)return{reset:{placement:Q}}}return{}}}},Za=new Set(["left","top"]);async function es(n,t){const{placement:o,platform:r,elements:l}=n,s=await(r.isRTL==null?void 0:r.isRTL(l.floating)),a=be(o),c=ot(o),d=ge(o)==="y",u=Za.has(a)?-1:1,m=s&&d?-1:1,i=nt(t,n);let{mainAxis:v,crossAxis:_,alignmentAxis:V}=typeof i=="number"?{mainAxis:i,crossAxis:0,alignmentAxis:null}:{mainAxis:i.mainAxis||0,crossAxis:i.crossAxis||0,alignmentAxis:i.alignmentAxis};return c&&typeof V=="number"&&(_=c==="end"?V*-1:V),d?{x:_*m,y:v*u}:{x:v*u,y:_*m}}const ts=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(t){var o,r;const{x:l,y:s,placement:a,middlewareData:c}=t,d=await es(t,n);return a===((o=c.offset)==null?void 0:o.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:l+d.x,y:s+d.y,data:{...d,placement:a}}}}},ns=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(t){const{x:o,y:r,placement:l}=t,{mainAxis:s=!0,crossAxis:a=!1,limiter:c={fn:h=>{let{x:f,y:w}=h;return{x:f,y:w}}},...d}=nt(n,t),u={x:o,y:r},m=await nn(t,d),i=ge(be(l)),v=Zt(i);let _=u[v],V=u[i];if(s){const h=v==="y"?"top":"left",f=v==="y"?"bottom":"right",w=_+m[h],p=_-m[f];_=Mt(w,_,p)}if(a){const h=i==="y"?"top":"left",f=i==="y"?"bottom":"right",w=V+m[h],p=V-m[f];V=Mt(w,V,p)}const b=c.fn({...t,[v]:_,[i]:V});return{...b,data:{x:b.x-o,y:b.y-r,enabled:{[v]:s,[i]:a}}}}}};function rt(){return typeof window<"u"}function Be(n){return on(n)?(n.nodeName||"").toLowerCase():"#document"}function ae(n){var t;return(n==null||(t=n.ownerDocument)==null?void 0:t.defaultView)||window}function pe(n){var t;return(t=(on(n)?n.ownerDocument:n.document)||window.document)==null?void 0:t.documentElement}function on(n){return rt()?n instanceof Node||n instanceof ae(n).Node:!1}function ie(n){return rt()?n instanceof Element||n instanceof ae(n).Element:!1}function me(n){return rt()?n instanceof HTMLElement||n instanceof ae(n).HTMLElement:!1}function Lt(n){return!rt()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof ae(n).ShadowRoot}const os=new Set(["inline","contents"]);function Ae(n){const{overflow:t,overflowX:o,overflowY:r,display:l}=ce(n);return/auto|scroll|overlay|hidden|clip/.test(t+r+o)&&!os.has(l)}const rs=new Set(["table","td","th"]);function ls(n){return rs.has(Be(n))}const as=[":popover-open",":modal"];function lt(n){return as.some(t=>{try{return n.matches(t)}catch{return!1}})}const ss=["transform","translate","scale","rotate","perspective"],is=["transform","translate","scale","rotate","perspective","filter"],cs=["paint","layout","strict","content"];function Et(n){const t=Vt(),o=ie(n)?ce(n):n;return ss.some(r=>o[r]?o[r]!=="none":!1)||(o.containerType?o.containerType!=="normal":!1)||!t&&(o.backdropFilter?o.backdropFilter!=="none":!1)||!t&&(o.filter?o.filter!=="none":!1)||is.some(r=>(o.willChange||"").includes(r))||cs.some(r=>(o.contain||"").includes(r))}function ds(n){let t=we(n);for(;me(t)&&!Se(t);){if(Et(t))return t;if(lt(t))return null;t=we(t)}return null}function Vt(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const us=new Set(["html","body","#document"]);function Se(n){return us.has(Be(n))}function ce(n){return ae(n).getComputedStyle(n)}function at(n){return ie(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function we(n){if(Be(n)==="html")return n;const t=n.assignedSlot||n.parentNode||Lt(n)&&n.host||pe(n);return Lt(t)?t.host:t}function rn(n){const t=we(n);return Se(t)?n.ownerDocument?n.ownerDocument.body:n.body:me(t)&&Ae(t)?t:rn(t)}function Fe(n,t,o){var r;t===void 0&&(t=[]),o===void 0&&(o=!0);const l=rn(n),s=l===((r=n.ownerDocument)==null?void 0:r.body),a=ae(l);if(s){const c=ft(a);return t.concat(a,a.visualViewport||[],Ae(l)?l:[],c&&o?Fe(c):[])}return t.concat(l,Fe(l,[],o))}function ft(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function ln(n){const t=ce(n);let o=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const l=me(n),s=l?n.offsetWidth:o,a=l?n.offsetHeight:r,c=He(o)!==s||He(r)!==a;return c&&(o=s,r=a),{width:o,height:r,$:c}}function Nt(n){return ie(n)?n:n.contextElement}function xe(n){const t=Nt(n);if(!me(t))return ue(1);const o=t.getBoundingClientRect(),{width:r,height:l,$:s}=ln(t);let a=(s?He(o.width):o.width)/r,c=(s?He(o.height):o.height)/l;return(!a||!Number.isFinite(a))&&(a=1),(!c||!Number.isFinite(c))&&(c=1),{x:a,y:c}}const ms=ue(0);function an(n){const t=ae(n);return!Vt()||!t.visualViewport?ms:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function fs(n,t,o){return t===void 0&&(t=!1),!o||t&&o!==ae(n)?!1:t}function Ee(n,t,o,r){t===void 0&&(t=!1),o===void 0&&(o=!1);const l=n.getBoundingClientRect(),s=Nt(n);let a=ue(1);t&&(r?ie(r)&&(a=xe(r)):a=xe(n));const c=fs(s,o,r)?an(s):ue(0);let d=(l.left+c.x)/a.x,u=(l.top+c.y)/a.y,m=l.width/a.x,i=l.height/a.y;if(s){const v=ae(s),_=r&&ie(r)?ae(r):r;let V=v,b=ft(V);for(;b&&r&&_!==V;){const h=xe(b),f=b.getBoundingClientRect(),w=ce(b),p=f.left+(b.clientLeft+parseFloat(w.paddingLeft))*h.x,g=f.top+(b.clientTop+parseFloat(w.paddingTop))*h.y;d*=h.x,u*=h.y,m*=h.x,i*=h.y,d+=p,u+=g,V=ae(b),b=ft(V)}}return je({width:m,height:i,x:d,y:u})}function st(n,t){const o=at(n).scrollLeft;return t?t.left+o:Ee(pe(n)).left+o}function sn(n,t){const o=n.getBoundingClientRect(),r=o.left+t.scrollLeft-st(n,o),l=o.top+t.scrollTop;return{x:r,y:l}}function ps(n){let{elements:t,rect:o,offsetParent:r,strategy:l}=n;const s=l==="fixed",a=pe(r),c=t?lt(t.floating):!1;if(r===a||c&&s)return o;let d={scrollLeft:0,scrollTop:0},u=ue(1);const m=ue(0),i=me(r);if((i||!i&&!s)&&((Be(r)!=="body"||Ae(a))&&(d=at(r)),me(r))){const _=Ee(r);u=xe(r),m.x=_.x+r.clientLeft,m.y=_.y+r.clientTop}const v=a&&!i&&!s?sn(a,d):ue(0);return{width:o.width*u.x,height:o.height*u.y,x:o.x*u.x-d.scrollLeft*u.x+m.x+v.x,y:o.y*u.y-d.scrollTop*u.y+m.y+v.y}}function vs(n){return Array.from(n.getClientRects())}function _s(n){const t=pe(n),o=at(n),r=n.ownerDocument.body,l=ke(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=ke(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-o.scrollLeft+st(n);const c=-o.scrollTop;return ce(r).direction==="rtl"&&(a+=ke(t.clientWidth,r.clientWidth)-l),{width:l,height:s,x:a,y:c}}const Rt=25;function hs(n,t){const o=ae(n),r=pe(n),l=o.visualViewport;let s=r.clientWidth,a=r.clientHeight,c=0,d=0;if(l){s=l.width,a=l.height;const m=Vt();(!m||m&&t==="fixed")&&(c=l.offsetLeft,d=l.offsetTop)}const u=st(r);if(u<=0){const m=r.ownerDocument,i=m.body,v=getComputedStyle(i),_=m.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,V=Math.abs(r.clientWidth-i.clientWidth-_);V<=Rt&&(s-=V)}else u<=Rt&&(s+=u);return{width:s,height:a,x:c,y:d}}const gs=new Set(["absolute","fixed"]);function ws(n,t){const o=Ee(n,!0,t==="fixed"),r=o.top+n.clientTop,l=o.left+n.clientLeft,s=me(n)?xe(n):ue(1),a=n.clientWidth*s.x,c=n.clientHeight*s.y,d=l*s.x,u=r*s.y;return{width:a,height:c,x:d,y:u}}function Pt(n,t,o){let r;if(t==="viewport")r=hs(n,o);else if(t==="document")r=_s(pe(n));else if(ie(t))r=ws(t,o);else{const l=an(n);r={x:t.x-l.x,y:t.y-l.y,width:t.width,height:t.height}}return je(r)}function cn(n,t){const o=we(n);return o===t||!ie(o)||Se(o)?!1:ce(o).position==="fixed"||cn(o,t)}function ys(n,t){const o=t.get(n);if(o)return o;let r=Fe(n,[],!1).filter(c=>ie(c)&&Be(c)!=="body"),l=null;const s=ce(n).position==="fixed";let a=s?we(n):n;for(;ie(a)&&!Se(a);){const c=ce(a),d=Et(a);!d&&c.position==="fixed"&&(l=null),(s?!d&&!l:!d&&c.position==="static"&&!!l&&gs.has(l.position)||Ae(a)&&!d&&cn(n,a))?r=r.filter(m=>m!==a):l=c,a=we(a)}return t.set(n,r),r}function ks(n){let{element:t,boundary:o,rootBoundary:r,strategy:l}=n;const a=[...o==="clippingAncestors"?lt(t)?[]:ys(t,this._c):[].concat(o),r],c=a[0],d=a.reduce((u,m)=>{const i=Pt(t,m,l);return u.top=ke(i.top,u.top),u.right=ze(i.right,u.right),u.bottom=ze(i.bottom,u.bottom),u.left=ke(i.left,u.left),u},Pt(t,c,l));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function bs(n){const{width:t,height:o}=ln(n);return{width:t,height:o}}function Es(n,t,o){const r=me(t),l=pe(t),s=o==="fixed",a=Ee(n,!0,s,t);let c={scrollLeft:0,scrollTop:0};const d=ue(0);function u(){d.x=st(l)}if(r||!r&&!s)if((Be(t)!=="body"||Ae(l))&&(c=at(t)),r){const _=Ee(t,!0,s,t);d.x=_.x+t.clientLeft,d.y=_.y+t.clientTop}else l&&u();s&&!r&&l&&u();const m=l&&!r&&!s?sn(l,c):ue(0),i=a.left+c.scrollLeft-d.x-m.x,v=a.top+c.scrollTop-d.y-m.y;return{x:i,y:v,width:a.width,height:a.height}}function dt(n){return ce(n).position==="static"}function zt(n,t){if(!me(n)||ce(n).position==="fixed")return null;if(t)return t(n);let o=n.offsetParent;return pe(n)===o&&(o=o.ownerDocument.body),o}function dn(n,t){const o=ae(n);if(lt(n))return o;if(!me(n)){let l=we(n);for(;l&&!Se(l);){if(ie(l)&&!dt(l))return l;l=we(l)}return o}let r=zt(n,t);for(;r&&ls(r)&&dt(r);)r=zt(r,t);return r&&Se(r)&&dt(r)&&!Et(r)?o:r||ds(n)||o}const Vs=async function(n){const t=this.getOffsetParent||dn,o=this.getDimensions,r=await o(n.floating);return{reference:Es(n.reference,await t(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Ns(n){return ce(n).direction==="rtl"}const xs={convertOffsetParentRelativeRectToViewportRelativeRect:ps,getDocumentElement:pe,getClippingRect:ks,getOffsetParent:dn,getElementRects:Vs,getClientRects:vs,getDimensions:bs,getScale:xe,isElement:ie,isRTL:Ns};function un(n,t){return n.x===t.x&&n.y===t.y&&n.width===t.width&&n.height===t.height}function Cs(n,t){let o=null,r;const l=pe(n);function s(){var c;clearTimeout(r),(c=o)==null||c.disconnect(),o=null}function a(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),s();const u=n.getBoundingClientRect(),{left:m,top:i,width:v,height:_}=u;if(c||t(),!v||!_)return;const V=Re(i),b=Re(l.clientWidth-(m+v)),h=Re(l.clientHeight-(i+_)),f=Re(m),p={rootMargin:-V+"px "+-b+"px "+-h+"px "+-f+"px",threshold:ke(0,ze(1,d))||1};let g=!0;function C(N){const B=N[0].intersectionRatio;if(B!==d){if(!g)return a();B?a(!1,B):r=setTimeout(()=>{a(!1,1e-7)},1e3)}B===1&&!un(u,n.getBoundingClientRect())&&a(),g=!1}try{o=new IntersectionObserver(C,{...p,root:l.ownerDocument})}catch{o=new IntersectionObserver(C,p)}o.observe(n)}return a(!0),s}function mn(n,t,o,r){r===void 0&&(r={});const{ancestorScroll:l=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,u=Nt(n),m=l||s?[...u?Fe(u):[],...Fe(t)]:[];m.forEach(f=>{l&&f.addEventListener("scroll",o,{passive:!0}),s&&f.addEventListener("resize",o)});const i=u&&c?Cs(u,o):null;let v=-1,_=null;a&&(_=new ResizeObserver(f=>{let[w]=f;w&&w.target===u&&_&&(_.unobserve(t),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var p;(p=_)==null||p.observe(t)})),o()}),u&&!d&&_.observe(u),_.observe(t));let V,b=d?Ee(n):null;d&&h();function h(){const f=Ee(n);b&&!un(b,f)&&o(),b=f,V=requestAnimationFrame(h)}return o(),()=>{var f;m.forEach(w=>{l&&w.removeEventListener("scroll",o),s&&w.removeEventListener("resize",o)}),i?.(),(f=_)==null||f.disconnect(),_=null,d&&cancelAnimationFrame(V)}}const Ke=ts,We=ns,Ge=Ja,qe=(n,t,o)=>{const r=new Map,l={platform:xs,...o},s={...l.platform,_c:r};return Xa(n,t,{...l,platform:s})},Ss=["disabled","title"],Bs=["data-theme"],$s={class:"vuefinder__search-modal__dropdown-content"},Ds={class:"vuefinder__search-modal__dropdown-section"},Ts={class:"vuefinder__search-modal__dropdown-title"},Fs={class:"vuefinder__search-modal__dropdown-options"},Ms={key:0,class:"vuefinder__search-modal__dropdown-option-check"},As={key:0,class:"vuefinder__search-modal__dropdown-option-check"},Is={key:0,class:"vuefinder__search-modal__dropdown-option-check"},Os={key:0,class:"vuefinder__search-modal__dropdown-option-check"},Ls=e.defineComponent({name:"SearchOptionsDropdown",__name:"SearchOptionsDropdown",props:{visible:{type:Boolean},disabled:{type:Boolean,default:!1},sizeFilter:{},selectedOption:{}},emits:["update:visible","update:sizeFilter","update:selectedOption","keydown"],setup(n,{expose:t,emit:o}){const r=n,l=o,s=e.inject("ServiceContainer"),{t:a}=s.i18n,c=s.config,d=e.ref(null),u=e.ref(null),m=c.get("theme");let i=null;const v=f=>{if(l("update:selectedOption",f),f.startsWith("size-")){const w=f.split("-")[1];l("update:sizeFilter",w)}},_=async()=>{r.disabled||(r.visible?(l("update:visible",!1),i&&(i(),i=null)):(l("update:visible",!0),await e.nextTick(),await V()))},V=async()=>{if(!(!d.value||!u.value)&&(await e.nextTick(),!(!d.value||!u.value))){Object.assign(u.value.style,{position:"fixed",zIndex:"10001",opacity:"0",transform:"translateY(-8px)",transition:"opacity 150ms ease-out, transform 150ms ease-out"});try{const{x:f,y:w}=await qe(d.value,u.value,{placement:"bottom-start",middleware:[Ke(8),Ge({padding:16}),We({padding:16})]});Object.assign(u.value.style,{left:`${f}px`,top:`${w}px`}),requestAnimationFrame(()=>{u.value&&Object.assign(u.value.style,{opacity:"1",transform:"translateY(0)"})})}catch(f){console.warn("Floating UI initial positioning error:",f);return}try{i=mn(d.value,u.value,async()=>{if(!(!d.value||!u.value))try{const{x:f,y:w}=await qe(d.value,u.value,{placement:"bottom-start",middleware:[Ke(8),Ge({padding:16}),We({padding:16})]});Object.assign(u.value.style,{left:`${f}px`,top:`${w}px`})}catch(f){console.warn("Floating UI positioning error:",f)}})}catch(f){console.warn("Floating UI autoUpdate setup error:",f),i=null}}},b=f=>{if(!r.visible)return;const w=["size-all","size-small","size-medium","size-large"],p=w.findIndex(g=>g===r.selectedOption);if(f.key==="ArrowDown"){f.preventDefault();const g=(p+1)%w.length;l("update:selectedOption",w[g]||null)}else if(f.key==="ArrowUp"){f.preventDefault();const g=p<=0?w.length-1:p-1;l("update:selectedOption",w[g]||null)}else f.key==="Enter"?(f.preventDefault(),r.selectedOption?.startsWith("size-")&&l("update:sizeFilter",r.selectedOption.split("-")[1])):f.key==="Escape"&&(f.preventDefault(),l("update:visible",!1),i&&(i(),i=null))},h=()=>{i&&(i(),i=null)};return e.watch(()=>r.visible,f=>{!f&&i&&(i(),i=null)}),e.onUnmounted(()=>{h()}),t({cleanup:h}),(f,w)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("button",{ref_key:"dropdownBtn",ref:d,onClick:e.withModifiers(_,["stop"]),class:e.normalizeClass(["vuefinder__search-modal__dropdown-btn",{"vuefinder__search-modal__dropdown-btn--active":n.visible}]),disabled:n.disabled,title:e.unref(a)("Search Options")},[e.createVNode(e.unref(qt),{class:"vuefinder__search-modal__dropdown-icon"})],10,Ss),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[n.visible?(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"dropdownContent",ref:u,class:"vuefinder__themer vuefinder__search-modal__dropdown vuefinder__search-modal__dropdown--visible","data-theme":e.unref(m),onClick:w[4]||(w[4]=e.withModifiers(()=>{},["stop"])),onKeydown:b,tabindex:"-1"},[e.createElementVNode("div",$s,[e.createElementVNode("div",Ds,[e.createElementVNode("div",Ts,e.toDisplayString(e.unref(a)("File Size")),1),e.createElementVNode("div",Fs,[e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__search-modal__dropdown-option",{"vuefinder__search-modal__dropdown-option--selected":n.sizeFilter==="all"}]),onClick:w[0]||(w[0]=e.withModifiers(p=>v("size-all"),["stop"]))},[e.createElementVNode("span",null,e.toDisplayString(e.unref(a)("All Files")),1),n.sizeFilter==="all"?(e.openBlock(),e.createElementBlock("div",Ms,[...w[5]||(w[5]=[e.createElementVNode("svg",{viewBox:"0 0 16 16",fill:"currentColor"},[e.createElementVNode("path",{d:"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"})],-1)])])):e.createCommentVNode("",!0)],2),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__search-modal__dropdown-option",{"vuefinder__search-modal__dropdown-option--selected":n.sizeFilter==="small"}]),onClick:w[1]||(w[1]=e.withModifiers(p=>v("size-small"),["stop"]))},[e.createElementVNode("span",null,e.toDisplayString(e.unref(a)("Small (< 1MB)")),1),n.sizeFilter==="small"?(e.openBlock(),e.createElementBlock("div",As,[...w[6]||(w[6]=[e.createElementVNode("svg",{viewBox:"0 0 16 16",fill:"currentColor"},[e.createElementVNode("path",{d:"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"})],-1)])])):e.createCommentVNode("",!0)],2),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__search-modal__dropdown-option",{"vuefinder__search-modal__dropdown-option--selected":n.sizeFilter==="medium"}]),onClick:w[2]||(w[2]=e.withModifiers(p=>v("size-medium"),["stop"]))},[e.createElementVNode("span",null,e.toDisplayString(e.unref(a)("Medium (1-10MB)")),1),n.sizeFilter==="medium"?(e.openBlock(),e.createElementBlock("div",Is,[...w[7]||(w[7]=[e.createElementVNode("svg",{viewBox:"0 0 16 16",fill:"currentColor"},[e.createElementVNode("path",{d:"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"})],-1)])])):e.createCommentVNode("",!0)],2),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__search-modal__dropdown-option",{"vuefinder__search-modal__dropdown-option--selected":n.sizeFilter==="large"}]),onClick:w[3]||(w[3]=e.withModifiers(p=>v("size-large"),["stop"]))},[e.createElementVNode("span",null,e.toDisplayString(e.unref(a)("Large (> 10MB)")),1),n.sizeFilter==="large"?(e.openBlock(),e.createElementBlock("div",Os,[...w[8]||(w[8]=[e.createElementVNode("svg",{viewBox:"0 0 16 16",fill:"currentColor"},[e.createElementVNode("path",{d:"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"})],-1)])])):e.createCommentVNode("",!0)],2)])])])],40,Bs)):e.createCommentVNode("",!0)]))],64))}});function Rs(n){const[t,o]=Ps(n);if(!o||o==="/")return t+"://";const r=o.replace(/\/+$/,""),l=r.lastIndexOf("/");return l===0?t+"://":t+":/"+r.slice(0,l)}function Ps(n){const t=n.indexOf(":/");return t===-1?[void 0,n]:[n.slice(0,t),n.slice(t+2)||"/"]}function fn(n,t=40){const o=n.match(/^([^:]+:\/\/)(.*)$/);if(!o)return n;const r=o[1],l=o[2]??"",s=l.split("/").filter(Boolean),a=s.pop();if(!a)return r+l;let c=`${r}${s.join("/")}${s.length?"/":""}${a}`;if(c.length<=t)return c;const d=a.split(/\.(?=[^\.]+$)/),u=d[0]??"",m=d[1]??"",i=u.length>10?`${u.slice(0,6)}...${u.slice(-5)}`:u,v=m?`${i}.${m}`:i;return c=`${r}${s.join("/")}${s.length?"/":""}${v}`,c.length>t&&(c=`${r}.../${v}`),c}async function pn(n){try{await navigator.clipboard.writeText(n)}catch{const o=document.createElement("textarea");o.value=n,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o)}}async function Me(n){await pn(n)}async function zs(n){await pn(n)}const Hs={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 448 512"};function Us(n,t){return e.openBlock(),e.createElementBlock("svg",Hs,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M8 256a56 56 0 1 1 112 0 56 56 0 1 1-112 0m160 0a56 56 0 1 1 112 0 56 56 0 1 1-112 0m216-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112"},null,-1)])])}const vn={render:Us},js=["title"],Ks={class:"vuefinder__search-modal__result-icon"},Ws={class:"vuefinder__search-modal__result-content"},Gs={class:"vuefinder__search-modal__result-name"},qs={key:0,class:"vuefinder__search-modal__result-size"},Ys=["title"],Qs=["title"],Xs=["data-item-dropdown","data-theme"],Js={class:"vuefinder__search-modal__item-dropdown-content"},Zs=e.defineComponent({name:"SearchResultItem",__name:"SearchResultItem",props:{item:{},index:{},selectedIndex:{},expandedPaths:{},activeDropdown:{},selectedItemDropdownOption:{}},emits:["select","selectWithDropdown","togglePathExpansion","toggleItemDropdown","update:selectedItemDropdownOption","copyPath","openContainingFolder","preview"],setup(n,{emit:t}){const o=n,r=t,l=e.inject("ServiceContainer"),{t:s}=l.i18n,c=l.config.get("theme"),d=e.ref(null);let u=null;e.watch(()=>o.activeDropdown,p=>{u&&(u(),u=null),p===o.item.path&&d.value&&e.nextTick(()=>{_(o.item.path,d.value)})}),e.onUnmounted(()=>{u&&(u(),u=null)});const m=p=>o.expandedPaths.has(p),i=p=>p.type==="dir"||!p.file_size?"":vt(p.file_size),v=(p,g)=>{g.stopPropagation(),r("toggleItemDropdown",p,g)},_=async(p,g)=>{const C=document.querySelector(`[data-item-dropdown="${p}"]`);if(!(!C||!g)&&(await e.nextTick(),!(!C||!g))){Object.assign(C.style,{position:"fixed",zIndex:"10001",opacity:"0",transform:"translateY(-8px)",transition:"opacity 150ms ease-out, transform 150ms ease-out"});try{const{x:N,y:B}=await qe(g,C,{placement:"left-start",middleware:[Ke(8),Ge({padding:16}),We({padding:16})]});Object.assign(C.style,{left:`${N}px`,top:`${B}px`}),requestAnimationFrame(()=>{C&&Object.assign(C.style,{opacity:"1",transform:"translateY(0)"})})}catch(N){console.warn("Floating UI initial positioning error:",N);return}try{u=mn(g,C,async()=>{if(!(!g||!C))try{const{x:N,y:B}=await qe(g,C,{placement:"left-start",middleware:[Ke(8),Ge({padding:16}),We({padding:16})]});Object.assign(C.style,{left:`${N}px`,top:`${B}px`})}catch(N){console.warn("Floating UI positioning error:",N)}})}catch(N){console.warn("Floating UI autoUpdate setup error:",N),u=null}}},V=p=>{r("update:selectedItemDropdownOption",p)},b=async p=>{await Me(p.path),r("copyPath",p)},h=p=>{r("openContainingFolder",p)},f=p=>{r("preview",p)},w=p=>{if(!o.activeDropdown)return;const g=["copy-path","open-folder","preview"],C=o.selectedItemDropdownOption,N=g.findIndex(B=>C?.includes(B));if(p.key==="ArrowDown"){p.preventDefault();const B=(N+1)%g.length;r("update:selectedItemDropdownOption",`${g[B]||""}-${o.activeDropdown}`)}else if(p.key==="ArrowUp"){p.preventDefault();const B=N<=0?g.length-1:N-1;r("update:selectedItemDropdownOption",`${g[B]||""}-${o.activeDropdown}`)}else p.key==="Enter"?(p.preventDefault(),C&&(C.includes("copy-path")?b(o.item):C.includes("open-folder")?h(o.item):C.includes("preview")&&f(o.item))):p.key==="Escape"&&(p.preventDefault(),r("update:selectedItemDropdownOption",null))};return(p,g)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__search-modal__result-item",{"vuefinder__search-modal__result-item--selected":n.index===n.selectedIndex}]),title:n.item.basename,onClick:g[9]||(g[9]=C=>r("select",n.index))},[e.createElementVNode("div",Ks,[n.item.type==="dir"?(e.openBlock(),e.createBlock(e.unref(_e),{key:0})):(e.openBlock(),e.createBlock(e.unref(Pe),{key:1}))]),e.createElementVNode("div",Ws,[e.createElementVNode("div",Gs,[e.createTextVNode(e.toDisplayString(n.item.basename)+" ",1),i(n.item)?(e.openBlock(),e.createElementBlock("span",qs,e.toDisplayString(i(n.item)),1)):e.createCommentVNode("",!0)]),e.createElementVNode("div",{class:"vuefinder__search-modal__result-path",onClick:g[0]||(g[0]=e.withModifiers(C=>{r("select",n.index),r("togglePathExpansion",n.item.path)},["stop"])),title:n.item.path},e.toDisplayString(m(n.item.path)?n.item.path:e.unref(fn)(n.item.path)),9,Ys)]),e.createElementVNode("button",{ref_key:"buttonElementRef",ref:d,class:"vuefinder__search-modal__result-actions",onClick:g[1]||(g[1]=C=>{r("selectWithDropdown",n.index),v(n.item.path,C)}),title:e.unref(s)("More actions")},[e.createVNode(e.unref(vn),{class:"vuefinder__search-modal__result-actions-icon"})],8,Qs),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[n.activeDropdown===n.item.path?(e.openBlock(),e.createElementBlock("div",{key:0,"data-item-dropdown":n.item.path,class:"vuefinder__themer vuefinder__search-modal__item-dropdown vuefinder__search-modal__item-dropdown--visible","data-theme":e.unref(c),onClick:g[8]||(g[8]=e.withModifiers(()=>{},["stop"])),onKeydown:w,tabindex:"-1"},[e.createElementVNode("div",Js,[e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__search-modal__item-dropdown-option",{"vuefinder__search-modal__item-dropdown-option--selected":n.selectedItemDropdownOption===`copy-path-${n.item.path}`}]),onClick:g[2]||(g[2]=C=>{V(`copy-path-${n.item.path}`),b(n.item)}),onFocus:g[3]||(g[3]=C=>V(`copy-path-${n.item.path}`))},[g[10]||(g[10]=e.createElementVNode("svg",{class:"vuefinder__search-modal__item-dropdown-icon",viewBox:"0 0 16 16",fill:"currentColor"},[e.createElementVNode("path",{d:"M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H6z"}),e.createElementVNode("path",{d:"M2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1H2z"})],-1)),e.createElementVNode("span",null,e.toDisplayString(e.unref(s)("Copy Path")),1)],34),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__search-modal__item-dropdown-option",{"vuefinder__search-modal__item-dropdown-option--selected":n.selectedItemDropdownOption===`open-folder-${n.item.path}`}]),onClick:g[4]||(g[4]=C=>{V(`open-folder-${n.item.path}`),h(n.item)}),onFocus:g[5]||(g[5]=C=>V(`open-folder-${n.item.path}`))},[e.createVNode(e.unref(_e),{class:"vuefinder__search-modal__item-dropdown-icon"}),e.createElementVNode("span",null,e.toDisplayString(e.unref(s)("Open Containing Folder")),1)],34),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__search-modal__item-dropdown-option",{"vuefinder__search-modal__item-dropdown-option--selected":n.selectedItemDropdownOption===`preview-${n.item.path}`}]),onClick:g[6]||(g[6]=C=>{V(`preview-${n.item.path}`),f(n.item)}),onFocus:g[7]||(g[7]=C=>V(`preview-${n.item.path}`))},[e.createVNode(e.unref(Pe),{class:"vuefinder__search-modal__item-dropdown-icon"}),e.createElementVNode("span",null,e.toDisplayString(e.unref(s)("Preview")),1)],34)])],40,Xs)):e.createCommentVNode("",!0)]))],10,js))}}),ei={key:0,class:"vuefinder__search-modal__searching"},ti={class:"vuefinder__search-modal__loading-icon"},ni={key:1,class:"vuefinder__search-modal__no-results"},oi={key:2,class:"vuefinder__search-modal__results-list"},ri={class:"vuefinder__search-modal__results-header"},ye=60,Ht=5,li=e.defineComponent({name:"SearchResultsList",__name:"SearchResultsList",props:{searchResults:{},isSearching:{type:Boolean},selectedIndex:{},expandedPaths:{},activeDropdown:{},selectedItemDropdownOption:{},resultsEnter:{type:Boolean}},emits:["selectResultItem","selectResultItemWithDropdown","togglePathExpansion","toggleItemDropdown","update:selectedItemDropdownOption","copyPath","openContainingFolder","preview"],setup(n,{expose:t,emit:o}){const r=n,l=o,s=e.inject("ServiceContainer"),{t:a}=s.i18n,c=e.useTemplateRef("scrollableContainer"),d=e.computed(()=>r.searchResults.length>0),u=e.computed(()=>r.searchResults.length),m=e.ref(0),i=e.ref(600),v=e.computed(()=>r.searchResults.length*ye),_=e.computed(()=>{const p=Math.max(0,Math.floor(m.value/ye)-Ht),g=Math.min(r.searchResults.length,Math.ceil((m.value+i.value)/ye)+Ht);return{start:p,end:g}}),V=e.computed(()=>{const{start:p,end:g}=_.value;return r.searchResults.slice(p,g).map((C,N)=>({item:C,index:p+N,top:(p+N)*ye}))}),b=p=>{const g=p.target;m.value=g.scrollTop},h=()=>{c.value&&(i.value=c.value.clientHeight)},f=()=>{if(r.selectedIndex>=0&&c.value){const p=r.selectedIndex*ye,g=p+ye,C=c.value.scrollTop,N=c.value.clientHeight,B=C+N;let A=C;p<C?A=p:g>B&&(A=g-N),A!==C&&c.value.scrollTo({top:A,behavior:"smooth"})}},w=()=>{c.value&&(c.value.scrollTop=0,m.value=0)};return e.onMounted(()=>{h(),window.addEventListener("resize",h)}),e.onUnmounted(()=>{window.removeEventListener("resize",h)}),e.watch(()=>c.value,()=>{h()}),t({scrollSelectedIntoView:f,resetScroll:w,getContainerHeight:()=>i.value,scrollTop:()=>m.value}),(p,g)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__search-modal__results",{"vuefinder__search-modal__results--enter":n.resultsEnter}])},[n.isSearching?(e.openBlock(),e.createElementBlock("div",ei,[e.createElementVNode("div",ti,[e.createVNode(e.unref(tt),{class:"vuefinder__search-modal__loading-icon"})]),e.createElementVNode("span",null,e.toDisplayString(e.unref(a)("Searching...")),1)])):d.value?(e.openBlock(),e.createElementBlock("div",oi,[e.createElementVNode("div",ri,[e.createElementVNode("span",null,e.toDisplayString(e.unref(a)("Found %s results",u.value)),1)]),e.createElementVNode("div",{ref_key:"scrollableContainer",ref:c,class:"vuefinder__search-modal__results-scrollable",onScroll:b},[e.createElementVNode("div",{class:"vuefinder__search-modal__results-items",style:e.normalizeStyle({height:`${v.value}px`,position:"relative"})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(V.value,C=>(e.openBlock(),e.createElementBlock("div",{key:C.item.path,style:e.normalizeStyle({position:"absolute",top:`${C.top}px`,left:"0",width:"100%",height:`${ye}px`})},[e.createVNode(Zs,{item:C.item,index:C.index,"selected-index":n.selectedIndex,"expanded-paths":n.expandedPaths,"active-dropdown":n.activeDropdown,"selected-item-dropdown-option":n.selectedItemDropdownOption,onSelect:g[0]||(g[0]=N=>l("selectResultItem",N)),onSelectWithDropdown:g[1]||(g[1]=N=>l("selectResultItemWithDropdown",N)),onTogglePathExpansion:g[2]||(g[2]=N=>l("togglePathExpansion",N)),onToggleItemDropdown:g[3]||(g[3]=(N,B)=>l("toggleItemDropdown",N,B)),"onUpdate:selectedItemDropdownOption":g[4]||(g[4]=N=>l("update:selectedItemDropdownOption",N)),onCopyPath:g[5]||(g[5]=N=>l("copyPath",N)),onOpenContainingFolder:g[6]||(g[6]=N=>l("openContainingFolder",N)),onPreview:g[7]||(g[7]=N=>l("preview",N))},null,8,["item","index","selected-index","expanded-paths","active-dropdown","selected-item-dropdown-option"])],4))),128))],4)],544)])):(e.openBlock(),e.createElementBlock("div",ni,[e.createElementVNode("span",null,e.toDisplayString(e.unref(a)("No results found")),1)]))],2))}}),ai={class:"vuefinder__search-modal"},si={class:"vuefinder__search-modal__content"},ii={class:"vuefinder__search-modal__search-bar"},ci={class:"vuefinder__search-modal__search-location"},di=["title"],ui=["disabled"],mi={key:0,class:"vuefinder__search-modal__folder-selector"},fi={class:"vuefinder__search-modal__folder-selector-content"},pi={key:1,class:"vuefinder__search-modal__instructions"},vi={class:"vuefinder__search-modal__instructions-tips"},_i={class:"vuefinder__search-modal__tip"},hi={class:"vuefinder__search-modal__tip"},xt=e.defineComponent({name:"ModalSearch",__name:"ModalSearch",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=e.ref(null),s=e.ref(null),a=e.ref(null),c=Jt("",300),d=e.ref([]),u=e.ref(!1),m=e.ref(-1),i=e.ref(!1),v=e.ref(!1),_=e.ref(null),V=e.ref("all"),b=e.ref(!1),h=e.ref(`size-${V.value}`),f=e.ref(null),w=e.ref(new Set),p=e.ref(null),g=L.useStore(r.path),C=y=>{w.value.has(y)?w.value.delete(y):w.value.add(y)},N=(y,k)=>{k&&typeof k.stopPropagation=="function"&&k.stopPropagation(),p.value===y?p.value=null:p.value=y},B=()=>{p.value=null},A=y=>{try{const k=y.dir||`${y.storage}://`;t.adapter.open(k),t.modal.close(),B()}catch{t.emitter.emit("vf-toast-push",{label:o("Failed to open containing folder")})}},T=y=>{t.modal.open(Je,{storage:g?.value?.storage??"local",item:y}),B()},H=y=>{m.value=y,B()},K=y=>{m.value=y},X=async y=>{await Me(y.path),B()};e.watch(c,async y=>{y.trim()?(await R(y.trim()),m.value=0):(d.value=[],u.value=!1,m.value=-1)}),e.watch(V,async y=>{h.value=`size-${y}`,c.value.trim()&&!v.value&&(await R(c.value.trim()),m.value=0)}),e.watch(b,async()=>{c.value.trim()&&!v.value&&(await R(c.value.trim()),m.value=0)});const R=async y=>{if(y){u.value=!0;try{const k=_.value?.path||g?.value?.path,x=await t.adapter.search({path:k,filter:y,deep:b.value,size:V.value});d.value=x||[],u.value=!1}catch(k){console.error("Search error:",k),d.value=[],u.value=!1}}};e.onMounted(()=>{document.addEventListener("click",E),h.value=`size-${V.value}`,e.nextTick(()=>{l.value&&l.value.focus()})});const j=()=>{v.value?(v.value=!1,c.value.trim()&&(R(c.value.trim()),m.value=0)):(i.value=!1,v.value=!0)},Y=y=>{y&&(_.value=y)},Q=y=>{y&&(Y(y),v.value=!1,c.value.trim()&&(R(c.value.trim()),m.value=0))};e.onUnmounted(()=>{document.removeEventListener("click",E),s.value&&s.value.cleanup()});const E=y=>{const k=y.target;if(i.value&&(k.closest(".vuefinder__search-modal__dropdown")||(i.value=!1,e.nextTick(()=>{l.value&&l.value.focus()}))),p.value){const x=k.closest(".vuefinder__search-modal__item-dropdown"),F=k.closest(".vuefinder__search-modal__result-item");!x&&!F&&B()}};return(y,k)=>(e.openBlock(),e.createBlock(de,{class:"vuefinder__search-modal-layout"},{default:e.withCtx(()=>[e.createElementVNode("div",ai,[e.createVNode(fe,{icon:e.unref(bt),title:e.unref(o)("Search files")},null,8,["icon","title"]),e.createElementVNode("div",si,[e.createElementVNode("div",ii,[e.createVNode(Ra,{ref_key:"searchInputRef",ref:l,modelValue:e.unref(c),"onUpdate:modelValue":k[0]||(k[0]=x=>e.isRef(c)?c.value=x:null),"is-searching":u.value,disabled:v.value},null,8,["modelValue","is-searching","disabled"]),e.createVNode(Ls,{ref_key:"searchOptionsDropdownRef",ref:s,visible:i.value,"onUpdate:visible":k[1]||(k[1]=x=>i.value=x),"size-filter":V.value,"onUpdate:sizeFilter":k[2]||(k[2]=x=>V.value=x),"selected-option":h.value,"onUpdate:selectedOption":k[3]||(k[3]=x=>h.value=x),disabled:v.value},null,8,["visible","size-filter","selected-option","disabled"])]),e.createElementVNode("div",{class:"vuefinder__search-modal__options",onClick:k[7]||(k[7]=e.withModifiers(()=>{},["stop"]))},[e.createElementVNode("div",ci,[e.createElementVNode("button",{onClick:e.withModifiers(j,["stop"]),class:e.normalizeClass(["vuefinder__search-modal__location-btn",{"vuefinder__search-modal__location-btn--open":v.value}])},[e.createVNode(e.unref(_e),{class:"vuefinder__search-modal__location-icon"}),e.createElementVNode("span",{class:"vuefinder__search-modal__location-text",title:_.value?.path||e.unref(g).path},e.toDisplayString(e.unref(fn)(_.value?.path||e.unref(g).path)),9,di),k[10]||(k[10]=e.createElementVNode("svg",{class:"vuefinder__search-modal__location-arrow",viewBox:"0 0 16 16",fill:"currentColor"},[e.createElementVNode("path",{d:"M4.427 7.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 7H4.604a.25.25 0 00-.177.427z"})],-1))],2)]),e.createElementVNode("label",{class:"vuefinder__search-modal__deep-search",onClick:k[6]||(k[6]=e.withModifiers(()=>{},["stop"]))},[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":k[4]||(k[4]=x=>b.value=x),type:"checkbox",disabled:v.value,class:"vuefinder__search-modal__checkbox",onClick:k[5]||(k[5]=e.withModifiers(()=>{},["stop"]))},null,8,ui),[[e.vModelCheckbox,b.value]]),e.createElementVNode("span",null,e.toDisplayString(e.unref(o)("Include subfolders")),1)])]),v.value?(e.openBlock(),e.createElementBlock("div",mi,[e.createElementVNode("div",fi,[e.createVNode(yt,{modelValue:_.value,"onUpdate:modelValue":[k[8]||(k[8]=x=>_.value=x),Y],"show-pinned-folders":!0,"current-path":e.unref(g),onSelectAndClose:Q},null,8,["modelValue","current-path"])])])):e.createCommentVNode("",!0),!e.unref(c).trim()&&!v.value?(e.openBlock(),e.createElementBlock("div",pi,[e.createElementVNode("div",vi,[e.createElementVNode("div",_i,[k[11]||(k[11]=e.createElementVNode("span",{class:"vuefinder__search-modal__tip-key"},"↑↓",-1)),e.createElementVNode("span",null,e.toDisplayString(e.unref(o)("Navigate results")),1)]),e.createElementVNode("div",hi,[k[12]||(k[12]=e.createElementVNode("span",{class:"vuefinder__search-modal__tip-key"},"Esc",-1)),e.createElementVNode("span",null,e.toDisplayString(e.unref(o)("Close search")),1)])])])):e.createCommentVNode("",!0),e.unref(c).trim()&&!v.value?(e.openBlock(),e.createBlock(li,{key:2,ref_key:"searchResultsListRef",ref:a,"search-results":d.value,"is-searching":u.value,"selected-index":m.value,"expanded-paths":w.value,"active-dropdown":p.value,"selected-item-dropdown-option":f.value,"results-enter":!0,onSelectResultItem:H,onSelectResultItemWithDropdown:K,onTogglePathExpansion:C,onToggleItemDropdown:N,"onUpdate:selectedItemDropdownOption":k[9]||(k[9]=x=>f.value=x),onCopyPath:X,onOpenContainingFolder:A,onPreview:T},null,8,["search-results","is-searching","selected-index","expanded-paths","active-dropdown","selected-item-dropdown-option"])):e.createCommentVNode("",!0)])])]),_:1}))}}),le={ESCAPE:"Escape",F2:"F2",F5:"F5",DELETE:"Delete",ENTER:"Enter",BACKSLASH:"Backslash",KEY_A:"KeyA",KEY_E:"KeyE",KEY_F:"KeyF",SPACE:"Space",KEY_C:"KeyC",KEY_X:"KeyX",KEY_V:"KeyV"};function gi(n){const t=n.fs,o=n.config,r=L.useStore(t.selectedItems),l=s=>{if(s.code===le.ESCAPE&&(n.modal.close(),n.root.focus()),!n.modal.visible){if(s.code===le.F2&&n.features.includes(z.RENAME)&&r.value.length===1&&n.modal.open(Xe,{items:r.value}),s.code===le.F5&&n.adapter.open(t.path.get().path),s.code===le.DELETE&&r.value.length===0&&n.modal.open(Qe,{items:r.value}),s.ctrlKey&&s.code===le.BACKSLASH&&n.modal.open(_t),s.ctrlKey&&s.code===le.KEY_F&&n.features.includes(z.SEARCH)&&(n.modal.open(xt),s.preventDefault()),s.ctrlKey&&s.code===le.KEY_E&&(o.toggle("showTreeView"),s.preventDefault()),s.ctrlKey&&s.code===le.ENTER&&(o.toggle("fullScreen"),n.root.focus()),s.ctrlKey&&s.code===le.KEY_A&&(t.selectAll(n.selectionMode||"multiple",n),s.preventDefault()),s.code===le.SPACE&&r.value.length===1&&r.value[0]?.type!=="dir"&&n.modal.open(Je,{storage:t.path.get().storage,item:r.value[0]}),s.metaKey&&s.code===le.KEY_C){if(r.value.length===0){n.emitter.emit("vf-toast-push",{type:"error",label:n.i18n.t("No items selected")});return}t.setClipboard("copy",new Set(r.value.map(a=>a.path))),n.emitter.emit("vf-toast-push",{label:r.value.length===1?n.i18n.t("Item copied to clipboard"):n.i18n.t("%s items copied to clipboard",r.value.length)}),s.preventDefault()}if(s.metaKey&&s.code===le.KEY_X){if(r.value.length===0){n.emitter.emit("vf-toast-push",{type:"error",label:n.i18n.t("No items selected")});return}t.setClipboard("cut",new Set(r.value.map(a=>a.path))),n.emitter.emit("vf-toast-push",{label:r.value.length===1?n.i18n.t("Item cut to clipboard"):n.i18n.t("%s items cut to clipboard",r.value.length)}),s.preventDefault()}if(s.metaKey&&s.code===le.KEY_V){if(t.getClipboard().items.size===0){n.emitter.emit("vf-toast-push",{type:"error",label:n.i18n.t("No items in clipboard")});return}if(t.getClipboard().path===t.path.get().path){n.emitter.emit("vf-toast-push",{type:"error",label:n.i18n.t("Cannot paste items to the same directory")});return}if(t.getClipboard().type==="cut"){n.modal.open(Ce,{items:{from:Array.from(t.getClipboard().items),to:t.path.get()}}),t.clearClipboard();return}if(t.getClipboard().type==="copy"){n.modal.open(kt,{items:{from:Array.from(t.getClipboard().items),to:t.path.get()}});return}s.preventDefault()}}};e.onMounted(()=>{n.root.addEventListener("keydown",l)}),e.onBeforeUnmount(()=>{n.root.removeEventListener("keydown",l)})}const Ct=async(n,t)=>{if(t){if(t.isFile){const o=await new Promise(r=>{t.file(r)});n(t,o)}if(t.isDirectory){const o=t.createReader(),r=await new Promise(l=>{o.readEntries(l)});for(const l of r)await Ct(n,l)}}};function wi(){const n=e.ref(!1),t=e.ref([]);return{isDraggingExternal:n,externalFiles:t,handleDragEnter:c=>{c.preventDefault(),c.stopPropagation();const d=c.dataTransfer?.items;d&&Array.from(d).some(m=>m.kind==="file")&&(n.value=!0,c.isExternalDrag=!0)},handleDragOver:c=>{n.value&&c.dataTransfer&&(c.dataTransfer.dropEffect="copy",c.preventDefault(),c.stopPropagation())},handleDragLeave:c=>{c.preventDefault();const d=c.currentTarget.getBoundingClientRect(),u=c.clientX,m=c.clientY;(u<d.left||u>d.right||m<d.top||m>d.bottom)&&(n.value=!1)},handleDrop:async c=>{c.preventDefault(),c.stopPropagation(),n.value=!1;const d=c.dataTransfer?.items;if(d){const u=Array.from(d).filter(m=>m.kind==="file");if(u.length>0){t.value=[];for(const m of u){const i=m.webkitGetAsEntry?.();if(i)await Ct((v,_)=>{t.value.push({name:_.name,size:_.size,type:_.type,lastModified:new Date(_.lastModified),file:_})},i);else{const v=m.getAsFile();v&&t.value.push({name:v.name,size:v.size,type:v.type,lastModified:new Date(v.lastModified),file:v})}}return t.value}}return[]},clearExternalFiles:()=>{t.value=[]}}}const yi={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function ki(n,t){return e.openBlock(),e.createElementBlock("svg",yi,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M12 10.5v6m3-3H9m4.06-7.19-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44z"},null,-1)])])}const _n={render:ki},bi={class:"vuefinder__new-folder-modal__content"},Ei={class:"vuefinder__new-folder-modal__form"},Vi={class:"vuefinder__new-folder-modal__description"},Ni=["placeholder"],St=e.defineComponent({__name:"ModalNewFolder",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=L.useStore(r.path),s=e.ref(""),a=e.ref(""),c=()=>{s.value!==""&&t.adapter.createFolder({path:l.value.path,name:s.value}).then(d=>{t.emitter.emit("vf-toast-push",{label:o("%s is created.",s.value)}),t.fs.setFiles(d.files),t.modal.close()}).catch(d=>{t.emitter.emit("vf-toast-push",{label:o(d.message),type:"error"})})};return(d,u)=>(e.openBlock(),e.createBlock(de,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:c,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Create")),1),e.createElementVNode("button",{type:"button",onClick:u[2]||(u[2]=m=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(fe,{icon:e.unref(_n),title:e.unref(o)("New Folder")},null,8,["icon","title"]),e.createElementVNode("div",bi,[e.createElementVNode("div",Ei,[e.createElementVNode("p",Vi,e.toDisplayString(e.unref(o)("Create a new folder")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":u[0]||(u[0]=m=>s.value=m),onKeyup:e.withKeys(c,["enter"]),class:"vuefinder__new-folder-modal__input",placeholder:e.unref(o)("Folder Name"),type:"text"},null,40,Ni),[[e.vModelText,s.value]]),a.value.length?(e.openBlock(),e.createBlock(e.unref(a),{key:0,onHidden:u[1]||(u[1]=m=>a.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),xi={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function Ci(n,t){return e.openBlock(),e.createElementBlock("svg",xi,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9"},null,-1)])])}const hn={render:Ci},Si={class:"vuefinder__new-file-modal__content"},Bi={class:"vuefinder__new-file-modal__form"},$i={class:"vuefinder__new-file-modal__description"},Di=["placeholder"],gn=e.defineComponent({__name:"ModalNewFile",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=L.useStore(r.path),s=e.ref(""),a=e.ref(""),c=()=>{s.value!==""&&t.adapter.createFile({path:l.value.path,name:s.value}).then(d=>{t.emitter.emit("vf-toast-push",{label:o("%s is created.",s.value)}),t.fs.setFiles(d.files),t.modal.close()}).catch(d=>{t.emitter.emit("vf-toast-push",{label:o(d.message),type:"error"})})};return(d,u)=>(e.openBlock(),e.createBlock(de,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:c,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Create")),1),e.createElementVNode("button",{type:"button",onClick:u[2]||(u[2]=m=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(fe,{icon:e.unref(hn),title:e.unref(o)("New File")},null,8,["icon","title"]),e.createElementVNode("div",Si,[e.createElementVNode("div",Bi,[e.createElementVNode("p",$i,e.toDisplayString(e.unref(o)("Create a new file")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":u[0]||(u[0]=m=>s.value=m),onKeyup:e.withKeys(c,["enter"]),class:"vuefinder__new-file-modal__input",placeholder:e.unref(o)("File Name"),type:"text"},null,40,Di),[[e.vModelText,s.value]]),a.value.length?(e.openBlock(),e.createBlock(e.unref(a),{key:0,onHidden:u[1]||(u[1]=m=>a.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),Ti=["title"],Fi=e.defineComponent({__name:"Message",props:{error:{type:Boolean}},emits:["hidden"],setup(n,{emit:t}){const o=t,r=e.inject("ServiceContainer"),{t:l}=r.i18n,s=e.ref(!1),a=e.ref(null),c=e.ref(a.value?.innerHTML);e.watch(c,()=>s.value=!1);const d=()=>{o("hidden"),s.value=!0};return(u,m)=>(e.openBlock(),e.createElementBlock("div",null,[s.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"strMessage",ref:a,class:e.normalizeClass(["vuefinder__message",n.error?"vuefinder__message--error":"vuefinder__message--success"])},[e.renderSlot(u.$slots,"default"),e.createElementVNode("div",{class:"vuefinder__message__close",onClick:d,title:e.unref(l)("Close")},[...m[0]||(m[0]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"vuefinder__message__icon"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Ti)],2))]))}}),ne={PENDING:0,CANCELED:1,UPLOADING:2,ERROR:3,DONE:10};function Mi(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=L.useStore(r.path),s=t.config,a=e.ref({QUEUE_ENTRY_STATUS:ne}),c=e.ref(null),d=e.ref(null),u=e.ref(null),m=e.ref(null),i=e.ref(null),v=e.ref([]),_=e.ref(""),V=e.ref(!1),b=e.ref(!1),h=e.ref(null);let f;const w=E=>{E.preventDefault(),E.stopPropagation(),b.value=!0},p=E=>{E.preventDefault(),E.stopPropagation(),b.value=!0},g=E=>{E.preventDefault(),E.stopPropagation(),(!E.relatedTarget||E.relatedTarget===document.body)&&(b.value=!1)},C=E=>{E.preventDefault(),E.stopPropagation(),b.value=!1;const y=/^[/\\](.+)/,k=E.dataTransfer;k&&(k.items&&k.items.length?Array.from(k.items).forEach(x=>{if(x.kind==="file"){const F=x.webkitGetAsEntry?.();if(F)Ct((O,q)=>{const G=y.exec(O?.fullPath||"");B(q,G?G[1]:q.name)},F);else{const O=x.getAsFile?.();O&&B(O)}}}):k.files&&k.files.length&&Array.from(k.files).forEach(x=>B(x)))},N=E=>v.value.findIndex(y=>y.id===E),B=(E,y)=>f.addFile({name:y||E.name,type:E.type,data:E,source:"Local"}),A=E=>E.status===ne.DONE?"text-green-600":E.status===ne.ERROR||E.status===ne.CANCELED?"text-red-600":"",T=E=>E.status===ne.DONE?"✓":E.status===ne.ERROR||E.status===ne.CANCELED?"!":"...",H=()=>m.value?.click(),K=()=>t.modal.close(),X=E=>{if(V.value||!v.value.filter(y=>y.status!==ne.DONE).length){V.value||(_.value=o("Please select file to upload first."));return}_.value="",h.value=E||l.value,f.upload()},R=()=>{f.cancelAll(),v.value.forEach(E=>{E.status!==ne.DONE&&(E.status=ne.CANCELED,E.statusName=o("Canceled"))}),V.value=!1},j=E=>{V.value||(f.removeFile(E.id),v.value.splice(N(E.id),1))},Y=E=>{if(!V.value)if(f.cancelAll(),E){const y=v.value.filter(k=>k.status!==ne.DONE);v.value=[],y.forEach(k=>B(k.originalFile,k.name))}else v.value=[]},Q=E=>{E.forEach(y=>{B(y)})};return e.onMounted(()=>{f=new Tn({debug:t.debug,restrictions:{maxFileSize:Rn(s.maxFileSize??"10mb")},locale:t.i18n.t("uppy"),onBeforeFileAdded:(x,F)=>{if(F[x.id]!=null){const q=N(x.id);v.value[q]?.status===ne.PENDING&&(_.value=f.i18n("noDuplicates",{fileName:x.name})),v.value=v.value.filter(G=>G.id!==x.id)}return v.value.push({id:x.id,name:x.name,size:t.filesize(x.size),status:ne.PENDING,statusName:o("Pending upload"),percent:null,originalFile:x.data}),!0}});const E={getTargetPath:()=>(h.value||l.value).path};if(n)n(f,E);else if(t.adapter.getAdapter().configureUploader)t.adapter.getAdapter().configureUploader(f,E);else throw new Error("No uploader configured");f.on("restriction-failed",(x,F)=>{const O=v.value[N(x.id)];O&&j(O),_.value=F.message}),f.on("upload-progress",(x,F)=>{const O=F.bytesTotal??1,q=Math.floor(F.bytesUploaded/O*100),G=N(x.id);G!==-1&&v.value[G]&&(v.value[G].percent=`${q}%`)}),f.on("upload-success",x=>{const F=v.value[N(x.id)];F&&(F.status=ne.DONE,F.statusName=o("Done"))}),f.on("upload-error",(x,F)=>{const O=v.value[N(x.id)];O&&(O.percent=null,O.status=ne.ERROR,O.statusName=F?.isNetworkError?o("Network Error, Unable establish connection to the server or interrupted."):F?.message||o("Unknown Error"))}),f.on("error",x=>{_.value=x.message,V.value=!1,t.adapter.open(l.value.path)}),f.on("complete",()=>{V.value=!1;const x=h.value||l.value;t.adapter.invalidateListQuery(x.path),t.adapter.open(x.path);const F=v.value.filter(O=>O.status===ne.DONE).map(O=>O.name);t.emitter.emit("vf-upload-complete",F)}),m.value?.addEventListener("click",()=>d.value?.click()),i.value?.addEventListener("click",()=>u.value?.click());const y={capture:!0};document.addEventListener("dragover",w,y),document.addEventListener("dragenter",p,y),document.addEventListener("dragleave",g,y),document.addEventListener("drop",C,y);const k=x=>{const F=x.target,O=F.files;if(O){for(const q of O)B(q);F.value=""}};d.value?.addEventListener("change",k),u.value?.addEventListener("change",k)}),e.onUnmounted(()=>{const E={capture:!0};document.removeEventListener("dragover",w,E),document.removeEventListener("dragenter",p,E),document.removeEventListener("dragleave",g,E),document.removeEventListener("drop",C,E)}),{container:c,internalFileInput:d,internalFolderInput:u,pickFiles:m,pickFolders:i,queue:v,message:_,uploading:V,hasFilesInDropArea:b,definitions:a,openFileSelector:H,upload:X,cancel:R,remove:j,clear:Y,close:K,getClassNameForEntry:A,getIconForEntry:T,addExternalFiles:Q}}function pt(n,t=14){const o=`((?=([\\w\\W]{0,${t}}))([\\w\\W]{${t+1},})([\\w\\W]{8,}))`;return n.replace(new RegExp(o),"$2..$4")}const Ai={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function Ii(n,t){return e.openBlock(),e.createElementBlock("svg",Ai,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"},null,-1)])])}const wn={render:Ii},Oi={class:"vuefinder__upload-modal__content relative"},Li={class:"vuefinder__upload-modal__target-section"},Ri={class:"vuefinder__upload-modal__target-label"},Pi={class:"vuefinder__upload-modal__target-container"},zi={class:"vuefinder__upload-modal__target-path"},Hi={class:"vuefinder__upload-modal__target-storage"},Ui={key:0,class:"vuefinder__upload-modal__target-folder"},ji={class:"vuefinder__upload-modal__target-badge"},Ki={class:"vuefinder__upload-modal__drag-hint"},Wi={class:"vuefinder__upload-modal__file-list vf-scrollbar"},Gi=["textContent"],qi={class:"vuefinder__upload-modal__file-info"},Yi={class:"vuefinder__upload-modal__file-name hidden md:block"},Qi={class:"vuefinder__upload-modal__file-name md:hidden"},Xi={key:0,class:"ml-auto"},Ji=["title","disabled","onClick"],Zi={key:0,class:"py-2"},ec=["aria-expanded"],tc={key:0,class:"vuefinder__upload-actions__menu left-0 right-0 absolute bottom-full mb-2"},nc=["disabled"],oc=["disabled"],rc=["disabled"],lc=["aria-expanded"],ac={key:0,class:"vuefinder__upload-actions__menu absolute bottom-full mb-2 left-0"},sc=["disabled"],ic=["disabled"],Bt=e.defineComponent({__name:"ModalUpload",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=L.useStore(r.path),s=e.ref(l.value),a=e.ref(!1),c=()=>{const E=s.value.path;if(!E)return{storage:"local",path:""};if(E.endsWith("://"))return{storage:E.replace("://",""),path:""};const y=E.split("://");return{storage:y[0]||"local",path:y[1]||""}},d=E=>{E&&(s.value=E)},u=E=>{E&&(s.value=E,a.value=!1)},{container:m,internalFileInput:i,internalFolderInput:v,pickFiles:_,queue:V,message:b,uploading:h,hasFilesInDropArea:f,definitions:w,openFileSelector:p,upload:g,cancel:C,remove:N,clear:B,close:A,getClassNameForEntry:T,getIconForEntry:H,addExternalFiles:K}=Mi(t.customUploader),X=()=>{g(s.value)};e.onMounted(()=>{t.emitter.on("vf-external-files-dropped",E=>{K(E)})}),e.onUnmounted(()=>{t.emitter.off("vf-external-files-dropped")});const R=e.ref(!1),j=e.ref(null),Y=e.ref(null),Q=E=>{if(!R.value)return;const y=E.target,k=j.value?.contains(y)??!1,x=Y.value?.contains(y)??!1;!k&&!x&&(R.value=!1)};return e.onMounted(()=>document.addEventListener("click",Q)),e.onUnmounted(()=>document.removeEventListener("click",Q)),(E,y)=>(e.openBlock(),e.createBlock(de,{showDragOverlay:e.unref(f),dragOverlayText:e.unref(o)("Drag and drop the files/folders to here.")},{buttons:e.withCtx(()=>[e.createElementVNode("div",{class:"sm:hidden relative w-full mb-2",ref_key:"actionsMenuMobileRef",ref:j},[e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__upload-actions","vuefinder__upload-actions--block",R.value?"vuefinder__upload-actions--ring":""])},[e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__main",onClick:y[3]||(y[3]=k=>e.unref(p)())},e.toDisplayString(e.unref(o)("Select Files")),1),e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__trigger",onClick:y[4]||(y[4]=e.withModifiers(k=>R.value=!R.value,["stop"])),"aria-haspopup":"menu","aria-expanded":R.value?"true":"false"},[...y[17]||(y[17]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z","clip-rule":"evenodd"})],-1)])],8,ec)],2),R.value?(e.openBlock(),e.createElementBlock("div",tc,[e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__item",onClick:y[5]||(y[5]=k=>{e.unref(p)(),R.value=!1})},e.toDisplayString(e.unref(o)("Select Files")),1),e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__item",onClick:y[6]||(y[6]=k=>{e.unref(v)?.click(),R.value=!1})},e.toDisplayString(e.unref(o)("Select Folders")),1),y[18]||(y[18]=e.createElementVNode("div",{class:"vuefinder__upload-actions__separator"},null,-1)),e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__item",disabled:e.unref(h),onClick:y[7]||(y[7]=k=>{e.unref(B)(!1),R.value=!1})},e.toDisplayString(e.unref(o)("Clear all")),9,nc),e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__item",disabled:e.unref(h),onClick:y[8]||(y[8]=k=>{e.unref(B)(!0),R.value=!1})},e.toDisplayString(e.unref(o)("Clear only successful")),9,oc)])):e.createCommentVNode("",!0)],512),e.createElementVNode("button",{type:"button",class:"vf-btn vf-btn-primary",disabled:e.unref(h)||!e.unref(V).length,onClick:e.withModifiers(X,["prevent"])},e.toDisplayString(e.unref(o)("Upload")),9,rc),e.unref(h)?(e.openBlock(),e.createElementBlock("button",{key:0,type:"button",class:"vf-btn vf-btn-secondary",onClick:y[9]||(y[9]=e.withModifiers((...k)=>e.unref(C)&&e.unref(C)(...k),["prevent"]))},e.toDisplayString(e.unref(o)("Cancel")),1)):(e.openBlock(),e.createElementBlock("button",{key:1,type:"button",class:"vf-btn vf-btn-secondary",onClick:y[10]||(y[10]=e.withModifiers((...k)=>e.unref(A)&&e.unref(A)(...k),["prevent"]))},e.toDisplayString(e.unref(o)("Close")),1)),e.createElementVNode("div",{class:"hidden sm:block relative mr-auto",ref_key:"actionsMenuDesktopRef",ref:Y},[e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__upload-actions",R.value?"vuefinder__upload-actions--ring":""])},[e.createElementVNode("button",{ref_key:"pickFiles",ref:_,type:"button",class:"vuefinder__upload-actions__main"},e.toDisplayString(e.unref(o)("Select Files")),513),e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__trigger",onClick:y[11]||(y[11]=e.withModifiers(k=>R.value=!R.value,["stop"])),"aria-haspopup":"menu","aria-expanded":R.value?"true":"false"},[...y[19]||(y[19]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z","clip-rule":"evenodd"})],-1)])],8,lc)],2),R.value?(e.openBlock(),e.createElementBlock("div",ac,[e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__item",onClick:y[12]||(y[12]=k=>{e.unref(p)(),R.value=!1})},e.toDisplayString(e.unref(o)("Select Files")),1),e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__item",onClick:y[13]||(y[13]=k=>{e.unref(v)?.click(),R.value=!1})},e.toDisplayString(e.unref(o)("Select Folders")),1),y[20]||(y[20]=e.createElementVNode("div",{class:"vuefinder__upload-actions__separator"},null,-1)),e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__item",disabled:e.unref(h),onClick:y[14]||(y[14]=k=>{e.unref(B)(!1),R.value=!1})},e.toDisplayString(e.unref(o)("Clear all")),9,sc),e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__item",disabled:e.unref(h),onClick:y[15]||(y[15]=k=>{e.unref(B)(!0),R.value=!1})},e.toDisplayString(e.unref(o)("Clear only successful")),9,ic)])):e.createCommentVNode("",!0)],512)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(fe,{icon:e.unref(wn),title:e.unref(o)("Upload Files")},null,8,["icon","title"]),e.createElementVNode("div",Oi,[e.createElementVNode("div",Li,[e.createElementVNode("div",Ri,e.toDisplayString(e.unref(o)("Hedef Klasör")),1),e.createElementVNode("div",Pi,[e.createElementVNode("div",{class:"vuefinder__upload-modal__target-display",onClick:y[0]||(y[0]=k=>a.value=!a.value)},[e.createElementVNode("div",zi,[e.createElementVNode("span",Hi,e.toDisplayString(c().storage)+"://",1),c().path?(e.openBlock(),e.createElementBlock("span",Ui,e.toDisplayString(c().path),1)):e.createCommentVNode("",!0)]),e.createElementVNode("span",ji,e.toDisplayString(e.unref(o)("Browse")),1)])]),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__upload-modal__tree-selector",a.value?"vuefinder__upload-modal__tree-selector--expanded":"vuefinder__upload-modal__tree-selector--collapsed"])},[e.createVNode(yt,{modelValue:s.value,"onUpdate:modelValue":[y[1]||(y[1]=k=>s.value=k),d],"show-pinned-folders":!0,onSelectAndClose:u},null,8,["modelValue"])],2)]),e.createElementVNode("div",Ki,e.toDisplayString(e.unref(o)("You can drag & drop files anywhere while this modal is open.")),1),e.createElementVNode("div",{ref_key:"container",ref:m,class:"hidden"},null,512),e.createElementVNode("div",Wi,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(V),k=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__upload-modal__file-entry",key:k.id},[e.createElementVNode("span",{class:e.normalizeClass(["vuefinder__upload-modal__file-icon",e.unref(T)(k)])},[e.createElementVNode("span",{class:"vuefinder__upload-modal__file-icon-text",textContent:e.toDisplayString(e.unref(H)(k))},null,8,Gi)],2),e.createElementVNode("div",qi,[e.createElementVNode("div",Yi,e.toDisplayString(e.unref(pt)(k.name,40))+" ("+e.toDisplayString(k.size)+") ",1),e.createElementVNode("div",Qi,e.toDisplayString(e.unref(pt)(k.name,16))+" ("+e.toDisplayString(k.size)+") ",1),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__upload-modal__file-status",e.unref(T)(k)])},[e.createTextVNode(e.toDisplayString(k.statusName)+" ",1),k.status===e.unref(w).QUEUE_ENTRY_STATUS.UPLOADING?(e.openBlock(),e.createElementBlock("b",Xi,e.toDisplayString(k.percent),1)):e.createCommentVNode("",!0)],2)]),e.createElementVNode("button",{type:"button",class:e.normalizeClass(["vuefinder__upload-modal__file-remove",e.unref(h)?"disabled":""]),title:e.unref(o)("Delete"),disabled:e.unref(h),onClick:x=>e.unref(N)(k)},[...y[16]||(y[16]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"vuefinder__upload-modal__file-remove-icon"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])],10,Ji)]))),128)),e.unref(V).length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",Zi,e.toDisplayString(e.unref(o)("No files selected!")),1))]),e.unref(b).length?(e.openBlock(),e.createBlock(Fi,{key:0,onHidden:y[2]||(y[2]=k=>b.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(b)),1)]),_:1})):e.createCommentVNode("",!0)])]),e.createElementVNode("input",{ref_key:"internalFileInput",ref:i,type:"file",multiple:"",class:"hidden"},null,512),e.createElementVNode("input",{ref_key:"internalFolderInput",ref:v,type:"file",multiple:"",webkitdirectory:"",class:"hidden"},null,512)]),_:1},8,["showDragOverlay","dragOverlayText"]))}}),cc={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function dc(n,t){return e.openBlock(),e.createElementBlock("svg",cc,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5m6 4.125 2.25 2.25m0 0 2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125"},null,-1)])])}const yn={render:dc},uc={class:"vuefinder__unarchive-modal__content"},mc={class:"vuefinder__unarchive-modal__items"},fc={key:0,class:"vuefinder__unarchive-modal__icon vuefinder__unarchive-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},pc={key:1,class:"vuefinder__unarchive-modal__icon vuefinder__unarchive-modal__icon--file",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},vc={class:"vuefinder__unarchive-modal__item-name"},_c={class:"vuefinder__unarchive-modal__info"},$t=e.defineComponent({__name:"ModalUnarchive",setup(n){const t=e.inject("ServiceContainer"),o=t.fs,r=L.useStore(o.path),{t:l}=t.i18n,s=e.ref(t.modal.data.items[0]),a=e.ref(""),c=e.ref([]),d=()=>{t.adapter.unarchive({item:s.value.path,path:r.value.path}).then(u=>{t.emitter.emit("vf-toast-push",{label:l("The file unarchived.")}),t.fs.setFiles(u.files),t.modal.close()}).catch(u=>{t.emitter.emit("vf-toast-push",{label:l(u.message),type:"error"})})};return(u,m)=>(e.openBlock(),e.createBlock(de,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:d,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(l)("Unarchive")),1),e.createElementVNode("button",{type:"button",onClick:m[1]||(m[1]=i=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(l)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(fe,{icon:e.unref(yn),title:e.unref(l)("Unarchive")},null,8,["icon","title"]),e.createElementVNode("div",uc,[e.createElementVNode("div",mc,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,i=>(e.openBlock(),e.createElementBlock("p",{class:"vuefinder__unarchive-modal__item",key:i.path},[i.type==="dir"?(e.openBlock(),e.createElementBlock("svg",fc,[...m[2]||(m[2]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",pc,[...m[3]||(m[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),e.createElementVNode("span",vc,e.toDisplayString(i.basename),1)]))),128)),e.createElementVNode("p",_c,e.toDisplayString(e.unref(l)("The archive will be unarchived at"))+" ("+e.toDisplayString(e.unref(r).path)+")",1),a.value.length?(e.openBlock(),e.createBlock(e.unref(a),{key:0,onHidden:m[0]||(m[0]=i=>a.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),hc={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",viewBox:"0 0 24 24"};function gc(n,t){return e.openBlock(),e.createElementBlock("svg",hc,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125"},null,-1)])])}const kn={render:gc},wc={class:"vuefinder__archive-modal__content"},yc={class:"vuefinder__archive-modal__form"},kc={class:"vuefinder__archive-modal__files vf-scrollbar"},bc={key:0,class:"vuefinder__archive-modal__icon vuefinder__archive-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Ec={key:1,class:"vuefinder__archive-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Vc={class:"vuefinder__archive-modal__file-name"},Nc=["placeholder"],Dt=e.defineComponent({__name:"ModalArchive",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=L.useStore(r.path),s=e.ref(""),a=e.ref(""),c=e.ref(t.modal.data.items),d=()=>{c.value.length&&t.adapter.archive({path:l.value.path,items:c.value.map(({path:u,type:m})=>({path:u,type:m})),name:s.value}).then(u=>{t.emitter.emit("vf-toast-push",{label:o("The file(s) archived.")}),t.fs.setFiles(u.files),t.modal.close()}).catch(u=>{t.emitter.emit("vf-toast-push",{label:o(u.message),type:"error"})})};return(u,m)=>(e.openBlock(),e.createBlock(de,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:d,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Archive")),1),e.createElementVNode("button",{type:"button",onClick:m[2]||(m[2]=i=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(fe,{icon:e.unref(kn),title:e.unref(o)("Archive the files")},null,8,["icon","title"]),e.createElementVNode("div",wc,[e.createElementVNode("div",yc,[e.createElementVNode("div",kc,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,i=>(e.openBlock(),e.createElementBlock("p",{class:"vuefinder__archive-modal__file",key:i.path},[i.type==="dir"?(e.openBlock(),e.createElementBlock("svg",bc,[...m[3]||(m[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",Ec,[...m[4]||(m[4]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),e.createElementVNode("span",Vc,e.toDisplayString(i.basename),1)]))),128))]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":m[0]||(m[0]=i=>s.value=i),onKeyup:e.withKeys(d,["enter"]),class:"vuefinder__archive-modal__input",placeholder:e.unref(o)("Archive name. (.zip file will be created)"),type:"text"},null,40,Nc),[[e.vModelText,s.value]]),a.value.length?(e.openBlock(),e.createBlock(e.unref(a),{key:0,onHidden:m[1]||(m[1]=i=>a.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),xc={class:"vuefinder__menubar__container"},Cc=["onClick","onMouseenter"],Sc={class:"vuefinder__menubar__label"},Bc=["onMouseenter"],$c=["onClick"],Dc={key:0,class:"vuefinder__menubar__dropdown__label"},Tc={key:1,class:"vuefinder__menubar__dropdown__checkmark"},Fc=e.defineComponent({__name:"MenuBar",setup(n){const t=e.inject("ServiceContainer");if(!t)throw new Error("MenuBar: ServiceContainer not found");const{t:o}=t?.i18n||{t:f=>f},r=t?.fs,l=t?.config,s=L.useStore(l?.state||{}),a=L.useStore(r?.selectedItems||[]),c=L.useStore(r?.storages||[]),d=e.ref(null),u=e.ref(!1),m=e.computed(()=>window.opener!==null||window.name!==""||window.history.length<=1),i=e.computed(()=>[{id:"file",label:o("File"),items:[{id:"new-folder",label:o("New Folder"),action:()=>t?.modal?.open(St,{items:a.value}),enabled:()=>t?.features?.includes(z.NEW_FOLDER)||!1},{id:"new-file",label:o("New File"),action:()=>t?.modal?.open(gn,{items:a.value}),enabled:()=>t?.features?.includes(z.NEW_FILE)||!1},{type:"separator"},{id:"upload",label:o("Upload"),action:()=>t?.modal?.open(Bt,{items:a.value}),enabled:()=>t?.features?.includes(z.UPLOAD)||!1},{type:"separator"},{id:"search",label:o("Search"),action:()=>t.modal.open(xt),enabled:()=>t?.features?.includes(z.SEARCH)},{type:"separator"},{id:"archive",label:o("Archive"),action:()=>{a.value.length>0&&t?.modal?.open(Dt,{items:a.value})},enabled:()=>a.value.length>0&&t?.features?.includes(z.ARCHIVE)},{id:"unarchive",label:o("Unarchive"),action:()=>{a.value.length===1&&a.value[0]?.mime_type==="application/zip"&&t?.modal?.open($t,{items:a.value})},enabled:()=>a.value.length===1&&a.value[0]?.mime_type==="application/zip"&&t?.features?.includes(z.UNARCHIVE)},{type:"separator"},{id:"preview",label:o("Preview"),action:()=>{a.value.length===1&&a.value[0]?.type!=="dir"&&t?.modal?.open(Je,{storage:r?.path?.get()?.storage,item:a.value[0]})},enabled:()=>a.value.length===1&&a.value[0]?.type!=="dir"},...m.value?[{type:"separator"},{id:"exit",label:o("Exit"),action:()=>{try{window.close()}catch{}},enabled:()=>!0}]:[]]},{id:"edit",label:o("Edit"),items:[...t?.selectionMode==="multiple"?[{id:"select-all",label:o("Select All"),action:()=>r?.selectAll(t?.selectionMode||"multiple",t),enabled:()=>!0},{id:"deselect",label:o("Deselect All"),action:()=>r?.clearSelection(),enabled:()=>a.value.length>0},{type:"separator"}]:[],{id:"cut",label:o("Cut"),action:()=>{a.value.length>0&&r?.setClipboard("cut",new Set(a.value.map(f=>f.path)))},enabled:()=>a.value.length>0},{id:"copy",label:o("Copy"),action:()=>{a.value.length>0&&r?.setClipboard("copy",new Set(a.value.map(f=>f.path)))},enabled:()=>a.value.length>0},{id:"paste",label:o("Paste"),action:()=>{const f=r?.getClipboard();f?.items?.size>0&&t?.modal?.open(f.type==="cut"?Ce:kt,{items:{from:Array.from(f.items),to:r?.path?.get()}})},enabled:()=>r?.getClipboard()?.items?.size>0},{id:"move",label:o("Move"),action:()=>{if(a.value.length>0){const f=t?.fs,w={storage:f?.path?.get()?.storage||"",path:f?.path?.get()?.path||"",type:"dir"};t?.modal?.open(Ce,{items:{from:a.value,to:w}})}},enabled:()=>a.value.length>0&&t?.features?.includes(z.MOVE)},{type:"separator"},{id:"copy-path",label:o("Copy Path"),action:async()=>{if(a.value.length===1){const f=a.value[0];await Me(f.path)}else{const f=r?.path?.get();f?.path&&await Me(f.path)}},enabled:()=>!0},{id:"copy-download-url",label:o("Copy Download URL"),action:async()=>{if(a.value.length===1){const f=a.value[0],w=r?.path?.get()?.storage??"local",p=t?.requester?.getDownloadUrl(w,f);p&&await zs(p)}},enabled:()=>a.value.length===1&&a.value[0]?.type!=="dir"},{type:"separator"},{id:"rename",label:o("Rename"),action:()=>{a.value.length===1&&t?.modal?.open(Xe,{items:a.value})},enabled:()=>a.value.length===1&&t?.features?.includes(z.RENAME)},{id:"delete",label:o("Delete"),action:()=>{a.value.length>0&&t?.modal?.open(Qe,{items:a.value})},enabled:()=>a.value.length>0&&t?.features?.includes(z.DELETE)}]},{id:"view",label:o("View"),items:[{id:"refresh",label:o("Refresh"),action:()=>{t?.adapter.list(r?.path?.get()?.path)},enabled:()=>!0},{type:"separator"},{id:"grid-view",label:o("Grid View"),action:()=>l?.set("view","grid"),checked:()=>s.value?.view==="grid"},{id:"list-view",label:o("List View"),action:()=>l?.set("view","list"),checked:()=>s.value?.view==="list"},{type:"separator"},{id:"tree-view",label:o("Tree View"),action:()=>l?.toggle("showTreeView"),enabled:()=>!0,checked:()=>s.value?.showTreeView},{id:"thumbnails",label:o("Show Thumbnails"),action:()=>l?.toggle("showThumbnails"),enabled:()=>!0,checked:()=>s.value?.showThumbnails},{id:"show-hidden-files",label:o("Show Hidden Files"),action:()=>l?.toggle("showHiddenFiles"),enabled:()=>!0,checked:()=>s.value?.showHiddenFiles},{type:"separator"},{id:"fullscreen",label:o("Full Screen"),action:()=>l?.toggle("fullScreen"),enabled:()=>t?.features?.includes(z.FULL_SCREEN),checked:()=>s.value?.fullScreen}]},{id:"go",label:o("Go"),items:[{id:"forward",label:o("Forward"),action:()=>{r?.goForward(),t?.adapter.list(r?.currentPath?.get())},enabled:()=>r?.canGoForward?.get()??!1},{id:"back",label:o("Back"),action:()=>{r?.goBack(),t?.adapter.list(r?.currentPath?.get())},enabled:()=>r?.canGoBack?.get()??!1},{id:"open-containing-folder",label:o("Open containing folder"),action:()=>{const f=r?.path?.get();if(f?.breadcrumb&&f.breadcrumb.length>0){const p=f.breadcrumb[f.breadcrumb.length-2]?.path??`${f.storage}://`;r?.setPath(p),t?.adapter.list(p)}},enabled:()=>{const f=r?.path?.get();return f?.breadcrumb&&f.breadcrumb.length>0}},{type:"separator"},...(c.value||[]).map(f=>({id:`storage-${f}`,label:f,action:()=>{const w=`${f}://`;r?.setPath(w),t?.adapter.list(w)},enabled:()=>!0})),{type:"separator"},{id:"go-to-folder",label:o("Go to Folder"),action:()=>{const f=prompt(o("Enter folder path:"));f&&(r?.setPath(f),t?.adapter.list(f))},enabled:()=>!0}]},{id:"help",label:o("Help"),items:[{id:"about",label:o("About"),action:()=>t?.modal?.open(_t),enabled:()=>!0}]}]),v=f=>{d.value===f?V():(d.value=f,u.value=!0)},_=f=>{u.value&&(d.value=f)},V=()=>{d.value=null,u.value=!1},b=f=>{V(),f()},h=f=>{f.target.closest(".vuefinder__menubar")||V()};return e.onMounted(()=>{document.addEventListener("click",h)}),e.onUnmounted(()=>{document.removeEventListener("click",h)}),(f,w)=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__menubar",onClick:w[0]||(w[0]=e.withModifiers(()=>{},["stop"]))},[e.createElementVNode("div",xc,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,p=>(e.openBlock(),e.createElementBlock("div",{key:p.id,class:e.normalizeClass(["vuefinder__menubar__item",{"vuefinder__menubar__item--active":d.value===p.id}]),onClick:g=>v(p.id),onMouseenter:g=>_(p.id)},[e.createElementVNode("span",Sc,e.toDisplayString(p.label),1),d.value===p.id?(e.openBlock(),e.createElementBlock("div",{key:0,class:"vuefinder__menubar__dropdown",onMouseenter:g=>_(p.id)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.items,g=>(e.openBlock(),e.createElementBlock("div",{key:g.id||g.type,class:e.normalizeClass(["vuefinder__menubar__dropdown__item",{"vuefinder__menubar__dropdown__item--separator":g.type==="separator","vuefinder__menubar__dropdown__item--disabled":g.enabled&&!g.enabled(),"vuefinder__menubar__dropdown__item--checked":g.checked&&g.checked()}]),onClick:e.withModifiers(C=>g.type!=="separator"&&g.enabled&&g.enabled()?b(g.action):null,["stop"])},[g.type!=="separator"?(e.openBlock(),e.createElementBlock("span",Dc,e.toDisplayString(g.label),1)):e.createCommentVNode("",!0),g.checked&&g.checked()?(e.openBlock(),e.createElementBlock("span",Tc," ✓ ")):e.createCommentVNode("",!0)],10,$c))),128))],40,Bc)):e.createCommentVNode("",!0)],42,Cc))),128))])]))}}),Mc={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",viewBox:"0 0 24 24"};function Ac(n,t){return e.openBlock(),e.createElementBlock("svg",Mc,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"},null,-1)])])}const Ic={render:Ac},Oc={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function Lc(n,t){return e.openBlock(),e.createElementBlock("svg",Oc,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"},null,-1)])])}const Rc={render:Lc},Pc={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function zc(n,t){return e.openBlock(),e.createElementBlock("svg",Pc,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25zm0 9.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18zM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25zm0 9.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18z"},null,-1)])])}const Hc={render:zc},Uc={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function jc(n,t){return e.openBlock(),e.createElementBlock("svg",Uc,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75"},null,-1)])])}const Kc={render:jc},Wc={fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function Gc(n,t){return e.openBlock(),e.createElementBlock("svg",Wc,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M3 4a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v2.586a1 1 0 0 1-.293.707l-6.414 6.414a1 1 0 0 0-.293.707V17l-4 4v-6.586a1 1 0 0 0-.293-.707L3.293 7.293A1 1 0 0 1 3 6.586z"},null,-1)])])}const qc={render:Gc},Yc={class:"vuefinder__toolbar"},Qc={class:"vuefinder__toolbar__actions"},Xc=["title"],Jc=["title"],Zc=["title"],ed=["title"],td=["title"],nd=["title"],od=["title"],rd={class:"vuefinder__toolbar__controls"},ld=["title"],ad={class:"vuefinder__toolbar__control vuefinder__toolbar__dropdown-container"},sd=["title"],id={class:"relative"},cd={key:0,class:"vuefinder__toolbar__filter-indicator"},dd={key:0,class:"vuefinder__toolbar__dropdown"},ud={class:"vuefinder__toolbar__dropdown-content"},md={class:"vuefinder__toolbar__dropdown-section"},fd={class:"vuefinder__toolbar__dropdown-label"},pd={class:"vuefinder__toolbar__dropdown-row"},vd={value:"name"},_d={value:"size"},hd={value:"modified"},gd={value:""},wd={value:"asc"},yd={value:"desc"},kd={class:"vuefinder__toolbar__dropdown-section"},bd={class:"vuefinder__toolbar__dropdown-label"},Ed={class:"vuefinder__toolbar__dropdown-options"},Vd={class:"vuefinder__toolbar__dropdown-option"},Nd={class:"vuefinder__toolbar__option-text"},xd={class:"vuefinder__toolbar__dropdown-option"},Cd={class:"vuefinder__toolbar__option-text"},Sd={class:"vuefinder__toolbar__dropdown-option"},Bd={class:"vuefinder__toolbar__option-text"},$d={class:"vuefinder__toolbar__dropdown-toggle"},Dd={for:"showHidden",class:"vuefinder__toolbar__toggle-label"},Td={class:"vuefinder__toolbar__dropdown-reset"},Fd=["title"],Md=["title"],Ad=e.defineComponent({name:"VfToolbar",__name:"Toolbar",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=t.config,s=L.useStore(l.state),a=L.useStore(r.selectedItems),c=L.useStore(r.sort),d=L.useStore(r.filter);e.watch(()=>s.value.fullScreen,()=>{if(s.value.fullScreen){const b=document.querySelector("body");b&&(b.style.overflow="hidden")}else{const b=document.querySelector("body");b&&(b.style.overflow="")}t.emitter.emit("vf-fullscreen-toggle")});const u=e.ref(!1),m=b=>{b.target.closest(".vuefinder__toolbar__dropdown-container")||(u.value=!1)};e.onMounted(()=>{document.addEventListener("click",m)}),e.onUnmounted(()=>{document.removeEventListener("click",m)});const i=e.ref({sortBy:"name",sortOrder:"",filterKind:"all",showHidden:s.value.showHiddenFiles});e.watch(()=>i.value.sortBy,b=>{if(!i.value.sortOrder){r.clearSort();return}b==="name"?r.setSort("basename",i.value.sortOrder):b==="size"?r.setSort("file_size",i.value.sortOrder):b==="modified"&&r.setSort("last_modified",i.value.sortOrder)}),e.watch(()=>i.value.sortOrder,b=>{if(!b){r.clearSort();return}i.value.sortBy==="name"?r.setSort("basename",b):i.value.sortBy==="size"?r.setSort("file_size",b):i.value.sortBy==="modified"&&r.setSort("last_modified",b)}),e.watch(c,b=>{b.active?(b.column==="basename"?i.value.sortBy="name":b.column==="file_size"?i.value.sortBy="size":b.column==="last_modified"&&(i.value.sortBy="modified"),i.value.sortOrder=b.order):i.value.sortOrder=""},{immediate:!0}),e.watch(()=>i.value.filterKind,b=>{r.setFilter(b,s.value.showHiddenFiles)}),e.watch(()=>i.value.showHidden,b=>{l.set("showHiddenFiles",b),r.setFilter(i.value.filterKind,b)}),e.watch(d,b=>{i.value.filterKind=b.kind},{immediate:!0}),e.watch(()=>s.value.showHiddenFiles,b=>{i.value.showHidden=b,r.setFilter(i.value.filterKind,b)},{immediate:!0});const v=()=>l.set("view",s.value.view==="grid"?"list":"grid"),_=e.computed(()=>d.value.kind!=="all"||!s.value.showHiddenFiles||c.value.active),V=()=>{i.value={sortBy:"name",sortOrder:"",filterKind:"all",showHidden:!0},l.set("showHiddenFiles",!0),r.clearSort(),r.clearFilter()};return(b,h)=>(e.openBlock(),e.createElementBlock("div",Yc,[e.createElementVNode("div",Qc,[e.unref(t).features.includes(e.unref(z).NEW_FOLDER)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"mx-1.5",title:e.unref(o)("New Folder"),onClick:h[0]||(h[0]=f=>e.unref(t).modal.open(St,{items:e.unref(a)}))},[e.createVNode(e.unref(_n))],8,Xc)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(z).NEW_FILE)?(e.openBlock(),e.createElementBlock("div",{key:1,class:"mx-1.5",title:e.unref(o)("New File"),onClick:h[1]||(h[1]=f=>e.unref(t).modal.open(gn,{items:e.unref(a)}))},[e.createVNode(e.unref(hn))],8,Jc)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(z).RENAME)?(e.openBlock(),e.createElementBlock("div",{key:2,class:"mx-1.5",title:e.unref(o)("Rename"),onClick:h[2]||(h[2]=f=>e.unref(a).length!==1||e.unref(t).modal.open(Xe,{items:e.unref(a)}))},[e.createVNode(e.unref(Qt),{class:e.normalizeClass(e.unref(a).length===1?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,Zc)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(z).DELETE)?(e.openBlock(),e.createElementBlock("div",{key:3,class:"mx-1.5",title:e.unref(o)("Delete"),onClick:h[3]||(h[3]=f=>!e.unref(a).length||e.unref(t).modal.open(Qe,{items:e.unref(a)}))},[e.createVNode(e.unref(Yt),{class:e.normalizeClass(e.unref(a).length?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,ed)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(z).UPLOAD)?(e.openBlock(),e.createElementBlock("div",{key:4,class:"mx-1.5",title:e.unref(o)("Upload"),onClick:h[4]||(h[4]=f=>e.unref(t).modal.open(Bt,{items:e.unref(a)}))},[e.createVNode(e.unref(wn))],8,td)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(z).UNARCHIVE)&&e.unref(a).length===1&&e.unref(a)[0].mime_type==="application/zip"?(e.openBlock(),e.createElementBlock("div",{key:5,class:"mx-1.5",title:e.unref(o)("Unarchive"),onClick:h[5]||(h[5]=f=>!e.unref(a).length||e.unref(t).modal.open($t,{items:e.unref(a)}))},[e.createVNode(e.unref(yn),{class:e.normalizeClass(e.unref(a).length?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,nd)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(z).ARCHIVE)?(e.openBlock(),e.createElementBlock("div",{key:6,class:"mx-1.5",title:e.unref(o)("Archive"),onClick:h[6]||(h[6]=f=>!e.unref(a).length||e.unref(t).modal.open(Dt,{items:e.unref(a)}))},[e.createVNode(e.unref(kn),{class:e.normalizeClass(e.unref(a).length?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,od)):e.createCommentVNode("",!0)]),e.createElementVNode("div",rd,[e.unref(t).features.includes(e.unref(z).SEARCH)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"mx-1.5",title:e.unref(o)("Search Files"),onClick:h[7]||(h[7]=f=>e.unref(t).modal.open(xt))},[e.createVNode(e.unref(bt),{class:"vf-toolbar-icon text-(--vf-bg-primary)"})],8,ld)):e.createCommentVNode("",!0),e.createElementVNode("div",ad,[e.createElementVNode("div",{title:e.unref(o)("Filter"),onClick:h[8]||(h[8]=f=>u.value=!u.value),class:"vuefinder__toolbar__dropdown-trigger"},[e.createElementVNode("div",id,[e.createVNode(e.unref(qc),{class:"vf-toolbar-icon vuefinder__toolbar__icon w-6 h-6"}),_.value?(e.openBlock(),e.createElementBlock("div",cd)):e.createCommentVNode("",!0)])],8,sd),u.value?(e.openBlock(),e.createElementBlock("div",dd,[e.createElementVNode("div",ud,[e.createElementVNode("div",md,[e.createElementVNode("div",fd,e.toDisplayString(e.unref(o)("Sorting")),1),e.createElementVNode("div",pd,[e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":h[9]||(h[9]=f=>i.value.sortBy=f),class:"vuefinder__toolbar__dropdown-select"},[e.createElementVNode("option",vd,e.toDisplayString(e.unref(o)("Name")),1),e.createElementVNode("option",_d,e.toDisplayString(e.unref(o)("Size")),1),e.createElementVNode("option",hd,e.toDisplayString(e.unref(o)("Date")),1)],512),[[e.vModelSelect,i.value.sortBy]]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":h[10]||(h[10]=f=>i.value.sortOrder=f),class:"vuefinder__toolbar__dropdown-select"},[e.createElementVNode("option",gd,e.toDisplayString(e.unref(o)("None")),1),e.createElementVNode("option",wd,e.toDisplayString(e.unref(o)("Asc")),1),e.createElementVNode("option",yd,e.toDisplayString(e.unref(o)("Desc")),1)],512),[[e.vModelSelect,i.value.sortOrder]])])]),e.createElementVNode("div",kd,[e.createElementVNode("div",bd,e.toDisplayString(e.unref(o)("Show")),1),e.createElementVNode("div",Ed,[e.createElementVNode("label",Vd,[e.withDirectives(e.createElementVNode("input",{type:"radio",name:"filterKind",value:"all","onUpdate:modelValue":h[11]||(h[11]=f=>i.value.filterKind=f),class:"vuefinder__toolbar__radio"},null,512),[[e.vModelRadio,i.value.filterKind]]),e.createElementVNode("span",Nd,e.toDisplayString(e.unref(o)("All items")),1)]),e.createElementVNode("label",xd,[e.withDirectives(e.createElementVNode("input",{type:"radio",name:"filterKind",value:"files","onUpdate:modelValue":h[12]||(h[12]=f=>i.value.filterKind=f),class:"vuefinder__toolbar__radio"},null,512),[[e.vModelRadio,i.value.filterKind]]),e.createElementVNode("span",Cd,e.toDisplayString(e.unref(o)("Files only")),1)]),e.createElementVNode("label",Sd,[e.withDirectives(e.createElementVNode("input",{type:"radio",name:"filterKind",value:"folders","onUpdate:modelValue":h[13]||(h[13]=f=>i.value.filterKind=f),class:"vuefinder__toolbar__radio"},null,512),[[e.vModelRadio,i.value.filterKind]]),e.createElementVNode("span",Bd,e.toDisplayString(e.unref(o)("Folders only")),1)])])]),e.createElementVNode("div",$d,[e.createElementVNode("label",Dd,e.toDisplayString(e.unref(o)("Show hidden files")),1),e.withDirectives(e.createElementVNode("input",{type:"checkbox",id:"showHidden","onUpdate:modelValue":h[14]||(h[14]=f=>i.value.showHidden=f),class:"vuefinder__toolbar__checkbox"},null,512),[[e.vModelCheckbox,i.value.showHidden]])]),e.createElementVNode("div",Td,[e.createElementVNode("button",{onClick:V,class:"vuefinder__toolbar__reset-button"},e.toDisplayString(e.unref(o)("Reset")),1)])])])):e.createCommentVNode("",!0)]),e.unref(t).features.includes(e.unref(z).FULL_SCREEN)?(e.openBlock(),e.createElementBlock("div",{key:1,onClick:h[15]||(h[15]=f=>e.unref(l).toggle("fullScreen")),class:"mx-1.5",title:e.unref(o)("Toggle Full Screen")},[e.unref(s).fullScreen?(e.openBlock(),e.createBlock(e.unref(Rc),{key:0,class:"vf-toolbar-icon"})):(e.openBlock(),e.createBlock(e.unref(Ic),{key:1,class:"vf-toolbar-icon"}))],8,Fd)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"mx-1.5",title:e.unref(o)("Change View"),onClick:h[16]||(h[16]=f=>v())},[e.unref(s).view==="grid"?(e.openBlock(),e.createBlock(e.unref(Hc),{key:0,class:"vf-toolbar-icon"})):e.createCommentVNode("",!0),e.unref(s).view==="list"?(e.openBlock(),e.createBlock(e.unref(Kc),{key:1,class:"vf-toolbar-icon"})):e.createCommentVNode("",!0)],8,Md)])]))}}),Id={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"vuefinder__breadcrumb__refresh-icon",viewBox:"-40 -40 580 580"};function Od(n,t){return e.openBlock(),e.createElementBlock("svg",Id,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M463.5 224h8.5c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2S461.9 48.1 455 55l-41.6 41.6c-87.6-86.5-228.7-86.2-315.8 1-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2S334.3 224 344 224z"},null,-1)])])}const Ld={render:Od},Rd={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-0.5 rounded",viewBox:"0 0 20 20"};function Pd(n,t){return e.openBlock(),e.createElementBlock("svg",Rd,[...t[0]||(t[0]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 9.707a1 1 0 0 1 0-1.414l4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1-1.414 1.414L11 7.414V15a1 1 0 1 1-2 0V7.414L6.707 9.707a1 1 0 0 1-1.414 0",class:"pointer-events-none","clip-rule":"evenodd"},null,-1)])])}const zd={render:Pd},Hd={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"vuefinder__breadcrumb__close-icon",viewBox:"0 0 24 24"};function Ud(n,t){return e.openBlock(),e.createElementBlock("svg",Hd,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1)])])}const jd={render:Ud},Kd={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"};function Wd(n,t){return e.openBlock(),e.createElementBlock("svg",Kd,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M10.707 2.293a1 1 0 0 0-1.414 0l-7 7a1 1 0 0 0 1.414 1.414L4 10.414V17a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-6.586l.293.293a1 1 0 0 0 1.414-1.414z",class:"pointer-events-none"},null,-1)])])}const Gd={render:Wd},qd={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"w-6 h-6 cursor-pointer",viewBox:"0 0 24 24"};function Yd(n,t){return e.openBlock(),e.createElementBlock("svg",qd,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1)])])}const Qd={render:Yd},Xd={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"};function Jd(n,t){return e.openBlock(),e.createElementBlock("svg",Xd,[...t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M9 6h11M12 12h8M15 18h5M5 6v.01M8 12v.01M11 18v.01"},null,-1)])])}const Zd={render:Jd},eu={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function tu(n,t){return e.openBlock(),e.createElementBlock("svg",eu,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2m-6 12h8a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2h-8a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2"},null,-1)])])}const nu={render:tu},ou={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function ru(n,t){return e.openBlock(),e.createElementBlock("svg",ou,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0-4-4m4 4-4 4m0 6H4m0 0 4 4m-4-4 4-4"},null,-1)])])}const lu={render:ru};function Ie(n,t=[]){const o="vfDragEnterCounter",r=n.fs,l=L.useStore(r.selectedItems);function s(m,i){if(m.isExternalDrag)return;m.preventDefault(),r.getDraggedItem()===i.path||!i||i.type!=="dir"||l.value.some(_=>_.path===i.path||Rs(_.path)===i.path)?m.dataTransfer&&(m.dataTransfer.dropEffect="none",m.dataTransfer.effectAllowed="none"):(m.dataTransfer&&(m.dataTransfer.dropEffect="copy",m.dataTransfer.effectAllowed="all"),m.currentTarget.classList.add(...t))}function a(m){if(m.isExternalDrag)return;m.preventDefault();const i=m.currentTarget,v=Number(i.dataset[o]||0);i.dataset[o]=String(v+1)}function c(m){if(m.isExternalDrag)return;m.preventDefault();const i=m.currentTarget,_=Number(i.dataset[o]||0)-1;_<=0?(delete i.dataset[o],i.classList.remove(...t)):i.dataset[o]=String(_)}function d(m,i){if(m.isExternalDrag||!i)return;m.preventDefault();const v=m.currentTarget;delete v.dataset[o],v.classList.remove(...t);const _=m.dataTransfer?.getData("items")||"[]",b=JSON.parse(_).map(h=>r.sortedFiles.get().find(f=>f.path===h));r.clearDraggedItem(),n.modal.open(Ce,{items:{from:b,to:i}})}function u(m){return{dragover:i=>s(i,m),dragenter:a,dragleave:c,drop:i=>d(i,m)}}return{events:u}}const au={class:"vuefinder__breadcrumb__container"},su=["title"],iu=["title"],cu=["title"],du=["title"],uu={class:"vuefinder__breadcrumb__path-container"},mu={class:"vuefinder__breadcrumb__list"},fu={key:0,class:"vuefinder__breadcrumb__hidden-list"},pu={class:"relative"},vu=["title","onClick"],_u=["title"],hu={class:"vuefinder__breadcrumb__path-mode"},gu={class:"vuefinder__breadcrumb__path-mode-content"},wu=["title"],yu={class:"vuefinder__breadcrumb__path-text"},ku=["title"],bu=["data-theme"],Eu=["onClick"],Vu={class:"vuefinder__breadcrumb__hidden-item-content"},Nu={class:"vuefinder__breadcrumb__hidden-item-text"},xu=e.defineComponent({__name:"Breadcrumb",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=t.config,s=L.useStore(l.state),a=e.computed(()=>s.value?.theme||"light"),c=L.useStore(r.path),d=L.useStore(r.loading),u=e.ref(null),m=Jt(0,100),i=e.ref(5),v=e.ref(!1),_=e.ref(!1),V=e.computed(()=>c.value?.breadcrumb??[]);function b(E,y){return E.length>y?[E.slice(-y),E.slice(0,-y)]:[E,[]]}const h=e.computed(()=>b(V.value,i.value)[0]),f=e.computed(()=>b(V.value,i.value)[1]);e.watch(m,()=>{if(!u.value)return;const E=u.value.children;let y=0,k=0;const x=5,F=1;i.value=x,e.nextTick(()=>{for(let O=E.length-1;O>=0;O--){const q=E[O];if(y+q.offsetWidth>m.value-40)break;y+=parseInt(q.offsetWidth.toString(),10),k++}k<F&&(k=F),k>x&&(k=x),i.value=k})});const w=()=>{u.value&&(m.value=u.value.offsetWidth)},p=e.ref(null);e.onMounted(()=>{p.value=new ResizeObserver(w),u.value&&p.value.observe(u.value)}),e.onUnmounted(()=>{p.value&&p.value.disconnect()});const g=Ie(t,["vuefinder__drag-over"]);function C(E=null){E??=V.value.length-2;const y={basename:c.value?.storage??"local",extension:"",path:(c.value?.storage??"local")+"://",storage:c.value?.storage??"local",type:"dir",file_size:null,last_modified:null,mime_type:null,visibility:""};return V.value[E]??y}const N=()=>{t.adapter.invalidateListQuery(c.value.path),t.adapter.open(c.value.path)},B=()=>{h.value.length>0&&t.adapter.open(V.value[V.value.length-2]?.path??(c.value?.storage??"local")+"://")},A=E=>{t.adapter.open(E.path),v.value=!1},T=()=>{v.value&&(v.value=!1)},H={mounted(E,y){E.clickOutsideEvent=function(k){E===k.target||E.contains(k.target)||y.value()},document.body.addEventListener("click",E.clickOutsideEvent)},beforeUnmount(E){document.body.removeEventListener("click",E.clickOutsideEvent)}},K=()=>{l.toggle("showTreeView")},X=e.ref({x:0,y:0}),R=(E,y=null)=>{if(E.currentTarget instanceof HTMLElement){const{x:k,y:x,height:F}=E.currentTarget.getBoundingClientRect();X.value={x:k,y:x+F}}v.value=y??!v.value},j=()=>{_.value=!_.value},Y=async()=>{await Me(c.value?.path||""),t.emitter.emit("vf-toast-push",{label:o("Path copied to clipboard")})},Q=()=>{_.value=!1};return(E,y)=>(e.openBlock(),e.createElementBlock("div",au,[e.createElementVNode("span",{title:e.unref(o)("Toggle Tree View")},[e.createVNode(e.unref(Zd),{onClick:K,class:e.normalizeClass(["vuefinder__breadcrumb__toggle-tree",e.unref(s).showTreeView?"vuefinder__breadcrumb__toggle-tree--active":""])},null,8,["class"])],8,su),e.createElementVNode("span",{title:e.unref(o)("Go up a directory")},[e.createVNode(e.unref(zd),e.mergeProps(e.toHandlers(V.value.length?e.unref(g).events(C()):{}),{onClick:B,class:V.value.length?"vuefinder__breadcrumb__go-up--active":"vuefinder__breadcrumb__go-up--inactive"}),null,16,["class"])],8,iu),e.unref(r).isLoading()?(e.openBlock(),e.createElementBlock("span",{key:1,title:e.unref(o)("Cancel")},[e.createVNode(e.unref(jd),{onClick:y[0]||(y[0]=k=>e.unref(t).emitter.emit("vf-fetch-abort"))})],8,du)):(e.openBlock(),e.createElementBlock("span",{key:0,title:e.unref(o)("Refresh")},[e.createVNode(e.unref(Ld),{onClick:N})],8,cu)),e.withDirectives(e.createElementVNode("div",uu,[e.createElementVNode("div",null,[e.createVNode(e.unref(Gd),e.mergeProps({class:"vuefinder__breadcrumb__home-icon"},e.toHandlers(e.unref(g).events(C(-1))),{onClick:y[1]||(y[1]=e.withModifiers(k=>e.unref(t).adapter.open(e.unref(c).storage+"://"),["stop"]))}),null,16)]),e.createElementVNode("div",mu,[f.value.length?e.withDirectives((e.openBlock(),e.createElementBlock("div",fu,[y[3]||(y[3]=e.createElementVNode("div",{class:"vuefinder__breadcrumb__separator"},"/",-1)),e.createElementVNode("div",pu,[e.createElementVNode("span",{onDragenter:y[2]||(y[2]=k=>R(k,!0)),onClick:e.withModifiers(R,["stop"]),class:"vuefinder__breadcrumb__hidden-toggle"},[e.createVNode(e.unref(vn),{class:"vuefinder__breadcrumb__hidden-toggle-icon"})],32)])])),[[H,T]]):e.createCommentVNode("",!0)]),e.createElementVNode("div",{ref_key:"breadcrumbContainer",ref:u,class:"vuefinder__breadcrumb__visible-list pointer-events-none"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h.value,(k,x)=>(e.openBlock(),e.createElementBlock("div",{key:x},[y[4]||(y[4]=e.createElementVNode("span",{class:"vuefinder__breadcrumb__separator"},"/",-1)),e.createElementVNode("span",e.mergeProps(e.toHandlers(e.unref(g).events(k),!0),{class:"vuefinder__breadcrumb__item pointer-events-auto",title:k.basename,onClick:e.withModifiers(F=>e.unref(t).adapter.open(k.path),["stop"])}),e.toDisplayString(k.name),17,vu)]))),128))],512),e.unref(l).get("loadingIndicator")==="circular"&&e.unref(d)?(e.openBlock(),e.createBlock(e.unref(tt),{key:0})):e.createCommentVNode("",!0),e.createElementVNode("span",{title:e.unref(o)("Toggle Path Copy Mode"),onClick:j},[e.createVNode(e.unref(lu),{class:"vuefinder__breadcrumb__toggle-icon"})],8,_u)],512),[[e.vShow,!_.value]]),e.withDirectives(e.createElementVNode("div",hu,[e.createElementVNode("div",gu,[e.createElementVNode("div",{title:e.unref(o)("Copy Path")},[e.createVNode(e.unref(nu),{class:"vuefinder__breadcrumb__copy-icon",onClick:Y})],8,wu),e.createElementVNode("div",yu,e.toDisplayString(e.unref(c).path),1),e.createElementVNode("div",{title:e.unref(o)("Exit")},[e.createVNode(e.unref(Qd),{class:"vuefinder__breadcrumb__exit-icon",onClick:Q})],8,ku)])],512),[[e.vShow,_.value]]),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.createElementVNode("div",null,[e.withDirectives(e.createElementVNode("div",{style:e.normalizeStyle({position:"absolute",top:X.value.y+"px",left:X.value.x+"px"}),class:"vuefinder__themer vuefinder__breadcrumb__hidden-dropdown","data-theme":a.value},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.value,(k,x)=>(e.openBlock(),e.createElementBlock("div",e.mergeProps({key:x},e.toHandlers(e.unref(g).events(k),!0),{onClick:F=>A(k),class:"vuefinder__breadcrumb__hidden-item"}),[e.createElementVNode("div",Vu,[e.createElementVNode("span",null,[e.createVNode(e.unref(_e),{class:"vuefinder__breadcrumb__hidden-item-icon"})]),y[5]||(y[5]=e.createTextVNode()),e.createElementVNode("span",Nu,e.toDisplayString(k.name),1)])],16,Eu))),128))],12,bu),[[e.vShow,v.value]])])]))]))}});function Cu(n,t){const{scrollContainer:o,itemWidth:r=100,rowHeight:l,overscan:s=2,containerPadding:a=48,lockItemsPerRow:c}=t,d=n,u=()=>typeof l=="number"?l:l.value,m=e.ref(0),i=e.ref(6),v=e.ref(600);let _=null;const V=e.computed(()=>Math.ceil(d.value.length/i.value)),b=e.computed(()=>V.value*u()),h=e.computed(()=>{const T=u(),H=Math.max(0,Math.floor(m.value/T)-s),K=Math.min(V.value,Math.ceil((m.value+v.value)/T)+s);return{start:H,end:K}}),f=e.computed(()=>{const{start:T,end:H}=h.value;return Array.from({length:H-T},(K,X)=>T+X)}),w=()=>v.value,p=()=>c.value,g=()=>{if(p()){i.value=1;return}if(o.value){const T=o.value.clientWidth-a;i.value=Math.max(Math.floor(T/r),2)}},C=T=>{const H=T.target;m.value=H.scrollTop};e.watch(()=>d.value.length,()=>{g()});const N=(T,H)=>{if(!T||!Array.isArray(T))return[];const K=H*i.value;return T.slice(K,K+i.value)},B=(T,H,K,X,R)=>{if(!T||!Array.isArray(T))return[];const j=[];for(let Y=H;Y<=K;Y++)for(let Q=X;Q<=R;Q++){const E=Y*i.value+Q;E<T.length&&T[E]&&j.push(T[E])}return j},A=T=>({row:Math.floor(T/i.value),col:T%i.value});return e.onMounted(async()=>{await e.nextTick(),o.value&&(v.value=o.value.clientHeight||600),g(),window.addEventListener("resize",()=>{o.value&&(v.value=o.value.clientHeight||600),g()}),o.value&&"ResizeObserver"in window&&(_=new ResizeObserver(T=>{const H=T[0];H&&(v.value=Math.round(H.contentRect.height)),g()}),_.observe(o.value))}),e.onUnmounted(()=>{window.removeEventListener("resize",g),_&&(_.disconnect(),_=null)}),{scrollTop:m,itemsPerRow:i,totalRows:V,totalHeight:b,visibleRange:h,visibleRows:f,updateItemsPerRow:g,handleScroll:C,getRowItems:N,getItemsInRange:B,getItemPosition:A,getContainerHeight:w}}function Su(n){const{getItemPosition:t,getItemsInRange:o,getKey:r,selectionObject:l,rowHeight:s,itemWidth:a}=n,c=Math.floor(Math.random()*2**32).toString(),d=e.inject("ServiceContainer"),u=d.fs,m=L.useStore(u.selectedKeys),i=L.useStore(u.sortedFiles),v=e.ref(new Set),_=e.ref(!1),V=e.ref(!1),b=e.ref(null),h=E=>E.map(y=>y.getAttribute("data-key")).filter(y=>!!y),f=E=>{E.selection.getSelection().forEach(y=>{E.selection.deselect(y,!0)})},w=E=>{m.value&&m.value.forEach(y=>{const k=document.querySelector(`[data-key="${y}"]`);k&&p(y)&&E.selection.select(k,!0)})},p=E=>{const y=i.value?.find(F=>r(F)===E);if(!y)return!1;const k=d.selectionFilterType,x=d.selectionFilterMimeIncludes;return k==="files"&&y.type==="dir"||k==="dirs"&&y.type==="file"?!1:x&&Array.isArray(x)&&x.length>0?y.type==="dir"?!0:y.mime_type?x.some(F=>y.mime_type?.startsWith(F)):!1:!0},g=E=>{if(E.size===0)return null;const k=Array.from(E).map(G=>{const ve=i.value?.findIndex(he=>r(he)===G)??-1;return t(ve>=0?ve:0)}),x=Math.min(...k.map(G=>G.row)),F=Math.max(...k.map(G=>G.row)),O=Math.min(...k.map(G=>G.col)),q=Math.max(...k.map(G=>G.col));return{minRow:x,maxRow:F,minCol:O,maxCol:q}},C=E=>{if(d.selectionMode==="single")return!1;_.value=!1,!E.event?.metaKey&&!E.event?.ctrlKey&&(V.value=!0),E.selection.resolveSelectables(),f(E),w(E)},N=e.ref(0),B=E=>{const y=E;if(y&&"touches"in y){const k=y.touches?.[0];if(k)return{x:k.clientX,y:k.clientY}}if(y&&"changedTouches"in y){const k=y.changedTouches?.[0];if(k)return{x:k.clientX,y:k.clientY}}if(y&&"clientX"in y&&"clientY"in y){const k=y;return{x:k.clientX,y:k.clientY}}return null},A=({event:E,selection:y})=>{N.value=(l.value?.getAreaLocation().y1??0)-(d.root.getBoundingClientRect().top??0);const k=document.querySelector(".selection-area-container");if(k&&(k.dataset.theme=d.config.get("theme")),d.selectionMode==="single")return;const x=E;x&&"type"in x&&x.type==="touchend"&&x.preventDefault();const F=E;if(!F?.ctrlKey&&!F?.metaKey&&(u.clearSelection(),y.clearSelection(!0,!0)),v.value.clear(),l.value){const O=l.value.getSelectables()[0]?.closest(".scroller-"+c);if(O){const q=O.getBoundingClientRect(),G=B(E);if(G){const ve=G.y-q.top+O.scrollTop,he=G.x-q.left,Ve=Math.floor(ve/s.value),$e=Math.floor(he/a);b.value={row:Ve,col:$e}}}}},T=E=>{if(d.selectionMode==="single")return;const y=E.selection,k=h(E.store.changed.added),x=h(E.store.changed.removed);V.value=!1,_.value=!0,k.forEach(F=>{m.value&&!m.value.has(F)&&p(F)&&(v.value.add(F),u.select(F,d.selectionMode||"multiple"))}),x.forEach(F=>{document.querySelector(`[data-key="${F}"]`)&&i.value?.find(q=>r(q)===F)&&v.value.delete(F),u.deselect(F)}),y.resolveSelectables(),w(E)},H=()=>{v.value.clear()},K=E=>{if(E.event&&b.value&&v.value.size>0){const k=Array.from(v.value).map(x=>{const F=i.value?.findIndex(O=>r(O)===x)??-1;return F>=0?t(F):null}).filter(x=>x!==null);if(k.length>0){const x=[...k,b.value],F={minRow:Math.min(...x.map(O=>O.row)),maxRow:Math.max(...x.map(O=>O.row)),minCol:Math.min(...x.map(O=>O.col)),maxCol:Math.max(...x.map(O=>O.col))};o(i.value||[],F.minRow,F.maxRow,F.minCol,F.maxCol).forEach(O=>{const q=r(O);document.querySelector(`[data-key="${q}"]`)||u.select(q,d.selectionMode||"multiple")})}}},X=E=>{K(E),f(E),w(E),u.setSelectedCount(m.value?.size||0),_.value=!1,b.value=null},R=()=>{l.value=new Fn({selectables:[".file-item-"+c+":not(.vf-explorer-item--unselectable)"],boundaries:[".scroller-"+c],selectionContainerClass:"selection-area-container",behaviour:{overlap:"invert",intersect:"touch",startThreshold:0,triggers:[0],scrolling:{speedDivider:10,manualSpeed:750,startScrollMargins:{x:0,y:10}}},features:{touch:!0,range:!0,deselectOnBlur:!0,singleTap:{allow:!1,intersect:"native"}}}),l.value.on("beforestart",C),l.value.on("start",A),l.value.on("move",T),l.value.on("stop",X)},j=()=>{l.value&&(l.value.destroy(),l.value=null)},Y=()=>{l.value&&(Array.from(m.value??new Set).forEach(y=>{p(y)||u.deselect(y)}),j(),R())},Q=E=>{V.value&&(l.value?.clearSelection(),H(),V.value=!1);const y=E;!v.value.size&&!V.value&&!y?.ctrlKey&&!y?.metaKey&&(u.clearSelection(),l.value?.clearSelection())};return e.onMounted(()=>{const E=y=>{!y.buttons&&_.value&&(_.value=!1)};document.addEventListener("dragleave",E),e.onUnmounted(()=>{document.removeEventListener("dragleave",E)})}),{isDragging:_,selectionStarted:V,explorerId:c,extractIds:h,cleanupSelection:f,refreshSelection:w,getSelectionRange:g,selectSelectionRange:K,initializeSelectionArea:R,destroySelectionArea:j,updateSelectionArea:Y,handleContentClick:Q}}const Bu={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 20 20"};function $u(n,t){return e.openBlock(),e.createElementBlock("svg",Bu,[...t[0]||(t[0]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 0 1 1.414 0L10 10.586l3.293-3.293a1 1 0 1 1 1.414 1.414l-4 4a1 1 0 0 1-1.414 0l-4-4a1 1 0 0 1 0-1.414","clip-rule":"evenodd"},null,-1)])])}const Du={render:$u},Tu={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 20 20"};function Fu(n,t){return e.openBlock(),e.createElementBlock("svg",Tu,[...t[0]||(t[0]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M14.707 12.707a1 1 0 0 1-1.414 0L10 9.414l-3.293 3.293a1 1 0 0 1-1.414-1.414l4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1 0 1.414","clip-rule":"evenodd"},null,-1)])])}const Mu={render:Fu},ut=e.defineComponent({__name:"SortIcon",props:{direction:{}},setup(n){return(t,o)=>(e.openBlock(),e.createElementBlock("div",null,[n.direction==="asc"?(e.openBlock(),e.createBlock(e.unref(Du),{key:0})):e.createCommentVNode("",!0),n.direction==="desc"?(e.openBlock(),e.createBlock(e.unref(Mu),{key:1})):e.createCommentVNode("",!0)]))}}),Au={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function Iu(n,t){return e.openBlock(),e.createElementBlock("svg",Au,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 0 0 2-2V9.414a1 1 0 0 0-.293-.707l-5.414-5.414A1 1 0 0 0 12.586 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2"},null,-1)])])}const Ou={render:Iu},Lu={class:"vuefinder__drag-item__container"},Ru={class:"vuefinder__drag-item__count"},Pu=e.defineComponent({__name:"DragItem",props:{count:{}},setup(n){const t=n;return(o,r)=>(e.openBlock(),e.createElementBlock("div",Lu,[e.createVNode(e.unref(Ou),{class:"vuefinder__drag-item__icon"}),e.createElementVNode("div",Ru,e.toDisplayString(t.count),1)]))}}),zu={key:2,class:"vuefinder__item-icon__extension"},Ut=e.defineComponent({__name:"ItemIcon",props:{item:{},ext:{type:Boolean},small:{type:Boolean}},setup(n){const t=n,o=e.inject("ServiceContainer"),r=L.useStore(o.config.state),l={app:o,config:r.value,item:t.item};return(s,a)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__item-icon",n.small?"vuefinder__item-icon--small":"vuefinder__item-icon--large"])},[e.renderSlot(s.$slots,"icon",e.normalizeProps(e.guardReactiveProps(l)),()=>[n.item.type==="dir"?(e.openBlock(),e.createBlock(e.unref(_e),{key:0,class:"vuefinder__item-icon__folder"})):(e.openBlock(),e.createBlock(e.unref(Pe),{key:1,class:"vuefinder__item-icon__file"})),n.ext&&n.item.type!=="dir"&&n.item.extension?(e.openBlock(),e.createElementBlock("div",zu,e.toDisplayString(n.item.extension.substring(0,3)),1)):e.createCommentVNode("",!0)])],2))}}),Hu={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24"};function Uu(n,t){return e.openBlock(),e.createElementBlock("svg",Hu,[...t[0]||(t[0]=[e.createElementVNode("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M12 2a5 5 0 0 1 5 5v3a3 3 0 0 1 3 3v6a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3v-6a3 3 0 0 1 3-3V7a5 5 0 0 1 5-5m0 12a2 2 0 0 0-1.995 1.85L10 16a2 2 0 1 0 2-2m0-10a3 3 0 0 0-3 3v3h6V7a3 3 0 0 0-3-3"},null,-1)])])}const jt={render:Uu},ju=["data-key","data-row","data-col","draggable"],Ku={key:0},Wu={class:"vuefinder__explorer__item-grid-content"},Gu=["data-src","alt"],qu={class:"vuefinder__explorer__item-title"},Yu={key:1,class:"vuefinder__explorer__item-list-content"},Qu={class:"vuefinder__explorer__item-list-name"},Xu={class:"vuefinder__explorer__item-list-icon"},Ju={class:"vuefinder__explorer__item-name"},Zu={key:0,class:"vuefinder__explorer__item-path"},em={key:1,class:"vuefinder__explorer__item-size"},tm={key:0},nm={key:2,class:"vuefinder__explorer__item-date"},om=e.defineComponent({__name:"FileItem",props:{item:{},view:{},compact:{type:Boolean},showThumbnails:{type:Boolean},isSelected:{type:Boolean},isDragging:{type:Boolean},rowIndex:{},colIndex:{},showPath:{type:Boolean},explorerId:{}},emits:["click","dblclick","contextmenu","dragstart","dragend"],setup(n,{emit:t}){const o=n,r=t,l=e.inject("ServiceContainer"),s=l.fs,a=l.config,c=e.computed(()=>{const w=l.selectionFilterType;return!w||w==="both"?!0:w==="files"&&o.item.type==="file"||w==="dirs"&&o.item.type==="dir"}),d=e.computed(()=>{const w=l.selectionFilterMimeIncludes;return!w||!w.length||o.item.type==="dir"?!0:o.item.mime_type?w.some(p=>o.item.mime_type?.startsWith(p)):!1}),u=e.computed(()=>c.value&&d.value),m=e.computed(()=>["file-item-"+o.explorerId,o.view==="grid"?"vf-explorer-item-grid":"vf-explorer-item-list",o.isSelected?"vf-explorer-selected":"",u.value?"":"vf-explorer-item--unselectable"]),i=e.computed(()=>({opacity:o.isDragging||s.isCut(o.item.path)||!u.value?.5:""}));let v=null;const _=e.ref(null);let V=!1;const b=()=>{v&&clearTimeout(v),h.value=!0},h=e.ref(!0),f=w=>{if(h.value=!1,v&&(w.preventDefault(),clearTimeout(v)),!V)V=!0,r("click",w),_.value=setTimeout(()=>{V=!1},300);else return V=!1,r("dblclick",w),v&&clearTimeout(v),!1;if(w.currentTarget&&w.currentTarget instanceof HTMLElement){const p=w.currentTarget.getBoundingClientRect();w.preventDefault(),v=setTimeout(()=>{let N=p.y+p.height;N+146>window.innerHeight-10&&(N=p.y-146),N<10&&(N=10);const B=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!0,view:window,button:2,buttons:0,clientX:p.x,clientY:N});w.target?.dispatchEvent(B)},300)}};return(w,p)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(m.value),style:e.normalizeStyle(i.value),"data-key":n.item.path,"data-row":n.rowIndex,"data-col":n.colIndex,draggable:h.value,onTouchstart:p[1]||(p[1]=g=>f(g)),onTouchend:p[2]||(p[2]=g=>b()),onClick:p[3]||(p[3]=g=>r("click",g)),onDblclick:p[4]||(p[4]=g=>r("dblclick",g)),onContextmenu:p[5]||(p[5]=e.withModifiers(g=>r("contextmenu",g),["prevent","stop"])),onDragstart:p[6]||(p[6]=g=>r("dragstart",g)),onDragend:p[7]||(p[7]=g=>r("dragend",g))},[n.view==="grid"?(e.openBlock(),e.createElementBlock("div",Ku,[e.unref(s).isReadOnly(n.item)?(e.openBlock(),e.createBlock(e.unref(jt),{key:0,class:"vuefinder__item--readonly vuefinder__item--readonly--left",title:"Read Only"})):e.createCommentVNode("",!0),e.createElementVNode("div",Wu,[(n.item.mime_type??"").startsWith("image")&&n.showThumbnails?(e.openBlock(),e.createElementBlock("img",{key:0,onTouchstart:p[0]||(p[0]=g=>g.preventDefault()),src:"data:image/png;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",class:"vuefinder__explorer__item-thumbnail lazy","data-src":e.unref(l).adapter.getPreviewUrl({path:n.item.path}),alt:n.item.basename},null,40,Gu)):(e.openBlock(),e.createBlock(Ut,{key:1,item:n.item,ext:!0},{icon:e.withCtx(g=>[e.renderSlot(w.$slots,"icon",e.normalizeProps(e.guardReactiveProps(g)))]),_:3},8,["item"]))]),e.createElementVNode("span",qu,e.toDisplayString(e.unref(pt)(n.item.basename)),1)])):(e.openBlock(),e.createElementBlock("div",Yu,[e.createElementVNode("div",Qu,[e.createElementVNode("div",Xu,[e.createVNode(Ut,{item:n.item,small:n.compact},{icon:e.withCtx(g=>[e.renderSlot(w.$slots,"icon",e.normalizeProps(e.guardReactiveProps(g)))]),_:3},8,["item","small"])]),e.createElementVNode("span",Ju,e.toDisplayString(n.item.basename),1),e.createElementVNode("div",null,[e.unref(s).isReadOnly(n.item)?(e.openBlock(),e.createBlock(e.unref(jt),{key:0,class:"vuefinder__item--readonly vuefinder__item--readonly--list",title:"Read Only"})):e.createCommentVNode("",!0)])]),n.showPath?(e.openBlock(),e.createElementBlock("div",Zu,e.toDisplayString(n.item.path),1)):e.createCommentVNode("",!0),n.showPath?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",em,[n.item.file_size?(e.openBlock(),e.createElementBlock("div",tm,e.toDisplayString(e.unref(l).filesize(n.item.file_size)),1)):e.createCommentVNode("",!0)])),!n.showPath&&n.item.last_modified?(e.openBlock(),e.createElementBlock("div",nm,e.toDisplayString(new Date(n.item.last_modified*1e3).toLocaleString()),1)):e.createCommentVNode("",!0)])),e.unref(a).get("pinnedFolders").find(g=>g.path===n.item.path)?(e.openBlock(),e.createBlock(e.unref(ht),{key:2,class:"vuefinder__item--pinned"})):e.createCommentVNode("",!0)],46,ju))}}),rm=["data-row"],Kt=e.defineComponent({__name:"FileRow",props:{rowIndex:{},rowHeight:{},view:{},itemsPerRow:{},items:{},compact:{type:Boolean},showThumbnails:{type:Boolean},showPath:{type:Boolean},isDraggingItem:{type:Function},isSelected:{type:Function},dragNDropEvents:{type:Function},explorerId:{}},emits:["click","dblclick","contextmenu","dragstart","dragend"],setup(n,{emit:t}){const o=n,r=t,l=e.computed(()=>[o.view==="grid"?"vf-explorer-item-grid-row":"vf-explorer-item-list-row","pointer-events-none"]),s=e.computed(()=>({position:"absolute",top:0,left:0,width:"100%",height:`${o.rowHeight}px`,transform:`translateY(${o.rowIndex*o.rowHeight}px)`})),a=e.computed(()=>o.view==="grid"?{gridTemplateColumns:`repeat(${o.itemsPerRow||1}, 1fr)`}:{gridTemplateColumns:"1fr"});return(c,d)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(l.value),"data-row":n.rowIndex,style:e.normalizeStyle(s.value)},[e.createElementVNode("div",{class:e.normalizeClass(["grid justify-self-start",{"w-full":n.view==="list"}]),style:e.normalizeStyle(a.value)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.items,(u,m)=>(e.openBlock(),e.createBlock(om,e.mergeProps({key:u.path,item:u,view:n.view,compact:n.compact,"show-thumbnails":n.showThumbnails,"show-path":n.showPath,"is-selected":n.isSelected(u.path),"is-dragging":n.isDraggingItem(u.path),"row-index":n.rowIndex,"col-index":m},e.toHandlers(n.dragNDropEvents(u)),{onClick:d[0]||(d[0]=i=>r("click",i)),onDblclick:d[1]||(d[1]=i=>r("dblclick",i)),onContextmenu:d[2]||(d[2]=i=>r("contextmenu",i)),onDragstart:d[3]||(d[3]=i=>r("dragstart",i)),onDragend:d[4]||(d[4]=i=>r("dragend",i)),explorerId:n.explorerId}),{icon:e.withCtx(i=>[e.renderSlot(c.$slots,"icon",e.mergeProps({ref_for:!0},i))]),_:3},16,["item","view","compact","show-thumbnails","show-path","is-selected","is-dragging","row-index","col-index","explorerId"]))),128))],6)],14,rm))}}),lm=["onClick"],am=e.defineComponent({__name:"Toast",setup(n){const t=e.inject("ServiceContainer"),{getStore:o}=t.storage,r=e.ref(o("full-screen",!1)),l=e.ref([]),s=d=>d==="error"?"text-red-400 border-red-400 dark:text-red-300 dark:border-red-300":"text-lime-600 border-lime-600 dark:text-lime-300 dark:border-lime-1300",a=d=>{l.value.splice(d,1)},c=d=>{let u=l.value.findIndex(m=>m.id===d);u!==-1&&a(u)};return t.emitter.on("vf-toast-clear",()=>{l.value=[]}),t.emitter.on("vf-toast-push",d=>{let u=new Date().getTime().toString(36).concat(performance.now().toString(),Math.random().toString()).replace(/\./g,"");d.id=u,l.value.push(d),setTimeout(()=>{c(u)},5e3)}),(d,u)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__toast",r.value.value?"vuefinder__toast--fixed":"vuefinder__toast--absolute"])},[e.createVNode(e.TransitionGroup,{name:"vuefinder__toast-item","enter-active-class":"vuefinder__toast-item--enter-active","leave-active-class":"vuefinder__toast-item--leave-active","leave-to-class":"vuefinder__toast-item--leave-to"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,(m,i)=>(e.openBlock(),e.createElementBlock("div",{key:i,onClick:v=>a(i),class:e.normalizeClass(["vuefinder__toast__message",s(m.type)])},e.toDisplayString(m.label),11,lm))),128))]),_:1})],2))}}),sm={class:"vuefinder__explorer__container"},im={ref:"customScrollBar",class:"vuefinder__explorer__scrollbar"},cm={key:0,class:"vuefinder__explorer__header"},dm={key:0,class:"vuefinder__linear-loader"},um=e.defineComponent({__name:"Explorer",props:{onFileDclick:{type:Function},onFolderDclick:{type:Function}},setup(n){const t=n,o=e.inject("ServiceContainer"),r=Ie(o,["vuefinder__drag-over"]),l=e.useTemplateRef("dragImage"),s=e.shallowRef(null),a=e.useTemplateRef("scrollContainer"),c=e.useTemplateRef("scrollContent"),d=o.fs,u=o.config,m=L.useStore(u.state),i=L.useStore(d.sort),v=L.useStore(d.sortedFiles),_=L.useStore(d.selectedKeys),V=L.useStore(d.loading),b=D=>_.value?.has(D)??!1;let h=null;const f=e.ref(null),w=e.useTemplateRef("customScrollBar"),p=e.useTemplateRef("customScrollBarContainer"),g=e.computed(()=>{const D=m.value.view,P=m.value.compactListView;return D==="grid"?88:P?24:50}),{t:C}=o.i18n,{itemsPerRow:N,totalHeight:B,visibleRows:A,handleScroll:T,getRowItems:H,getItemsInRange:K,getItemPosition:X,updateItemsPerRow:R}=Cu(e.computed(()=>v.value??[]),{scrollContainer:a,itemWidth:104,rowHeight:g,overscan:2,containerPadding:0,lockItemsPerRow:e.computed(()=>m.value.view==="list")}),{explorerId:j,isDragging:Y,initializeSelectionArea:Q,destroySelectionArea:E,updateSelectionArea:y,handleContentClick:k}=Su({getItemPosition:X,getItemsInRange:K,getKey:D=>D.path,selectionObject:s,rowHeight:g,itemWidth:104}),x=e.ref(null),F=D=>{if(!D||!x.value)return!1;const P=_.value?.has(x.value)??!1;return Y.value&&(P?_.value?.has(D)??!1:D===x.value)};e.watch(()=>u.get("view"),D=>{D==="list"?N.value=1:R()},{immediate:!0}),e.watch(N,D=>{u.get("view")==="list"&&D!==1&&(N.value=1)});const O=D=>v.value?.[D];e.onMounted(()=>{if(Q(),s.value&&s.value.on("beforestart",({event:D})=>{const P=D?.target===c.value;if(!D?.metaKey&&!D?.ctrlKey&&!D?.altKey&&!P)return!1}),a.value&&(h=new Wt({elements_selector:".lazy",container:a.value})),e.watch(()=>[o.selectionFilterType,o.selectionFilterMimeIncludes],()=>{y()},{deep:!0}),p.value){const D=Ye.OverlayScrollbars(p.value,{scrollbars:{theme:"vf-scrollbars-theme"}},{initialized:P=>{f.value=P},scroll:P=>{const{scrollOffsetElement:U}=P.elements();a.value&&a.value.scrollTo({top:U.scrollTop,left:0})}});f.value=D}a.value&&a.value.addEventListener("scroll",()=>{const D=f.value;if(!D)return;const{scrollOffsetElement:P}=D.elements();P.scrollTo({top:a.value.scrollTop,left:0})})}),e.onMounted(()=>{o.emitter.on("vf-refresh-thumbnails",()=>{h&&h.update()})}),e.onUpdated(()=>{if(h&&h.update(),f.value&&w.value&&a.value){const P=a.value.scrollHeight>a.value.clientHeight,U=w.value;U.style.display=P?"block":"none",U.style.height=`${B.value}px`}}),e.onUnmounted(()=>{E(),h&&(h.destroy(),h=null),f.value&&(f.value.destroy(),f.value=null)});const q=D=>{const P=D.target?.closest(".file-item-"+j),U=D;if(P){const W=String(P.getAttribute("data-key")),S=v.value?.find(re=>re.path===W),$=o.selectionFilterType,M=o.selectionFilterMimeIncludes,I=!$||$==="both"||$==="files"&&S?.type==="file"||$==="dirs"&&S?.type==="dir";let J=!0;if(M&&Array.isArray(M)&&M.length>0&&(S?.type==="dir"?J=!0:S?.mime_type?J=M.some(re=>(S?.mime_type).startsWith(re)):J=!1),!I||!J)return;const oe=o.selectionMode||"multiple";!U?.ctrlKey&&!U?.metaKey&&(D.type!=="touchstart"||!d.isSelected(W))&&(d.clearSelection(),s.value?.clearSelection(!0,!0)),s.value?.resolveSelectables(),D.type==="touchstart"&&d.isSelected(W)?d.select(W,oe):d.toggleSelect(W,oe)}d.setSelectedCount(_.value?.size||0)},G=D=>{if(D.type==="file"&&t.onFileDclick){o.emitter.emit("vf-file-dclick",D);return}if(D.type==="dir"&&t.onFolderDclick){o.emitter.emit("vf-folder-dclick",D);return}const P=o.contextMenuItems.find(U=>U.show(o,{items:[D],target:D}));P&&P.action(o,[D])},ve=D=>{const P=D.target?.closest(".file-item-"+j),U=P?String(P.getAttribute("data-key")):null;if(!U)return;const W=v.value?.find(J=>J.path===U),S=o.selectionFilterType,$=o.selectionFilterMimeIncludes,M=!S||S==="both"||S==="files"&&W?.type==="file"||S==="dirs"&&W?.type==="dir";let I=!0;$&&Array.isArray($)&&$.length>0&&(W?.type==="dir"?I=!0:W?.mime_type?I=$.some(J=>(W?.mime_type).startsWith(J)):I=!1),!(!M||!I)&&W&&G(W)},he=()=>{const D=_.value;return v.value?.filter(P=>D?.has(P.path))||[]},Ve=D=>{D.preventDefault();const P=D.target?.closest(".file-item-"+j);if(P){const U=String(P.getAttribute("data-key")),W=v.value?.find(J=>J.path===U),S=o.selectionFilterType,$=o.selectionFilterMimeIncludes,M=!S||S==="both"||S==="files"&&W?.type==="file"||S==="dirs"&&W?.type==="dir";let I=!0;if($&&Array.isArray($)&&$.length>0&&(W?.type==="dir"?I=!0:W?.mime_type?I=$.some(J=>(W?.mime_type).startsWith(J)):I=!1),!M||!I)return;_.value?.has(U)||(d.clearSelection(),d.select(U)),o.emitter.emit("vf-contextmenu-show",{event:D,items:he(),target:W})}},$e=D=>{D.preventDefault(),o.emitter.emit("vf-contextmenu-show",{event:D,items:he()})},Oe=D=>{if(D.altKey||D.ctrlKey||D.metaKey)return D.preventDefault(),!1;Y.value=!0;const P=D.target?.closest(".file-item-"+j);if(x.value=P?String(P.dataset.key):null,D.dataTransfer&&x.value){D.dataTransfer.setDragImage(l.value,0,15),D.dataTransfer.effectAllowed="all",D.dataTransfer.dropEffect="copy";const U=_.value?.has(x.value)?Array.from(_.value):[x.value];D.dataTransfer.setData("items",JSON.stringify(U)),d.setDraggedItem(x.value)}},Le=()=>{x.value=null};return(D,P)=>(e.openBlock(),e.createElementBlock("div",sm,[e.createElementVNode("div",{ref:"customScrollBarContainer",class:e.normalizeClass(["vuefinder__explorer__scrollbar-container",[{"grid-view":e.unref(m).view==="grid"}]])},[e.createElementVNode("div",im,null,512)],2),e.unref(m).view==="list"?(e.openBlock(),e.createElementBlock("div",cm,[e.createElementVNode("div",{onClick:P[0]||(P[0]=U=>e.unref(d).toggleSort("basename")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--name vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(C)("Name"))+" ",1),e.withDirectives(e.createVNode(ut,{direction:e.unref(i).order},null,8,["direction"]),[[e.vShow,e.unref(i).active&&e.unref(i).column==="basename"]])]),e.createElementVNode("div",{onClick:P[1]||(P[1]=U=>e.unref(d).toggleSort("file_size")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--size vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(C)("Size"))+" ",1),e.withDirectives(e.createVNode(ut,{direction:e.unref(i).order},null,8,["direction"]),[[e.vShow,e.unref(i).active&&e.unref(i).column==="file_size"]])]),e.createElementVNode("div",{onClick:P[2]||(P[2]=U=>e.unref(d).toggleSort("last_modified")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--date vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(C)("Date"))+" ",1),e.withDirectives(e.createVNode(ut,{direction:e.unref(i).order},null,8,["direction"]),[[e.vShow,e.unref(i).active&&e.unref(i).column==="last_modified"]])])])):e.createCommentVNode("",!0),e.createElementVNode("div",{ref_key:"scrollContainer",ref:a,class:e.normalizeClass(["vuefinder__explorer__selector-area","scroller-"+e.unref(j)]),onScroll:P[4]||(P[4]=(...U)=>e.unref(T)&&e.unref(T)(...U))},[e.unref(u).get("loadingIndicator")==="linear"&&e.unref(V)?(e.openBlock(),e.createElementBlock("div",dm)):e.createCommentVNode("",!0),e.createElementVNode("div",{ref_key:"scrollContent",ref:c,class:"scrollContent min-h-full",style:e.normalizeStyle({height:`${e.unref(B)}px`,position:"relative",width:"100%"}),onContextmenu:e.withModifiers($e,["self","prevent"]),onClick:P[3]||(P[3]=e.withModifiers((...U)=>e.unref(k)&&e.unref(k)(...U),["self"]))},[e.createElementVNode("div",{ref_key:"dragImage",ref:l,class:"vuefinder__explorer__drag-item"},[e.createVNode(Pu,{count:x.value&&e.unref(_).has(x.value)?e.unref(_).size:1},null,8,["count"])],512),e.unref(m).view==="grid"?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(e.unref(A),U=>(e.openBlock(),e.createBlock(Kt,{key:U,"row-index":U,"row-height":g.value,view:"grid","items-per-row":e.unref(N),items:e.unref(H)(e.unref(v),U),"show-thumbnails":e.unref(m).showThumbnails,"is-dragging-item":F,"is-selected":b,"drag-n-drop-events":W=>e.unref(r).events(W),explorerId:e.unref(j),onClick:q,onDblclick:ve,onContextmenu:Ve,onDragstart:Oe,onDragend:Le},{icon:e.withCtx(W=>[e.renderSlot(D.$slots,"icon",e.mergeProps({ref_for:!0},W))]),_:3},8,["row-index","row-height","items-per-row","items","show-thumbnails","drag-n-drop-events","explorerId"]))),128)):(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(e.unref(A),U=>(e.openBlock(),e.createBlock(Kt,{key:U,"row-index":U,"row-height":g.value,view:"list",items:O(U)?[O(U)]:[],compact:e.unref(m).compactListView,"is-dragging-item":F,"is-selected":b,"drag-n-drop-events":W=>e.unref(r).events(W),explorerId:e.unref(j),onClick:q,onDblclick:ve,onContextmenu:Ve,onDragstart:Oe,onDragend:Le},{icon:e.withCtx(W=>[e.renderSlot(D.$slots,"icon",e.mergeProps({ref_for:!0},W))]),_:3},8,["row-index","row-height","items","compact","drag-n-drop-events","explorerId"]))),128))],36)],34),e.createVNode(am)]))}}),mm=["href","download"],fm=["onClick"],pm=e.defineComponent({__name:"ContextMenu",setup(n){const t=e.inject("ServiceContainer"),o=e.ref(null),r=e.ref([]),l=e.reactive({active:!1,items:[],positions:{left:"0px",top:"0px"}});t.emitter.on("vf-context-selected",d=>{r.value=d});const s=d=>d.link(t,r.value),a=d=>{t.emitter.emit("vf-contextmenu-hide"),d.action(t,r.value)};t.emitter.on("vf-contextmenu-show",({event:d,items:u,target:m=null})=>{l.items=t.contextMenuItems.filter(i=>i.show(t,{items:u,target:m})),m?u.length>1&&u.some(i=>i.path===m.path)?t.emitter.emit("vf-context-selected",u):t.emitter.emit("vf-context-selected",[m]):t.emitter.emit("vf-context-selected",[]),c(d)}),t.emitter.on("vf-contextmenu-hide",()=>{l.active=!1});const c=d=>{const u=t.root,m=t.root.getBoundingClientRect(),i=u.getBoundingClientRect();let v=d.clientX-m.left,_=d.clientY-m.top;l.active=!0,e.nextTick(()=>{const V=o.value?.getBoundingClientRect();let b=V?.height??0,h=V?.width??0;v=i.right-d.pageX+window.scrollX<h?v-h:v,_=i.bottom-d.pageY+window.scrollY<b?_-b:_,l.positions={left:String(v)+"px",top:String(_)+"px"}})};return(d,u)=>e.withDirectives((e.openBlock(),e.createElementBlock("ul",{ref_key:"contextmenu",ref:o,class:e.normalizeClass([{"vuefinder__context-menu--active":l.active,"vuefinder__context-menu--inactive":!l.active},"vuefinder__context-menu"]),style:e.normalizeStyle(l.positions)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.items,m=>(e.openBlock(),e.createElementBlock("li",{class:"vuefinder__context-menu__item",key:m.title},[m.link?(e.openBlock(),e.createElementBlock("a",{key:0,class:"vuefinder__context-menu__link",target:"_blank",href:s(m),download:s(m),onClick:u[0]||(u[0]=i=>e.unref(t).emitter.emit("vf-contextmenu-hide"))},[e.createElementVNode("span",null,e.toDisplayString(m.title(e.unref(t).i18n)),1)],8,mm)):(e.openBlock(),e.createElementBlock("div",{key:1,class:"vuefinder__context-menu__action",onClick:i=>a(m)},[e.createElementVNode("span",null,e.toDisplayString(m.title(e.unref(t).i18n)),1)],8,fm))]))),128))],6)),[[e.vShow,l.active]])}}),vm={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"};function _m(n,t){return e.openBlock(),e.createElementBlock("svg",vm,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0"},null,-1)])])}const hm={render:_m},gm={class:"vuefinder__status-bar__wrapper"},wm={class:"vuefinder__status-bar__storage"},ym=["title"],km={class:"vuefinder__status-bar__storage-icon"},bm=["value"],Em=["value"],Vm={class:"vuefinder__status-bar__info space-x-2"},Nm={key:0},xm={key:1},Cm={key:0,class:"vuefinder__status-bar__size"},Sm={class:"vuefinder__status-bar__actions"},Bm=["title"],$m=e.defineComponent({__name:"Statusbar",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=L.useStore(r.sortedFiles),s=L.useStore(r.path),a=L.useStore(r.selectedCount),c=L.useStore(r.storages),d=L.useStore(r.selectedItems),u=L.useStore(r.path),m=v=>{const _=v.target.value;t.adapter.open(_+"://")},i=e.computed(()=>!d.value||d.value.length===0?0:d.value.reduce((v,_)=>v+(_.file_size||0),0));return(v,_)=>(e.openBlock(),e.createElementBlock("div",gm,[e.createElementVNode("div",wm,[e.createElementVNode("div",{class:"vuefinder__status-bar__storage-container",title:e.unref(o)("Storage")},[e.createElementVNode("div",km,[e.createVNode(e.unref(gt))]),e.createElementVNode("select",{name:"vuefinder-media-selector",value:e.unref(s)?.storage,onChange:m,class:"vuefinder__status-bar__storage-select",tabindex:"-1"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(c),V=>(e.openBlock(),e.createElementBlock("option",{value:V,key:V},e.toDisplayString(V),9,Em))),128))],40,bm)],8,ym),e.createElementVNode("div",Vm,[e.unref(a)===0?(e.openBlock(),e.createElementBlock("span",Nm,e.toDisplayString(e.unref(l).length)+" "+e.toDisplayString(e.unref(o)("items")),1)):(e.openBlock(),e.createElementBlock("span",xm,[e.createTextVNode(e.toDisplayString(e.unref(a))+" "+e.toDisplayString(e.unref(o)("selected"))+" ",1),i.value?(e.openBlock(),e.createElementBlock("span",Cm,e.toDisplayString(e.unref(t).filesize(i.value)),1)):e.createCommentVNode("",!0)]))])]),e.createElementVNode("div",Sm,[e.renderSlot(v.$slots,"actions",{path:e.unref(u).path,count:e.unref(a)||0,selected:e.unref(d)||[]}),e.createElementVNode("span",{class:"vuefinder__status-bar__about",title:e.unref(o)("About"),onClick:_[0]||(_[0]=V=>e.unref(t).modal.open(_t))},[e.createVNode(e.unref(hm),{class:"h-5 w-5 stroke-slate-500 cursor-pointer"})],8,Bm)])]))}}),Dm={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 24 24"};function Tm(n,t){return e.openBlock(),e.createElementBlock("svg",Dm,[...t[0]||(t[0]=[e.createElementVNode("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2m3.6 5.2a1 1 0 0 0-1.4.2L12 10.333 9.8 7.4a1 1 0 1 0-1.6 1.2l2.55 3.4-2.55 3.4a1 1 0 1 0 1.6 1.2l2.2-2.933 2.2 2.933a1 1 0 0 0 1.6-1.2L13.25 12l2.55-3.4a1 1 0 0 0-.2-1.4"},null,-1)])])}const Fm={render:Tm};function bn(n,t){const o=n.findIndex(r=>r.path===t.path);o>-1?n[o]=t:n.push(t)}const Mm={class:"vuefinder__folder-loader-indicator"},Am={key:1,class:"vuefinder__folder-loader-indicator--icon"},En=e.defineComponent({__name:"FolderLoaderIndicator",props:e.mergeModels({storage:{},path:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const t=n,o=e.inject("ServiceContainer"),r=e.useModel(n,"modelValue"),l=e.ref(!1);e.watch(()=>r.value,()=>s());const s=async()=>{l.value=!0;try{const c=(await o.adapter.list(t.path)).files.filter(d=>d.type==="dir");bn(o.treeViewData,{path:t.path,type:"dir",folders:c})}catch(a){console.error("Failed to fetch subfolders:",a)}finally{l.value=!1}};return(a,c)=>(e.openBlock(),e.createElementBlock("div",Mm,[l.value?(e.openBlock(),e.createBlock(e.unref(tt),{key:0,class:"vuefinder__folder-loader-indicator--loading"})):(e.openBlock(),e.createElementBlock("div",Am,[r.value?(e.openBlock(),e.createBlock(e.unref(et),{key:0,class:"vuefinder__folder-loader-indicator--minus"})):e.createCommentVNode("",!0),r.value?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(Ze),{key:1,class:"vuefinder__folder-loader-indicator--plus"}))]))]))}}),Im={key:0},Om={class:"vuefinder__treesubfolderlist__no-folders"},Lm=["onClick"],Rm=["title","onDblclick","onClick"],Pm={class:"vuefinder__treesubfolderlist__item-icon"},zm={class:"vuefinder__treesubfolderlist__subfolder"},Hm=e.defineComponent({__name:"TreeSubfolderList",props:{storage:{},path:{}},setup(n){const t=e.inject("ServiceContainer"),o=t.fs,r=Ie(t,["vuefinder__drag-over"]),l=e.ref({}),{t:s}=t.i18n,a=L.useStore(o.path),c=n,d=e.ref(null);e.onMounted(()=>{c.path===c.storage+"://"&&d.value&&Ye.OverlayScrollbars(d.value,{scrollbars:{theme:"vf-scrollbars-theme"}})});const u=e.computed(()=>t.treeViewData.find(m=>m.path===c.path)?.folders||[]);return(m,i)=>{const v=e.resolveComponent("TreeSubfolderList",!0);return e.openBlock(),e.createElementBlock("ul",{ref_key:"parentSubfolderList",ref:d,class:"vuefinder__treesubfolderlist__container"},[u.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("li",Im,[e.createElementVNode("div",Om,e.toDisplayString(e.unref(s)("No folders")),1)])),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value,_=>(e.openBlock(),e.createElementBlock("li",{key:_.path,class:"vuefinder__treesubfolderlist__item"},[e.createElementVNode("div",e.mergeProps(e.toHandlers(e.unref(r).events({..._,type:"dir"}),!0),{class:"vuefinder__treesubfolderlist__item-content"}),[e.createElementVNode("div",{class:"vuefinder__treesubfolderlist__item-toggle",onClick:V=>l.value[_.path]=!l.value[_.path]},[e.createVNode(En,{storage:n.storage,path:_.path,modelValue:l.value[_.path],"onUpdate:modelValue":V=>l.value[_.path]=V},null,8,["storage","path","modelValue","onUpdate:modelValue"])],8,Lm),e.createElementVNode("div",{class:"vuefinder__treesubfolderlist__item-link",title:_.path,onDblclick:V=>l.value[_.path]=!l.value[_.path],onClick:V=>e.unref(t).adapter.open(_.path)},[e.createElementVNode("div",Pm,[e.unref(a)?.path===_.path?(e.openBlock(),e.createBlock(e.unref(wt),{key:0,class:"vuefinder__item-icon__folder--open"})):(e.openBlock(),e.createBlock(e.unref(_e),{key:1,class:"vuefinder__item-icon__folder"}))]),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__treesubfolderlist__item-text",{"vuefinder__treesubfolderlist__item-text--active":e.unref(a)?.path===_.path}])},e.toDisplayString(_.basename),3)],40,Rm)],16),e.createElementVNode("div",zm,[e.withDirectives(e.createVNode(v,{storage:c.storage,path:_.path},null,8,["storage","path"]),[[e.vShow,l.value[_.path]]])])]))),128))],512)}}}),Um=e.defineComponent({__name:"TreeStorageItem",props:{storage:{}},setup(n){const t=e.inject("ServiceContainer"),o=t.fs,r=e.ref(!1),l=n,s=Ie(t,["vuefinder__drag-over"]),a=L.useStore(o.path),c=e.computed(()=>l.storage===a.value?.storage),d={storage:l.storage,path:l.storage+"://",type:"dir",basename:l.storage,extension:"",file_size:null,last_modified:null,mime_type:null,visibility:"public"};function u(m){m===a.value?.storage?r.value=!r.value:t.adapter.open(m+"://")}return(m,i)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",{onClick:i[2]||(i[2]=v=>u(n.storage)),class:"vuefinder__treestorageitem__header"},[e.createElementVNode("div",e.mergeProps(e.toHandlers(e.unref(s).events(d),!0),{class:["vuefinder__treestorageitem__info",c.value?"vuefinder__treestorageitem__info--active":""]}),[e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__treestorageitem__icon",c.value?"vuefinder__treestorageitem__icon--active":""])},[e.createVNode(e.unref(gt))],2),e.createElementVNode("div",null,e.toDisplayString(n.storage),1)],16),e.createElementVNode("div",{class:"vuefinder__treestorageitem__loader",onClick:i[1]||(i[1]=e.withModifiers(v=>r.value=!r.value,["stop"]))},[e.createVNode(En,{storage:n.storage,path:n.storage+"://",modelValue:r.value,"onUpdate:modelValue":i[0]||(i[0]=v=>r.value=v)},null,8,["storage","path","modelValue"])])]),e.withDirectives(e.createVNode(Hm,{storage:n.storage,path:n.storage+"://",class:"vuefinder__treestorageitem__subfolder"},null,8,["storage","path"]),[[e.vShow,r.value]])],64))}}),jm={class:"vuefinder__folder-indicator"},Km={class:"vuefinder__folder-indicator--icon"},Wm=e.defineComponent({__name:"FolderIndicator",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(n){const t=e.useModel(n,"modelValue");return(o,r)=>(e.openBlock(),e.createElementBlock("div",jm,[e.createElementVNode("div",Km,[t.value?(e.openBlock(),e.createBlock(e.unref(et),{key:0,class:"vuefinder__folder-indicator--minus"})):e.createCommentVNode("",!0),t.value?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(Ze),{key:1,class:"vuefinder__folder-indicator--plus"}))])]))}}),Gm={class:"vuefinder__treeview__header"},qm={class:"vuefinder__treeview__pinned-label"},Ym={class:"vuefinder__treeview__pin-text text-nowrap"},Qm={key:0,class:"vuefinder__treeview__pinned-list"},Xm=["onClick"],Jm=["title"],Zm=["onClick"],ef={key:0},tf={class:"vuefinder__treeview__no-pinned"},nf=e.defineComponent({__name:"TreeView",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,{getStore:r,setStore:l}=t.storage,s=t.fs,a=t.config,c=L.useStore(a.state),d=L.useStore(s.sortedFiles),u=L.useStore(s.storages),m=L.useStore(s.path),i=Ie(t,["vuefinder__drag-over"]),v=e.ref(190),_=e.ref(r("pinned-folders-opened",!0));e.watch(_,f=>l("pinned-folders-opened",f));const V=f=>{a.set("pinnedFolders",a.get("pinnedFolders").filter(w=>w.path!==f.path))},b=f=>{const w=f.clientX,p=f.target.parentElement;if(!p)return;const g=p.getBoundingClientRect().width;p.classList.remove("transition-[width]"),p.classList.add("transition-none");const C=B=>{v.value=g+B.clientX-w,v.value<50&&(v.value=0,a.set("showTreeView",!1)),v.value>50&&a.set("showTreeView",!0)},N=()=>{const B=p.getBoundingClientRect();v.value=B.width,p.classList.add("transition-[width]"),p.classList.remove("transition-none"),window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",N)};window.addEventListener("mousemove",C),window.addEventListener("mouseup",N)},h=e.ref(null);return e.onMounted(()=>{h.value&&Ye.OverlayScrollbars(h.value,{overflow:{x:"hidden"},scrollbars:{theme:"vf-scrollbars-theme"}})}),e.watch(d,f=>{const w=f.filter(p=>p.type==="dir");bn(t.treeViewData,{path:m.value?.path||"",folders:w.map(p=>({storage:p.storage,path:p.path,basename:p.basename,type:"dir"}))})}),(f,w)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",{onClick:w[0]||(w[0]=p=>e.unref(a).toggle("showTreeView")),class:e.normalizeClass(["vuefinder__treeview__overlay",e.unref(c).showTreeView?"vuefinder__treeview__backdrop":"hidden"])},null,2),e.createElementVNode("div",{style:e.normalizeStyle(e.unref(c).showTreeView?"min-width:100px;max-width:75%; width: "+v.value+"px":"width: 0"),class:"vuefinder__treeview__container"},[e.createElementVNode("div",{ref_key:"treeViewScrollElement",ref:h,class:"vuefinder__treeview__scroll"},[e.createElementVNode("div",Gm,[e.createElementVNode("div",{onClick:w[2]||(w[2]=p=>_.value=!_.value),class:"vuefinder__treeview__pinned-toggle"},[e.createElementVNode("div",qm,[e.createVNode(e.unref(ht),{class:"vuefinder__treeview__pin-icon"}),e.createElementVNode("div",Ym,e.toDisplayString(e.unref(o)("Pinned Folders")),1)]),e.createVNode(Wm,{modelValue:_.value,"onUpdate:modelValue":w[1]||(w[1]=p=>_.value=p)},null,8,["modelValue"])]),_.value?(e.openBlock(),e.createElementBlock("ul",Qm,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(c).pinnedFolders,p=>(e.openBlock(),e.createElementBlock("li",{key:p.path,class:"vuefinder__treeview__pinned-item"},[e.createElementVNode("div",e.mergeProps(e.toHandlers(e.unref(i).events(p),!0),{class:"vuefinder__treeview__pinned-folder",onClick:g=>e.unref(t).adapter.open(p.path)}),[e.unref(m)?.path!==p.path?(e.openBlock(),e.createBlock(e.unref(_e),{key:0,class:"vuefinder__treeview__folder-icon vuefinder__item-icon__folder"})):e.createCommentVNode("",!0),e.unref(m)?.path===p.path?(e.openBlock(),e.createBlock(e.unref(wt),{key:1,class:"vuefinder__item-icon__folder--open vuefinder__treeview__open-folder-icon"})):e.createCommentVNode("",!0),e.createElementVNode("div",{title:p.path,class:e.normalizeClass(["vuefinder__treeview__folder-name",{"vuefinder__treeview__folder-name--active":e.unref(m)?.path===p.path}])},e.toDisplayString(p.basename),11,Jm)],16,Xm),e.createElementVNode("div",{class:"vuefinder__treeview__remove-folder",onClick:g=>V(p)},[e.createVNode(e.unref(Fm),{class:"vuefinder__treeview__remove-icon"})],8,Zm)]))),128)),e.unref(c).pinnedFolders.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("li",ef,[e.createElementVNode("div",tf,e.toDisplayString(e.unref(o)("No folders pinned")),1)]))])):e.createCommentVNode("",!0)]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(u),p=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__treeview__storage",key:p},[e.createVNode(Um,{storage:p},null,8,["storage"])]))),128))],512),e.createElementVNode("div",{onMousedown:b,class:"vuefinder__treeview__resize-handle"},null,32)],4)],64))}}),te={newfolder:"newfolder",selectAll:"selectAll",pinFolder:"pinFolder",unpinFolder:"unpinFolder",delete:"delete",refresh:"refresh",preview:"preview",open:"open",openDir:"openDir",download:"download",download_archive:"download_archive",archive:"archive",unarchive:"unarchive",rename:"rename",move:"move",copy:"copy",paste:"paste"};function of(n){return n.items.length>1&&n.items.some(t=>t.path===n.target?.path)?"many":n.target?"one":"none"}function ee(n){const t=Object.assign({needsSearchQuery:!1},n);return(o,r)=>!(t.needsSearchQuery!==!!r.searchQuery||t.target!==void 0&&t.target!==of(r)||t.targetType!==void 0&&t.targetType!==r.target?.type||t.mimeType!==void 0&&t.mimeType!==r.target?.mime_type||t.feature!==void 0&&!o.features.includes(t.feature))}function De(...n){return(t,o)=>n.some(r=>r(t,o))}function Te(...n){return(t,o)=>n.every(r=>r(t,o))}const Vn=[{id:te.openDir,title:({t:n})=>n("Open containing folder"),action:(n,t)=>{const o=t[0];o&&n.adapter.open(o.dir)},show:ee({target:"one",needsSearchQuery:!0})},{id:te.refresh,title:({t:n})=>n("Refresh"),action:n=>{const t=n.fs;n.adapter.invalidateListQuery(t.path.get().path),n.adapter.open(t.path.get().path)},show:De(ee({target:"none"}),ee({target:"many"}))},{id:te.selectAll,title:({t:n})=>n("Select All"),action:n=>{n.fs.selectAll(n.selectionMode||"multiple")},show:(n,t)=>n.selectionMode==="multiple"&&ee({target:"none"})(n,t)},{id:te.newfolder,title:({t:n})=>n("New Folder"),action:n=>n.modal.open(St),show:ee({target:"none",feature:z.NEW_FOLDER})},{id:te.open,title:({t:n})=>n("Open"),action:(n,t)=>{t[0]&&n.adapter.open(t[0].path)},show:ee({target:"one",targetType:"dir"})},{id:te.pinFolder,title:({t:n})=>n("Pin Folder"),action:(n,t)=>{const o=n.config,r=o.get("pinnedFolders"),l=r.concat(t.filter(s=>r.findIndex(a=>a.path===s.path)===-1));o.set("pinnedFolders",l)},show:Te(ee({target:"one",targetType:"dir"}),(n,t)=>n.config.get("pinnedFolders").findIndex(l=>l.path===t.target?.path)===-1)},{id:te.unpinFolder,title:({t:n})=>n("Unpin Folder"),action:(n,t)=>{const o=n.config,r=o.get("pinnedFolders");o.set("pinnedFolders",r.filter(l=>!t.find(s=>s.path===l.path)))},show:Te(ee({target:"one",targetType:"dir"}),(n,t)=>n.config.get("pinnedFolders").findIndex(l=>l.path===t.target?.path)!==-1)},{id:te.preview,title:({t:n})=>n("Preview"),action:(n,t)=>n.modal.open(Je,{storage:t[0]?.storage,item:t[0]}),show:Te(ee({target:"one",feature:z.PREVIEW}),(n,t)=>t.target?.type!=="dir")},{id:te.download,link:(n,t)=>{if(t[0])return n.adapter.getDownloadUrl(t[0])},title:({t:n})=>n("Download"),action:()=>{},show:Te(ee({target:"one",feature:z.DOWNLOAD}),(n,t)=>t.target?.type!=="dir")},{id:te.rename,title:({t:n})=>n("Rename"),action:(n,t)=>n.modal.open(Xe,{items:t}),show:ee({target:"one",feature:z.RENAME})},{id:te.move,title:({t:n})=>n("Move"),action:(n,t)=>{const o=n.fs,r={storage:o.path.get().storage||"",path:o.path.get().path||"",type:"dir"};n.modal.open(Ce,{items:{from:t,to:r}})},show:De(ee({target:"one",feature:z.MOVE}),ee({target:"many",feature:z.MOVE}))},{id:te.copy,title:({t:n})=>n("Copy"),action:(n,t)=>{t.length>0&&n.fs.setClipboard("copy",new Set(t.map(o=>o.path)))},show:De(ee({target:"one",feature:z.COPY}),ee({target:"many",feature:z.COPY}))},{id:te.paste,title:({t:n})=>n("Paste"),action:(n,t)=>{const o=n.fs.getClipboard();if(o?.items?.size>0){const l=n.fs.path.get();let s=l.path,a=l.storage;t.length===1&&t[0].type==="dir"&&(s=t[0].path,a=t[0].storage);const c={storage:a||"",path:s||"",type:"dir"};n.modal.open(o.type==="cut"?Ce:kt,{items:{from:Array.from(o.items),to:c}})}},show:(n,t)=>n.fs.getClipboard()?.items?.size>0},{id:te.archive,title:({t:n})=>n("Archive"),action:(n,t)=>n.modal.open(Dt,{items:t}),show:De(ee({target:"many",feature:z.ARCHIVE}),Te(ee({target:"one",feature:z.ARCHIVE}),(n,t)=>t.target?.mime_type!=="application/zip"))},{id:te.unarchive,title:({t:n})=>n("Unarchive"),action:(n,t)=>n.modal.open($t,{items:t}),show:ee({target:"one",feature:z.UNARCHIVE,mimeType:"application/zip"})},{id:te.delete,title:({t:n})=>n("Delete"),action:(n,t)=>{n.modal.open(Qe,{items:t})},show:De(ee({feature:z.DELETE,target:"one"}),ee({feature:z.DELETE,target:"many"}))}],rf={key:0,class:"vuefinder__external-drop-overlay vuefinder__external-drop-overlay--relative"},lf={class:"vuefinder__external-drop-message"},af={class:"vuefinder__main__content"},Nn=e.defineComponent({__name:"VueFinder",props:{id:{default:"vf"},config:{},adapter:{},features:{type:[Boolean,Array],default:!0},debug:{type:Boolean,default:!1},theme:{default:"light"},locale:{},contextMenuItems:{default:()=>Vn},selectionMode:{default:"multiple"},selectionFilterType:{default:"both"},selectionFilterMimeIncludes:{default:()=>[]},onError:{},onSelect:{},onPathChange:{},onUploadComplete:{},onDeleteComplete:{},onReady:{},onFileDclick:{},onFolderDclick:{},customUploader:{}},emits:["select","path-change","upload-complete","delete-complete","error","ready","file-dclick","folder-dclick"],setup(n,{emit:t}){const o=t,r=n,l=Kn(r,e.inject("VueFinderOptions")||{});e.provide("ServiceContainer",l);const s=l.config,a=l.fs,c=L.useStore(s.state);gi(l);const{isDraggingExternal:d,handleDragEnter:u,handleDragOver:m,handleDragLeave:i,handleDrop:v}=wi();function _(){return s.get("theme")!==void 0}r.theme&&_()&&s.set("theme",r.theme),e.watch(()=>r.theme,h=>{h&&s.set("theme",h)},{immediate:!0}),e.onMounted(()=>{ao(s,l.root?.value)});function V(h){a.setPath(h.dirname),s.get("persist")&&s.set("path",h.dirname),a.setReadOnly(h.read_only??!1),l.modal.close(),a.setFiles(h.files),a.clearSelection(),a.setSelectedCount(0),a.setStorages(h.storages)}l.adapter.onBeforeOpen=()=>{a.setLoading(!0)},l.adapter.onAfterOpen=h=>{V(h),a.setLoading(!1)},l.emitter.on("vf-upload-complete",h=>{o("upload-complete",h)}),l.emitter.on("vf-delete-complete",h=>{o("delete-complete",h)}),l.emitter.on("vf-file-dclick",h=>{o("file-dclick",h)}),l.emitter.on("vf-folder-dclick",h=>{o("folder-dclick",h)}),e.onMounted(()=>{e.watch(()=>s.get("path"),f=>{l.adapter.open(f)});const h=s.get("persist")?s.get("path"):s.get("initialPath")??"";a.setPath(h),l.adapter.open(h),a.path.listen(f=>{o("path-change",f.path)}),a.selectedItems.listen(f=>{o("select",f)}),o("ready")});const b=async h=>{const f=await v(h);f.length>0&&(l.modal.open(Bt),setTimeout(()=>{l.emitter.emit("vf-external-files-dropped",f.map(w=>w.file))},100))};return(h,f)=>(e.openBlock(),e.createElementBlock("div",{ref:"root",tabindex:"0",class:e.normalizeClass(["vuefinder vuefinder__main vuefinder__themer",{"vuefinder--dragging-external":e.unref(d)}]),onDragenter:f[2]||(f[2]=(...w)=>e.unref(u)&&e.unref(u)(...w)),onDragover:f[3]||(f[3]=(...w)=>e.unref(m)&&e.unref(m)(...w)),onDragleave:f[4]||(f[4]=(...w)=>e.unref(i)&&e.unref(i)(...w)),onDrop:b},[e.createElementVNode("div",{class:e.normalizeClass(e.unref(c).value&&e.unref(c).value.theme||"light"),style:{height:"100%",width:"100%"}},[e.createElementVNode("div",{class:e.normalizeClass([e.unref(c)?.fullScreen?"vuefinder__main__fixed":"vuefinder__main__relative","vuefinder__main__container"]),onMousedown:f[0]||(f[0]=w=>e.unref(l).emitter.emit("vf-contextmenu-hide")),onTouchstart:f[1]||(f[1]=w=>e.unref(l).emitter.emit("vf-contextmenu-hide"))},[e.unref(d)?(e.openBlock(),e.createElementBlock("div",rf,[e.createElementVNode("div",lf,e.toDisplayString(e.unref(l).i18n.t("Drag and drop the files/folders to here.")),1)])):e.createCommentVNode("",!0),e.createVNode(Fc),e.createVNode(Ad),e.createVNode(xu),e.createElementVNode("div",af,[e.createVNode(nf),e.createVNode(um,{"on-file-dclick":r.onFileDclick,"on-folder-dclick":r.onFolderDclick},{icon:e.withCtx(w=>[e.renderSlot(h.$slots,"icon",e.normalizeProps(e.guardReactiveProps(w)))]),_:3},8,["on-file-dclick","on-folder-dclick"])]),e.createVNode($m,null,{actions:e.withCtx(w=>[e.renderSlot(h.$slots,"status-bar",e.normalizeProps(e.guardReactiveProps(w)))]),_:3})],34),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.createVNode(e.Transition,{name:"fade"},{default:e.withCtx(()=>[e.unref(l).modal.visible?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(l).modal.type),{key:0})):e.createCommentVNode("",!0)]),_:1})])),e.createVNode(pm)],2)],34))}}),xn={install(n,t={}){t.i18n=t.i18n??{};let[o]=Object.keys(t.i18n);t.locale=t.locale??o??"en",n.provide("VueFinderOptions",t),n.component("VueFinder",Nn)}};exports.ContextMenuIds=te;exports.VueFinder=Nn;exports.VueFinderPlugin=xn;exports.contextMenuItems=Vn;exports.default=xn;
