"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),D=require("@nanostores/vue"),it=require("mitt"),ct=require("@nanostores/persistent"),O=require("nanostores"),dt=require("vue-advanced-cropper"),qe=require("vanilla-lazyload"),ge=require("overlayscrollbars"),ut=require("@uppy/core"),mt=require("@uppy/xhr-upload"),ft=require("@viselect/vanilla"),Se=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");class vt{config;constructor(t){this.config=Object.assign({baseUrl:"",headers:{},params:{},body:{},xsrfHeaderName:"X-CSRF-Token",fetchParams:{}},t)}customFetch=async(...t)=>{let[o,r]=t;this.config.fetchRequestInterceptor&&(r=this.config.fetchRequestInterceptor(r));let l=await fetch(o,r);return this.config.fetchResponseInterceptor&&(l=await this.config.fetchResponseInterceptor(l)),l};transformRequestParams(t){const o=this.config,r={};Se!=null&&Se!==""&&o.xsrfHeaderName&&(r[o.xsrfHeaderName]=Se);const l=Object.assign({},o.headers,r,t.headers),d=Object.assign({},o.params,t.params),i=o.baseUrl+t.url,f=t.method;let a;if(f!=="get")if(t.body instanceof FormData){const s=t.body;o.body!=null&&Object.entries(this.config.body).forEach(([c,v])=>{s.append(c,String(v))}),a=s}else{const s=Object.assign({},t.body??{});o.body!=null&&Object.assign(s,this.config.body),a=s}const m={url:i,method:f,headers:l,params:d,body:a};if(o.transformRequest!=null){const s=o.transformRequest({url:i,method:f,headers:l,params:d,body:a??null});s.url!=null&&(m.url=s.url),s.method!=null&&(m.method=s.method),s.params!=null&&(m.params=s.params),s.headers!=null&&(m.headers=s.headers),s.body!=null&&(m.body=s.body)}return m}getDownloadUrl(t,o){if(o.url!=null)return o.url;const r=this.transformRequestParams({url:"",method:"get",params:{q:"download",storage:t,path:o.path}});return r.url+"?"+new URLSearchParams(r.params).toString()}getPreviewUrl(t,o){if(o.url!=null)return o.url;const r=this.transformRequestParams({url:"",method:"get",params:{q:"preview",storage:t,path:o.path}});return r.url+"?"+new URLSearchParams(r.params).toString()}async send(t){const o=this.transformRequestParams(t),r=t.responseType||"json",l={method:t.method,headers:o.headers,signal:t.abortSignal},d=o.url+"?"+new URLSearchParams(o.params);if(o.method!=="get"&&o.body!=null){let f;o.body instanceof FormData?f=t.body:(f=JSON.stringify(o.body),l.headers["Content-Type"]="application/json"),l.body=f}this.config.fetchParams&&Object.assign(l,this.config.fetchParams);const i=await this.customFetch(d,l);if(i.ok)return await i[r]();throw await i.json()}}function _t(n){const t={baseUrl:"",headers:{},params:{},body:{},xsrfHeaderName:"X-CSRF-Token",fetchParams:{}};return typeof n=="string"?Object.assign(t,{baseUrl:n}):Object.assign(t,n),new vt(t)}function pt(n){let t=localStorage.getItem(n+"_storage");const o=e.reactive(JSON.parse(t??"{}"));e.watch(o,r);function r(){Object.keys(o).length?localStorage.setItem(n+"_storage",JSON.stringify(o)):localStorage.removeItem(n+"_storage")}function l(a,m){o[a]=m}function d(a){delete o[a]}function i(){Object.keys(o).forEach(a=>d(a))}return{getStore:(a,m=null)=>a in o?o[a]:m,setStore:l,removeStore:d,clearStore:i}}async function ht(n,t){const o=t[n];return typeof o=="function"?(await o()).default:o}function gt(n,t,o,r){const{getStore:l,setStore:d}=n,i=e.ref({}),f=e.ref(l("locale",t)),a=(c,v=t)=>{ht(c,r).then(_=>{i.value=_,d("locale",c),f.value=c,d("translations",_),Object.values(r).length>1&&(o.emit("vf-toast-push",{label:"The language is set to "+c}),o.emit("vf-language-saved"))}).catch(_=>{v?(o.emit("vf-toast-push",{label:"The selected locale is not yet supported!",type:"error"}),a(v,null)):(console.error(_),o.emit("vf-toast-push",{label:"Locale cannot be loaded!",type:"error"}))})};e.watch(f,c=>{a(c)}),!l("locale")&&!Object.keys(r).length?a(t):i.value=l("translations");const m=(c,...v)=>v.length?m(c=c.replace("%s",String(v.shift())),...v):c;function s(c,...v){return i.value&&Object.prototype.hasOwnProperty.call(i.value,c)?m(i.value[c]||c,...v):m(c,...v)}return e.reactive({t:s,locale:f})}const R={EDIT:"edit",NEW_FILE:"newfile",NEW_FOLDER:"newfolder",PREVIEW:"preview",ARCHIVE:"archive",UNARCHIVE:"unarchive",SEARCH:"search",RENAME:"rename",UPLOAD:"upload",DELETE:"delete",FULL_SCREEN:"fullscreen",DOWNLOAD:"download",LANGUAGE:"language",MOVE:"move",COPY:"copy"},kt=Object.values(R),wt="4.0.0-dev";function Ue(n,t,o,r,l){return t=Math,o=t.log,r=1024,l=o(n)/o(r)|0,(n/t.pow(r,l)).toFixed(0)+" "+(l?"KMGTPEZY"[--l]+"iB":"B")}function Oe(n,t,o,r,l){return t=Math,o=t.log,r=1e3,l=o(n)/o(r)|0,(n/t.pow(r,l)).toFixed(0)+" "+(l?"KMGTPEZY"[--l]+"B":"B")}function bt(n){if(typeof n=="number")return n;const t={k:1,m:2,g:3,t:4},r=/(\d+(?:\.\d+)?)\s?(k|m|g|t)?b?/i.exec(n);if(!r)return 0;const l=parseFloat(r[1]||"0"),d=(r[2]||"").toLowerCase(),i=t[d]??0;return Math.round(l*Math.pow(1024,i))}const ne={SYSTEM:"system",LIGHT:"light",DARK:"dark"};function yt(n,t){const o=e.ref(ne.SYSTEM),r=e.ref(ne.LIGHT);o.value=n.getStore("theme",t??ne.SYSTEM);const l=window.matchMedia("(prefers-color-scheme: dark)"),d=i=>{o.value===ne.DARK||o.value===ne.SYSTEM&&i.matches?r.value=ne.DARK:r.value=ne.LIGHT};return d(l),l.addEventListener("change",d),{value:o,actualValue:r,set(i){o.value=i,i!==ne.SYSTEM?n.setStore("theme",i):n.removeStore("theme"),d(l)}}}function Et(){const n=e.shallowRef(null),t=e.ref(!1),o=e.ref();return{visible:t,type:n,data:o,open:(d,i=null)=>{document.querySelector("body").style.overflow="hidden",t.value=!0,n.value=d,o.value=i},close:()=>{document.querySelector("body").style.overflow="",t.value=!1,n.value=null}}}const Ne={view:"grid",fullScreen:!1,showTreeView:!1,showHiddenFiles:!0,compactListView:!0,metricUnits:!1,showThumbnails:!0,persist:!1,path:"",loadingIndicator:"circular",maxFileSize:null,pinnedFolders:[],customIcon:void 0},Vt=n=>{const t=`vuefinder_config_${n}`,o=ct.persistentAtom(t,Ne,{encode:JSON.stringify,decode:JSON.parse}),r=(m={})=>{const s=o.get(),c={...Ne,...m,...s};o.set(c)},l=m=>o.get()[m],d=()=>o.get(),i=(m,s)=>{const c=o.get();typeof m=="object"&&m!==null?o.set({...c,...m}):o.set({...c,[m]:s})};return{state:o,init:r,get:l,set:i,toggle:m=>{const s=o.get();i(m,!s[m])},all:d,reset:()=>{o.set({...Ne})}}};function St(n,t){if(typeof n=="string"&&typeof t=="string")return n.toLowerCase().localeCompare(t.toLowerCase());const o=Number(n)||0,r=Number(t)||0;return o===r?0:o<r?-1:1}const Nt=()=>{const n=O.atom(""),t=O.atom([]),o=O.atom([]),r=O.atom({active:!1,column:"",order:""}),l=O.atom({kind:"all",showHidden:!1}),d=O.atom(new Set),i=O.atom({type:"copy",path:"",items:new Set}),f=O.atom(null),a=O.atom(0),m=O.atom(!1),s=O.atom([]),c=O.atom(-1),v=O.computed([n],p=>{const k=(p||"local://").trim(),N=k.indexOf("://"),M=N>=0?k.slice(0,N):"",me=(N>=0?k.slice(N+3):k).split("/").filter(Boolean);let le="";const Ve=me.map(J=>(le=le?`${le}/${J}`:J,{basename:J,name:J,path:M?`${M}://${le}`:le,type:"dir"}));return{storage:M,breadcrumb:Ve,path:k}}),_=O.computed([o,r,l],(p,k,N)=>{let M=p;N.kind==="files"?M=M.filter(J=>J.type==="file"):N.kind==="folders"&&(M=M.filter(J=>J.type==="dir")),N.showHidden||(M=M.filter(J=>!J.basename.startsWith(".")));const{active:ee,column:me,order:le}=k;if(!ee||!me)return M;const Ve=le==="asc"?1:-1;return M.slice().sort((J,st)=>St(J[me],st[me])*Ve)}),b=O.computed([o,d],(p,k)=>k.size===0?[]:p.filter(N=>k.has(N.path))),V=(p,k)=>{const N=n.get();if((k??!0)&&N!==p){const M=s.get(),ee=c.get();ee<M.length-1&&M.splice(ee+1),M.length===0&&N&&M.push(N),M.push(p),s.set([...M]),c.set(M.length-1)}n.set(p)},g=p=>{o.set(p??[])},h=p=>{t.set(p??[])},w=(p,k)=>{r.set({active:!0,column:p,order:k})},u=p=>{const k=r.get();k.active&&k.column===p?r.set({active:k.order==="asc",column:p,order:"desc"}):r.set({active:!0,column:p,order:"asc"})},y=()=>{r.set({active:!1,column:"",order:""})},S=(p,k)=>{l.set({kind:p,showHidden:k})},x=()=>{l.set({kind:"all",showHidden:!1})},P=p=>{const k=new Set(d.get());k.add(p),d.set(k),a.set(k.size)},L=p=>{const k=new Set(d.get());k.delete(p),d.set(k),a.set(k.size)},H=p=>d.get().has(p),U=p=>{const k=new Set(d.get());k.has(p)?k.delete(p):k.add(p),d.set(k),a.set(k.size)},F=()=>{const p=new Set(o.get().map(k=>k.path));d.set(p),a.set(p.size)},j=()=>{d.set(new Set),a.set(0)},E=p=>{const k=new Set(p??[]);d.set(k),a.set(k.size)},B=p=>{a.set(p)},C=p=>{m.set(!!p)},A=()=>m.get(),I=(p,k)=>{const N=o.get().filter(M=>k.has(M.path));i.set({type:p,path:v.get().path,items:new Set(N)})},q=p=>O.computed([i],k=>k.type==="cut"&&Array.from(k.items).some(N=>N.path===p)),T=p=>O.computed([i],k=>k.type==="copy"&&Array.from(k.items).some(N=>N.path===p)),$=p=>{const k=q(p);return D.useStore(k).value??!1},z=p=>{const k=T(p);return D.useStore(k).value??!1},K=()=>{i.set({type:"copy",path:"",items:new Set})},X=()=>i.get(),re=p=>{f.set(p)},oe=()=>f.get(),pe=()=>{f.set(null)},ce=()=>{const p=s.get(),k=c.get();if(k>0){const N=k-1,M=p[N];M&&(c.set(N),V(M,!1))}},Ee=()=>{const p=s.get(),k=c.get();if(k<p.length-1){const N=k+1,M=p[N];M&&(c.set(N),V(M,!1))}},de=O.computed([c],p=>p>0),ue=O.computed([s,c],(p,k)=>k<p.length-1);return{files:o,storages:t,currentPath:n,sort:r,filter:l,selectedKeys:d,selectedCount:a,loading:m,draggedItem:f,clipboardItems:i,path:v,sortedFiles:_,selectedItems:b,setPath:V,setFiles:g,setStorages:h,setSort:w,toggleSort:u,clearSort:y,setFilter:S,clearFilter:x,select:P,deselect:L,toggleSelect:U,selectAll:F,isSelected:H,clearSelection:j,setSelection:E,setSelectedCount:B,setLoading:C,isLoading:A,setClipboard:I,createIsCut:q,createIsCopied:T,isCut:$,isCopied:z,clearClipboard:K,getClipboard:X,setDraggedItem:re,getDraggedItem:oe,clearDraggedItem:pe,goBack:ce,goForward:Ee,canGoBack:de,canGoForward:ue,navigationHistory:s,historyIndex:c}},ze={query:"",searchMode:!1},Bt=()=>{const n=O.atom(ze),t=O.computed(n,m=>m.query.length>0);return{state:n,hasQuery:t,setQuery:(m,s)=>{const c=m??"",v=s?c.length>0:n.get().searchMode;n.set({query:c,searchMode:v})},enterSearchMode:()=>{const m=n.get();n.set({...m,searchMode:!0})},exitSearchMode:()=>{n.set({query:"",searchMode:!1})},get:m=>n.get()[m],set:(m,s)=>{const c=n.get();typeof m=="object"&&m!==null?n.set({...c,...m}):n.set({...c,[m]:s})},all:()=>n.get(),reset:()=>{n.set({...ze})}}},Ct=(n,t)=>{const o=pt(n.id),r=it(),l=yt(o,n.theme),d=t.i18n,i=n.locale??t.locale,f=Vt(n.id),a=Nt(),m=Bt(),s=c=>Array.isArray(c)?c:kt;return e.reactive({version:wt,config:f,fs:a,search:m,root:e.useTemplateRef("root"),debug:n.debug,emitter:r,storage:o,i18n:gt(o,i,r,d),modal:Et(),requester:_t(n.request),features:s(n.features),treeViewData:[],theme:l,filesize:f.get("metricUnits")?Oe:Ue,contextMenuItems:n.contextMenuItems,customIcon:n.icon})},xt={class:"vuefinder__modal-layout__container"},$t={class:"vuefinder__modal-layout__content"},Dt={class:"vuefinder__modal-layout__footer"},Z=e.defineComponent({__name:"ModalLayout",setup(n){const t=e.ref(null),o=e.inject("ServiceContainer");return e.onMounted(()=>{const r=document.querySelector(".v-f-modal input");r&&r.focus(),e.nextTick(()=>{if(document.querySelector(".v-f-modal input")&&window.innerWidth<768&&t.value){const l=t.value.getBoundingClientRect().bottom+16;window.scrollTo({top:l,left:0,behavior:"smooth"})}})}),(r,l)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass([e.unref(o).theme.actualValue,"vuefinder vuefinder__modal-layout"]),"aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",onKeyup:l[1]||(l[1]=e.withKeys(d=>e.unref(o).modal.close(),["esc"])),tabindex:"0"},[l[2]||(l[2]=e.createElementVNode("div",{class:"vuefinder__modal-layout__overlay"},null,-1)),e.createElementVNode("div",xt,[e.createElementVNode("div",{class:"vuefinder__modal-layout__wrapper",onMousedown:l[0]||(l[0]=e.withModifiers(d=>e.unref(o).modal.close(),["self"]))},[e.createElementVNode("div",{ref_key:"modalBody",ref:t,class:"vuefinder__modal-layout__body"},[e.createElementVNode("div",$t,[e.renderSlot(r.$slots,"default")]),e.createElementVNode("div",Dt,[e.renderSlot(r.$slots,"buttons")])],512)],32)])],34))}}),Tt={class:"vuefinder__modal-header"},Mt={class:"vuefinder__modal-header__icon-container"},Ft={class:"vuefinder__modal-header__title",id:"modal-title"},te=e.defineComponent({__name:"ModalHeader",props:{title:{},icon:{}},setup(n){return(t,o)=>(e.openBlock(),e.createElementBlock("div",Tt,[e.createElementVNode("div",Mt,[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.icon),{class:"vuefinder__modal-header__icon"}))]),e.createElementVNode("h3",Ft,e.toDisplayString(n.title),1)]))}}),At={props:{on:{type:String,required:!0}},setup(n,{emit:t,slots:o}){const r=e.inject("ServiceContainer"),l=e.ref(!1),{t:d}=r.i18n;let i=null;const f=()=>{clearTimeout(i),l.value=!0,i=setTimeout(()=>{l.value=!1},2e3)};return e.onMounted(()=>{r.emitter.on(n.on,f)}),e.onUnmounted(()=>{clearTimeout(i)}),{shown:l,t:d}}},It=(n,t)=>{const o=n.__vccOpts||n;for(const[r,l]of t)o[r]=l;return o},Lt={key:1};function Rt(n,t,o,r,l,d){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__action-message",{"vuefinder__action-message--hidden":!r.shown}])},[n.$slots.default?e.renderSlot(n.$slots,"default",{key:0}):(e.openBlock(),e.createElementBlock("span",Lt,e.toDisplayString(r.t("Saved.")),1))],2)}const ae=It(At,[["render",Rt]]),zt={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",viewBox:"0 0 24 24"};function Pt(n,t){return e.openBlock(),e.createElementBlock("svg",zt,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87q.11.06.22.127c.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a8 8 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a7 7 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a7 7 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a7 7 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124q.108-.066.22-.128c.332-.183.582-.495.644-.869z"},null,-1),e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0"},null,-1)])])}const Ht={render:Pt},qt={class:"vuefinder__about-modal__content"},Ut={class:"vuefinder__about-modal__main"},Ot={class:"vuefinder__about-modal__tabs","aria-label":"Tabs"},jt=["onClick","aria-current"],Kt={key:0,class:"vuefinder__about-modal__tab-content"},Gt={class:"vuefinder__about-modal__description"},Yt={href:"https://vuefinder.ozdemir.be",class:"vuefinder__about-modal__link",target:"_blank"},Wt={href:"https://github.com/n1crack/vuefinder",class:"vuefinder__about-modal__link",target:"_blank"},Qt={key:1,class:"vuefinder__about-modal__tab-content"},Xt={class:"vuefinder__about-modal__description"},Jt={class:"vuefinder__about-modal__settings"},Zt={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},eo={class:"vuefinder__about-modal__setting-input"},to=["checked"],oo={class:"vuefinder__about-modal__setting-label"},no={for:"metric_unit",class:"vuefinder__about-modal__label"},ro={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},lo={class:"vuefinder__about-modal__setting-input"},ao=["checked"],so={class:"vuefinder__about-modal__setting-label"},io={for:"large_icons",class:"vuefinder__about-modal__label"},co={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},uo={class:"vuefinder__about-modal__setting-input"},mo=["checked"],fo={class:"vuefinder__about-modal__setting-label"},vo={for:"persist_path",class:"vuefinder__about-modal__label"},_o={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},po={class:"vuefinder__about-modal__setting-input"},ho=["checked"],go={class:"vuefinder__about-modal__setting-label"},ko={for:"show_thumbnails",class:"vuefinder__about-modal__label"},wo={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},bo={class:"vuefinder__about-modal__setting-input"},yo={for:"theme",class:"vuefinder__about-modal__label"},Eo={class:"vuefinder__about-modal__setting-label"},Vo=["label"],So=["value"],No={key:0,class:"vuefinder__about-modal__setting"},Bo={class:"vuefinder__about-modal__setting-input"},Co={for:"language",class:"vuefinder__about-modal__label"},xo={class:"vuefinder__about-modal__setting-label"},$o=["label"],Do=["value"],To={key:2,class:"vuefinder__about-modal__tab-content"},Mo={class:"vuefinder__about-modal__shortcuts"},Fo={class:"vuefinder__about-modal__shortcut"},Ao={class:"vuefinder__about-modal__shortcut"},Io={class:"vuefinder__about-modal__shortcut"},Lo={class:"vuefinder__about-modal__shortcut"},Ro={class:"vuefinder__about-modal__shortcut"},zo={class:"vuefinder__about-modal__shortcut"},Po={class:"vuefinder__about-modal__shortcut"},Ho={class:"vuefinder__about-modal__shortcut"},qo={class:"vuefinder__about-modal__shortcut"},Uo={class:"vuefinder__about-modal__shortcut"},Oo={key:3,class:"vuefinder__about-modal__tab-content"},jo={class:"vuefinder__about-modal__description"},xe=e.defineComponent({__name:"ModalAbout",setup(n){const t=e.inject("ServiceContainer"),o=t.config,{clearStore:r}=t.storage,{t:l}=t.i18n,d={ABOUT:"about",SETTINGS:"settings",SHORTCUTS:"shortcuts",RESET:"reset"},i=e.computed(()=>[{name:l("About"),key:d.ABOUT,current:!1},{name:l("Settings"),key:d.SETTINGS,current:!1},{name:l("Shortcuts"),key:d.SHORTCUTS,current:!1},{name:l("Reset"),key:d.RESET,current:!1}]),f=e.ref("about"),a=async()=>{o.reset(),r(),location.reload()},m=w=>{t.theme.set(w),t.emitter.emit("vf-theme-saved")},s=()=>{o.toggle("metricUnits"),t.filesize=o.get("metricUnits")?Oe:Ue,t.emitter.emit("vf-metric-units-saved")},c=()=>{o.toggle("compactListView"),t.emitter.emit("vf-compact-view-saved")},v=()=>{o.toggle("showThumbnails"),t.emitter.emit("vf-show-thumbnails-saved")},_=()=>{o.toggle("persist"),t.emitter.emit("vf-persist-path-saved")},{i18n:b}=e.inject("VueFinderOptions"),g=Object.fromEntries(Object.entries({ar:"Arabic (العربيّة)",en:"English",fr:"French (Français)",de:"German (Deutsch)",fa:"Persian (فارسی)",he:"Hebrew (עִברִית)",hi:"Hindi (हिंदी)",pl:"Polish (Polski)",ru:"Russian (Pусский)",sv:"Swedish (Svenska)",tr:"Turkish (Türkçe)",nl:"Dutch (Nederlands)",zhCN:"Simplified Chinese (简体中文)",zhTW:"Traditional Chinese (繁體中文)"}).filter(([w])=>Object.keys(b).includes(w))),h=e.computed(()=>({system:l("System"),light:l("Light"),dark:l("Dark")}));return(w,u)=>(e.openBlock(),e.createBlock(Z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:u[3]||(u[3]=y=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(l)("Close")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",qt,[e.createVNode(te,{icon:e.unref(Ht),title:"Vuefinder "+e.unref(t).version},null,8,["icon","title"]),e.createElementVNode("div",Ut,[e.createElementVNode("div",null,[e.createElementVNode("div",null,[e.createElementVNode("nav",Ot,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,y=>(e.openBlock(),e.createElementBlock("button",{key:y.name,onClick:S=>f.value=y.key,class:e.normalizeClass([y.key===f.value?"vuefinder__about-modal__tab--active":"vuefinder__about-modal__tab--inactive","vuefinder__about-modal__tab"]),"aria-current":y.current?"page":void 0},e.toDisplayString(y.name),11,jt))),128))])])]),f.value===d.ABOUT?(e.openBlock(),e.createElementBlock("div",Kt,[e.createElementVNode("div",Gt,e.toDisplayString(e.unref(l)("Vuefinder is a simple, lightweight, and fast file manager library for Vue.js applications")),1),e.createElementVNode("a",Yt,e.toDisplayString(e.unref(l)("Project home")),1),e.createElementVNode("a",Wt,e.toDisplayString(e.unref(l)("Follow on GitHub")),1)])):e.createCommentVNode("",!0),f.value===d.SETTINGS?(e.openBlock(),e.createElementBlock("div",Qt,[e.createElementVNode("div",Xt,e.toDisplayString(e.unref(l)("Customize your experience with the following settings")),1),e.createElementVNode("div",Jt,[e.createElementVNode("fieldset",null,[e.createElementVNode("div",Zt,[e.createElementVNode("div",eo,[e.createElementVNode("input",{id:"metric_unit",name:"metric_unit",type:"checkbox",checked:e.unref(o).get("metricUnits"),onChange:s,class:"vuefinder__about-modal__checkbox"},null,40,to)]),e.createElementVNode("div",oo,[e.createElementVNode("label",no,[e.createTextVNode(e.toDisplayString(e.unref(l)("Use Metric Units"))+" ",1),e.createVNode(ae,{class:"ms-3",on:"vf-metric-units-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(l)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",ro,[e.createElementVNode("div",lo,[e.createElementVNode("input",{id:"large_icons",name:"large_icons",type:"checkbox",checked:e.unref(o).get("compactListView"),onChange:c,class:"vuefinder__about-modal__checkbox"},null,40,ao)]),e.createElementVNode("div",so,[e.createElementVNode("label",io,[e.createTextVNode(e.toDisplayString(e.unref(l)("Compact list view"))+" ",1),e.createVNode(ae,{class:"ms-3",on:"vf-compact-view-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(l)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",co,[e.createElementVNode("div",uo,[e.createElementVNode("input",{id:"persist_path",name:"persist_path",type:"checkbox",checked:e.unref(o).get("persist"),onChange:_,class:"vuefinder__about-modal__checkbox"},null,40,mo)]),e.createElementVNode("div",fo,[e.createElementVNode("label",vo,[e.createTextVNode(e.toDisplayString(e.unref(l)("Persist path on reload"))+" ",1),e.createVNode(ae,{class:"ms-3",on:"vf-persist-path-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(l)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",_o,[e.createElementVNode("div",po,[e.createElementVNode("input",{id:"show_thumbnails",name:"show_thumbnails",type:"checkbox",checked:e.unref(o).get("showThumbnails"),onChange:v,class:"vuefinder__about-modal__checkbox"},null,40,ho)]),e.createElementVNode("div",go,[e.createElementVNode("label",ko,[e.createTextVNode(e.toDisplayString(e.unref(l)("Show thumbnails"))+" ",1),e.createVNode(ae,{class:"ms-3",on:"vf-show-thumbnails-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(l)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",wo,[e.createElementVNode("div",bo,[e.createElementVNode("label",yo,e.toDisplayString(e.unref(l)("Theme")),1)]),e.createElementVNode("div",Eo,[e.withDirectives(e.createElementVNode("select",{id:"theme","onUpdate:modelValue":u[0]||(u[0]=y=>e.unref(t).theme.value=y),onChange:u[1]||(u[1]=y=>m(y.target?.value||"")),class:"vuefinder__about-modal__select"},[e.createElementVNode("optgroup",{label:e.unref(l)("Theme")},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h.value,(y,S)=>(e.openBlock(),e.createElementBlock("option",{value:S},e.toDisplayString(y),9,So))),256))],8,Vo)],544),[[e.vModelSelect,e.unref(t).theme.value]]),e.createVNode(ae,{class:"ms-3",on:"vf-theme-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(l)("Saved.")),1)]),_:1})])]),e.unref(t).features.includes(e.unref(R).LANGUAGE)&&Object.keys(e.unref(g)).length>1?(e.openBlock(),e.createElementBlock("div",No,[e.createElementVNode("div",Bo,[e.createElementVNode("label",Co,e.toDisplayString(e.unref(l)("Language")),1)]),e.createElementVNode("div",xo,[e.withDirectives(e.createElementVNode("select",{id:"language","onUpdate:modelValue":u[2]||(u[2]=y=>e.unref(t).i18n.locale=y),class:"vuefinder__about-modal__select"},[e.createElementVNode("optgroup",{label:e.unref(l)("Language")},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(g),(y,S)=>(e.openBlock(),e.createElementBlock("option",{value:S},e.toDisplayString(y),9,Do))),256))],8,$o)],512),[[e.vModelSelect,e.unref(t).i18n.locale]]),e.createVNode(ae,{class:"ms-3",on:"vf-language-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(l)("Saved.")),1)]),_:1})])])):e.createCommentVNode("",!0)])])])):e.createCommentVNode("",!0),f.value===d.SHORTCUTS?(e.openBlock(),e.createElementBlock("div",To,[e.createElementVNode("div",Mo,[e.createElementVNode("div",Fo,[e.createElementVNode("div",null,e.toDisplayString(e.unref(l)("Rename")),1),u[4]||(u[4]=e.createElementVNode("kbd",null,"F2",-1))]),e.createElementVNode("div",Ao,[e.createElementVNode("div",null,e.toDisplayString(e.unref(l)("Refresh")),1),u[5]||(u[5]=e.createElementVNode("kbd",null,"F5",-1))]),e.createElementVNode("div",Io,[e.createTextVNode(e.toDisplayString(e.unref(l)("Delete"))+" ",1),u[6]||(u[6]=e.createElementVNode("kbd",null,"Del",-1))]),e.createElementVNode("div",Lo,[e.createTextVNode(e.toDisplayString(e.unref(l)("Escape"))+" ",1),u[7]||(u[7]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Esc")],-1))]),e.createElementVNode("div",Ro,[e.createTextVNode(e.toDisplayString(e.unref(l)("Select All"))+" ",1),u[8]||(u[8]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"A")],-1))]),e.createElementVNode("div",zo,[e.createTextVNode(e.toDisplayString(e.unref(l)("Search"))+" ",1),u[9]||(u[9]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"F")],-1))]),e.createElementVNode("div",Po,[e.createTextVNode(e.toDisplayString(e.unref(l)("Toggle Sidebar"))+" ",1),u[10]||(u[10]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"E")],-1))]),e.createElementVNode("div",Ho,[e.createTextVNode(e.toDisplayString(e.unref(l)("Open Settings"))+" ",1),u[11]||(u[11]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,",")],-1))]),e.createElementVNode("div",qo,[e.createTextVNode(e.toDisplayString(e.unref(l)("Toggle Full Screen"))+" ",1),u[12]||(u[12]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"Enter")],-1))]),e.createElementVNode("div",Uo,[e.createTextVNode(e.toDisplayString(e.unref(l)("Preview"))+" ",1),u[13]||(u[13]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Space")],-1))])])])):e.createCommentVNode("",!0),f.value===d.RESET?(e.openBlock(),e.createElementBlock("div",Oo,[e.createElementVNode("div",jo,e.toDisplayString(e.unref(l)("Reset all settings to default")),1),e.createElementVNode("button",{onClick:a,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(l)("Reset Settings")),1)])):e.createCommentVNode("",!0)])])]),_:1}))}}),Ko={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function Go(n,t){return e.openBlock(),e.createElementBlock("svg",Ko,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21q.512.078 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48 48 0 0 0-3.478-.397m-12 .562q.51-.089 1.022-.165m0 0a48 48 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a52 52 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a49 49 0 0 0-7.5 0"},null,-1)])])}const je={render:Go},Yo={class:"vuefinder__delete-modal__content"},Wo={class:"vuefinder__delete-modal__form"},Qo={class:"vuefinder__delete-modal__description"},Xo={class:"vuefinder__delete-modal__files vf-scrollbar"},Jo={class:"vuefinder__delete-modal__file"},Zo={key:0,class:"vuefinder__delete-modal__icon vuefinder__delete-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},en={key:1,class:"vuefinder__delete-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},tn={class:"vuefinder__delete-modal__file-name"},on={class:"vuefinder__delete-modal__warning"},ke=e.defineComponent({__name:"ModalDelete",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=D.useStore(r.path),d=e.ref(t.modal.data.items),i=e.ref(""),f=()=>{d.value.length&&t.emitter.emit("vf-fetch",{params:{q:"delete",m:"post",storage:l.value.storage,path:l.value.path},body:{items:d.value.map(({path:a,type:m})=>({path:a,type:m}))},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:o("Files deleted.")})},onError:a=>{i.value=o(a.message)}})};return(a,m)=>(e.openBlock(),e.createBlock(Z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:f,class:"vf-btn vf-btn-danger"},e.toDisplayString(e.unref(o)("Yes, Delete!")),1),e.createElementVNode("button",{type:"button",onClick:m[1]||(m[1]=s=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1),e.createElementVNode("div",on,e.toDisplayString(e.unref(o)("This action cannot be undone.")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(te,{icon:e.unref(je),title:e.unref(o)("Delete files")},null,8,["icon","title"]),e.createElementVNode("div",Yo,[e.createElementVNode("div",Wo,[e.createElementVNode("p",Qo,e.toDisplayString(e.unref(o)("Are you sure you want to delete these files?")),1),e.createElementVNode("div",Xo,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,s=>(e.openBlock(),e.createElementBlock("p",Jo,[s.type==="dir"?(e.openBlock(),e.createElementBlock("svg",Zo,[...m[2]||(m[2]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",en,[...m[3]||(m[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),e.createElementVNode("span",tn,e.toDisplayString(s.basename),1)]))),256))]),i.value.length?(e.openBlock(),e.createBlock(e.unref(i),{key:0,onHidden:m[0]||(m[0]=s=>i.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),nn={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function rn(n,t){return e.openBlock(),e.createElementBlock("svg",nn,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"},null,-1)])])}const Ke={render:rn},ln={class:"vuefinder__rename-modal__content"},an={class:"vuefinder__rename-modal__item"},sn={class:"vuefinder__rename-modal__item-info"},cn={key:0,class:"vuefinder__rename-modal__icon vuefinder__rename-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},dn={key:1,class:"vuefinder__rename-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},un={class:"vuefinder__rename-modal__item-name"},we=e.defineComponent({__name:"ModalRename",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=D.useStore(r.path),d=e.ref(t.modal.data.items[0]),i=e.ref(t.modal.data.items[0].basename),f=e.ref(""),a=()=>{i.value!=""&&t.emitter.emit("vf-fetch",{params:{q:"rename",m:"post",storage:l.value.storage,path:l.value.path},body:{item:d.value.path,name:i.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:o("%s is renamed.",i.value)})},onError:m=>{f.value=o(m.message)}})};return(m,s)=>(e.openBlock(),e.createBlock(Z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:a,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Rename")),1),e.createElementVNode("button",{type:"button",onClick:s[2]||(s[2]=c=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(te,{icon:e.unref(Ke),title:e.unref(o)("Rename")},null,8,["icon","title"]),e.createElementVNode("div",ln,[e.createElementVNode("div",an,[e.createElementVNode("p",sn,[d.value.type==="dir"?(e.openBlock(),e.createElementBlock("svg",cn,[...s[3]||(s[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",dn,[...s[4]||(s[4]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),e.createElementVNode("span",un,e.toDisplayString(d.value.basename),1)]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":s[0]||(s[0]=c=>i.value=c),onKeyup:e.withKeys(a,["enter"]),class:"vuefinder__rename-modal__input",placeholder:"Name",type:"text"},null,544),[[e.vModelText,i.value]]),f.value.length?(e.openBlock(),e.createBlock(e.unref(f),{key:0,onHidden:s[1]||(s[1]=c=>f.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(f.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),mn=["title"],Ge=e.defineComponent({__name:"Message",props:{error:{type:Boolean}},emits:["hidden"],setup(n,{emit:t}){const o=t,r=e.inject("ServiceContainer"),{t:l}=r.i18n,d=e.ref(!1),i=e.ref(null),f=e.ref(i.value?.innerHTML);e.watch(f,()=>d.value=!1);const a=()=>{o("hidden"),d.value=!0};return(m,s)=>(e.openBlock(),e.createElementBlock("div",null,[d.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"strMessage",ref:i,class:e.normalizeClass(["vuefinder__message",n.error?"vuefinder__message--error":"vuefinder__message--success"])},[e.renderSlot(m.$slots,"default"),e.createElementVNode("div",{class:"vuefinder__message__close",onClick:a,title:e.unref(l)("Close")},[...s[0]||(s[0]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"vuefinder__message__icon"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,mn)],2))]))}}),fn={class:"vuefinder__text-preview"},vn={class:"vuefinder__text-preview__header"},_n=["title"],pn={class:"vuefinder__text-preview__actions"},hn={key:0,class:"vuefinder__text-preview__content"},gn={key:1},kn=e.defineComponent({__name:"Text",emits:["success"],setup(n,{emit:t}){const o=t,r=e.ref(""),l=e.ref(""),d=e.ref(null),i=e.ref(!1),f=e.ref(""),a=e.ref(!1),m=e.inject("ServiceContainer"),{t:s}=m.i18n;e.onMounted(()=>{m.requester.send({url:"",method:"get",params:{q:"preview",storage:m.modal.data.storage,path:m.modal.data.item.path},responseType:"text"}).then(_=>{r.value=_,o("success")})});const c=()=>{i.value=!i.value,l.value=r.value},v=()=>{f.value="",a.value=!1,m.requester.send({url:"",method:"post",params:{q:"save",storage:m.modal.data.storage,path:m.modal.data.item.path},body:{content:l.value},responseType:"text"}).then(_=>{f.value=s("Updated."),r.value=_,o("success"),i.value=!i.value}).catch(_=>{f.value=s(_.message),a.value=!0})};return(_,b)=>(e.openBlock(),e.createElementBlock("div",fn,[e.createElementVNode("div",vn,[e.createElementVNode("div",{class:"vuefinder__text-preview__title",id:"modal-title",title:e.unref(m).modal.data.item.path},e.toDisplayString(e.unref(m).modal.data.item.basename),9,_n),e.createElementVNode("div",pn,[i.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:v,class:"vuefinder__text-preview__save-button"},e.toDisplayString(e.unref(s)("Save")),1)):e.createCommentVNode("",!0),e.unref(m).features.includes(e.unref(R).EDIT)?(e.openBlock(),e.createElementBlock("button",{key:1,class:"vuefinder__text-preview__edit-button",onClick:b[0]||(b[0]=V=>c())},e.toDisplayString(i.value?e.unref(s)("Cancel"):e.unref(s)("Edit")),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("div",null,[i.value?(e.openBlock(),e.createElementBlock("div",gn,[e.withDirectives(e.createElementVNode("textarea",{ref_key:"editInput",ref:d,"onUpdate:modelValue":b[1]||(b[1]=V=>l.value=V),class:"vuefinder__text-preview__textarea",name:"text",cols:"30",rows:"10"},null,512),[[e.vModelText,l.value]])])):(e.openBlock(),e.createElementBlock("pre",hn,e.toDisplayString(r.value),1)),f.value.length?(e.openBlock(),e.createBlock(Ge,{key:2,onHidden:b[2]||(b[2]=V=>f.value=""),error:a.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(f.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)])]))}}),wn={class:"vuefinder__image-preview"},bn={class:"vuefinder__image-preview__header"},yn=["title"],En={class:"vuefinder__image-preview__actions"},Vn={class:"vuefinder__image-preview__image-container h-[50vh] w-full"},Sn=["src"],Nn=e.defineComponent({name:"ImagePreview",__name:"Image",emits:["success"],setup(n,{emit:t}){const o=t,r=e.inject("ServiceContainer"),{t:l}=r.i18n,d=e.ref(!1),i=e.ref(""),f=e.ref(!1),a=e.ref(r.requester.getPreviewUrl(r.modal.data.storage,r.modal.data.item)),m=e.ref(a.value),s=e.useTemplateRef("cropperRef"),c=async()=>{d.value=!d.value},v=async()=>{const b=s.value?.getResult({size:{width:795,height:341},fillColor:"#ffffff"})?.canvas;b&&b.toBlob(V=>{if(!V)return;i.value="",f.value=!1;const g=new FormData;g.set("file",V),r.requester.send({url:"",method:"post",params:{q:"upload",storage:r.modal.data.storage,path:r.modal.data.item.path},body:g}).then(()=>{i.value=l("Updated."),fetch(a.value,{cache:"reload",mode:"no-cors"});const h=r.root.querySelector('[data-src="'+a.value+'"]');h&&qe.resetStatus(h),r.emitter.emit("vf-refresh-thumbnails"),c(),o("success")}).catch(h=>{const w=h?.message??"Error";i.value=l(w),f.value=!0})})};return e.onMounted(()=>{o("success")}),(_,b)=>(e.openBlock(),e.createElementBlock("div",wn,[e.createElementVNode("div",bn,[e.createElementVNode("h3",{class:"vuefinder__image-preview__title",id:"modal-title",title:e.unref(r).modal.data.item.path},e.toDisplayString(e.unref(r).modal.data.item.basename),9,yn),e.createElementVNode("div",En,[d.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:v,class:"vuefinder__image-preview__crop-button"},e.toDisplayString(e.unref(l)("Crop")),1)):e.createCommentVNode("",!0),e.unref(r).features.includes(e.unref(R).EDIT)?(e.openBlock(),e.createElementBlock("button",{key:1,class:"vuefinder__image-preview__edit-button",onClick:b[0]||(b[0]=V=>c())},e.toDisplayString(d.value?e.unref(l)("Cancel"):e.unref(l)("Edit")),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("div",Vn,[d.value?(e.openBlock(),e.createBlock(e.unref(dt.Cropper),{key:1,ref_key:"cropperRef",ref:s,class:"w-full h-full",crossorigin:"anonymous",src:m.value,"stencil-props":{aspectRatio:795/341},"auto-zoom":!0,priority:"image",transitions:!0},null,8,["src"])):(e.openBlock(),e.createElementBlock("img",{key:0,style:{width:"100%",height:"100%"},src:e.unref(r).requester.getPreviewUrl(e.unref(r).modal.data.storage,e.unref(r).modal.data.item),class:"vuefinder__image-preview__image w-full h-full"},null,8,Sn))]),i.value.length?(e.openBlock(),e.createBlock(e.unref(i),{key:0,onHidden:b[1]||(b[1]=V=>i.value=""),error:f.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)]))}}),Bn={class:"vuefinder__default-preview"},Cn={class:"vuefinder__default-preview__header"},xn=["title"],$n=e.defineComponent({__name:"Default",emits:["success"],setup(n,{emit:t}){const o=e.inject("ServiceContainer"),r=t;return e.onMounted(()=>{r("success")}),(l,d)=>(e.openBlock(),e.createElementBlock("div",Bn,[e.createElementVNode("div",Cn,[e.createElementVNode("h3",{class:"vuefinder__default-preview__title",id:"modal-title",title:e.unref(o).modal.data.item.path},e.toDisplayString(e.unref(o).modal.data.item.basename),9,xn)]),d[0]||(d[0]=e.createElementVNode("div",null,null,-1))]))}}),Dn={class:"vuefinder__video-preview"},Tn=["title"],Mn={class:"vuefinder__video-preview__video",preload:"metadata",controls:""},Fn=["src"],An=e.defineComponent({__name:"Video",emits:["success"],setup(n,{emit:t}){const o=e.inject("ServiceContainer"),r=t,l=()=>o.requester.getPreviewUrl(o.modal.data.storage,o.modal.data.item);return e.onMounted(()=>{r("success")}),(d,i)=>(e.openBlock(),e.createElementBlock("div",Dn,[e.createElementVNode("h3",{class:"vuefinder__video-preview__title",id:"modal-title",title:e.unref(o).modal.data.item.path},e.toDisplayString(e.unref(o).modal.data.item.basename),9,Tn),e.createElementVNode("div",null,[e.createElementVNode("video",Mn,[e.createElementVNode("source",{src:l(),type:"video/mp4"},null,8,Fn),i[0]||(i[0]=e.createTextVNode(" Your browser does not support the video tag. ",-1))])])]))}}),In={class:"vuefinder__audio-preview"},Ln=["title"],Rn={class:"vuefinder__audio-preview__audio",controls:""},zn=["src"],Pn=e.defineComponent({__name:"Audio",emits:["success"],setup(n,{emit:t}){const o=t,r=e.inject("ServiceContainer"),l=()=>r.requester.getPreviewUrl(r.modal.data.storage,r.modal.data.item);return e.onMounted(()=>{o("success")}),(d,i)=>(e.openBlock(),e.createElementBlock("div",In,[e.createElementVNode("h3",{class:"vuefinder__audio-preview__title",id:"modal-title",title:e.unref(r).modal.data.item.path},e.toDisplayString(e.unref(r).modal.data.item.basename),9,Ln),e.createElementVNode("div",null,[e.createElementVNode("audio",Rn,[e.createElementVNode("source",{src:l(),type:"audio/mpeg"},null,8,zn),i[0]||(i[0]=e.createTextVNode(" Your browser does not support the audio element. ",-1))])])]))}}),Hn={class:"vuefinder__pdf-preview"},qn=["title"],Un=["data"],On=["src"],jn=e.defineComponent({__name:"Pdf",emits:["success"],setup(n,{emit:t}){const o=e.inject("ServiceContainer"),r=t,l=()=>o.requester.getPreviewUrl(o.modal.data.storage,o.modal.data.item);return e.onMounted(()=>{r("success")}),(d,i)=>(e.openBlock(),e.createElementBlock("div",Hn,[e.createElementVNode("h3",{class:"vuefinder__pdf-preview__title",id:"modal-title",title:e.unref(o).modal.data.item.path},e.toDisplayString(e.unref(o).modal.data.item.basename),9,qn),e.createElementVNode("div",null,[e.createElementVNode("object",{class:"vuefinder__pdf-preview__object",data:l(),type:"application/pdf",width:"100%",height:"100%"},[e.createElementVNode("iframe",{class:"vuefinder__pdf-preview__iframe",src:l(),width:"100%",height:"100%"}," Your browser does not support PDFs ",8,On)],8,Un)])]))}});function Kn(n,t=null){return new Date(n*1e3).toLocaleString(t??navigator.language??"en-US")}const Gn={class:"vuefinder__preview-modal__content"},Yn={key:0},Wn={class:"vuefinder__preview-modal__loading"},Qn={key:0,class:"vuefinder__preview-modal__loading-indicator"},Xn={class:"vuefinder__preview-modal__details"},Jn={class:"font-bold"},Zn={class:"font-bold pl-2"},er={key:0,class:"vuefinder__preview-modal__note"},tr=["download","href"],$e=e.defineComponent({__name:"ModalPreview",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=e.ref(!1),l=i=>(t.modal.data.item.mime_type??"").startsWith(i),d=t.features.includes(R.PREVIEW);return d||(r.value=!0),(i,f)=>(e.openBlock(),e.createBlock(Z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:f[6]||(f[6]=a=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Close")),1),e.unref(t).features.includes(e.unref(R).DOWNLOAD)?(e.openBlock(),e.createElementBlock("a",{key:0,target:"_blank",class:"vf-btn vf-btn-primary",download:e.unref(t).requester.getDownloadUrl(e.unref(t).modal.data.storage,e.unref(t).modal.data.item),href:e.unref(t).requester.getDownloadUrl(e.unref(t).modal.data.storage,e.unref(t).modal.data.item)},e.toDisplayString(e.unref(o)("Download")),9,tr)):e.createCommentVNode("",!0)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createElementVNode("div",Gn,[e.unref(d)?(e.openBlock(),e.createElementBlock("div",Yn,[l("text")?(e.openBlock(),e.createBlock(kn,{key:0,onSuccess:f[0]||(f[0]=a=>r.value=!0)})):l("image")?(e.openBlock(),e.createBlock(Nn,{key:1,onSuccess:f[1]||(f[1]=a=>r.value=!0)})):l("video")?(e.openBlock(),e.createBlock(An,{key:2,onSuccess:f[2]||(f[2]=a=>r.value=!0)})):l("audio")?(e.openBlock(),e.createBlock(Pn,{key:3,onSuccess:f[3]||(f[3]=a=>r.value=!0)})):l("application/pdf")?(e.openBlock(),e.createBlock(jn,{key:4,onSuccess:f[4]||(f[4]=a=>r.value=!0)})):(e.openBlock(),e.createBlock($n,{key:5,onSuccess:f[5]||(f[5]=a=>r.value=!0)}))])):e.createCommentVNode("",!0),e.createElementVNode("div",Wn,[r.value===!1?(e.openBlock(),e.createElementBlock("div",Qn,[f[7]||(f[7]=e.createElementVNode("svg",{class:"vuefinder__preview-modal__spinner",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e.createElementVNode("circle",{class:"vuefinder__preview-modal__spinner-circle",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e.createElementVNode("path",{class:"vuefinder__preview-modal__spinner-path",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e.createElementVNode("span",null,e.toDisplayString(e.unref(o)("Loading")),1)])):e.createCommentVNode("",!0)])])]),e.createElementVNode("div",Xn,[e.createElementVNode("div",null,[e.createElementVNode("span",Jn,e.toDisplayString(e.unref(o)("File Size"))+": ",1),e.createTextVNode(e.toDisplayString(e.unref(t).filesize(e.unref(t).modal.data.item.file_size)),1)]),e.createElementVNode("div",null,[e.createElementVNode("span",Zn,e.toDisplayString(e.unref(o)("Last Modified"))+": ",1),e.createTextVNode(" "+e.toDisplayString(e.unref(Kn)(e.unref(t).modal.data.item.last_modified)),1)])]),e.unref(t).features.includes(e.unref(R).DOWNLOAD)?(e.openBlock(),e.createElementBlock("div",er,[e.createElementVNode("span",null,e.toDisplayString(e.unref(o)(`Download doesn't work? You can try right-click "Download" button, select "Save link as...".`)),1)])):e.createCommentVNode("",!0)]),_:1}))}}),or={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",viewBox:"0 0 24 24"};function nr(n,t){return e.openBlock(),e.createElementBlock("svg",or,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3"},null,-1)])])}const rr={render:nr},lr={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",viewBox:"0 0 24 24"};function ar(n,t){return e.openBlock(),e.createElementBlock("svg",lr,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-6l-2-2H5a2 2 0 0 0-2 2"},null,-1)])])}const ie={render:ar},sr={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"};function ir(n,t){return e.openBlock(),e.createElementBlock("svg",sr,[...t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M12 5v14M5 12h14"},null,-1)])])}const be={render:ir},cr={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"};function dr(n,t){return e.openBlock(),e.createElementBlock("svg",cr,[...t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M5 12h14"},null,-1)])])}const ye={render:dr},ur={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"h-5 w-5",viewBox:"0 0 24 24"};function mr(n,t){return e.openBlock(),e.createElementBlock("svg",ur,[...t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"m15 4.5-4 4L7 10l-1.5 1.5 7 7L14 17l1.5-4 4-4M9 15l-4.5 4.5M14.5 4 20 9.5"},null,-1)])])}const De={render:mr},fr={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function vr(n,t){return e.openBlock(),e.createElementBlock("svg",fr,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"},null,-1)])])}const Te={render:vr},_r={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"text-neutral-500 fill-sky-500 stroke-gray-100/50 dark:stroke-slate-700/50 dark:fill-slate-500",viewBox:"0 0 24 24"};function pr(n,t){return e.openBlock(),e.createElementBlock("svg",_r,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 9.776q.168-.026.344-.026h15.812q.176 0 .344.026m-16.5 0a2.25 2.25 0 0 0-1.883 2.542l.857 6a2.25 2.25 0 0 0 2.227 1.932H19.05a2.25 2.25 0 0 0 2.227-1.932l.857-6a2.25 2.25 0 0 0-1.883-2.542m-16.5 0V6A2.25 2.25 0 0 1 6 3.75h3.879a1.5 1.5 0 0 1 1.06.44l2.122 2.12a1.5 1.5 0 0 0 1.06.44H18A2.25 2.25 0 0 1 20.25 9v.776"},null,-1)])])}const Me={render:pr},hr={class:"vuefinder__modal-tree__folder-item"},gr={class:"vuefinder__modal-tree__folder-content"},kr={key:1,class:"vuefinder__modal-tree__folder-spacer"},wr={class:"vuefinder__modal-tree__folder-text"},br={key:0,class:"vuefinder__modal-tree__subfolders"},yr=e.defineComponent({__name:"ModalTreeFolderItem",props:{folder:{},storage:{},modelValue:{},expandedFolders:{},modalTreeData:{}},emits:["update:modelValue","selectAndClose","toggleFolder"],setup(n,{emit:t}){const o=e.inject("ServiceContainer"),{t:r}=o.i18n,l=o.fs,d=n,i=t;D.useStore(l.path);const f=e.computed(()=>{const b=`${d.storage}:${d.folder.path}`;return d.expandedFolders[b]||!1}),a=e.computed(()=>d.modelValue?.path===d.folder.path),m=e.computed(()=>d.modalTreeData[d.folder.path]||[]),s=e.computed(()=>m.value.length>0||d.folder.type==="dir"),c=()=>{i("toggleFolder",d.storage,d.folder.path)},v=()=>{i("update:modelValue",d.folder)},_=()=>{i("update:modelValue",d.folder),i("selectAndClose",d.folder)};return(b,V)=>{const g=e.resolveComponent("ModalTreeFolderItem",!0);return e.openBlock(),e.createElementBlock("div",hr,[e.createElementVNode("div",gr,[s.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"vuefinder__modal-tree__folder-toggle",onClick:c},[f.value?(e.openBlock(),e.createBlock(e.unref(ye),{key:1,class:"vuefinder__modal-tree__folder-toggle-icon"})):(e.openBlock(),e.createBlock(e.unref(be),{key:0,class:"vuefinder__modal-tree__folder-toggle-icon"}))])):(e.openBlock(),e.createElementBlock("div",kr)),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__modal-tree__folder-link",{"vuefinder__modal-tree__folder-link--selected":a.value}]),onClick:v,onDblclick:_},[f.value?(e.openBlock(),e.createBlock(e.unref(Me),{key:1,class:"vuefinder__modal-tree__folder-icon"})):(e.openBlock(),e.createBlock(e.unref(ie),{key:0,class:"vuefinder__modal-tree__folder-icon"})),e.createElementVNode("span",wr,e.toDisplayString(n.folder.basename),1)],34)]),f.value&&s.value?(e.openBlock(),e.createElementBlock("div",br,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.value,h=>(e.openBlock(),e.createBlock(g,{key:h.path,folder:h,storage:n.storage,modelValue:n.modelValue,expandedFolders:n.expandedFolders,modalTreeData:n.modalTreeData,"onUpdate:modelValue":V[0]||(V[0]=w=>b.$emit("update:modelValue",w)),onSelectAndClose:V[1]||(V[1]=w=>b.$emit("selectAndClose",w)),onToggleFolder:V[2]||(V[2]=(w,u)=>b.$emit("toggleFolder",w,u))},null,8,["folder","storage","modelValue","expandedFolders","modalTreeData"]))),128))])):e.createCommentVNode("",!0)])}}}),Er={class:"vuefinder__modal-tree"},Vr={class:"vuefinder__modal-tree__header"},Sr={class:"vuefinder__modal-tree__title"},Nr={key:0,class:"vuefinder__modal-tree__section"},Br={class:"vuefinder__modal-tree__section-title"},Cr={class:"vuefinder__modal-tree__list"},xr=["onClick","onDblclick"],$r={class:"vuefinder__modal-tree__text"},Dr={class:"vuefinder__modal-tree__section-title"},Tr={class:"vuefinder__modal-tree__list"},Mr={class:"vuefinder__modal-tree__storage-item"},Fr={class:"vuefinder__modal-tree__storage-content"},Ar=["onClick"],Ir=["onClick","onDblclick"],Lr={class:"vuefinder__modal-tree__storage-text"},Rr={key:0,class:"vuefinder__modal-tree__subfolders"},zr=e.defineComponent({__name:"ModalTreeSelector",props:{modelValue:{},showPinnedFolders:{type:Boolean}},emits:["update:modelValue","selectAndClose"],setup(n,{emit:t}){const o=e.inject("ServiceContainer"),{t:r}=o.i18n,l=o.fs,d=o.config,i=t,f=D.useStore(l.sortedFiles),a=D.useStore(l.storages),m=D.useStore(l.path),s=e.ref(null),c=e.ref({}),v=e.ref({});e.watch(f,u=>{const y=u.filter(x=>x.type==="dir"),S=m.value?.path||"";S&&(v.value[S]=y.map(x=>({...x,type:"dir"})))});const _=(u,y)=>{const S=`${u}:${y}`;c.value={...c.value,[S]:!c.value[S]},c.value[S]&&!v.value[y]&&o.emitter.emit("vf-fetch-modal",{params:{q:"index",storage:u,path:y},onSuccess:x=>{if(x.files){const P=x.files.filter(L=>L.type==="dir");v.value[y]=P.map(L=>({...L,type:"dir"}))}}})},b=u=>v.value[u]||[],V=u=>{i("update:modelValue",u)},g=u=>{i("update:modelValue",u),i("selectAndClose",u)},h=u=>{const y={storage:u,path:u+"://",basename:u,type:"dir",extension:"",file_size:null,last_modified:null,mime_type:null,visibility:"public",dir:u+"://"};i("update:modelValue",y)},w=u=>{const y={storage:u,path:u+"://",basename:u,type:"dir",extension:"",file_size:null,last_modified:null,mime_type:null,visibility:"public",dir:u+"://"};i("update:modelValue",y),i("selectAndClose",y)};return e.onMounted(()=>{s.value&&ge.OverlayScrollbars(s.value,{overflow:{x:"hidden"},scrollbars:{theme:"vf-scrollbars-theme"}})}),(u,y)=>(e.openBlock(),e.createElementBlock("div",Er,[e.createElementVNode("div",Vr,[e.createElementVNode("div",Sr,e.toDisplayString(e.unref(r)("Select Target Folder")),1)]),e.createElementVNode("div",{ref_key:"modalContentElement",ref:s,class:"vuefinder__modal-tree__content"},[n.showPinnedFolders&&e.unref(d).get("pinnedFolders").length?(e.openBlock(),e.createElementBlock("div",Nr,[e.createElementVNode("div",Br,e.toDisplayString(e.unref(r)("Pinned Folders")),1),e.createElementVNode("div",Cr,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(d).get("pinnedFolders"),S=>(e.openBlock(),e.createElementBlock("div",{key:S.path,class:e.normalizeClass(["vuefinder__modal-tree__item",{"vuefinder__modal-tree__item--selected":n.modelValue?.path===S.path}]),onClick:x=>V(S),onDblclick:x=>g(S)},[e.createVNode(e.unref(ie),{class:"vuefinder__modal-tree__icon"}),e.createElementVNode("span",$r,e.toDisplayString(S.basename),1),e.createVNode(e.unref(De),{class:"vuefinder__modal-tree__icon vuefinder__modal-tree__icon--pin"})],42,xr))),128))])])):e.createCommentVNode("",!0),e.createElementVNode("div",Dr,e.toDisplayString(e.unref(r)("Storages")),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Array.isArray(e.unref(a))?e.unref(a):e.unref(a).value||[],S=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__modal-tree__section",key:S},[e.createElementVNode("div",Tr,[e.createElementVNode("div",Mr,[e.createElementVNode("div",Fr,[e.createElementVNode("div",{class:"vuefinder__modal-tree__storage-toggle",onClick:e.withModifiers(x=>_(S,S+"://"),["stop"])},[c.value[`${S}:${S}://`]?(e.openBlock(),e.createBlock(e.unref(ye),{key:1,class:"vuefinder__modal-tree__toggle-icon"})):(e.openBlock(),e.createBlock(e.unref(be),{key:0,class:"vuefinder__modal-tree__toggle-icon"}))],8,Ar),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__modal-tree__storage-link",{"vuefinder__modal-tree__storage-link--selected":n.modelValue?.path===S+"://"}]),onClick:x=>h(S),onDblclick:x=>w(S)},[e.createVNode(e.unref(Te),{class:"vuefinder__modal-tree__storage-icon"}),e.createElementVNode("span",Lr,e.toDisplayString(S),1)],42,Ir)]),c.value[`${S}:${S}://`]?(e.openBlock(),e.createElementBlock("div",Rr,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(b(S+"://"),x=>(e.openBlock(),e.createBlock(yr,{key:x.path,folder:x,storage:S,modelValue:n.modelValue,expandedFolders:c.value,modalTreeData:v.value,"onUpdate:modelValue":V,onSelectAndClose:g,onToggleFolder:_},null,8,["folder","storage","modelValue","expandedFolders","modalTreeData"]))),128))])):e.createCommentVNode("",!0)])])]))),128))],512)]))}}),Pr={class:"vuefinder__move-modal__content"},Hr={class:"vuefinder__move-modal__description"},qr={class:"vuefinder__move-modal__files vf-scrollbar"},Ur={key:0,class:"vuefinder__move-modal__icon vuefinder__move-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Or={key:1,class:"vuefinder__move-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},jr={class:"vuefinder__move-modal__file-name"},Kr={class:"vuefinder__move-modal__target-title"},Gr={class:"vuefinder__move-modal__target-container"},Yr={class:"vuefinder__move-modal__target-path"},Wr={class:"vuefinder__move-modal__target-storage"},Qr={key:0,class:"vuefinder__move-modal__target-folder"},Xr={class:"vuefinder__move-modal__target-badge"},Jr={class:"vuefinder__move-modal__options"},Zr={class:"vuefinder__move-modal__checkbox-label"},el={class:"vuefinder__move-modal__checkbox-text"},tl={class:"vuefinder__move-modal__selected-items"},Ye=e.defineComponent({__name:"ModalTransfer",props:{q:{}},setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=D.useStore(r.path),d=n,i=e.ref(t.modal.data.items.from),f=e.ref(t.modal.data.items.to),a=e.ref(""),m=e.ref(!1),s=e.ref(!1),c=e.computed(()=>m.value?o("Copy files"):o("Move files")),v=e.computed(()=>m.value?o("Are you sure you want to copy these files?"):o("Are you sure you want to move these files?")),_=e.computed(()=>m.value?o("Yes, Copy!"):o("Yes, Move!")),b=e.computed(()=>m.value?o("Files copied."):o("Files moved.")),V=u=>{u&&(f.value=u)},g=u=>{u&&(f.value=u,s.value=!1)},h=()=>{const u=f.value.path;if(!u)return{storage:"local",path:""};if(u.endsWith("://"))return{storage:u.replace("://",""),path:""};const y=u.split("://");return{storage:y[0]||"local",path:y[1]||""}},w=()=>{if(i.value.length){const u=m.value?"copy":d.q||"move";t.emitter.emit("vf-fetch",{params:{q:u,m:"post",storage:l.value.storage,path:l.value.path},body:{items:i.value.map(({path:y,type:S})=>({path:y,type:S})),item:f.value.path},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:b})},onError:y=>{a.value=o(y.message)}})}};return(u,y)=>(e.openBlock(),e.createBlock(Z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:w,class:"vf-btn vf-btn-primary"},e.toDisplayString(_.value),1),e.createElementVNode("button",{type:"button",onClick:y[4]||(y[4]=S=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1),e.createElementVNode("div",tl,e.toDisplayString(e.unref(o)("%s item(s) selected.",i.value.length)),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(te,{icon:e.unref(rr),title:c.value},null,8,["icon","title"]),e.createElementVNode("div",Pr,[e.createElementVNode("p",Hr,e.toDisplayString(v.value),1),e.createElementVNode("div",qr,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,S=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__move-modal__file",key:S.path},[e.createElementVNode("div",null,[S.type==="dir"?(e.openBlock(),e.createElementBlock("svg",Ur,[...y[5]||(y[5]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",Or,[...y[6]||(y[6]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])]))]),e.createElementVNode("div",jr,e.toDisplayString(S.path),1)]))),128))]),e.createElementVNode("h4",Kr,e.toDisplayString(e.unref(o)("Target Directory")),1),e.createElementVNode("div",Gr,[e.createElementVNode("div",{class:"vuefinder__move-modal__target-display",onClick:y[0]||(y[0]=S=>s.value=!s.value)},[e.createElementVNode("div",Yr,[e.createElementVNode("span",Wr,e.toDisplayString(h().storage)+"://",1),h().path?(e.openBlock(),e.createElementBlock("span",Qr,e.toDisplayString(h().path),1)):e.createCommentVNode("",!0)]),e.createElementVNode("span",Xr,e.toDisplayString(e.unref(o)("Browse")),1)])]),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__move-modal__tree-selector",s.value?"vuefinder__move-modal__tree-selector--expanded":"vuefinder__move-modal__tree-selector--collapsed"])},[e.createVNode(zr,{modelValue:f.value,"onUpdate:modelValue":[y[1]||(y[1]=S=>f.value=S),V],"show-pinned-folders":!0,onSelectAndClose:g},null,8,["modelValue"])],2),e.createElementVNode("div",Jr,[e.createElementVNode("label",Zr,[e.withDirectives(e.createElementVNode("input",{type:"checkbox","onUpdate:modelValue":y[2]||(y[2]=S=>m.value=S),class:"vuefinder__move-modal__checkbox"},null,512),[[e.vModelCheckbox,m.value]]),e.createElementVNode("span",el,e.toDisplayString(e.unref(o)("Create a copy instead of moving")),1)])]),a.value.length?(e.openBlock(),e.createBlock(e.unref(a),{key:0,onHidden:y[3]||(y[3]=S=>a.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value),1)]),_:1})):e.createCommentVNode("",!0)])])]),_:1}))}}),se=e.defineComponent({__name:"ModalMove",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n;return(r,l)=>(e.openBlock(),e.createBlock(Ye,{q:"move"}))}}),Fe=e.defineComponent({__name:"ModalCopy",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n;return(r,l)=>(e.openBlock(),e.createBlock(Ye,{q:"copy"}))}}),Q={ESCAPE:"Escape",F2:"F2",F5:"F5",DELETE:"Delete",ENTER:"Enter",BACKSLASH:"Backslash",KEY_A:"KeyA",KEY_E:"KeyE",KEY_F:"KeyF",SPACE:"Space",KEY_C:"KeyC",KEY_X:"KeyX",KEY_V:"KeyV"};function ol(n){const t=n.search,o=n.fs,r=n.config,l=D.useStore(t.state),d=D.useStore(o.selectedItems),i=f=>{if(f.code===Q.ESCAPE&&(n.modal.close(),n.root.focus()),!n.modal.visible&&!l.value?.searchMode){if(f.code===Q.F2&&n.features.includes(R.RENAME)&&d.value.length===1&&n.modal.open(we,{items:d.value}),f.code===Q.F5&&n.emitter.emit("vf-fetch",{params:{q:"index",storage:o.path.get().storage,path:o.path.get().path}}),f.code===Q.DELETE&&d.value.length===0&&n.modal.open(ke,{items:d.value}),f.ctrlKey&&f.code===Q.BACKSLASH&&n.modal.open(xe),f.ctrlKey&&f.code===Q.KEY_F&&n.features.includes(R.SEARCH)&&(t.enterSearchMode(),f.preventDefault()),f.ctrlKey&&f.code===Q.KEY_E&&(r.toggle("showTreeView"),f.preventDefault()),f.ctrlKey&&f.code===Q.ENTER&&(r.toggle("fullScreen"),n.root.focus()),f.ctrlKey&&f.code===Q.KEY_A&&(o.selectAll(),f.preventDefault()),f.code===Q.SPACE&&d.value.length===1&&d.value[0]?.type!=="dir"&&n.modal.open($e,{storage:o.path.get().storage,item:d.value[0]}),f.metaKey&&f.code===Q.KEY_C){if(d.value.length===0){n.emitter.emit("vf-toast-push",{type:"error",label:n.i18n.t("No items selected")});return}o.setClipboard("copy",new Set(d.value.map(a=>a.path))),n.emitter.emit("vf-toast-push",{label:d.value.length===1?n.i18n.t("Item copied to clipboard"):n.i18n.t("%s items copied to clipboard",d.value.length)}),f.preventDefault()}if(f.metaKey&&f.code===Q.KEY_X){if(d.value.length===0){n.emitter.emit("vf-toast-push",{type:"error",label:n.i18n.t("No items selected")});return}o.setClipboard("cut",new Set(d.value.map(a=>a.path))),n.emitter.emit("vf-toast-push",{label:d.value.length===1?n.i18n.t("Item cut to clipboard"):n.i18n.t("%s items cut to clipboard",d.value.length)}),f.preventDefault()}if(f.metaKey&&f.code===Q.KEY_V){if(o.getClipboard().items.size===0){n.emitter.emit("vf-toast-push",{type:"error",label:n.i18n.t("No items in clipboard")});return}if(o.getClipboard().path===o.path.get().path){n.emitter.emit("vf-toast-push",{type:"error",label:n.i18n.t("Cannot paste items to the same directory")});return}if(o.getClipboard().type==="cut"){n.modal.open(se,{items:{from:Array.from(o.getClipboard().items),to:o.path.get()}}),o.clearClipboard();return}if(o.getClipboard().type==="copy"){n.modal.open(Fe,{items:{from:Array.from(o.getClipboard().items),to:o.path.get()}});return}f.preventDefault()}}};e.onMounted(()=>{n.root.addEventListener("keydown",i)}),e.onBeforeUnmount(()=>{n.root.removeEventListener("keydown",i)})}const nl={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function rl(n,t){return e.openBlock(),e.createElementBlock("svg",nl,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M12 10.5v6m3-3H9m4.06-7.19-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44z"},null,-1)])])}const We={render:rl},ll={class:"vuefinder__new-folder-modal__content"},al={class:"vuefinder__new-folder-modal__form"},sl={class:"vuefinder__new-folder-modal__description"},il=["placeholder"],Ae=e.defineComponent({__name:"ModalNewFolder",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=D.useStore(r.path),d=e.ref(""),i=e.ref(""),f=()=>{d.value!==""&&t.emitter.emit("vf-fetch",{params:{q:"newfolder",m:"post",storage:l.value.storage,path:l.value.path},body:{name:d.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:o("%s is created.",d.value)})},onError:a=>{i.value=o(a.message)}})};return(a,m)=>(e.openBlock(),e.createBlock(Z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:f,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Create")),1),e.createElementVNode("button",{type:"button",onClick:m[2]||(m[2]=s=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(te,{icon:e.unref(We),title:e.unref(o)("New Folder")},null,8,["icon","title"]),e.createElementVNode("div",ll,[e.createElementVNode("div",al,[e.createElementVNode("p",sl,e.toDisplayString(e.unref(o)("Create a new folder")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":m[0]||(m[0]=s=>d.value=s),onKeyup:e.withKeys(f,["enter"]),class:"vuefinder__new-folder-modal__input",placeholder:e.unref(o)("Folder Name"),type:"text"},null,40,il),[[e.vModelText,d.value]]),i.value.length?(e.openBlock(),e.createBlock(e.unref(i),{key:0,onHidden:m[1]||(m[1]=s=>i.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),cl={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function dl(n,t){return e.openBlock(),e.createElementBlock("svg",cl,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9"},null,-1)])])}const Qe={render:dl},ul={class:"vuefinder__new-file-modal__content"},ml={class:"vuefinder__new-file-modal__form"},fl={class:"vuefinder__new-file-modal__description"},vl=["placeholder"],Xe=e.defineComponent({__name:"ModalNewFile",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=D.useStore(r.path),d=e.ref(""),i=e.ref(""),f=()=>{d.value!==""&&t.emitter.emit("vf-fetch",{params:{q:"newfile",m:"post",storage:l.value.storage,path:l.value.path},body:{name:d.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:o("%s is created.",d.value)})},onError:a=>{i.value=o(a.message)}})};return(a,m)=>(e.openBlock(),e.createBlock(Z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:f,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Create")),1),e.createElementVNode("button",{type:"button",onClick:m[2]||(m[2]=s=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(te,{icon:e.unref(Qe),title:e.unref(o)("New File")},null,8,["icon","title"]),e.createElementVNode("div",ul,[e.createElementVNode("div",ml,[e.createElementVNode("p",fl,e.toDisplayString(e.unref(o)("Create a new file")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":m[0]||(m[0]=s=>d.value=s),onKeyup:e.withKeys(f,["enter"]),class:"vuefinder__new-file-modal__input",placeholder:e.unref(o)("File Name"),type:"text"},null,40,vl),[[e.vModelText,d.value]]),i.value.length?(e.openBlock(),e.createBlock(e.unref(i),{key:0,onHidden:m[1]||(m[1]=s=>i.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),Y={PENDING:0,CANCELED:1,UPLOADING:2,ERROR:3,DONE:10};function _l(){const n=e.inject("ServiceContainer"),{t}=n.i18n,o=n.fs,r=D.useStore(o.path),l=n.config,d=e.ref({QUEUE_ENTRY_STATUS:Y}),i=e.ref(null),f=e.ref(null),a=e.ref(null),m=e.ref(null),s=e.ref(null),c=e.ref(null),v=e.ref([]),_=e.ref(""),b=e.ref(!1),V=e.ref(!1);let g;const h=F=>v.value.findIndex(j=>j.id===F),w=(F,j)=>g.addFile({name:j||F.name,type:F.type,data:F,source:"Local"}),u=F=>F.status===Y.DONE?"text-green-600":F.status===Y.ERROR||F.status===Y.CANCELED?"text-red-600":"",y=F=>F.status===Y.DONE?"✓":F.status===Y.ERROR||F.status===Y.CANCELED?"!":"...",S=()=>m.value?.click(),x=()=>n.modal.close(),P=()=>{if(b.value||!v.value.filter(F=>F.status!==Y.DONE).length){b.value||(_.value=t("Please select file to upload first."));return}_.value="",g.retryAll(),g.upload()},L=()=>{g.cancelAll(),v.value.forEach(F=>{F.status!==Y.DONE&&(F.status=Y.CANCELED,F.statusName=t("Canceled"))}),b.value=!1},H=F=>{b.value||(g.removeFile(F.id),v.value.splice(h(F.id),1))},U=F=>{if(!b.value)if(g.cancelAll(),F){const j=v.value.filter(E=>E.status!==Y.DONE);v.value=[],j.forEach(E=>w(E.originalFile,E.name))}else v.value=[]};return e.onMounted(()=>{g=new ut({debug:n.debug,restrictions:{maxFileSize:bt(l.maxFileSize??"10mb")},locale:n.i18n.t("uppy"),onBeforeFileAdded:(E,B)=>{if(B[E.id]!=null){const A=h(E.id);v.value[A]?.status===Y.PENDING&&(_.value=g.i18n("noDuplicates",{fileName:E.name})),v.value=v.value.filter(I=>I.id!==E.id)}return v.value.push({id:E.id,name:E.name,size:n.filesize(E.size),status:Y.PENDING,statusName:t("Pending upload"),percent:null,originalFile:E.data}),!0}}),g.use(mt,{endpoint:"WILL_BE_REPLACED_BEFORE_UPLOAD",limit:5,timeout:0}),g.on("restriction-failed",(E,B)=>{const C=v.value[h(E.id)];C&&H(C),_.value=B.message}),g.on("upload",()=>{const E=n.requester.transformRequestParams({url:"",method:"post",params:{q:"upload",storage:r.value.storage,path:r.value.path}});g.setMeta({...E.body});const B=g.getPlugin("XHRUpload");B&&(B.opts.method=E.method,B.opts.endpoint=E.url+"?"+new URLSearchParams(E.params),B.opts.headers=E.headers),delete E.headers["Content-Type"],b.value=!0,v.value.forEach(C=>{C.status!==Y.DONE&&(C.percent=null,C.status=Y.UPLOADING,C.statusName=t("Pending upload"))})}),g.on("upload-progress",(E,B)=>{const C=B.bytesTotal??1,A=Math.floor(B.bytesUploaded/C*100),I=h(E.id);I!==-1&&v.value[I]&&(v.value[I].percent=`${A}%`)}),g.on("upload-success",E=>{const B=v.value[h(E.id)];B&&(B.status=Y.DONE,B.statusName=t("Done"))}),g.on("upload-error",(E,B)=>{const C=v.value[h(E.id)];C&&(C.percent=null,C.status=Y.ERROR,C.statusName=B?.isNetworkError?t("Network Error, Unable establish connection to the server or interrupted."):B?.message||t("Unknown Error"))}),g.on("error",E=>{_.value=E.message,b.value=!1,n.emitter.emit("vf-fetch",{params:{q:"index"},noCloseModal:!0})}),g.on("complete",()=>{b.value=!1,n.emitter.emit("vf-fetch",{params:{q:"index",path:r.value.path,storage:r.value.storage},noCloseModal:!0})}),m.value?.addEventListener("click",()=>f.value?.click()),s.value?.addEventListener("click",()=>a.value?.click()),c.value?.addEventListener("dragover",E=>{E.preventDefault(),V.value=!0}),c.value?.addEventListener("dragleave",E=>{E.preventDefault(),V.value=!1});const F=(E,B)=>{B.isFile&&B.file(C=>E(B,C)),B.isDirectory&&B.createReader().readEntries(C=>C.forEach(A=>F(E,A)))};c.value?.addEventListener("drop",E=>{E.preventDefault(),V.value=!1;const B=/^[/\\](.+)/,C=E.dataTransfer?.items;C&&Array.from(C).forEach(A=>{A.kind==="file"&&F((I,q)=>{const T=B.exec(I.fullPath);w(q,T?T[1]:q.name)},A.webkitGetAsEntry())})});const j=E=>{const B=E.target,C=B.files;if(C){for(const A of C)w(A);B.value=""}};f.value?.addEventListener("change",j),a.value?.addEventListener("change",j)}),{container:i,internalFileInput:f,internalFolderInput:a,pickFiles:m,pickFolders:s,dropArea:c,queue:v,message:_,uploading:b,hasFilesInDropArea:V,definitions:d,openFileSelector:S,upload:P,cancel:L,remove:H,clear:U,close:x,getClassNameForEntry:u,getIconForEntry:y}}function Ce(n,t=14){const o=`((?=([\\w\\W]{0,${t}}))([\\w\\W]{${t+1},})([\\w\\W]{8,}))`;return n.replace(new RegExp(o),"$2..$4")}const pl={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function hl(n,t){return e.openBlock(),e.createElementBlock("svg",pl,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"},null,-1)])])}const Je={render:hl},gl={class:"vuefinder__upload-modal__content"},kl={key:0,class:"pointer-events-none"},wl={key:1,class:"pointer-events-none"},bl=["disabled"],yl=["disabled"],El={class:"vuefinder__upload-modal__file-list vf-scrollbar"},Vl=["textContent"],Sl={class:"vuefinder__upload-modal__file-info"},Nl={class:"vuefinder__upload-modal__file-name hidden md:block"},Bl={class:"vuefinder__upload-modal__file-name md:hidden"},Cl={key:0,class:"ml-auto"},xl=["title","disabled","onClick"],$l={key:0,class:"py-2"},Dl=["disabled"],Ze=e.defineComponent({__name:"ModalUpload",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,{container:r,internalFileInput:l,internalFolderInput:d,pickFiles:i,pickFolders:f,dropArea:a,queue:m,message:s,uploading:c,hasFilesInDropArea:v,definitions:_,openFileSelector:b,upload:V,cancel:g,remove:h,clear:w,close:u,getClassNameForEntry:y,getIconForEntry:S}=_l();return(x,P)=>(e.openBlock(),e.createBlock(Z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",class:"vf-btn vf-btn-primary",disabled:e.unref(c),onClick:P[4]||(P[4]=e.withModifiers((...L)=>e.unref(V)&&e.unref(V)(...L),["prevent"]))},e.toDisplayString(e.unref(o)("Upload")),9,Dl),e.unref(c)?(e.openBlock(),e.createElementBlock("button",{key:0,type:"button",class:"vf-btn vf-btn-secondary",onClick:P[5]||(P[5]=e.withModifiers((...L)=>e.unref(g)&&e.unref(g)(...L),["prevent"]))},e.toDisplayString(e.unref(o)("Cancel")),1)):(e.openBlock(),e.createElementBlock("button",{key:1,type:"button",class:"vf-btn vf-btn-secondary",onClick:P[6]||(P[6]=e.withModifiers((...L)=>e.unref(u)&&e.unref(u)(...L),["prevent"]))},e.toDisplayString(e.unref(o)("Close")),1))]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(te,{icon:e.unref(Je),title:e.unref(o)("Upload Files")},null,8,["icon","title"]),e.createElementVNode("div",gl,[e.createElementVNode("div",{class:"vuefinder__upload-modal__drop-area",ref_key:"dropArea",ref:a,onClick:P[0]||(P[0]=(...L)=>e.unref(b)&&e.unref(b)(...L))},[e.unref(v)?(e.openBlock(),e.createElementBlock("div",kl,e.toDisplayString(e.unref(o)("Release to drop these files.")),1)):(e.openBlock(),e.createElementBlock("div",wl,e.toDisplayString(e.unref(o)("Drag and drop the files/folders to here or click here.")),1))],512),e.createElementVNode("div",{ref_key:"container",ref:r,class:"vuefinder__upload-modal__buttons"},[e.createElementVNode("button",{ref_key:"pickFiles",ref:i,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Select Files")),513),e.createElementVNode("button",{ref_key:"pickFolders",ref:f,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Select Folders")),513),e.createElementVNode("button",{type:"button",class:"vf-btn vf-btn-secondary",disabled:e.unref(c),onClick:P[1]||(P[1]=L=>e.unref(w)(!1))},e.toDisplayString(e.unref(o)("Clear all")),9,bl),e.createElementVNode("button",{type:"button",class:"vf-btn vf-btn-secondary",disabled:e.unref(c),onClick:P[2]||(P[2]=L=>e.unref(w)(!0))},e.toDisplayString(e.unref(o)("Clear only successful")),9,yl)],512),e.createElementVNode("div",El,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(m),L=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__upload-modal__file-entry",key:L.id},[e.createElementVNode("span",{class:e.normalizeClass(["vuefinder__upload-modal__file-icon",e.unref(y)(L)])},[e.createElementVNode("span",{class:"vuefinder__upload-modal__file-icon-text",textContent:e.toDisplayString(e.unref(S)(L))},null,8,Vl)],2),e.createElementVNode("div",Sl,[e.createElementVNode("div",Nl,e.toDisplayString(e.unref(Ce)(L.name,40))+" ("+e.toDisplayString(L.size)+") ",1),e.createElementVNode("div",Bl,e.toDisplayString(e.unref(Ce)(L.name,16))+" ("+e.toDisplayString(L.size)+") ",1),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__upload-modal__file-status",e.unref(y)(L)])},[e.createTextVNode(e.toDisplayString(L.statusName)+" ",1),L.status===e.unref(_).QUEUE_ENTRY_STATUS.UPLOADING?(e.openBlock(),e.createElementBlock("b",Cl,e.toDisplayString(L.percent),1)):e.createCommentVNode("",!0)],2)]),e.createElementVNode("button",{type:"button",class:e.normalizeClass(["vuefinder__upload-modal__file-remove",e.unref(c)?"disabled":""]),title:e.unref(o)("Delete"),disabled:e.unref(c),onClick:H=>e.unref(h)(L)},[...P[7]||(P[7]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"vuefinder__upload-modal__file-remove-icon"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])],10,xl)]))),128)),e.unref(m).length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",$l,e.toDisplayString(e.unref(o)("No files selected!")),1))]),e.unref(s).length?(e.openBlock(),e.createBlock(Ge,{key:0,onHidden:P[3]||(P[3]=L=>s.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(s)),1)]),_:1})):e.createCommentVNode("",!0)])]),e.createElementVNode("input",{ref_key:"internalFileInput",ref:l,type:"file",multiple:"",class:"hidden"},null,512),e.createElementVNode("input",{ref_key:"internalFolderInput",ref:d,type:"file",multiple:"",webkitdirectory:"",class:"hidden"},null,512)]),_:1}))}}),Tl={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function Ml(n,t){return e.openBlock(),e.createElementBlock("svg",Tl,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5m6 4.125 2.25 2.25m0 0 2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125"},null,-1)])])}const et={render:Ml},Fl={class:"vuefinder__unarchive-modal__content"},Al={class:"vuefinder__unarchive-modal__items"},Il={key:0,class:"vuefinder__unarchive-modal__icon vuefinder__unarchive-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Ll={key:1,class:"vuefinder__unarchive-modal__icon vuefinder__unarchive-modal__icon--file",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Rl={class:"vuefinder__unarchive-modal__item-name"},zl={class:"vuefinder__unarchive-modal__info"},Ie=e.defineComponent({__name:"ModalUnarchive",setup(n){const t=e.inject("ServiceContainer"),o=t.fs,r=D.useStore(o.path),{t:l}=t.i18n,d=e.ref(t.modal.data.items[0]),i=e.ref(""),f=e.ref([]),a=()=>{t.emitter.emit("vf-fetch",{params:{q:"unarchive",m:"post",storage:r.value.storage,path:r.value.path},body:{item:d.value.path},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:l("The file unarchived.")})},onError:m=>{i.value=l(m.message)}})};return(m,s)=>(e.openBlock(),e.createBlock(Z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:a,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(l)("Unarchive")),1),e.createElementVNode("button",{type:"button",onClick:s[1]||(s[1]=c=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(l)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(te,{icon:e.unref(et),title:e.unref(l)("Unarchive")},null,8,["icon","title"]),e.createElementVNode("div",Fl,[e.createElementVNode("div",Al,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.value,c=>(e.openBlock(),e.createElementBlock("p",{class:"vuefinder__unarchive-modal__item",key:c.path},[c.type==="dir"?(e.openBlock(),e.createElementBlock("svg",Il,[...s[2]||(s[2]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",Ll,[...s[3]||(s[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),e.createElementVNode("span",Rl,e.toDisplayString(c.basename),1)]))),128)),e.createElementVNode("p",zl,e.toDisplayString(e.unref(l)("The archive will be unarchived at"))+" ("+e.toDisplayString(e.unref(r).path)+")",1),i.value.length?(e.openBlock(),e.createBlock(e.unref(i),{key:0,onHidden:s[0]||(s[0]=c=>i.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),Pl={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function Hl(n,t){return e.openBlock(),e.createElementBlock("svg",Pl,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125"},null,-1)])])}const tt={render:Hl},ql={class:"vuefinder__archive-modal__content"},Ul={class:"vuefinder__archive-modal__form"},Ol={class:"vuefinder__archive-modal__files vf-scrollbar"},jl={class:"vuefinder__archive-modal__file"},Kl={key:0,class:"vuefinder__archive-modal__icon vuefinder__archive-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Gl={key:1,class:"vuefinder__archive-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Yl={class:"vuefinder__archive-modal__file-name"},Wl=["placeholder"],Le=e.defineComponent({__name:"ModalArchive",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=D.useStore(r.path),d=e.ref(""),i=e.ref(""),f=e.ref(t.modal.data.items),a=()=>{f.value.length&&t.emitter.emit("vf-fetch",{params:{q:"archive",m:"post",storage:l.value.storage,path:l.value.path},body:{items:f.value.map(({path:m,type:s})=>({path:m,type:s})),name:d.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:o("The file(s) archived.")})},onError:m=>{i.value=o(m.message)}})};return(m,s)=>(e.openBlock(),e.createBlock(Z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:a,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Archive")),1),e.createElementVNode("button",{type:"button",onClick:s[2]||(s[2]=c=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(te,{icon:e.unref(tt),title:e.unref(o)("Archive the files")},null,8,["icon","title"]),e.createElementVNode("div",ql,[e.createElementVNode("div",Ul,[e.createElementVNode("div",Ol,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.value,c=>(e.openBlock(),e.createElementBlock("p",jl,[c.type==="dir"?(e.openBlock(),e.createElementBlock("svg",Kl,[...s[3]||(s[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",Gl,[...s[4]||(s[4]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),e.createElementVNode("span",Yl,e.toDisplayString(c.basename),1)]))),256))]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":s[0]||(s[0]=c=>d.value=c),onKeyup:e.withKeys(a,["enter"]),class:"vuefinder__archive-modal__input",placeholder:e.unref(o)("Archive name. (.zip file will be created)"),type:"text"},null,40,Wl),[[e.vModelText,d.value]]),i.value.length?(e.openBlock(),e.createBlock(e.unref(i),{key:0,onHidden:s[1]||(s[1]=c=>i.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),Ql={class:"vuefinder__menubar__container"},Xl=["onClick","onMouseenter"],Jl={class:"vuefinder__menubar__label"},Zl=["onMouseenter"],ea=["onClick"],ta={key:0,class:"vuefinder__menubar__dropdown__label"},oa={key:1,class:"vuefinder__menubar__dropdown__checkmark"},na=e.defineComponent({__name:"MenuBar",setup(n){const t=e.inject("ServiceContainer");t||console.error("MenuBar: ServiceContainer not found");const{t:o}=t?.i18n||{t:u=>u},r=t?.fs,l=t?.config,d=t?.search,i=D.useStore(l?.state||{}),f=D.useStore(d?.state||{}),a=D.useStore(r?.selectedItems||[]),m=D.useStore(r?.storages||[]),s=e.ref(null),c=e.ref(!1),v=e.computed(()=>window.opener!==null||window.name!==""||window.history.length<=1),_=e.computed(()=>[{id:"file",label:o("File"),items:[{id:"new-folder",label:o("New Folder"),action:()=>t?.modal?.open(Ae,{items:a.value}),enabled:()=>t?.features?.includes(R.NEW_FOLDER)||!1},{id:"new-file",label:o("New File"),action:()=>t?.modal?.open(Xe,{items:a.value}),enabled:()=>t?.features?.includes(R.NEW_FILE)||!1},{type:"separator"},{id:"upload",label:o("Upload"),action:()=>t?.modal?.open(Ze,{items:a.value}),enabled:()=>t?.features?.includes(R.UPLOAD)||!1},{type:"separator"},{id:"search",label:o("Search"),action:()=>d?.enterSearchMode(),enabled:()=>t?.features?.includes(R.SEARCH)},{type:"separator"},{id:"archive",label:o("Archive"),action:()=>{a.value.length>0&&t?.modal?.open(Le,{items:a.value})},enabled:()=>a.value.length>0&&t?.features?.includes(R.ARCHIVE)},{id:"unarchive",label:o("Unarchive"),action:()=>{a.value.length===1&&a.value[0]?.mime_type==="application/zip"&&t?.modal?.open(Ie,{items:a.value})},enabled:()=>a.value.length===1&&a.value[0]?.mime_type==="application/zip"&&t?.features?.includes(R.UNARCHIVE)},{type:"separator"},{id:"preview",label:o("Preview"),action:()=>{a.value.length===1&&a.value[0]?.type!=="dir"&&t?.modal?.open($e,{storage:r?.path?.get()?.storage,item:a.value[0]})},enabled:()=>a.value.length===1&&a.value[0]?.type!=="dir"},...v.value?[{type:"separator"},{id:"exit",label:o("Exit"),action:()=>{try{window.close()}catch(u){console.log("Cannot close window:",u.message)}},enabled:()=>!0}]:[]]},{id:"edit",label:o("Edit"),items:[{id:"select-all",label:o("Select All"),action:()=>r?.selectAll(),enabled:()=>!0},{id:"deselect",label:o("Deselect All"),action:()=>r?.clearSelection(),enabled:()=>a.value.length>0},{type:"separator"},{id:"cut",label:o("Cut"),action:()=>{a.value.length>0&&r?.setClipboard("cut",new Set(a.value.map(u=>u.path)))},enabled:()=>a.value.length>0},{id:"copy",label:o("Copy"),action:()=>{a.value.length>0&&r?.setClipboard("copy",new Set(a.value.map(u=>u.path)))},enabled:()=>a.value.length>0},{id:"paste",label:o("Paste"),action:()=>{const u=r?.getClipboard();u?.items?.size>0&&t?.modal?.open(u.type==="cut"?se:Fe,{items:Array.from(u.items),targetPath:r?.path?.get()?.path})},enabled:()=>r?.getClipboard()?.items?.size>0},{id:"move",label:o("Move"),action:()=>{if(a.value.length>0){const u=t?.fs,y={storage:u?.path?.get()?.storage||"",path:u?.path?.get()?.path||"",type:"dir"};t?.modal?.open(se,{items:{from:a.value,to:y}})}},enabled:()=>a.value.length>0&&t?.features?.includes(R.MOVE)},{type:"separator"},{id:"copy-path",label:o("Copy Path"),action:()=>{if(a.value.length===1){const u=a.value[0];navigator.clipboard.writeText(u.path).catch(y=>{console.error("Failed to copy path:",y)})}},enabled:()=>a.value.length===1},{id:"copy-download-url",label:o("Copy Download URL"),action:()=>{if(a.value.length===1){const u=a.value[0],y=r?.path?.get()?.storage??"local",S=t?.requester?.getDownloadUrl(y,u);S&&navigator.clipboard.writeText(S).catch(x=>{console.error("Failed to copy download URL:",x)})}},enabled:()=>a.value.length===1},{type:"separator"},{id:"rename",label:o("Rename"),action:()=>{a.value.length===1&&t?.modal?.open(we,{items:a.value})},enabled:()=>a.value.length===1&&t?.features?.includes(R.RENAME)},{id:"delete",label:o("Delete"),action:()=>{a.value.length>0&&t?.modal?.open(ke,{items:a.value})},enabled:()=>a.value.length>0&&t?.features?.includes(R.DELETE)}]},{id:"view",label:o("View"),items:[{id:"refresh",label:o("Refresh"),action:()=>{t?.emitter?.emit("vf-fetch",{params:{q:"index",storage:r?.path?.get()?.storage,path:r?.path?.get()?.path}})},enabled:()=>!0},{type:"separator"},{id:"grid-view",label:o("Grid View"),action:()=>l?.set("view","grid"),enabled:()=>!f.value?.query?.length,checked:()=>i.value?.view==="grid"},{id:"list-view",label:o("List View"),action:()=>l?.set("view","list"),enabled:()=>!f.value?.query?.length,checked:()=>i.value?.view==="list"},{type:"separator"},{id:"tree-view",label:o("Tree View"),action:()=>l?.toggle("showTreeView"),enabled:()=>!0,checked:()=>i.value?.showTreeView},{id:"thumbnails",label:o("Show Thumbnails"),action:()=>l?.toggle("showThumbnails"),enabled:()=>!0,checked:()=>i.value?.showThumbnails},{id:"show-hidden-files",label:o("Show Hidden Files"),action:()=>l?.toggle("showHiddenFiles"),enabled:()=>!0,checked:()=>i.value?.showHiddenFiles},{type:"separator"},{id:"fullscreen",label:o("Full Screen"),action:()=>l?.toggle("fullScreen"),enabled:()=>t?.features?.includes(R.FULL_SCREEN),checked:()=>i.value?.fullScreen}]},{id:"go",label:o("Go"),items:[{id:"forward",label:o("Forward"),action:()=>{r?.goForward(),t?.emitter?.emit("vf-fetch",{params:{q:"index",storage:r?.path?.get()?.storage??"local",path:r?.currentPath?.get()??""}})},enabled:()=>r?.canGoForward?.get()??!1},{id:"back",label:o("Back"),action:()=>{r?.goBack(),t?.emitter?.emit("vf-fetch",{params:{q:"index",storage:r?.path?.get()?.storage??"local",path:r?.currentPath?.get()??""}})},enabled:()=>r?.canGoBack?.get()??!1},{id:"open-containing-folder",label:o("Open containing folder"),action:()=>{const u=r?.path?.get();if(u?.breadcrumb&&u.breadcrumb.length>0){const S=u.breadcrumb[u.breadcrumb.length-2]?.path??`${u.storage}://`;r?.setPath(S),t?.emitter?.emit("vf-fetch",{params:{q:"index",storage:u.storage??"local",path:S}})}},enabled:()=>{const u=r?.path?.get();return u?.breadcrumb&&u.breadcrumb.length>0}},{type:"separator"},...(m.value||[]).map(u=>({id:`storage-${u}`,label:u,action:()=>{const y=`${u}://`;r?.setPath(y),t?.emitter?.emit("vf-fetch",{params:{q:"index",storage:u,path:y}})},enabled:()=>!0})),{type:"separator"},{id:"go-to-folder",label:o("Go to Folder"),action:()=>{const u=prompt(o("Enter folder path:"));u&&(r?.setPath(u),t?.emitter?.emit("vf-fetch",{params:{q:"index",storage:r?.path?.get()?.storage??"local",path:u}}))},enabled:()=>!0}]},{id:"help",label:o("Help"),items:[{id:"about",label:o("About"),action:()=>t?.modal?.open(xe),enabled:()=>!0}]}]),b=u=>{s.value===u?g():(s.value=u,c.value=!0)},V=u=>{c.value&&(s.value=u)},g=()=>{s.value=null,c.value=!1},h=u=>{g(),u()},w=u=>{u.target.closest(".vuefinder__menubar")||g()};return e.onMounted(()=>{document.addEventListener("click",w)}),e.onUnmounted(()=>{document.removeEventListener("click",w)}),(u,y)=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__menubar",onClick:y[0]||(y[0]=e.withModifiers(()=>{},["stop"]))},[e.createElementVNode("div",Ql,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(_.value,S=>(e.openBlock(),e.createElementBlock("div",{key:S.id,class:e.normalizeClass(["vuefinder__menubar__item",{"vuefinder__menubar__item--active":s.value===S.id}]),onClick:x=>b(S.id),onMouseenter:x=>V(S.id)},[e.createElementVNode("span",Jl,e.toDisplayString(S.label),1),s.value===S.id?(e.openBlock(),e.createElementBlock("div",{key:0,class:"vuefinder__menubar__dropdown",onMouseenter:x=>V(S.id)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(S.items,x=>(e.openBlock(),e.createElementBlock("div",{key:x.id||x.type,class:e.normalizeClass(["vuefinder__menubar__dropdown__item",{"vuefinder__menubar__dropdown__item--separator":x.type==="separator","vuefinder__menubar__dropdown__item--disabled":x.enabled&&!x.enabled(),"vuefinder__menubar__dropdown__item--checked":x.checked&&x.checked()}]),onClick:e.withModifiers(P=>x.type!=="separator"&&x.enabled&&x.enabled()?h(x.action):null,["stop"])},[x.type!=="separator"?(e.openBlock(),e.createElementBlock("span",ta,e.toDisplayString(x.label),1)):e.createCommentVNode("",!0),x.checked&&x.checked()?(e.openBlock(),e.createElementBlock("span",oa," ✓ ")):e.createCommentVNode("",!0)],10,ea))),128))],40,Zl)):e.createCommentVNode("",!0)],42,Xl))),128))])]))}}),ra={xmlns:"http://www.w3.org/2000/svg",fill:"none",class:"animate-spin p-0.5 h-5 w-5 text-white ml-auto",viewBox:"0 0 24 24"};function la(n,t){return e.openBlock(),e.createElementBlock("svg",ra,[...t[0]||(t[0]=[e.createElementVNode("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",class:"opacity-25 stroke-blue-900 dark:stroke-blue-100"},null,-1),e.createElementVNode("path",{fill:"currentColor",d:"M4 12a8 8 0 0 1 8-8V0C5.373 0 0 5.373 0 12zm2 5.291A7.96 7.96 0 0 1 4 12H0c0 3.042 1.135 5.824 3 7.938z",class:"opacity-75"},null,-1)])])}const Re={render:la},aa={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function sa(n,t){return e.openBlock(),e.createElementBlock("svg",aa,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"},null,-1)])])}const ia={render:sa},ca={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function da(n,t){return e.openBlock(),e.createElementBlock("svg",ca,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"},null,-1)])])}const ua={render:da},ma={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function fa(n,t){return e.openBlock(),e.createElementBlock("svg",ma,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25zm0 9.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18zM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25zm0 9.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18z"},null,-1)])])}const va={render:fa},_a={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function pa(n,t){return e.openBlock(),e.createElementBlock("svg",_a,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75"},null,-1)])])}const ha={render:pa},ga={fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function ka(n,t){return e.openBlock(),e.createElementBlock("svg",ga,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M3 4a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v2.586a1 1 0 0 1-.293.707l-6.414 6.414a1 1 0 0 0-.293.707V17l-4 4v-6.586a1 1 0 0 0-.293-.707L3.293 7.293A1 1 0 0 1 3 6.586z"},null,-1)])])}const wa={render:ka},ba={class:"vuefinder__toolbar"},ya={key:0,class:"vuefinder__toolbar__actions"},Ea=["title"],Va=["title"],Sa=["title"],Na=["title"],Ba=["title"],Ca=["title"],xa=["title"],$a={key:1,class:"vuefinder__toolbar__search-results"},Da={class:"pl-2"},Ta={class:"dark:bg-gray-700 bg-gray-200 text-xs px-2 py-1 rounded"},Ma={class:"vuefinder__toolbar__controls"},Fa={class:"vuefinder__toolbar__control vuefinder__toolbar__dropdown-container"},Aa=["title"],Ia={class:"relative"},La={key:0,class:"vuefinder__toolbar__filter-indicator"},Ra={key:0,class:"vuefinder__toolbar__dropdown"},za={class:"vuefinder__toolbar__dropdown-content"},Pa={class:"vuefinder__toolbar__dropdown-section"},Ha={class:"vuefinder__toolbar__dropdown-label"},qa={class:"vuefinder__toolbar__dropdown-row"},Ua={value:"name"},Oa={value:"size"},ja={value:"modified"},Ka={value:""},Ga={value:"asc"},Ya={value:"desc"},Wa={class:"vuefinder__toolbar__dropdown-section"},Qa={class:"vuefinder__toolbar__dropdown-label"},Xa={class:"vuefinder__toolbar__dropdown-options"},Ja={class:"vuefinder__toolbar__dropdown-option"},Za={class:"vuefinder__toolbar__option-text"},es={class:"vuefinder__toolbar__dropdown-option"},ts={class:"vuefinder__toolbar__option-text"},os={class:"vuefinder__toolbar__dropdown-option"},ns={class:"vuefinder__toolbar__option-text"},rs={class:"vuefinder__toolbar__dropdown-toggle"},ls={for:"showHidden",class:"vuefinder__toolbar__toggle-label"},as={class:"vuefinder__toolbar__dropdown-reset"},ss=["title"],is=["title"],cs=e.defineComponent({name:"VfToolbar",__name:"Toolbar",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=t.config,d=t.search,i=D.useStore(l.state),f=D.useStore(d.state),a=D.useStore(r.selectedItems),m=D.useStore(r.sort),s=D.useStore(r.filter);e.watch(()=>i.value.fullScreen,()=>{if(i.value.fullScreen){const h=document.querySelector("body");h&&(h.style.overflow="hidden")}else{const h=document.querySelector("body");h&&(h.style.overflow="")}t.emitter.emit("vf-fullscreen-toggle")});const c=e.ref(!1),v=h=>{h.target.closest(".vuefinder__toolbar__dropdown-container")||(c.value=!1)};e.onMounted(()=>{document.addEventListener("click",v)}),e.onUnmounted(()=>{document.removeEventListener("click",v)});const _=e.ref({sortBy:"name",sortOrder:"",filterKind:"all",showHidden:i.value.showHiddenFiles});e.watch(()=>_.value.sortBy,h=>{if(!_.value.sortOrder){r.clearSort();return}h==="name"?r.setSort("basename",_.value.sortOrder):h==="size"?r.setSort("file_size",_.value.sortOrder):h==="modified"&&r.setSort("last_modified",_.value.sortOrder)}),e.watch(()=>_.value.sortOrder,h=>{if(!h){r.clearSort();return}_.value.sortBy==="name"?r.setSort("basename",h):_.value.sortBy==="size"?r.setSort("file_size",h):_.value.sortBy==="modified"&&r.setSort("last_modified",h)}),e.watch(m,h=>{h.active?(h.column==="basename"?_.value.sortBy="name":h.column==="file_size"?_.value.sortBy="size":h.column==="last_modified"&&(_.value.sortBy="modified"),_.value.sortOrder=h.order):_.value.sortOrder=""},{immediate:!0}),e.watch(()=>_.value.filterKind,h=>{r.setFilter(h,i.value.showHiddenFiles)}),e.watch(()=>_.value.showHidden,h=>{l.set("showHiddenFiles",h),r.setFilter(_.value.filterKind,h)}),e.watch(s,h=>{_.value.filterKind=h.kind},{immediate:!0}),e.watch(()=>i.value.showHiddenFiles,h=>{_.value.showHidden=h,r.setFilter(_.value.filterKind,h)},{immediate:!0});const b=()=>l.set("view",i.value.view==="grid"?"list":"grid"),V=e.computed(()=>s.value.kind!=="all"||!i.value.showHiddenFiles||m.value.active),g=()=>{_.value={sortBy:"name",sortOrder:"",filterKind:"all",showHidden:!0},l.set("showHiddenFiles",!0),r.clearSort(),r.clearFilter()};return(h,w)=>(e.openBlock(),e.createElementBlock("div",ba,[e.unref(f).query.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",ya,[e.unref(t).features.includes(e.unref(R).NEW_FOLDER)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"mx-1.5",title:e.unref(o)("New Folder"),onClick:w[0]||(w[0]=u=>e.unref(t).modal.open(Ae,{items:e.unref(a)}))},[e.createVNode(e.unref(We))],8,Ea)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(R).NEW_FILE)?(e.openBlock(),e.createElementBlock("div",{key:1,class:"mx-1.5",title:e.unref(o)("New File"),onClick:w[1]||(w[1]=u=>e.unref(t).modal.open(Xe,{items:e.unref(a)}))},[e.createVNode(e.unref(Qe))],8,Va)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(R).RENAME)?(e.openBlock(),e.createElementBlock("div",{key:2,class:"mx-1.5",title:e.unref(o)("Rename"),onClick:w[2]||(w[2]=u=>e.unref(a).length!==1||e.unref(t).modal.open(we,{items:e.unref(a)}))},[e.createVNode(e.unref(Ke),{class:e.normalizeClass(e.unref(a).length===1?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,Sa)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(R).DELETE)?(e.openBlock(),e.createElementBlock("div",{key:3,class:"mx-1.5",title:e.unref(o)("Delete"),onClick:w[3]||(w[3]=u=>!e.unref(a).length||e.unref(t).modal.open(ke,{items:e.unref(a)}))},[e.createVNode(e.unref(je),{class:e.normalizeClass(e.unref(a).length?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,Na)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(R).UPLOAD)?(e.openBlock(),e.createElementBlock("div",{key:4,class:"mx-1.5",title:e.unref(o)("Upload"),onClick:w[4]||(w[4]=u=>e.unref(t).modal.open(Ze,{items:e.unref(a)}))},[e.createVNode(e.unref(Je))],8,Ba)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(R).UNARCHIVE)&&e.unref(a).length===1&&e.unref(a)[0].mime_type==="application/zip"?(e.openBlock(),e.createElementBlock("div",{key:5,class:"mx-1.5",title:e.unref(o)("Unarchive"),onClick:w[5]||(w[5]=u=>!e.unref(a).length||e.unref(t).modal.open(Ie,{items:e.unref(a)}))},[e.createVNode(e.unref(et),{class:e.normalizeClass(e.unref(a).length?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,Ca)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(R).ARCHIVE)?(e.openBlock(),e.createElementBlock("div",{key:6,class:"mx-1.5",title:e.unref(o)("Archive"),onClick:w[6]||(w[6]=u=>!e.unref(a).length||e.unref(t).modal.open(Le,{items:e.unref(a)}))},[e.createVNode(e.unref(tt),{class:e.normalizeClass(e.unref(a).length?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,xa)):e.createCommentVNode("",!0)])),e.unref(f).query?(e.openBlock(),e.createElementBlock("div",$a,[e.createElementVNode("div",Da,[e.createTextVNode(e.toDisplayString(e.unref(o)("Search results for"))+" ",1),e.createElementVNode("span",Ta,e.toDisplayString(e.unref(f).query),1)]),e.unref(l).get("loadingIndicator")==="circular"&&e.unref(r).isLoading()?(e.openBlock(),e.createBlock(e.unref(Re),{key:0})):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.createElementVNode("div",Ma,[e.createElementVNode("div",Fa,[e.createElementVNode("div",{title:e.unref(o)("Filter"),onClick:w[7]||(w[7]=u=>c.value=!c.value),class:"vuefinder__toolbar__dropdown-trigger"},[e.createElementVNode("div",Ia,[e.createVNode(e.unref(wa),{class:"vf-toolbar-icon vuefinder__toolbar__icon w-6 h-6"}),V.value?(e.openBlock(),e.createElementBlock("div",La)):e.createCommentVNode("",!0)])],8,Aa),c.value?(e.openBlock(),e.createElementBlock("div",Ra,[e.createElementVNode("div",za,[e.createElementVNode("div",Pa,[e.createElementVNode("div",Ha,e.toDisplayString(e.unref(o)("Sorting")),1),e.createElementVNode("div",qa,[e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":w[8]||(w[8]=u=>_.value.sortBy=u),class:"vuefinder__toolbar__dropdown-select"},[e.createElementVNode("option",Ua,e.toDisplayString(e.unref(o)("Name")),1),e.createElementVNode("option",Oa,e.toDisplayString(e.unref(o)("Size")),1),e.createElementVNode("option",ja,e.toDisplayString(e.unref(o)("Date")),1)],512),[[e.vModelSelect,_.value.sortBy]]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":w[9]||(w[9]=u=>_.value.sortOrder=u),class:"vuefinder__toolbar__dropdown-select"},[e.createElementVNode("option",Ka,e.toDisplayString(e.unref(o)("None")),1),e.createElementVNode("option",Ga,e.toDisplayString(e.unref(o)("Asc")),1),e.createElementVNode("option",Ya,e.toDisplayString(e.unref(o)("Desc")),1)],512),[[e.vModelSelect,_.value.sortOrder]])])]),e.createElementVNode("div",Wa,[e.createElementVNode("div",Qa,e.toDisplayString(e.unref(o)("Show")),1),e.createElementVNode("div",Xa,[e.createElementVNode("label",Ja,[e.withDirectives(e.createElementVNode("input",{type:"radio",name:"filterKind",value:"all","onUpdate:modelValue":w[10]||(w[10]=u=>_.value.filterKind=u),class:"vuefinder__toolbar__radio"},null,512),[[e.vModelRadio,_.value.filterKind]]),e.createElementVNode("span",Za,e.toDisplayString(e.unref(o)("All items")),1)]),e.createElementVNode("label",es,[e.withDirectives(e.createElementVNode("input",{type:"radio",name:"filterKind",value:"files","onUpdate:modelValue":w[11]||(w[11]=u=>_.value.filterKind=u),class:"vuefinder__toolbar__radio"},null,512),[[e.vModelRadio,_.value.filterKind]]),e.createElementVNode("span",ts,e.toDisplayString(e.unref(o)("Files only")),1)]),e.createElementVNode("label",os,[e.withDirectives(e.createElementVNode("input",{type:"radio",name:"filterKind",value:"folders","onUpdate:modelValue":w[12]||(w[12]=u=>_.value.filterKind=u),class:"vuefinder__toolbar__radio"},null,512),[[e.vModelRadio,_.value.filterKind]]),e.createElementVNode("span",ns,e.toDisplayString(e.unref(o)("Folders only")),1)])])]),e.createElementVNode("div",rs,[e.createElementVNode("label",ls,e.toDisplayString(e.unref(o)("Show hidden files")),1),e.withDirectives(e.createElementVNode("input",{type:"checkbox",id:"showHidden","onUpdate:modelValue":w[13]||(w[13]=u=>_.value.showHidden=u),class:"vuefinder__toolbar__checkbox"},null,512),[[e.vModelCheckbox,_.value.showHidden]])]),e.createElementVNode("div",as,[e.createElementVNode("button",{onClick:g,class:"vuefinder__toolbar__reset-button"},e.toDisplayString(e.unref(o)("Reset")),1)])])])):e.createCommentVNode("",!0)]),e.unref(t).features.includes(e.unref(R).FULL_SCREEN)?(e.openBlock(),e.createElementBlock("div",{key:0,onClick:w[14]||(w[14]=u=>e.unref(l).toggle("fullScreen")),class:"mx-1.5",title:e.unref(o)("Toggle Full Screen")},[e.unref(i).fullScreen?(e.openBlock(),e.createBlock(e.unref(ua),{key:0})):(e.openBlock(),e.createBlock(e.unref(ia),{key:1}))],8,ss)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"mx-1.5",title:e.unref(o)("Change View"),onClick:w[15]||(w[15]=u=>e.unref(f).query.length||b())},[e.unref(i).view==="grid"?(e.openBlock(),e.createBlock(e.unref(va),{key:0,class:e.normalizeClass(["vf-toolbar-icon",e.unref(f).query.length?"vf-toolbar-icon-disabled":""])},null,8,["class"])):e.createCommentVNode("",!0),e.unref(i).view==="list"?(e.openBlock(),e.createBlock(e.unref(ha),{key:1,class:e.normalizeClass(["vf-toolbar-icon",e.unref(f).query.length?"vf-toolbar-icon-disabled":""])},null,8,["class"])):e.createCommentVNode("",!0)],8,is)])]))}}),ds=(n,t=0,o=!1)=>{let r;return(...l)=>{o&&!r&&n(...l),clearTimeout(r),r=setTimeout(()=>{n(...l)},t)}},Pe=(n,t,o)=>{const r=e.ref(n);return e.customRef((l,d)=>({get(){return l(),r.value},set:ds(i=>{r.value=i,d()},t,!1)}))},us={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer",viewBox:"-40 -40 580 580"};function ms(n,t){return e.openBlock(),e.createElementBlock("svg",us,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M463.5 224h8.5c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2S461.9 48.1 455 55l-41.6 41.6c-87.6-86.5-228.7-86.2-315.8 1-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2S334.3 224 344 224z"},null,-1)])])}const fs={render:ms},vs={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-0.5 rounded",viewBox:"0 0 20 20"};function _s(n,t){return e.openBlock(),e.createElementBlock("svg",vs,[...t[0]||(t[0]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 9.707a1 1 0 0 1 0-1.414l4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1-1.414 1.414L11 7.414V15a1 1 0 1 1-2 0V7.414L6.707 9.707a1 1 0 0 1-1.414 0",class:"pointer-events-none","clip-rule":"evenodd"},null,-1)])])}const ps={render:_s},hs={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer",viewBox:"0 0 24 24"};function gs(n,t){return e.openBlock(),e.createElementBlock("svg",hs,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1)])])}const ks={render:gs},ws={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-gray-800 cursor-pointer",viewBox:"0 0 20 20"};function bs(n,t){return e.openBlock(),e.createElementBlock("svg",ws,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M10.707 2.293a1 1 0 0 0-1.414 0l-7 7a1 1 0 0 0 1.414 1.414L4 10.414V17a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-6.586l.293.293a1 1 0 0 0 1.414-1.414z",class:"pointer-events-none"},null,-1)])])}const ys={render:bs},Es={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 m-auto stroke-gray-400 fill-gray-100 dark:stroke-gray-400 dark:fill-gray-400/20",viewBox:"0 0 20 20"};function Vs(n,t){return e.openBlock(),e.createElementBlock("svg",Es,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607"},null,-1)])])}const Ss={render:Vs},Ns={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"w-6 h-6 cursor-pointer",viewBox:"0 0 24 24"};function Bs(n,t){return e.openBlock(),e.createElementBlock("svg",Ns,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1)])])}const Cs={render:Bs},xs={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"h-6 w-6 p-1 rounded text-slate-700 dark:text-neutral-300 cursor-pointer",viewBox:"0 0 24 24"};function $s(n,t){return e.openBlock(),e.createElementBlock("svg",xs,[...t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M9 6h11M12 12h8M15 18h5M5 6v.01M8 12v.01M11 18v.01"},null,-1)])])}const Ds={render:$s},Ts={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 448 512"};function Ms(n,t){return e.openBlock(),e.createElementBlock("svg",Ts,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M8 256a56 56 0 1 1 112 0 56 56 0 1 1-112 0m160 0a56 56 0 1 1 112 0 56 56 0 1 1-112 0m216-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112"},null,-1)])])}const Fs={render:Ms};function As(n){const[t,o]=Is(n);if(!o||o==="/")return t+"://";const r=o.replace(/\/+$/,""),l=r.lastIndexOf("/");return l===0?t+"://":t+":/"+r.slice(0,l)}function Is(n){const t=n.indexOf(":/");return t===-1?[void 0,n]:[n.slice(0,t),n.slice(t+2)||"/"]}function _e(n,t=[]){const o="vfDragEnterCounter",r=n.fs,l=D.useStore(r.selectedItems);function d(s,c){s.preventDefault(),r.getDraggedItem()===c.path||!c||c.type!=="dir"||l.value.some(_=>_.path===c.path||As(_.path)===c.path)?s.dataTransfer&&(s.dataTransfer.dropEffect="none",s.dataTransfer.effectAllowed="none"):(s.dataTransfer&&(s.dataTransfer.dropEffect="copy",s.dataTransfer.effectAllowed="all"),s.currentTarget.classList.add(...t))}function i(s){s.preventDefault();const c=s.currentTarget,v=Number(c.dataset[o]||0);c.dataset[o]=String(v+1)}function f(s){s.preventDefault();const c=s.currentTarget,_=Number(c.dataset[o]||0)-1;_<=0?(delete c.dataset[o],c.classList.remove(...t)):c.dataset[o]=String(_)}function a(s,c){if(!c)return;s.preventDefault();const v=s.currentTarget;delete v.dataset[o],v.classList.remove(...t);const _=s.dataTransfer?.getData("items")||"[]",V=JSON.parse(_).map(g=>r.sortedFiles.get().find(h=>h.path===g));r.clearDraggedItem(),n.modal.open(se,{items:{from:V,to:c}})}function m(s){return{dragover:c=>d(c,s),dragenter:i,dragleave:f,drop:c=>a(c,s)}}return{events:m}}const Ls={class:"vuefinder__breadcrumb__container"},Rs=["title"],zs=["title"],Ps=["title"],Hs=["title"],qs={class:"vuefinder__breadcrumb__list"},Us={key:0,class:"vuefinder__breadcrumb__hidden-list"},Os={class:"relative"},js=["title","onClick"],Ks={class:"vuefinder__breadcrumb__search-mode"},Gs=["placeholder"],Ys=["onClick"],Ws={class:"vuefinder__breadcrumb__hidden-item-content"},Qs={class:"vuefinder__breadcrumb__hidden-item-text"},Xs=e.defineComponent({__name:"Breadcrumb",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.search,l=t.fs,d=t.config,i=D.useStore(d.state),f=D.useStore(r.state),a=D.useStore(l.path),m=D.useStore(l.loading),s=e.computed(()=>f.value?.searchMode??!1),c=e.ref(null),v=Pe(0,100),_=e.ref(5),b=e.ref(!1),V=e.computed(()=>a.value?.breadcrumb??[]);function g(T,$){return T.length>$?[T.slice(-$),T.slice(0,-$)]:[T,[]]}const h=e.computed(()=>g(V.value,_.value)[0]),w=e.computed(()=>g(V.value,_.value)[1]);e.watch(v,()=>{if(!c.value)return;const T=c.value.children;let $=0,z=0;const K=5,X=1;_.value=K,e.nextTick(()=>{for(let re=T.length-1;re>=0;re--){const oe=T[re];if($+oe.offsetWidth>v.value-40)break;$+=parseInt(oe.offsetWidth.toString(),10),z++}z<X&&(z=X),z>K&&(z=K),_.value=z})});const u=()=>{c.value&&(v.value=c.value.offsetWidth)},y=e.ref(null);e.onMounted(()=>{y.value=new ResizeObserver(u),c.value&&y.value.observe(c.value)}),e.onUnmounted(()=>{y.value&&y.value.disconnect()});const S=_e(t,["bg-blue-200","dark:bg-slate-600"]);function x(T=null){T??=V.value.length-2;const $={basename:a.value?.storage??"local",extension:"",path:(a.value?.storage??"local")+"://",storage:a.value?.storage??"local",type:"dir",file_size:null,last_modified:null,mime_type:null,visibility:""};return V.value[T]??$}const P=()=>{A()},L=()=>{r.exitSearchMode(),h.value.length>0&&!s.value&&t.emitter.emit("vf-fetch",{params:{q:"index",storage:a.value?.storage??"local",path:V.value[V.value.length-2]?.path??(a.value?.storage??"local")+"://"}})},H=T=>{t.emitter.emit("vf-fetch",{params:{q:"index",storage:a.value?.storage,path:T.path}}),b.value=!1},U=()=>{b.value&&(b.value=!1)},F={mounted(T,$){T.clickOutsideEvent=function(z){T===z.target||T.contains(z.target)||$.value()},document.body.addEventListener("click",T.clickOutsideEvent)},beforeUnmount(T){document.body.removeEventListener("click",T.clickOutsideEvent)}},j=()=>{d.toggle("showTreeView")},E=e.ref(null),B=Pe("",400);e.watch(B,T=>{t.emitter.emit("vf-toast-clear"),r.setQuery(T)}),r.state.listen(T=>{B.value=T?.query??""}),e.watch(s,T=>{T&&e.nextTick(()=>{E.value&&E.value.focus()})}),t.emitter.on("vf-search-exit",()=>{r.exitSearchMode()});const C=()=>{B.value===""&&r.exitSearchMode()},A=()=>{r.exitSearchMode(),t.emitter.emit("vf-fetch",{params:{q:"index",storage:a.value.storage,path:a.value.path}})},I=e.ref({x:0,y:0}),q=(T,$=null)=>{if(T.currentTarget instanceof HTMLElement){const{x:z,y:K,height:X}=T.currentTarget.getBoundingClientRect();I.value={x:z,y:K+X}}b.value=$??!b.value};return(T,$)=>(e.openBlock(),e.createElementBlock("div",Ls,[e.createElementVNode("span",{title:e.unref(o)("Toggle Tree View")},[e.createVNode(e.unref(Ds),{onClick:j,class:e.normalizeClass(["vuefinder__breadcrumb__toggle-tree",e.unref(i).showTreeView?"vuefinder__breadcrumb__toggle-tree--active":""])},null,8,["class"])],8,Rs),e.createElementVNode("span",{title:e.unref(o)("Go up a directory")},[e.createVNode(e.unref(ps),e.mergeProps(e.toHandlers(V.value.length&&!s.value?e.unref(S).events(x()):{}),{onClick:L,class:V.value.length&&!s.value?"vuefinder__breadcrumb__go-up--active":"vuefinder__breadcrumb__go-up--inactive"}),null,16,["class"])],8,zs),e.unref(l).isLoading()?(e.openBlock(),e.createElementBlock("span",{key:1,title:e.unref(o)("Cancel")},[e.createVNode(e.unref(ks),{onClick:$[0]||($[0]=z=>e.unref(t).emitter.emit("vf-fetch-abort"))})],8,Hs)):(e.openBlock(),e.createElementBlock("span",{key:0,title:e.unref(o)("Refresh")},[e.createVNode(e.unref(fs),{onClick:P})],8,Ps)),e.withDirectives(e.createElementVNode("div",{class:"group vuefinder__breadcrumb__search-container",onClick:$[3]||($[3]=(...z)=>e.unref(r).enterSearchMode&&e.unref(r).enterSearchMode(...z))},[e.createElementVNode("div",null,[e.createVNode(e.unref(ys),e.mergeProps(e.toHandlers(e.unref(S).events(x(-1))),{onClick:$[1]||($[1]=e.withModifiers(z=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",storage:e.unref(a).storage??"local"}}),["stop"]))}),null,16)]),e.createElementVNode("div",qs,[w.value.length?e.withDirectives((e.openBlock(),e.createElementBlock("div",Us,[$[5]||($[5]=e.createElementVNode("div",{class:"vuefinder__breadcrumb__separator"},"/",-1)),e.createElementVNode("div",Os,[e.createElementVNode("span",{onDragenter:$[2]||($[2]=z=>q(z,!0)),onClick:e.withModifiers(q,["stop"]),class:"vuefinder__breadcrumb__hidden-toggle"},[e.createVNode(e.unref(Fs),{class:"vuefinder__breadcrumb__hidden-toggle-icon"})],32)])])),[[F,U]]):e.createCommentVNode("",!0)]),e.createElementVNode("div",{ref_key:"breadcrumbContainer",ref:c,class:"vuefinder__breadcrumb__visible-list pointer-events-none"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h.value,(z,K)=>(e.openBlock(),e.createElementBlock("div",{key:K},[$[6]||($[6]=e.createElementVNode("span",{class:"vuefinder__breadcrumb__separator"},"/",-1)),e.createElementVNode("span",e.mergeProps(e.toHandlers(e.unref(S).events(z),!0),{class:"vuefinder__breadcrumb__item pointer-events-auto",title:z.basename,onClick:e.withModifiers(X=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",storage:e.unref(a).storage,path:z.path}}),["stop"])}),e.toDisplayString(z.name),17,js)]))),128))],512),e.unref(d).get("loadingIndicator")==="circular"&&e.unref(m)?(e.openBlock(),e.createBlock(e.unref(Re),{key:0})):e.createCommentVNode("",!0)],512),[[e.vShow,!s.value]]),e.withDirectives(e.createElementVNode("div",Ks,[e.createElementVNode("div",null,[e.createVNode(e.unref(Ss))]),e.withDirectives(e.createElementVNode("input",{ref_key:"searchInput",ref:E,onKeydown:e.withKeys(A,["esc"]),onBlur:C,"onUpdate:modelValue":$[4]||($[4]=z=>e.isRef(B)?B.value=z:null),placeholder:e.unref(o)("Search anything.."),class:"vuefinder__breadcrumb__search-input",type:"text"},null,40,Gs),[[e.vModelText,e.unref(B)]]),e.createVNode(e.unref(Cs),{onClick:A})],512),[[e.vShow,s.value]]),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.createElementVNode("div",{class:e.normalizeClass(e.unref(t).theme.actualValue)},[e.withDirectives(e.createElementVNode("div",{style:e.normalizeStyle({position:"absolute",top:I.value.y+"px",left:I.value.x+"px"}),class:"vuefinder vuefinder__breadcrumb__hidden-dropdown"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(w.value,(z,K)=>(e.openBlock(),e.createElementBlock("div",e.mergeProps({key:K},e.toHandlers(e.unref(S).events(z),!0),{onClick:X=>H(z),class:"vuefinder__breadcrumb__hidden-item"}),[e.createElementVNode("div",Ws,[e.createElementVNode("span",null,[e.createVNode(e.unref(ie),{class:"vuefinder__breadcrumb__hidden-item-icon"})]),$[7]||($[7]=e.createTextVNode()),e.createElementVNode("span",Qs,e.toDisplayString(z.name),1)])],16,Ys))),128))],4),[[e.vShow,b.value]])],2)]))]))}});function Js(n,t){const{scrollContainer:o,itemWidth:r=100,rowHeight:l,overscan:d=2,containerPadding:i=48,lockItemsPerRow:f}=t,a=n,m=()=>typeof l=="number"?l:l.value,s=e.ref(0),c=e.ref(6),v=e.ref(600);let _=null;const b=e.computed(()=>Math.ceil(a.value.length/c.value)),V=e.computed(()=>b.value*m()),g=e.computed(()=>{const H=m(),U=Math.max(0,Math.floor(s.value/H)-d),F=Math.min(b.value,Math.ceil((s.value+v.value)/H)+d);return{start:U,end:F}}),h=e.computed(()=>{const{start:H,end:U}=g.value;return Array.from({length:U-H},(F,j)=>H+j)}),w=()=>v.value,u=()=>f.value,y=()=>{if(u()){c.value=1;return}if(o.value){const H=o.value.clientWidth-i;c.value=Math.max(Math.floor(H/r),2)}},S=H=>{const U=H.target;s.value=U.scrollTop};e.watch(()=>a.value.length,()=>{y()});const x=(H,U)=>{const F=U*c.value;return H.slice(F,F+c.value)},P=(H,U,F,j,E)=>{const B=[];for(let C=U;C<=F;C++)for(let A=j;A<=E;A++){const I=C*c.value+A;I<H.length&&H[I]&&B.push(H[I])}return B},L=H=>({row:Math.floor(H/c.value),col:H%c.value});return e.onMounted(async()=>{await e.nextTick(),o.value&&(v.value=o.value.clientHeight||600),y(),window.addEventListener("resize",()=>{o.value&&(v.value=o.value.clientHeight||600),y()}),o.value&&"ResizeObserver"in window&&(_=new ResizeObserver(H=>{const U=H[0];U&&(v.value=Math.round(U.contentRect.height)),y()}),_.observe(o.value))}),e.onUnmounted(()=>{window.removeEventListener("resize",y),_&&(_.disconnect(),_=null)}),{scrollTop:s,itemsPerRow:c,totalRows:b,totalHeight:V,visibleRange:g,visibleRows:h,updateItemsPerRow:y,handleScroll:S,getRowItems:x,getItemsInRange:P,getItemPosition:L,getContainerHeight:w}}function Zs(n){const{getItemPosition:t,getItemsInRange:o,getKey:r,selectionObject:l,rowHeight:d,itemWidth:i}=n,f=Math.floor(Math.random()*2**32).toString(),m=e.inject("ServiceContainer").fs,s=D.useStore(m.selectedKeys),c=D.useStore(m.sortedFiles);D.useStore(m.selectedCount);const v=e.ref(new Set),_=e.ref(!1),b=e.ref(!1),V=e.ref(null),g=E=>E.map(B=>B.getAttribute("data-key")).filter(B=>!!B),h=E=>{E.selection.getSelection().forEach(B=>{E.selection.deselect(B,!0)})},w=E=>{s.value&&s.value.forEach(B=>{const C=document.querySelector(`[data-key="${B}"]`);C&&E.selection.select(C,!0)})},u=E=>{if(E.size===0)return null;const C=Array.from(E).map($=>{const z=c.value?.findIndex(K=>r(K)===$)??-1;return t(z>=0?z:0)}),A=Math.min(...C.map($=>$.row)),I=Math.max(...C.map($=>$.row)),q=Math.min(...C.map($=>$.col)),T=Math.max(...C.map($=>$.col));return{minRow:A,maxRow:I,minCol:q,maxCol:T}},y=E=>{_.value=!1,!E.event?.metaKey&&!E.event?.ctrlKey&&(b.value=!0),E.selection.resolveSelectables(),h(E),w(E)},S=({event:E,selection:B})=>{const C=E;C&&"type"in C&&C.type==="touchend"&&C.preventDefault();const A=E;if(!A?.ctrlKey&&!A?.metaKey&&(m.clearSelection(),B.clearSelection(!0,!0)),v.value.clear(),A&&l.value){const I=l.value.getSelectables()[0]?.closest(".scroller-"+f);if(I){const q=I.getBoundingClientRect(),T=A.clientY-q.top+I.scrollTop,$=A.clientX-q.left,z=Math.floor(T/d.value),K=Math.floor($/i);V.value={row:z,col:K}}}},x=E=>{const B=E.selection,C=g(E.store.changed.added),A=g(E.store.changed.removed);b.value=!1,_.value=!0,C.forEach(I=>{s.value&&!s.value.has(I)&&v.value.add(I),m.select(I)}),A.forEach(I=>{document.querySelector(`[data-key="${I}"]`)&&c.value?.find(T=>r(T)===I)&&v.value.delete(I),m.deselect(I)}),B.resolveSelectables(),w(E)},P=()=>{v.value.clear()},L=E=>{if(E.event&&V.value&&v.value.size>0){const C=Array.from(v.value).map(A=>{const I=c.value?.findIndex(q=>r(q)===A)??-1;return I>=0?t(I):null}).filter(A=>A!==null);if(C.length>0){const A=[...C,V.value],I={minRow:Math.min(...A.map(q=>q.row)),maxRow:Math.max(...A.map(q=>q.row)),minCol:Math.min(...A.map(q=>q.col)),maxCol:Math.max(...A.map(q=>q.col))};o(c.value||[],I.minRow,I.maxRow,I.minCol,I.maxCol).forEach(q=>{const T=r(q);document.querySelector(`[data-key="${T}"]`)||m.select(T)})}}},H=E=>{L(E),h(E),w(E),m.setSelectedCount(s.value?.size||0),_.value=!1,V.value=null},U=()=>{l.value=new ft({selectables:[".file-item-"+f],boundaries:[".scroller-"+f],selectionContainerClass:"selection-area-container",behaviour:{overlap:"invert",intersect:"touch",startThreshold:0,triggers:[0],scrolling:{speedDivider:10,manualSpeed:750,startScrollMargins:{x:0,y:10}}},features:{touch:!0,range:!0,deselectOnBlur:!0,singleTap:{allow:!1,intersect:"native"}}}),l.value.on("beforestart",y),l.value.on("start",S),l.value.on("move",x),l.value.on("stop",H)},F=()=>{l.value&&(l.value.destroy(),l.value=null)},j=E=>{b.value&&(l.value?.clearSelection(),P(),b.value=!1);const B=E;!v.value.size&&!b.value&&!B?.ctrlKey&&!B?.metaKey&&(m.clearSelection(),l.value?.clearSelection())};return e.onMounted(()=>{const E=B=>{!B.buttons&&_.value&&(_.value=!1)};document.addEventListener("dragleave",E),e.onUnmounted(()=>{document.removeEventListener("dragleave",E)})}),{isDragging:_,selectionStarted:b,explorerId:f,extractIds:g,cleanupSelection:h,refreshSelection:w,getSelectionRange:u,selectSelectionRange:L,initializeSelectionArea:U,destroySelectionArea:F,handleContentClick:j}}const ei={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 20 20"};function ti(n,t){return e.openBlock(),e.createElementBlock("svg",ei,[...t[0]||(t[0]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 0 1 1.414 0L10 10.586l3.293-3.293a1 1 0 1 1 1.414 1.414l-4 4a1 1 0 0 1-1.414 0l-4-4a1 1 0 0 1 0-1.414","clip-rule":"evenodd"},null,-1)])])}const oi={render:ti},ni={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 20 20"};function ri(n,t){return e.openBlock(),e.createElementBlock("svg",ni,[...t[0]||(t[0]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M14.707 12.707a1 1 0 0 1-1.414 0L10 9.414l-3.293 3.293a1 1 0 0 1-1.414-1.414l4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1 0 1.414","clip-rule":"evenodd"},null,-1)])])}const li={render:ri},he=e.defineComponent({__name:"SortIcon",props:{direction:{}},setup(n){return(t,o)=>(e.openBlock(),e.createElementBlock("div",null,[n.direction==="asc"?(e.openBlock(),e.createBlock(e.unref(oi),{key:0})):e.createCommentVNode("",!0),n.direction==="desc"?(e.openBlock(),e.createBlock(e.unref(li),{key:1})):e.createCommentVNode("",!0)]))}}),ai={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"absolute h-6 w-6 md:h-12 md:w-12 m-auto stroke-neutral-500 fill-white dark:fill-gray-700 dark:stroke-gray-600 z-10",viewBox:"0 0 24 24"};function si(n,t){return e.openBlock(),e.createElementBlock("svg",ai,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 0 0 2-2V9.414a1 1 0 0 0-.293-.707l-5.414-5.414A1 1 0 0 0 12.586 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2"},null,-1)])])}const ii={render:si},ci={class:"vuefinder__drag-item__container"},di={class:"vuefinder__drag-item__count"},ui=e.defineComponent({__name:"DragItem",props:{count:{}},setup(n){const t=n;return(o,r)=>(e.openBlock(),e.createElementBlock("div",ci,[e.createVNode(e.unref(ii)),e.createElementVNode("div",di,e.toDisplayString(t.count),1)]))}}),mi={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"text-neutral-500",viewBox:"0 0 24 24"};function fi(n,t){return e.openBlock(),e.createElementBlock("svg",mi,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 0 0 2-2V9.414a1 1 0 0 0-.293-.707l-5.414-5.414A1 1 0 0 0 12.586 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2"},null,-1)])])}const vi={render:fi},_i={key:3,class:"vuefinder__item-icon__extension"},He=e.defineComponent({__name:"ItemIcon",props:{item:{},ext:{type:Boolean},small:{type:Boolean}},setup(n){const t=n,o=e.inject("ServiceContainer"),r=D.useStore(o.config.state),l=o.customIcon?.(o,r,t.item);return(d,i)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__item-icon",n.small?"vuefinder__item-icon--small":"vuefinder__item-icon--large"])},[e.unref(l)?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(l).is),e.normalizeProps(e.mergeProps({key:0},e.unref(l).props||{})),null,16)):n.item.type==="dir"?(e.openBlock(),e.createBlock(e.unref(ie),{key:1})):(e.openBlock(),e.createBlock(e.unref(vi),{key:2})),!e.unref(l)&&n.ext&&n.item.type!=="dir"&&n.item.extension?(e.openBlock(),e.createElementBlock("div",_i,e.toDisplayString(n.item.extension.substring(0,3)),1)):e.createCommentVNode("",!0)],2))}}),pi=["data-key","data-row","data-col","draggable"],hi={key:0},gi={class:"vuefinder__explorer__item-grid-content"},ki=["data-src","alt"],wi={class:"vuefinder__explorer__item-title"},bi={key:1,class:"vuefinder__explorer__item-list-content"},yi={class:"vuefinder__explorer__item-list-name"},Ei={class:"vuefinder__explorer__item-list-icon"},Vi={class:"vuefinder__explorer__item-name"},Si={key:0,class:"vuefinder__explorer__item-path"},Ni={key:1,class:"vuefinder__explorer__item-size"},Bi={key:0},Ci={key:2,class:"vuefinder__explorer__item-date"},xi=e.defineComponent({__name:"FileItem",props:{item:{},view:{},compact:{type:Boolean},showThumbnails:{type:Boolean},isSelected:{type:Boolean},isDragging:{type:Boolean},rowIndex:{},colIndex:{},showPath:{type:Boolean},explorerId:{}},emits:["click","dblclick","contextmenu","dragstart","dragend"],setup(n,{emit:t}){const o=n,r=t,l=e.inject("ServiceContainer"),d=l.fs,i=l.config,f=e.computed(()=>["file-item-"+o.explorerId,o.view==="grid"?"vf-explorer-item-grid":"vf-explorer-item-list",o.isSelected?"vf-explorer-selected":""]),a=e.computed(()=>({opacity:o.isDragging||d.isCut(o.item.path)?.5:""}));let m=null;const s=e.ref(null);let c=!1;const v=()=>{m&&clearTimeout(m),_.value=!0},_=e.ref(!0),b=V=>{if(_.value=!1,m&&(V.preventDefault(),clearTimeout(m)),!c)c=!0,r("click",V),s.value=setTimeout(()=>{c=!1},300);else return c=!1,r("dblclick",V),m&&clearTimeout(m),!1;if(V.currentTarget&&V.currentTarget instanceof HTMLElement){const g=V.currentTarget.getBoundingClientRect();V.preventDefault(),m=setTimeout(()=>{let u=g.y+g.height;u+146>window.innerHeight-10&&(u=g.y-146),u<10&&(u=10);const y=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!0,view:window,button:2,buttons:0,clientX:g.x,clientY:u});V.target?.dispatchEvent(y)},300)}};return(V,g)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(f.value),style:e.normalizeStyle(a.value),"data-key":n.item.path,"data-row":n.rowIndex,"data-col":n.colIndex,draggable:_.value,onTouchstart:g[1]||(g[1]=h=>b(h)),onTouchend:g[2]||(g[2]=h=>v()),onClick:g[3]||(g[3]=h=>r("click",h)),onDblclick:g[4]||(g[4]=h=>r("dblclick",h)),onContextmenu:g[5]||(g[5]=e.withModifiers(h=>r("contextmenu",h),["prevent","stop"])),onDragstart:g[6]||(g[6]=h=>r("dragstart",h)),onDragend:g[7]||(g[7]=h=>r("dragend",h))},[n.view==="grid"?(e.openBlock(),e.createElementBlock("div",hi,[e.createElementVNode("div",gi,[(n.item.mime_type??"").startsWith("image")&&n.showThumbnails?(e.openBlock(),e.createElementBlock("img",{key:0,onTouchstart:g[0]||(g[0]=h=>h.preventDefault()),src:"data:image/png;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",class:"vuefinder__explorer__item-thumbnail lazy","data-src":e.unref(l).requester.getPreviewUrl(n.item.storage,n.item),alt:n.item.basename},null,40,ki)):(e.openBlock(),e.createBlock(He,{key:1,item:n.item,ext:!0},null,8,["item"]))]),e.createElementVNode("span",wi,e.toDisplayString(e.unref(Ce)(n.item.basename)),1)])):(e.openBlock(),e.createElementBlock("div",bi,[e.createElementVNode("div",yi,[e.createElementVNode("div",Ei,[e.createVNode(He,{item:n.item,small:n.compact},null,8,["item","small"])]),e.createElementVNode("span",Vi,e.toDisplayString(n.item.basename),1)]),n.showPath?(e.openBlock(),e.createElementBlock("div",Si,e.toDisplayString(n.item.path),1)):e.createCommentVNode("",!0),n.showPath?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",Ni,[n.item.file_size?(e.openBlock(),e.createElementBlock("div",Bi,e.toDisplayString(e.unref(l).filesize(n.item.file_size)),1)):e.createCommentVNode("",!0)])),!n.showPath&&n.item.last_modified?(e.openBlock(),e.createElementBlock("div",Ci,e.toDisplayString(new Date(n.item.last_modified*1e3).toLocaleString()),1)):e.createCommentVNode("",!0)])),e.unref(i).get("pinnedFolders").find(h=>h.path===n.item.path)?(e.openBlock(),e.createBlock(e.unref(De),{key:2,class:"vuefinder__item--pinned"})):e.createCommentVNode("",!0)],46,pi))}}),$i=["data-row"],Be=e.defineComponent({__name:"FileRow",props:{rowIndex:{},rowHeight:{},view:{},itemsPerRow:{},items:{},compact:{type:Boolean},showThumbnails:{type:Boolean},showPath:{type:Boolean},isDraggingItem:{type:Function},isSelected:{type:Function},dragNDropEvents:{type:Function},explorerId:{}},emits:["click","dblclick","contextmenu","dragstart","dragend"],setup(n,{emit:t}){const o=n,r=t,l=e.computed(()=>[o.view==="grid"?"vf-explorer-item-grid-row":"vf-explorer-item-list-row","pointer-events-none"]),d=e.computed(()=>({position:"absolute",top:0,left:0,width:"100%",height:`${o.rowHeight}px`,transform:`translateY(${o.rowIndex*o.rowHeight}px)`})),i=e.computed(()=>o.view==="grid"?{gridTemplateColumns:`repeat(${o.itemsPerRow||1}, 1fr)`}:{gridTemplateColumns:"1fr"});return(f,a)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(l.value),"data-row":n.rowIndex,style:e.normalizeStyle(d.value)},[e.createElementVNode("div",{class:e.normalizeClass(["grid justify-self-start",{"w-full":n.view==="list"}]),style:e.normalizeStyle(i.value)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.items,(m,s)=>(e.openBlock(),e.createBlock(xi,e.mergeProps({key:m.path,item:m,view:n.view,compact:n.compact,"show-thumbnails":n.showThumbnails,"show-path":n.showPath,"is-selected":n.isSelected(m.path),"is-dragging":n.isDraggingItem(m.path),"row-index":n.rowIndex,"col-index":s},e.toHandlers(n.dragNDropEvents(m)),{onClick:a[0]||(a[0]=c=>r("click",c)),onDblclick:a[1]||(a[1]=c=>r("dblclick",c)),onContextmenu:a[2]||(a[2]=c=>r("contextmenu",c)),onDragstart:a[3]||(a[3]=c=>r("dragstart",c)),onDragend:a[4]||(a[4]=c=>r("dragend",c)),explorerId:n.explorerId}),null,16,["item","view","compact","show-thumbnails","show-path","is-selected","is-dragging","row-index","col-index","explorerId"]))),128))],6)],14,$i))}}),Di=["onClick"],Ti=e.defineComponent({__name:"Toast",setup(n){const t=e.inject("ServiceContainer"),{getStore:o}=t.storage,r=e.ref(o("full-screen",!1)),l=e.ref([]),d=a=>a==="error"?"text-red-400 border-red-400 dark:text-red-300 dark:border-red-300":"text-lime-600 border-lime-600 dark:text-lime-300 dark:border-lime-1300",i=a=>{l.value.splice(a,1)},f=a=>{let m=l.value.findIndex(s=>s.id===a);m!==-1&&i(m)};return t.emitter.on("vf-toast-clear",()=>{l.value=[]}),t.emitter.on("vf-toast-push",a=>{let m=new Date().getTime().toString(36).concat(performance.now().toString(),Math.random().toString()).replace(/\./g,"");a.id=m,l.value.push(a),setTimeout(()=>{f(m)},5e3)}),(a,m)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__toast",r.value.value?"vuefinder__toast--fixed":"vuefinder__toast--absolute"])},[e.createVNode(e.TransitionGroup,{name:"vuefinder__toast-item","enter-active-class":"vuefinder__toast-item--enter-active","leave-active-class":"vuefinder__toast-item--leave-active","leave-to-class":"vuefinder__toast-item--leave-to"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,(s,c)=>(e.openBlock(),e.createElementBlock("div",{key:c,onClick:v=>i(c),class:e.normalizeClass(["vuefinder__toast__message",d(s.type)])},e.toDisplayString(s.label),11,Di))),128))]),_:1})],2))}}),Mi={class:"vuefinder__explorer__container"},Fi={ref:"customScrollBar",class:"vuefinder__explorer__scrollbar"},Ai={key:0,class:"vuefinder__explorer__header"},Ii={key:0,class:"vuefinder__linear-loader"},Li=e.defineComponent({__name:"Explorer",setup(n){const t=e.inject("ServiceContainer"),o=_e(t,["bg-blue-200","dark:bg-slate-600"]),r=e.useTemplateRef("dragImage"),l=e.shallowRef(null),d=e.useTemplateRef("scrollContainer"),i=e.useTemplateRef("scrollContent"),f=t.search,a=t.fs,m=t.config,s=D.useStore(m.state),c=D.useStore(f.state),v=D.useStore(a.sort),_=D.useStore(a.sortedFiles),b=D.useStore(a.selectedKeys),V=D.useStore(a.loading),g=p=>b.value?.has(p)??!1;let h=null;const w=e.ref(null),u=e.useTemplateRef("customScrollBar"),y=e.useTemplateRef("customScrollBarContainer"),S=e.computed(()=>{const p=s.value.view,k=s.value.compactListView;return p==="grid"&&!(c.value.searchMode&&c.value.query.length)?88:k?24:50}),{t:x}=t.i18n,{itemsPerRow:P,totalHeight:L,visibleRows:H,handleScroll:U,getRowItems:F,getItemsInRange:j,getItemPosition:E,updateItemsPerRow:B}=Js(e.computed(()=>_.value??[]),{scrollContainer:d,itemWidth:104,rowHeight:S,overscan:2,containerPadding:0,lockItemsPerRow:e.computed(()=>s.value.view==="list"||!!c.value.query.length)}),{explorerId:C,isDragging:A,initializeSelectionArea:I,destroySelectionArea:q,handleContentClick:T}=Zs({getItemPosition:E,getItemsInRange:j,getKey:p=>p.path,selectionObject:l,rowHeight:S,itemWidth:104}),$=e.ref(null),z=p=>{if(!p||!$.value)return!1;const k=b.value?.has($.value)??!1;return A.value&&(k?b.value?.has(p)??!1:p===$.value)};e.watch(()=>m.get("view"),p=>{p==="list"?P.value=1:B()},{immediate:!0}),e.watch(P,p=>{m.get("view")==="list"&&p!==1&&(P.value=1)});const K=p=>_.value?.[p];e.onMounted(()=>{if(I(),l.value&&l.value.on("beforestart",({event:p})=>{const k=p?.target===i.value;if(!p?.metaKey&&!p?.ctrlKey&&!p?.altKey&&!k)return!1}),d.value&&(h=new qe({elements_selector:".lazy",container:d.value})),e.watch(()=>c.value.query,p=>{const k=a.path.get().storage,N=a.path.get().path;!k||!N||p&&t.emitter.emit("vf-fetch",{params:{q:"search",storage:k,path:N,filter:p},onSuccess:M=>{M.files.length||t.emitter.emit("vf-toast-push",{label:x("No search result found.")})}})}),y.value){const p=ge.OverlayScrollbars(y.value,{scrollbars:{theme:"vf-scrollbars-theme"}},{initialized:k=>{w.value=k},scroll:k=>{const{scrollOffsetElement:N}=k.elements();d.value&&d.value.scrollTo({top:N.scrollTop,left:0})}});w.value=p}d.value&&d.value.addEventListener("scroll",()=>{const p=w.value;if(!p)return;const{scrollOffsetElement:k}=p.elements();k.scrollTo({top:d.value.scrollTop,left:0})})}),e.onMounted(()=>{t.emitter.on("vf-refresh-thumbnails",()=>{h&&h.update()})}),e.onUpdated(()=>{if(h&&h.update(),w.value&&u.value&&d.value){const k=d.value.scrollHeight>d.value.clientHeight,N=u.value;N.style.display=k?"block":"none",N.style.height=`${L.value}px`}}),e.onUnmounted(()=>{q(),h&&(h.destroy(),h=null),w.value&&(w.value.destroy(),w.value=null)});const X=p=>{const k=p.target?.closest(".file-item-"+C),N=p;if(k){const M=String(k.getAttribute("data-key"));!N?.ctrlKey&&!N?.metaKey&&(p.type!=="touchstart"||!a.isSelected(M))&&(a.clearSelection(),l.value?.clearSelection(!0,!0)),l.value?.resolveSelectables(),p.type==="touchstart"&&a.isSelected(M)?a.select(M):a.toggleSelect(M)}a.setSelectedCount(b.value?.size||0)},re=p=>{const k=t.contextMenuItems.find(N=>N.show(t,{searchQuery:"",items:[p],target:p}));k&&k.action(t,[p])},oe=p=>{const k=p.target?.closest(".file-item-"+C),N=k?String(k.getAttribute("data-key")):null;if(!N)return;const M=_.value?.find(ee=>ee.path===N);M&&re(M)},pe=()=>{const p=b.value;return _.value?.filter(k=>p?.has(k.path))||[]},ce=p=>{p.preventDefault();const k=p.target?.closest(".file-item-"+C);if(k){const N=String(k.getAttribute("data-key")),M=_.value?.find(ee=>ee.path===N);b.value?.has(N)||(a.clearSelection(),a.select(N)),t.emitter.emit("vf-contextmenu-show",{event:p,items:pe(),target:M})}},Ee=p=>{p.preventDefault(),t.emitter.emit("vf-contextmenu-show",{event:p,items:pe()})},de=p=>{if(p.altKey||p.ctrlKey||p.metaKey)return p.preventDefault(),!1;A.value=!0;const k=p.target?.closest(".file-item-"+C);if($.value=k?String(k.dataset.key):null,p.dataTransfer&&$.value){p.dataTransfer.setDragImage(r.value,0,15),p.dataTransfer.effectAllowed="all",p.dataTransfer.dropEffect="copy";const N=b.value?.has($.value)?Array.from(b.value):[$.value];p.dataTransfer.setData("items",JSON.stringify(N)),a.setDraggedItem($.value)}},ue=()=>{$.value=null};return(p,k)=>(e.openBlock(),e.createElementBlock("div",Mi,[e.createElementVNode("div",{ref:"customScrollBarContainer",class:e.normalizeClass(["vuefinder__explorer__scrollbar-container",[{"grid-view":e.unref(s).view==="grid"},{"search-active":e.unref(c).hasQuery}]])},[e.createElementVNode("div",Fi,null,512)],2),e.unref(s).view==="list"||e.unref(c).hasQuery?(e.openBlock(),e.createElementBlock("div",Ai,[e.createElementVNode("div",{onClick:k[0]||(k[0]=N=>e.unref(a).toggleSort("basename")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--name vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(x)("Name"))+" ",1),e.withDirectives(e.createVNode(he,{direction:e.unref(v).order},null,8,["direction"]),[[e.vShow,e.unref(v).active&&e.unref(v).column==="basename"]])]),e.unref(c).hasQuery?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,onClick:k[1]||(k[1]=N=>e.unref(a).toggleSort("file_size")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--size vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(x)("Size"))+" ",1),e.withDirectives(e.createVNode(he,{direction:e.unref(v).order},null,8,["direction"]),[[e.vShow,e.unref(v).active&&e.unref(v).column==="file_size"]])])),e.unref(c).hasQuery?(e.openBlock(),e.createElementBlock("div",{key:1,onClick:k[2]||(k[2]=N=>e.unref(a).toggleSort("path")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--path vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(x)("Filepath"))+" ",1),e.withDirectives(e.createVNode(he,{direction:e.unref(v).order},null,8,["direction"]),[[e.vShow,e.unref(v).active&&e.unref(v).column==="path"]])])):e.createCommentVNode("",!0),e.unref(c).hasQuery?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:2,onClick:k[3]||(k[3]=N=>e.unref(a).toggleSort("last_modified")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--date vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(x)("Date"))+" ",1),e.withDirectives(e.createVNode(he,{direction:e.unref(v).order},null,8,["direction"]),[[e.vShow,e.unref(v).active&&e.unref(v).column==="last_modified"]])]))])):e.createCommentVNode("",!0),e.createElementVNode("div",{ref_key:"scrollContainer",ref:d,class:e.normalizeClass(["vuefinder__explorer__selector-area","scroller-"+e.unref(C)]),onScroll:k[5]||(k[5]=(...N)=>e.unref(U)&&e.unref(U)(...N))},[e.unref(m).get("loadingIndicator")==="linear"&&e.unref(V)?(e.openBlock(),e.createElementBlock("div",Ii)):e.createCommentVNode("",!0),e.createElementVNode("div",{ref_key:"scrollContent",ref:i,class:"scrollContent min-h-full",style:e.normalizeStyle({height:`${e.unref(L)}px`,position:"relative",width:"100%"}),onContextmenu:e.withModifiers(Ee,["self","prevent"]),onClick:k[4]||(k[4]=e.withModifiers((...N)=>e.unref(T)&&e.unref(T)(...N),["self"]))},[e.createElementVNode("div",{ref_key:"dragImage",ref:r,class:"vuefinder__explorer__drag-item"},[e.createVNode(ui,{count:$.value&&e.unref(b)?.has($.value)?e.unref(b)?.size:1},null,8,["count"])],512),e.unref(c).query.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(e.unref(H),N=>(e.openBlock(),e.createBlock(Be,{key:N,"row-index":N,"row-height":S.value,view:"list",items:K(N)?[K(N)]:[],compact:e.unref(s).compactListView,"show-path":!0,"is-dragging-item":z,"is-selected":g,"drag-n-drop-events":M=>e.unref(o).events(M),explorerId:e.unref(C),onClick:X,onDblclick:oe,onContextmenu:ce,onDragstart:de,onDragend:ue},null,8,["row-index","row-height","items","compact","drag-n-drop-events","explorerId"]))),128)):e.unref(s).view==="grid"?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(e.unref(H),N=>(e.openBlock(),e.createBlock(Be,{key:N,"row-index":N,"row-height":S.value,view:"grid","items-per-row":e.unref(P),items:e.unref(F)(e.unref(_),N),"show-thumbnails":e.unref(s).showThumbnails,"is-dragging-item":z,"is-selected":g,"drag-n-drop-events":M=>e.unref(o).events(M),explorerId:e.unref(C),onClick:X,onDblclick:oe,onContextmenu:ce,onDragstart:de,onDragend:ue},null,8,["row-index","row-height","items-per-row","items","show-thumbnails","drag-n-drop-events","explorerId"]))),128)):(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:2},e.renderList(e.unref(H),N=>(e.openBlock(),e.createBlock(Be,{key:N,"row-index":N,"row-height":S.value,view:"list",items:K(N)?[K(N)]:[],compact:e.unref(s).compactListView,"is-dragging-item":z,"is-selected":g,"drag-n-drop-events":M=>e.unref(o).events(M),explorerId:e.unref(C),onClick:X,onDblclick:oe,onContextmenu:ce,onDragstart:de,onDragend:ue},null,8,["row-index","row-height","items","compact","drag-n-drop-events","explorerId"]))),128))],36)],34),e.createVNode(Ti)]))}}),Ri=["href","download"],zi=["onClick"],Pi=e.defineComponent({__name:"ContextMenu",setup(n){const t=e.inject("ServiceContainer"),o=t.search,r=D.useStore(o.state),l=e.ref(null),d=e.ref([]),i=e.reactive({active:!1,items:[],positions:{left:"0px",top:"0px"}});t.emitter.on("vf-context-selected",s=>{d.value=s});const f=s=>s.link(t,d.value),a=s=>{t.emitter.emit("vf-contextmenu-hide"),s.action(t,d.value)};t.emitter.on("vf-contextmenu-show",({event:s,items:c,target:v=null})=>{if(i.items=t.contextMenuItems.filter(_=>_.show(t,{searchQuery:r.value.query,items:c,target:v})),r.value.query)if(v)t.emitter.emit("vf-context-selected",[v]);else return;else!v&&!r.value.query?t.emitter.emit("vf-context-selected",[]):c.length>1&&c.some(_=>_.path===v.path)?t.emitter.emit("vf-context-selected",c):t.emitter.emit("vf-context-selected",[v]);m(s)}),t.emitter.on("vf-contextmenu-hide",()=>{i.active=!1});const m=s=>{const c=t.root,v=t.root.getBoundingClientRect(),_=c.getBoundingClientRect();let b=s.clientX-v.left,V=s.clientY-v.top;i.active=!0,e.nextTick(()=>{const g=l.value?.getBoundingClientRect();let h=g?.height??0,w=g?.width??0;b=_.right-s.pageX+window.scrollX<w?b-w:b,V=_.bottom-s.pageY+window.scrollY<h?V-h:V,i.positions={left:String(b)+"px",top:String(V)+"px"}})};return(s,c)=>e.withDirectives((e.openBlock(),e.createElementBlock("ul",{ref_key:"contextmenu",ref:l,class:e.normalizeClass([{"vuefinder__context-menu--active":i.active,"vuefinder__context-menu--inactive":!i.active},"vuefinder__context-menu"]),style:e.normalizeStyle(i.positions)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.items,v=>(e.openBlock(),e.createElementBlock("li",{class:"vuefinder__context-menu__item",key:v.title},[v.link?(e.openBlock(),e.createElementBlock("a",{key:0,class:"vuefinder__context-menu__link",target:"_blank",href:f(v),download:f(v),onClick:c[0]||(c[0]=_=>e.unref(t).emitter.emit("vf-contextmenu-hide"))},[e.createElementVNode("span",null,e.toDisplayString(v.title(e.unref(t).i18n)),1)],8,Ri)):(e.openBlock(),e.createElementBlock("div",{key:1,class:"vuefinder__context-menu__action",onClick:_=>a(v)},[e.createElementVNode("span",null,e.toDisplayString(v.title(e.unref(t).i18n)),1)],8,zi))]))),128))],6)),[[e.vShow,i.active]])}}),Hi={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"2",class:"h-5 w-5 stroke-slate-500 cursor-pointer",viewBox:"0 0 24 24"};function qi(n,t){return e.openBlock(),e.createElementBlock("svg",Hi,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0"},null,-1)])])}const Ui={render:qi},Oi={class:"vuefinder__status-bar__wrapper"},ji={class:"vuefinder__status-bar__storage"},Ki=["title"],Gi={class:"vuefinder__status-bar__storage-icon"},Yi=["value"],Wi=["value"],Qi={class:"vuefinder__status-bar__info space-x-2"},Xi={key:0},Ji={key:1},Zi={key:0,class:"vuefinder__status-bar__size"},ec={class:"vuefinder__status-bar__actions"},tc=["title"],oc=e.defineComponent({__name:"Statusbar",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=t.search;D.useStore(l.state),D.useStore(l.hasQuery);const d=D.useStore(r.sortedFiles),i=D.useStore(r.path),f=D.useStore(r.selectedCount),a=D.useStore(r.storages),m=D.useStore(r.selectedItems),s=D.useStore(r.path),c=_=>{const b=_.target.value;t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",storage:b}})},v=e.computed(()=>!m.value||m.value.length===0?0:m.value.reduce((_,b)=>_+(b.file_size||0),0));return(_,b)=>(e.openBlock(),e.createElementBlock("div",Oi,[e.createElementVNode("div",ji,[e.createElementVNode("div",{class:"vuefinder__status-bar__storage-container",title:e.unref(o)("Storage")},[e.createElementVNode("div",Gi,[e.createVNode(e.unref(Te))]),e.createElementVNode("select",{name:"vuefinder-media-selector",value:e.unref(i)?.storage,onChange:c,class:"vuefinder__status-bar__storage-select",tabindex:"-1"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a),V=>(e.openBlock(),e.createElementBlock("option",{value:V,key:V},e.toDisplayString(V),9,Wi))),128))],40,Yi)],8,Ki),e.createElementVNode("div",Qi,[e.unref(f)===0?(e.openBlock(),e.createElementBlock("span",Xi,e.toDisplayString(e.unref(d).length)+" "+e.toDisplayString(e.unref(o)("items")),1)):(e.openBlock(),e.createElementBlock("span",Ji,[e.createTextVNode(e.toDisplayString(e.unref(f))+" "+e.toDisplayString(e.unref(o)("selected"))+" ",1),v.value?(e.openBlock(),e.createElementBlock("span",Zi,e.toDisplayString(e.unref(t).filesize(v.value)),1)):e.createCommentVNode("",!0)]))])]),e.createElementVNode("div",ec,[e.renderSlot(_.$slots,"actions",{path:e.unref(s).path,count:e.unref(f)||0,selected:e.unref(m)||[]}),e.createElementVNode("span",{class:"vuefinder__status-bar__about",title:e.unref(o)("About"),onClick:b[0]||(b[0]=V=>e.unref(t).modal.open(xe))},[e.createVNode(e.unref(Ui))],8,tc)])]))}}),nc={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 24 24"};function rc(n,t){return e.openBlock(),e.createElementBlock("svg",nc,[...t[0]||(t[0]=[e.createElementVNode("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2m3.6 5.2a1 1 0 0 0-1.4.2L12 10.333 9.8 7.4a1 1 0 1 0-1.6 1.2l2.55 3.4-2.55 3.4a1 1 0 1 0 1.6 1.2l2.2-2.933 2.2 2.933a1 1 0 0 0 1.6-1.2L13.25 12l2.55-3.4a1 1 0 0 0-.2-1.4"},null,-1)])])}const lc={render:rc};function ot(n,t){const o=n.findIndex(r=>r.path===t.path);o>-1?n[o]=t:n.push(t)}const ac={class:"vuefinder__folder-loader-indicator"},sc={key:1,class:"vuefinder__folder-loader-indicator--icon"},nt=e.defineComponent({__name:"FolderLoaderIndicator",props:e.mergeModels({storage:{},path:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const t=n,o=e.inject("ServiceContainer"),{t:r}=o.i18n,l=e.useModel(n,"modelValue"),d=e.ref(!1);e.watch(()=>l.value,()=>i()?.folders.length||f());function i(){return o.treeViewData.find(a=>a.path===t.path)}const f=()=>{d.value=!0,o.requester.send({url:"",method:"get",params:{q:"subfolders",storage:t.storage,path:t.path}}).then(a=>{ot(o.treeViewData,{path:t.path,type:"dir",...a})}).catch(a=>{}).finally(()=>{d.value=!1})};return(a,m)=>(e.openBlock(),e.createElementBlock("div",ac,[d.value?(e.openBlock(),e.createBlock(e.unref(Re),{key:0,class:"vuefinder__folder-loader-indicator--loading"})):(e.openBlock(),e.createElementBlock("div",sc,[l.value&&i()?.folders.length?(e.openBlock(),e.createBlock(e.unref(ye),{key:0,class:"vuefinder__folder-loader-indicator--minus"})):e.createCommentVNode("",!0),l.value?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(be),{key:1,class:"vuefinder__folder-loader-indicator--plus"}))]))]))}}),ic=["onClick"],cc=["title","onDblclick","onClick"],dc={class:"vuefinder__treesubfolderlist__item-icon"},uc={class:"vuefinder__treesubfolderlist__subfolder"},mc=e.defineComponent({__name:"TreeSubfolderList",props:{storage:{},path:{}},setup(n){const t=e.inject("ServiceContainer"),o=t.fs,r=_e(t,["bg-blue-200","dark:bg-slate-600"]),l=e.ref({}),d=D.useStore(o.path),i=n,f=e.ref(null);e.onMounted(()=>{i.path===i.storage+"://"&&f.value&&ge.OverlayScrollbars(f.value,{scrollbars:{theme:"vf-scrollbars-theme"}})});const a=e.computed(()=>t.treeViewData.find(m=>m.path===i.path)?.folders||[]);return(m,s)=>{const c=e.resolveComponent("TreeSubfolderList",!0);return e.openBlock(),e.createElementBlock("ul",{ref_key:"parentSubfolderList",ref:f,class:"vuefinder__treesubfolderlist__container"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,v=>(e.openBlock(),e.createElementBlock("li",{key:v.path,class:"vuefinder__treesubfolderlist__item"},[e.createElementVNode("div",e.mergeProps(e.toHandlers(e.unref(r).events({...v,type:"dir"}),!0),{class:"vuefinder__treesubfolderlist__item-content"}),[e.createElementVNode("div",{class:"vuefinder__treesubfolderlist__item-toggle",onClick:_=>l.value[v.path]=!l.value[v.path]},[e.createVNode(nt,{storage:n.storage,path:v.path,modelValue:l.value[v.path],"onUpdate:modelValue":_=>l.value[v.path]=_},null,8,["storage","path","modelValue","onUpdate:modelValue"])],8,ic),e.createElementVNode("div",{class:"vuefinder__treesubfolderlist__item-link",title:v.path,onDblclick:_=>l.value[v.path]=!l.value[v.path],onClick:_=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",storage:i.storage,path:v.path}})},[e.createElementVNode("div",dc,[e.unref(d)?.path===v.path?(e.openBlock(),e.createBlock(e.unref(Me),{key:0})):(e.openBlock(),e.createBlock(e.unref(ie),{key:1}))]),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__treesubfolderlist__item-text",{"vuefinder__treesubfolderlist__item-text--active":e.unref(d)?.path===v.path}])},e.toDisplayString(v.basename),3)],40,cc)],16),e.createElementVNode("div",uc,[e.withDirectives(e.createVNode(c,{storage:i.storage,path:v.path},null,8,["storage","path"]),[[e.vShow,l.value[v.path]]])])]))),128))],512)}}}),fc=e.defineComponent({__name:"TreeStorageItem",props:{storage:{}},setup(n){const t=e.inject("ServiceContainer"),o=t.fs,r=e.ref(!1),l=n,d=_e(t,["bg-blue-200","dark:bg-slate-600"]),i=D.useStore(o.path),f=e.computed(()=>l.storage===i.value?.storage),a={storage:l.storage,path:l.storage+"://",type:"dir",basename:l.storage,extension:"",file_size:null,last_modified:null,mime_type:null,visibility:"public"};function m(s){s===i.value?.storage?r.value=!r.value:(t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",storage:s}}))}return(s,c)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",{onClick:c[2]||(c[2]=v=>m(n.storage)),class:"vuefinder__treestorageitem__header"},[e.createElementVNode("div",e.mergeProps(e.toHandlers(e.unref(d).events(a),!0),{class:["vuefinder__treestorageitem__info",f.value?"vuefinder__treestorageitem__info--active":""]}),[e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__treestorageitem__icon",f.value?"vuefinder__treestorageitem__icon--active":""])},[e.createVNode(e.unref(Te))],2),e.createElementVNode("div",null,e.toDisplayString(n.storage),1)],16),e.createElementVNode("div",{class:"vuefinder__treestorageitem__loader",onClick:c[1]||(c[1]=e.withModifiers(v=>r.value=!r.value,["stop"]))},[e.createVNode(nt,{storage:n.storage,path:n.storage+"://",modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=v=>r.value=v)},null,8,["storage","path","modelValue"])])]),e.withDirectives(e.createVNode(mc,{storage:n.storage,path:n.storage+"://",class:"vuefinder__treestorageitem__subfolder"},null,8,["storage","path"]),[[e.vShow,r.value]])],64))}}),vc={class:"vuefinder__folder-indicator"},_c={class:"vuefinder__folder-indicator--icon"},pc=e.defineComponent({__name:"FolderIndicator",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(n){const t=e.useModel(n,"modelValue");return(o,r)=>(e.openBlock(),e.createElementBlock("div",vc,[e.createElementVNode("div",_c,[t.value?(e.openBlock(),e.createBlock(e.unref(ye),{key:0,class:"vuefinder__folder-indicator--minus"})):e.createCommentVNode("",!0),t.value?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(be),{key:1,class:"vuefinder__folder-indicator--plus"}))])]))}}),hc={class:"vuefinder__treeview__header"},gc={class:"vuefinder__treeview__pinned-label"},kc={class:"vuefinder__treeview__pin-text text-nowrap"},wc={key:0,class:"vuefinder__treeview__pinned-list"},bc=["onClick"],yc=["title"],Ec=["onClick"],Vc={key:0},Sc={class:"vuefinder__treeview__no-pinned"},Nc=e.defineComponent({__name:"TreeView",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,{getStore:r,setStore:l}=t.storage,d=t.fs,i=t.config,f=D.useStore(i.state),a=D.useStore(d.sortedFiles),m=D.useStore(d.storages),s=D.useStore(d.path),c=_e(t,["bg-blue-200","dark:bg-slate-600"]),v=e.ref(190),_=e.ref(r("pinned-folders-opened",!0));e.watch(_,h=>l("pinned-folders-opened",h));const b=h=>{i.set("pinnedFolders",i.get("pinnedFolders").filter(w=>w.path!==h.path))},V=h=>{const w=h.clientX,u=h.target.parentElement;if(!u)return;const y=u.getBoundingClientRect().width;u.classList.remove("transition-[width]"),u.classList.add("transition-none");const S=P=>{v.value=y+P.clientX-w,v.value<50&&(v.value=0,i.set("showTreeView",!1)),v.value>50&&i.set("showTreeView",!0)},x=()=>{const P=u.getBoundingClientRect();v.value=P.width,u.classList.add("transition-[width]"),u.classList.remove("transition-none"),window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",x)};window.addEventListener("mousemove",S),window.addEventListener("mouseup",x)},g=e.ref(null);return e.onMounted(()=>{g.value&&ge.OverlayScrollbars(g.value,{overflow:{x:"hidden"},scrollbars:{theme:"vf-scrollbars-theme"}})}),e.watch(a,h=>{const w=h.filter(u=>u.type==="dir");ot(t.treeViewData,{path:s.value?.path||"",folders:w.map(u=>({storage:u.storage,path:u.path,basename:u.basename,type:"dir"}))})}),(h,w)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",{onClick:w[0]||(w[0]=u=>e.unref(i).toggle("showTreeView")),class:e.normalizeClass(["vuefinder__treeview__overlay",e.unref(f).showTreeView?"vuefinder__treeview__backdrop":"hidden"])},null,2),e.createElementVNode("div",{style:e.normalizeStyle(e.unref(f).showTreeView?"min-width:100px;max-width:75%; width: "+v.value+"px":"width: 0"),class:"vuefinder__treeview__container"},[e.createElementVNode("div",{ref_key:"treeViewScrollElement",ref:g,class:"vuefinder__treeview__scroll"},[e.createElementVNode("div",hc,[e.createElementVNode("div",{onClick:w[2]||(w[2]=u=>_.value=!_.value),class:"vuefinder__treeview__pinned-toggle"},[e.createElementVNode("div",gc,[e.createVNode(e.unref(De),{class:"vuefinder__treeview__pin-icon"}),e.createElementVNode("div",kc,e.toDisplayString(e.unref(o)("Pinned Folders")),1)]),e.createVNode(pc,{modelValue:_.value,"onUpdate:modelValue":w[1]||(w[1]=u=>_.value=u)},null,8,["modelValue"])]),_.value?(e.openBlock(),e.createElementBlock("ul",wc,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(f).pinnedFolders,u=>(e.openBlock(),e.createElementBlock("li",{key:u.path,class:"vuefinder__treeview__pinned-item"},[e.createElementVNode("div",e.mergeProps(e.toHandlers(e.unref(c).events(u),!0),{class:"vuefinder__treeview__pinned-folder",onClick:y=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",storage:u.storage,path:u.path}})}),[e.unref(s)?.path!==u.path?(e.openBlock(),e.createBlock(e.unref(ie),{key:0,class:"vuefinder__treeview__folder-icon"})):e.createCommentVNode("",!0),e.unref(s)?.path===u.path?(e.openBlock(),e.createBlock(e.unref(Me),{key:1,class:"vuefinder__treeview__open-folder-icon"})):e.createCommentVNode("",!0),e.createElementVNode("div",{title:u.path,class:e.normalizeClass(["vuefinder__treeview__folder-name",{"vuefinder__treeview__folder-name--active":e.unref(s)?.path===u.path}])},e.toDisplayString(u.basename),11,yc)],16,bc),e.createElementVNode("div",{class:"vuefinder__treeview__remove-folder",onClick:y=>b(u)},[e.createVNode(e.unref(lc),{class:"vuefinder__treeview__remove-icon"})],8,Ec)]))),128)),e.unref(f).pinnedFolders.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("li",Vc,[e.createElementVNode("div",Sc,e.toDisplayString(e.unref(o)("No folders pinned")),1)]))])):e.createCommentVNode("",!0)]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(m),u=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__treeview__storage",key:u},[e.createVNode(fc,{storage:u},null,8,["storage"])]))),128))],512),e.createElementVNode("div",{onMousedown:V,class:"vuefinder__treeview__resize-handle"},null,32)],4)],64))}}),W={newfolder:"newfolder",selectAll:"selectAll",pinFolder:"pinFolder",unpinFolder:"unpinFolder",delete:"delete",refresh:"refresh",preview:"preview",open:"open",openDir:"openDir",download:"download",download_archive:"download_archive",archive:"archive",unarchive:"unarchive",rename:"rename",move:"move",copy:"copy",paste:"paste"};function Bc(n){return n.items.length>1&&n.items.some(t=>t.path===n.target?.path)?"many":n.target?"one":"none"}function G(n){const t=Object.assign({needsSearchQuery:!1},n);return(o,r)=>!(t.needsSearchQuery!==!!r.searchQuery||t.target!==void 0&&t.target!==Bc(r)||t.targetType!==void 0&&t.targetType!==r.target?.type||t.mimeType!==void 0&&t.mimeType!==r.target?.mime_type||t.feature!==void 0&&!o.features.includes(t.feature))}function fe(...n){return(t,o)=>n.some(r=>r(t,o))}function ve(...n){return(t,o)=>n.every(r=>r(t,o))}const rt=[{id:W.openDir,title:({t:n})=>n("Open containing folder"),action:(n,t)=>{const o=t[0];o&&(n.emitter.emit("vf-fetch",{params:{q:"index",storage:o.storage,path:o.dir}}),n.search.setQuery("",!0))},show:G({target:"one",needsSearchQuery:!0})},{id:W.refresh,title:({t:n})=>n("Refresh"),action:n=>{const t=n.fs;n.emitter.emit("vf-fetch",{params:{q:"index",storage:t.path.get().storage,path:t.path.get().path}})},show:fe(G({target:"none"}),G({target:"many"}))},{id:W.selectAll,title:({t:n})=>n("Select All"),action:n=>{n.fs.selectAll()},show:G({target:"none"})},{id:W.newfolder,title:({t:n})=>n("New Folder"),action:n=>n.modal.open(Ae),show:G({target:"none",feature:R.NEW_FOLDER})},{id:W.open,title:({t:n})=>n("Open"),action:(n,t)=>{n.emitter.emit("vf-search-exit"),t[0]&&n.emitter.emit("vf-fetch",{params:{q:"index",storage:t[0].storage,path:t[0].path}})},show:G({target:"one",targetType:"dir"})},{id:W.pinFolder,title:({t:n})=>n("Pin Folder"),action:(n,t)=>{const o=n.config,r=o.get("pinnedFolders"),l=r.concat(t.filter(d=>r.findIndex(i=>i.path===d.path)===-1));o.set("pinnedFolders",l)},show:ve(G({target:"one",targetType:"dir"}),(n,t)=>n.config.get("pinnedFolders").findIndex(l=>l.path===t.target?.path)===-1)},{id:W.unpinFolder,title:({t:n})=>n("Unpin Folder"),action:(n,t)=>{const o=n.config,r=o.get("pinnedFolders");o.set("pinnedFolders",r.filter(l=>!t.find(d=>d.path===l.path)))},show:ve(G({target:"one",targetType:"dir"}),(n,t)=>n.config.get("pinnedFolders").findIndex(l=>l.path===t.target?.path)!==-1)},{id:W.preview,title:({t:n})=>n("Preview"),action:(n,t)=>n.modal.open($e,{storage:t[0]?.storage,item:t[0]}),show:ve(G({target:"one",feature:R.PREVIEW}),(n,t)=>t.target?.type!=="dir")},{id:W.download,link:(n,t)=>n.requester.getDownloadUrl(t[0]?.storage,t[0]),title:({t:n})=>n("Download"),action:()=>{},show:ve(G({target:"one",feature:R.DOWNLOAD}),(n,t)=>t.target?.type!=="dir")},{id:W.rename,title:({t:n})=>n("Rename"),action:(n,t)=>n.modal.open(we,{items:t}),show:G({target:"one",feature:R.RENAME})},{id:W.move,title:({t:n})=>n("Move"),action:(n,t)=>{const o=n.fs,r={storage:o.path.get().storage||"",path:o.path.get().path||"",type:"dir"};n.modal.open(se,{items:{from:t,to:r}})},show:fe(G({target:"one",feature:R.MOVE}),G({target:"many",feature:R.MOVE}))},{id:W.copy,title:({t:n})=>n("Copy"),action:(n,t)=>{t.length>0&&n.fs.setClipboard("copy",new Set(t.map(o=>o.path)))},show:fe(G({target:"one",feature:R.COPY}),G({target:"many",feature:R.COPY}))},{id:W.paste,title:({t:n})=>n("Paste"),action:(n,t)=>{const o=n.fs.getClipboard();if(o?.items?.size>0){const l=n.fs.path.get();let d=l.path,i=l.storage;t.length===1&&t[0].type==="dir"&&(d=t[0].path,i=t[0].storage);const f={storage:i||"",path:d||"",type:"dir"};n.modal.open(o.type==="cut"?se:Fe,{items:{from:Array.from(o.items),to:f}})}},show:(n,t)=>n.fs.getClipboard()?.items?.size>0},{id:W.archive,title:({t:n})=>n("Archive"),action:(n,t)=>n.modal.open(Le,{items:t}),show:fe(G({target:"many",feature:R.ARCHIVE}),ve(G({target:"one",feature:R.ARCHIVE}),(n,t)=>t.target?.mime_type!=="application/zip"))},{id:W.unarchive,title:({t:n})=>n("Unarchive"),action:(n,t)=>n.modal.open(Ie,{items:t}),show:G({target:"one",feature:R.UNARCHIVE,mimeType:"application/zip"})},{id:W.delete,title:({t:n})=>n("Delete"),action:(n,t)=>{n.modal.open(ke,{items:t})},show:fe(G({feature:R.DELETE,target:"one"}),G({feature:R.DELETE,target:"many"}))}],Cc={class:"vuefinder vuefinder__main",ref:"root",tabindex:"0"},xc={class:"vuefinder__main__content"},lt=e.defineComponent({__name:"VueFinder",props:{id:{default:"vf"},request:{},persist:{type:Boolean,default:!1},path:{default:""},features:{type:[Boolean,Array],default:!0},debug:{type:Boolean,default:!1},theme:{default:"system"},locale:{default:void 0},maxHeight:{},maxFileSize:{default:"10mb"},fullScreen:{type:Boolean,default:!1},showTreeView:{type:Boolean,default:!1},pinnedFolders:{default:()=>[]},showThumbnails:{type:Boolean,default:!0},loadingIndicator:{default:"linear"},contextMenuItems:{default:()=>rt},onError:{},onSelect:{},icon:{}},emits:["select","path-update"],setup(n,{emit:t}){const o=t,r=n,l=Ct(r,e.inject("VueFinderOptions"));e.provide("ServiceContainer",l);const d=l.config,i=l.fs,f=D.useStore(d.state);ol(l);let a=null;l.emitter.on("vf-fetch-abort",()=>{a&&a.abort(),i.setLoading(!1)}),l.emitter.on("vf-fetch-modal",({params:s,body:c=null,onSuccess:v=null,onError:_=null})=>{let b=null;b=new AbortController;const V=b.signal;l.requester.send({url:"",method:s.m||"get",params:s,body:c,abortSignal:V}).then(g=>{v&&v(g)}).catch(g=>{console.error(g),_?_(g):g&&typeof g=="object"&&"message"in g&&l.emitter.emit("vf-toast-push",{label:g.message,type:"error"})})}),l.emitter.on("vf-fetch",({params:s,body:c=null,onSuccess:v=null,onError:_=null,noCloseModal:b=!1})=>{["index","search"].includes(s.q)&&(a&&a.abort(),i.setLoading(!0)),a=new AbortController;const V=a.signal;l.requester.send({url:"",method:s.m||"get",params:s,body:c,abortSignal:V}).then(g=>{i.setPath(g.dirname),d.get("persist")&&d.set("path",g.dirname),b||l.modal.close(),i.setFiles(g.files),i.clearSelection(),i.setSelectedCount(0),i.setStorages(g.storages),v&&v(g)}).catch(g=>{console.error(g),_?_(g):g&&typeof g=="object"&&"message"in g&&l.emitter.emit("vf-toast-push",{label:g.message,type:"error"})}).finally(()=>{["index","search"].includes(s.q)&&i.setLoading(!1)})});function m(s){let c={};s&&s.includes("://")&&(c={storage:s.split("://")[0],path:s}),l.emitter.emit("vf-fetch",{params:{q:"index",storage:i.path.get().storage,...c},onError:r.onError??(v=>{v&&typeof v=="object"&&"message"in v&&l.emitter.emit("vf-toast-push",{label:v.message,type:"error"})})})}return e.onMounted(()=>{e.watch(()=>r.path,c=>{m(c)});const s=d.get("persist")?d.get("path"):r.path;i.setPath(s),m(s),i.path.listen(c=>{o("path-update",c)}),i.selectedItems.listen(c=>{o("select",c)})}),(s,c)=>(e.openBlock(),e.createElementBlock("div",Cc,[e.createElementVNode("div",{class:e.normalizeClass(e.unref(l).theme.actualValue),style:{height:"100%",width:"100%"}},[e.createElementVNode("div",{class:e.normalizeClass([e.unref(f).fullScreen?"vuefinder__main__fixed":"vuefinder__main__relative","vuefinder__main__container"]),onMousedown:c[0]||(c[0]=v=>e.unref(l).emitter.emit("vf-contextmenu-hide")),onTouchstart:c[1]||(c[1]=v=>e.unref(l).emitter.emit("vf-contextmenu-hide"))},[e.createVNode(na),e.createVNode(cs),e.createVNode(Xs),e.createElementVNode("div",xc,[e.createVNode(Nc),e.createVNode(Li)]),e.createVNode(oc,null,{actions:e.withCtx(v=>[e.renderSlot(s.$slots,"status-bar",e.normalizeProps(e.guardReactiveProps(v)))]),_:3})],34),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.createVNode(e.Transition,{name:"fade"},{default:e.withCtx(()=>[e.unref(l).modal.visible?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(l).modal.type),{key:0})):e.createCommentVNode("",!0)]),_:1})])),e.createVNode(Pi)],2)],512))}}),at={install(n,t={}){t.i18n=t.i18n??{};let[o]=Object.keys(t.i18n);t.locale=t.locale??o??"en",n.provide("VueFinderOptions",t),n.component("VueFinder",lt)}};exports.ContextMenuIds=W;exports.VueFinder=lt;exports.VueFinderPlugin=at;exports.contextMenuItems=rt;exports.default=at;
