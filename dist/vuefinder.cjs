"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),T=require("@nanostores/vue"),ut=require("mitt"),mt=require("@nanostores/persistent"),O=require("nanostores"),ft=require("vue-advanced-cropper"),He=require("vanilla-lazyload"),Be=require("overlayscrollbars"),vt=require("@uppy/core"),_t=require("@uppy/xhr-upload"),pt=require("@viselect/vanilla"),Ee=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");class ht{config;constructor(t){this.config=Object.assign({baseUrl:"",headers:{},params:{},body:{},xsrfHeaderName:"X-CSRF-Token",fetchParams:{}},t)}customFetch=async(...t)=>{let[n,r]=t;this.config.fetchRequestInterceptor&&(r=this.config.fetchRequestInterceptor(r));let l=await fetch(n,r);return this.config.fetchResponseInterceptor&&(l=await this.config.fetchResponseInterceptor(l)),l};transformRequestParams(t){const n=this.config,r={};Ee!=null&&Ee!==""&&n.xsrfHeaderName&&(r[n.xsrfHeaderName]=Ee);const l=Object.assign({},n.headers,r,t.headers),d=Object.assign({},n.params,t.params),i=n.baseUrl+t.url,m=t.method;let a;if(m!=="get")if(t.body instanceof FormData){const s=t.body;n.body!=null&&Object.entries(this.config.body).forEach(([c,f])=>{s.append(c,String(f))}),a=s}else{const s=Object.assign({},t.body??{});n.body!=null&&Object.assign(s,this.config.body),a=s}const u={url:i,method:m,headers:l,params:d,body:a};if(n.transformRequest!=null){const s=n.transformRequest({url:i,method:m,headers:l,params:d,body:a??null});s.url!=null&&(u.url=s.url),s.method!=null&&(u.method=s.method),s.params!=null&&(u.params=s.params),s.headers!=null&&(u.headers=s.headers),s.body!=null&&(u.body=s.body)}return u}getDownloadUrl(t,n){if(n.url!=null)return n.url;const r=this.transformRequestParams({url:"",method:"get",params:{q:"download",storage:t,path:n.path}});return r.url+"?"+new URLSearchParams(r.params).toString()}getPreviewUrl(t,n){if(n.url!=null)return n.url;const r=this.transformRequestParams({url:"",method:"get",params:{q:"preview",storage:t,path:n.path}});return r.url+"?"+new URLSearchParams(r.params).toString()}async send(t){const n=this.transformRequestParams(t),r=t.responseType||"json",l={method:t.method,headers:n.headers,signal:t.abortSignal},d=n.url+"?"+new URLSearchParams(n.params);if(n.method!=="get"&&n.body!=null){let m;n.body instanceof FormData?m=t.body:(m=JSON.stringify(n.body),l.headers["Content-Type"]="application/json"),l.body=m}this.config.fetchParams&&Object.assign(l,this.config.fetchParams);const i=await this.customFetch(d,l);if(i.ok)return await i[r]();throw await i.json()}}function gt(o){const t={baseUrl:"",headers:{},params:{},body:{},xsrfHeaderName:"X-CSRF-Token",fetchParams:{}};return typeof o=="string"?Object.assign(t,{baseUrl:o}):Object.assign(t,o),new ht(t)}function kt(o){let t=localStorage.getItem(o+"_storage");const n=e.reactive(JSON.parse(t??"{}"));e.watch(n,r);function r(){Object.keys(n).length?localStorage.setItem(o+"_storage",JSON.stringify(n)):localStorage.removeItem(o+"_storage")}function l(a,u){n[a]=u}function d(a){delete n[a]}function i(){Object.keys(n).forEach(a=>d(a))}return{getStore:(a,u=null)=>a in n?n[a]:u,setStore:l,removeStore:d,clearStore:i}}async function wt(o,t){const n=t[o];return typeof n=="function"?(await n()).default:n}function bt(o,t,n,r){const{getStore:l,setStore:d}=o,i=e.ref({}),m=e.ref(l("locale",t)),a=(c,f=t)=>{wt(c,r).then(v=>{i.value=v,d("locale",c),m.value=c,d("translations",v),Object.values(r).length>1&&(n.emit("vf-toast-push",{label:"The language is set to "+c}),n.emit("vf-language-saved"))}).catch(v=>{f?(n.emit("vf-toast-push",{label:"The selected locale is not yet supported!",type:"error"}),a(f,null)):(console.error(v),n.emit("vf-toast-push",{label:"Locale cannot be loaded!",type:"error"}))})};e.watch(m,c=>{a(c)}),!l("locale")&&!Object.keys(r).length?a(t):i.value=l("translations");const u=(c,...f)=>f.length?u(c=c.replace("%s",String(f.shift())),...f):c;function s(c,...f){return i.value&&Object.prototype.hasOwnProperty.call(i.value,c)?u(i.value[c]||c,...f):u(c,...f)}return e.reactive({t:s,locale:m})}const H={EDIT:"edit",NEW_FILE:"newfile",NEW_FOLDER:"newfolder",PREVIEW:"preview",ARCHIVE:"archive",UNARCHIVE:"unarchive",SEARCH:"search",RENAME:"rename",UPLOAD:"upload",DELETE:"delete",FULL_SCREEN:"fullscreen",DOWNLOAD:"download",LANGUAGE:"language",MOVE:"move",COPY:"copy"},yt=Object.values(H),Et="4.0.0-dev";function qe(o,t,n,r,l){return t=Math,n=t.log,r=1024,l=n(o)/n(r)|0,(o/t.pow(r,l)).toFixed(0)+" "+(l?"KMGTPEZY"[--l]+"iB":"B")}function Ue(o,t,n,r,l){return t=Math,n=t.log,r=1e3,l=n(o)/n(r)|0,(o/t.pow(r,l)).toFixed(0)+" "+(l?"KMGTPEZY"[--l]+"B":"B")}function Vt(o){if(typeof o=="number")return o;const t={k:1,m:2,g:3,t:4},r=/(\d+(?:\.\d+)?)\s?(k|m|g|t)?b?/i.exec(o);if(!r)return 0;const l=parseFloat(r[1]||"0"),d=(r[2]||"").toLowerCase(),i=t[d]??0;return Math.round(l*Math.pow(1024,i))}const oe={SYSTEM:"system",LIGHT:"light",DARK:"dark"};function Nt(o,t){const n=e.ref(oe.SYSTEM),r=e.ref(oe.LIGHT);n.value=o.getStore("theme",t??oe.SYSTEM);const l=window.matchMedia("(prefers-color-scheme: dark)"),d=i=>{n.value===oe.DARK||n.value===oe.SYSTEM&&i.matches?r.value=oe.DARK:r.value=oe.LIGHT};return d(l),l.addEventListener("change",d),{value:n,actualValue:r,set(i){n.value=i,i!==oe.SYSTEM?o.setStore("theme",i):o.removeStore("theme"),d(l)}}}function St(){const o=e.shallowRef(null),t=e.ref(!1),n=e.ref();return{visible:t,type:o,data:n,open:(d,i=null)=>{document.querySelector("body").style.overflow="hidden",t.value=!0,o.value=d,n.value=i},close:()=>{document.querySelector("body").style.overflow="",t.value=!1,o.value=null}}}const Ve={view:"grid",fullScreen:!1,showTreeView:!1,showHiddenFiles:!0,compactListView:!0,metricUnits:!1,showThumbnails:!0,persist:!1,path:"",loadingIndicator:"circular",maxFileSize:null,pinnedFolders:[],customIcon:void 0},Bt=o=>{const t=`vuefinder_config_${o}`,n=mt.persistentAtom(t,Ve,{encode:JSON.stringify,decode:JSON.parse}),r=(u={})=>{const s=n.get(),c={...Ve,...u,...s};n.set(c)},l=u=>n.get()[u],d=()=>n.get(),i=(u,s)=>{const c=n.get();typeof u=="object"&&u!==null?n.set({...c,...u}):n.set({...c,[u]:s})};return{state:n,init:r,get:l,set:i,toggle:u=>{const s=n.get();i(u,!s[u])},all:d,reset:()=>{n.set({...Ve})}}};function Ct(o,t){if(typeof o=="string"&&typeof t=="string")return o.toLowerCase().localeCompare(t.toLowerCase());const n=Number(o)||0,r=Number(t)||0;return n===r?0:n<r?-1:1}const xt=()=>{const o=O.atom(""),t=O.atom([]),n=O.atom([]),r=O.atom({active:!1,column:"",order:""}),l=O.atom({kind:"all",showHidden:!1}),d=O.atom(new Set),i=O.atom({type:"copy",path:"",items:new Set}),m=O.atom(null),a=O.atom(0),u=O.atom(!1),s=O.atom([]),c=O.atom(-1),f=O.computed([o],h=>{const w=(h||"local://").trim(),N=w.indexOf("://"),A=N>=0?w.slice(0,N):"",me=(N>=0?w.slice(N+3):w).split("/").filter(Boolean);let le="";const ye=me.map(J=>(le=le?`${le}/${J}`:J,{basename:J,name:J,path:A?`${A}://${le}`:le,type:"dir"}));return{storage:A,breadcrumb:ye,path:w}}),v=O.computed([n,r,l],(h,w,N)=>{let A=h;N.kind==="files"?A=A.filter(J=>J.type==="file"):N.kind==="folders"&&(A=A.filter(J=>J.type==="dir")),N.showHidden||(A=A.filter(J=>!J.basename.startsWith(".")));const{active:ee,column:me,order:le}=w;if(!ee||!me)return A;const ye=le==="asc"?1:-1;return A.slice().sort((J,dt)=>Ct(J[me],dt[me])*ye)}),_=O.computed([n,d],(h,w)=>w.size===0?[]:h.filter(N=>w.has(N.path))),y=(h,w)=>{const N=o.get();if((w??!0)&&N!==h){const A=s.get(),ee=c.get();ee<A.length-1&&A.splice(ee+1),A.length===0&&N&&A.push(N),A.push(h),s.set([...A]),c.set(A.length-1)}o.set(h)},b=h=>{n.set(h??[])},k=h=>{t.set(h??[])},g=(h,w)=>{r.set({active:!0,column:h,order:w})},p=h=>{const w=r.get();w.active&&w.column===h?r.set({active:w.order==="asc",column:h,order:"desc"}):r.set({active:!0,column:h,order:"asc"})},x=()=>{r.set({active:!1,column:"",order:""})},S=(h,w)=>{l.set({kind:h,showHidden:w})},$=()=>{l.set({kind:"all",showHidden:!1})},V=h=>{const w=new Set(d.get());w.add(h),d.set(w),a.set(w.size)},M=h=>{const w=new Set(d.get());w.delete(h),d.set(w),a.set(w.size)},z=h=>d.get().has(h),U=h=>{const w=new Set(d.get());w.has(h)?w.delete(h):w.add(h),d.set(w),a.set(w.size)},L=()=>{const h=new Set(n.get().map(w=>w.path));d.set(h),a.set(h.size)},j=()=>{d.set(new Set),a.set(0)},E=h=>{const w=new Set(h??[]);d.set(w),a.set(w.size)},B=h=>{a.set(h)},C=h=>{u.set(!!h)},I=()=>u.get(),R=(h,w)=>{const N=n.get().filter(A=>w.has(A.path));i.set({type:h,path:f.get().path,items:new Set(N)})},q=h=>O.computed([i],w=>w.type==="cut"&&Array.from(w.items).some(N=>N.path===h)),F=h=>O.computed([i],w=>w.type==="copy"&&Array.from(w.items).some(N=>N.path===h)),D=h=>{const w=q(h);return T.useStore(w).value??!1},P=h=>{const w=F(h);return T.useStore(w).value??!1},K=()=>{i.set({type:"copy",path:"",items:new Set})},X=()=>i.get(),re=h=>{m.set(h)},ne=()=>m.get(),_e=()=>{m.set(null)},ce=()=>{const h=s.get(),w=c.get();if(w>0){const N=w-1,A=h[N];A&&(c.set(N),y(A,!1))}},be=()=>{const h=s.get(),w=c.get();if(w<h.length-1){const N=w+1,A=h[N];A&&(c.set(N),y(A,!1))}},de=O.computed([c],h=>h>0),ue=O.computed([s,c],(h,w)=>w<h.length-1);return{files:n,storages:t,currentPath:o,sort:r,filter:l,selectedKeys:d,selectedCount:a,loading:u,draggedItem:m,clipboardItems:i,path:f,sortedFiles:v,selectedItems:_,setPath:y,setFiles:b,setStorages:k,setSort:g,toggleSort:p,clearSort:x,setFilter:S,clearFilter:$,select:V,deselect:M,toggleSelect:U,selectAll:L,isSelected:z,clearSelection:j,setSelection:E,setSelectedCount:B,setLoading:C,isLoading:I,setClipboard:R,createIsCut:q,createIsCopied:F,isCut:D,isCopied:P,clearClipboard:K,getClipboard:X,setDraggedItem:re,getDraggedItem:ne,clearDraggedItem:_e,goBack:ce,goForward:be,canGoBack:de,canGoForward:ue,navigationHistory:s,historyIndex:c}},Re={query:"",searchMode:!1},$t=()=>{const o=O.atom(Re),t=O.computed(o,u=>u.query.length>0);return{state:o,hasQuery:t,setQuery:(u,s)=>{const c=u??"",f=s?c.length>0:o.get().searchMode;o.set({query:c,searchMode:f})},enterSearchMode:()=>{const u=o.get();o.set({...u,searchMode:!0})},exitSearchMode:()=>{o.set({query:"",searchMode:!1})},get:u=>o.get()[u],set:(u,s)=>{const c=o.get();typeof u=="object"&&u!==null?o.set({...c,...u}):o.set({...c,[u]:s})},all:()=>o.get(),reset:()=>{o.set({...Re})}}},Dt=(o,t)=>{const n=kt(o.id),r=ut(),l=Nt(n,o.theme),d=t.i18n,i=o.locale??t.locale,m=Bt(o.id),a=xt(),u=$t(),s=c=>Array.isArray(c)?c:yt;return e.reactive({version:Et,config:m,fs:a,search:u,root:e.useTemplateRef("root"),debug:o.debug,emitter:r,storage:n,i18n:bt(n,i,r,d),modal:St(),requester:gt(o.request),features:s(o.features),treeViewData:[],theme:l,filesize:m.get("metricUnits")?Ue:qe,contextMenuItems:o.contextMenuItems,customIcon:o.icon})},Tt={class:"vuefinder__modal-layout__container"},Mt={class:"vuefinder__modal-layout__content"},Ft={class:"vuefinder__modal-layout__footer"},Z=e.defineComponent({__name:"ModalLayout",setup(o){const t=e.ref(null),n=e.inject("ServiceContainer");return e.onMounted(()=>{const r=document.querySelector(".v-f-modal input");r&&r.focus(),e.nextTick(()=>{if(document.querySelector(".v-f-modal input")&&window.innerWidth<768&&t.value){const l=t.value.getBoundingClientRect().bottom+16;window.scrollTo({top:l,left:0,behavior:"smooth"})}})}),(r,l)=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder vuefinder__modal-layout","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",onKeyup:l[1]||(l[1]=e.withKeys(d=>e.unref(n).modal.close(),["esc"])),tabindex:"0"},[l[2]||(l[2]=e.createElementVNode("div",{class:"vuefinder__modal-layout__overlay"},null,-1)),e.createElementVNode("div",Tt,[e.createElementVNode("div",{class:"vuefinder__modal-layout__wrapper",onMousedown:l[0]||(l[0]=e.withModifiers(d=>e.unref(n).modal.close(),["self"]))},[e.createElementVNode("div",{ref_key:"modalBody",ref:t,class:"vuefinder__modal-layout__body"},[e.createElementVNode("div",Mt,[e.renderSlot(r.$slots,"default")]),e.createElementVNode("div",Ft,[e.renderSlot(r.$slots,"buttons")])],512)],32)])],32))}}),At={class:"vuefinder__modal-header"},Lt={class:"vuefinder__modal-header__icon-container"},It={class:"vuefinder__modal-header__title",id:"modal-title"},te=e.defineComponent({__name:"ModalHeader",props:{title:{},icon:{}},setup(o){return(t,n)=>(e.openBlock(),e.createElementBlock("div",At,[e.createElementVNode("div",Lt,[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.icon),{class:"vuefinder__modal-header__icon"}))]),e.createElementVNode("h3",It,e.toDisplayString(o.title),1)]))}}),Rt={props:{on:{type:String,required:!0}},setup(o,{emit:t,slots:n}){const r=e.inject("ServiceContainer"),l=e.ref(!1),{t:d}=r.i18n;let i=null;const m=()=>{clearTimeout(i),l.value=!0,i=setTimeout(()=>{l.value=!1},2e3)};return e.onMounted(()=>{r.emitter.on(o.on,m)}),e.onUnmounted(()=>{clearTimeout(i)}),{shown:l,t:d}}},zt=(o,t)=>{const n=o.__vccOpts||o;for(const[r,l]of t)n[r]=l;return n},Pt={key:1};function Ht(o,t,n,r,l,d){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__action-message",{"vuefinder__action-message--hidden":!r.shown}])},[o.$slots.default?e.renderSlot(o.$slots,"default",{key:0}):(e.openBlock(),e.createElementBlock("span",Pt,e.toDisplayString(r.t("Saved.")),1))],2)}const se=zt(Rt,[["render",Ht]]),qt={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",viewBox:"0 0 24 24"};function Ut(o,t){return e.openBlock(),e.createElementBlock("svg",qt,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87q.11.06.22.127c.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a8 8 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a7 7 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a7 7 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a7 7 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124q.108-.066.22-.128c.332-.183.582-.495.644-.869z"},null,-1),e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0"},null,-1)])])}const Ot={render:Ut},jt={class:"vuefinder__about-modal__content"},Kt={class:"vuefinder__about-modal__main"},Gt={class:"vuefinder__about-modal__tabs","aria-label":"Tabs"},Yt=["onClick","aria-current"],Wt={key:0,class:"vuefinder__about-modal__tab-content"},Qt={class:"vuefinder__about-modal__description"},Xt={href:"https://vuefinder.ozdemir.be",class:"vuefinder__about-modal__link",target:"_blank"},Jt={href:"https://github.com/n1crack/vuefinder",class:"vuefinder__about-modal__link",target:"_blank"},Zt={key:1,class:"vuefinder__about-modal__tab-content"},en={class:"vuefinder__about-modal__description"},tn={class:"vuefinder__about-modal__settings"},nn={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},on={class:"vuefinder__about-modal__setting-input"},rn=["checked"],ln={class:"vuefinder__about-modal__setting-label"},an={for:"metric_unit",class:"vuefinder__about-modal__label"},sn={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},cn={class:"vuefinder__about-modal__setting-input"},dn=["checked"],un={class:"vuefinder__about-modal__setting-label"},mn={for:"large_icons",class:"vuefinder__about-modal__label"},fn={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},vn={class:"vuefinder__about-modal__setting-input"},_n=["checked"],pn={class:"vuefinder__about-modal__setting-label"},hn={for:"persist_path",class:"vuefinder__about-modal__label"},gn={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},kn={class:"vuefinder__about-modal__setting-input"},wn=["checked"],bn={class:"vuefinder__about-modal__setting-label"},yn={for:"show_thumbnails",class:"vuefinder__about-modal__label"},En={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},Vn={class:"vuefinder__about-modal__setting-input"},Nn={for:"theme",class:"vuefinder__about-modal__label"},Sn={class:"vuefinder__about-modal__setting-label"},Bn=["label"],Cn=["value"],xn={key:0,class:"vuefinder__about-modal__setting"},$n={class:"vuefinder__about-modal__setting-input"},Dn={for:"language",class:"vuefinder__about-modal__label"},Tn={class:"vuefinder__about-modal__setting-label"},Mn=["label"],Fn=["value"],An={key:2,class:"vuefinder__about-modal__tab-content"},Ln={class:"vuefinder__about-modal__shortcuts"},In={class:"vuefinder__about-modal__shortcut"},Rn={class:"vuefinder__about-modal__shortcut"},zn={class:"vuefinder__about-modal__shortcut"},Pn={class:"vuefinder__about-modal__shortcut"},Hn={class:"vuefinder__about-modal__shortcut"},qn={class:"vuefinder__about-modal__shortcut"},Un={class:"vuefinder__about-modal__shortcut"},On={class:"vuefinder__about-modal__shortcut"},jn={class:"vuefinder__about-modal__shortcut"},Kn={class:"vuefinder__about-modal__shortcut"},Gn={key:3,class:"vuefinder__about-modal__tab-content"},Yn={class:"vuefinder__about-modal__description"},Ce=e.defineComponent({__name:"ModalAbout",setup(o){const t=e.inject("ServiceContainer"),n=t.config,{clearStore:r}=t.storage,{t:l}=t.i18n,d={ABOUT:"about",SETTINGS:"settings",SHORTCUTS:"shortcuts",RESET:"reset"},i=e.computed(()=>[{name:l("About"),key:d.ABOUT,current:!1},{name:l("Settings"),key:d.SETTINGS,current:!1},{name:l("Shortcuts"),key:d.SHORTCUTS,current:!1},{name:l("Reset"),key:d.RESET,current:!1}]),m=e.ref("about"),a=async()=>{n.reset(),r(),location.reload()},u=g=>{t.theme.set(g),t.emitter.emit("vf-theme-saved")},s=()=>{n.toggle("metricUnits"),t.filesize=n.get("metricUnits")?Ue:qe,t.emitter.emit("vf-metric-units-saved")},c=()=>{n.toggle("compactListView"),t.emitter.emit("vf-compact-view-saved")},f=()=>{n.toggle("showThumbnails"),t.emitter.emit("vf-show-thumbnails-saved")},v=()=>{n.toggle("persist"),t.emitter.emit("vf-persist-path-saved")},{i18n:_}=e.inject("VueFinderOptions"),b=Object.fromEntries(Object.entries({ar:"Arabic (العربيّة)",en:"English",fr:"French (Français)",de:"German (Deutsch)",fa:"Persian (فارسی)",he:"Hebrew (עִברִית)",hi:"Hindi (हिंदी)",pl:"Polish (Polski)",ru:"Russian (Pусский)",sv:"Swedish (Svenska)",tr:"Turkish (Türkçe)",nl:"Dutch (Nederlands)",zhCN:"Simplified Chinese (简体中文)",zhTW:"Traditional Chinese (繁體中文)"}).filter(([g])=>Object.keys(_).includes(g))),k=e.computed(()=>({system:l("System"),light:l("Light"),dark:l("Dark")}));return(g,p)=>(e.openBlock(),e.createBlock(Z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:p[3]||(p[3]=x=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(l)("Close")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",jt,[e.createVNode(te,{icon:e.unref(Ot),title:"Vuefinder "+e.unref(t).version},null,8,["icon","title"]),e.createElementVNode("div",Kt,[e.createElementVNode("div",null,[e.createElementVNode("div",null,[e.createElementVNode("nav",Gt,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,x=>(e.openBlock(),e.createElementBlock("button",{key:x.name,onClick:S=>m.value=x.key,class:e.normalizeClass([x.key===m.value?"vuefinder__about-modal__tab--active":"vuefinder__about-modal__tab--inactive","vuefinder__about-modal__tab"]),"aria-current":x.current?"page":void 0},e.toDisplayString(x.name),11,Yt))),128))])])]),m.value===d.ABOUT?(e.openBlock(),e.createElementBlock("div",Wt,[e.createElementVNode("div",Qt,e.toDisplayString(e.unref(l)("Vuefinder is a simple, lightweight, and fast file manager library for Vue.js applications")),1),e.createElementVNode("a",Xt,e.toDisplayString(e.unref(l)("Project home")),1),e.createElementVNode("a",Jt,e.toDisplayString(e.unref(l)("Follow on GitHub")),1)])):e.createCommentVNode("",!0),m.value===d.SETTINGS?(e.openBlock(),e.createElementBlock("div",Zt,[e.createElementVNode("div",en,e.toDisplayString(e.unref(l)("Customize your experience with the following settings")),1),e.createElementVNode("div",tn,[e.createElementVNode("fieldset",null,[e.createElementVNode("div",nn,[e.createElementVNode("div",on,[e.createElementVNode("input",{id:"metric_unit",name:"metric_unit",type:"checkbox",checked:e.unref(n).get("metricUnits"),onChange:s,class:"vuefinder__about-modal__checkbox"},null,40,rn)]),e.createElementVNode("div",ln,[e.createElementVNode("label",an,[e.createTextVNode(e.toDisplayString(e.unref(l)("Use Metric Units"))+" ",1),e.createVNode(se,{class:"ms-3",on:"vf-metric-units-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(l)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",sn,[e.createElementVNode("div",cn,[e.createElementVNode("input",{id:"large_icons",name:"large_icons",type:"checkbox",checked:e.unref(n).get("compactListView"),onChange:c,class:"vuefinder__about-modal__checkbox"},null,40,dn)]),e.createElementVNode("div",un,[e.createElementVNode("label",mn,[e.createTextVNode(e.toDisplayString(e.unref(l)("Compact list view"))+" ",1),e.createVNode(se,{class:"ms-3",on:"vf-compact-view-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(l)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",fn,[e.createElementVNode("div",vn,[e.createElementVNode("input",{id:"persist_path",name:"persist_path",type:"checkbox",checked:e.unref(n).get("persist"),onChange:v,class:"vuefinder__about-modal__checkbox"},null,40,_n)]),e.createElementVNode("div",pn,[e.createElementVNode("label",hn,[e.createTextVNode(e.toDisplayString(e.unref(l)("Persist path on reload"))+" ",1),e.createVNode(se,{class:"ms-3",on:"vf-persist-path-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(l)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",gn,[e.createElementVNode("div",kn,[e.createElementVNode("input",{id:"show_thumbnails",name:"show_thumbnails",type:"checkbox",checked:e.unref(n).get("showThumbnails"),onChange:f,class:"vuefinder__about-modal__checkbox"},null,40,wn)]),e.createElementVNode("div",bn,[e.createElementVNode("label",yn,[e.createTextVNode(e.toDisplayString(e.unref(l)("Show thumbnails"))+" ",1),e.createVNode(se,{class:"ms-3",on:"vf-show-thumbnails-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(l)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",En,[e.createElementVNode("div",Vn,[e.createElementVNode("label",Nn,e.toDisplayString(e.unref(l)("Theme")),1)]),e.createElementVNode("div",Sn,[e.withDirectives(e.createElementVNode("select",{id:"theme","onUpdate:modelValue":p[0]||(p[0]=x=>e.unref(t).theme.value=x),onChange:p[1]||(p[1]=x=>u(x.target?.value||"")),class:"vuefinder__about-modal__select"},[e.createElementVNode("optgroup",{label:e.unref(l)("Theme")},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(k.value,(x,S)=>(e.openBlock(),e.createElementBlock("option",{value:S},e.toDisplayString(x),9,Cn))),256))],8,Bn)],544),[[e.vModelSelect,e.unref(t).theme.value]]),e.createVNode(se,{class:"ms-3",on:"vf-theme-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(l)("Saved.")),1)]),_:1})])]),e.unref(t).features.includes(e.unref(H).LANGUAGE)&&Object.keys(e.unref(b)).length>1?(e.openBlock(),e.createElementBlock("div",xn,[e.createElementVNode("div",$n,[e.createElementVNode("label",Dn,e.toDisplayString(e.unref(l)("Language")),1)]),e.createElementVNode("div",Tn,[e.withDirectives(e.createElementVNode("select",{id:"language","onUpdate:modelValue":p[2]||(p[2]=x=>e.unref(t).i18n.locale=x),class:"vuefinder__about-modal__select"},[e.createElementVNode("optgroup",{label:e.unref(l)("Language")},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(b),(x,S)=>(e.openBlock(),e.createElementBlock("option",{value:S},e.toDisplayString(x),9,Fn))),256))],8,Mn)],512),[[e.vModelSelect,e.unref(t).i18n.locale]]),e.createVNode(se,{class:"ms-3",on:"vf-language-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(l)("Saved.")),1)]),_:1})])])):e.createCommentVNode("",!0)])])])):e.createCommentVNode("",!0),m.value===d.SHORTCUTS?(e.openBlock(),e.createElementBlock("div",An,[e.createElementVNode("div",Ln,[e.createElementVNode("div",In,[e.createElementVNode("div",null,e.toDisplayString(e.unref(l)("Rename")),1),p[4]||(p[4]=e.createElementVNode("kbd",null,"F2",-1))]),e.createElementVNode("div",Rn,[e.createElementVNode("div",null,e.toDisplayString(e.unref(l)("Refresh")),1),p[5]||(p[5]=e.createElementVNode("kbd",null,"F5",-1))]),e.createElementVNode("div",zn,[e.createTextVNode(e.toDisplayString(e.unref(l)("Delete"))+" ",1),p[6]||(p[6]=e.createElementVNode("kbd",null,"Del",-1))]),e.createElementVNode("div",Pn,[e.createTextVNode(e.toDisplayString(e.unref(l)("Escape"))+" ",1),p[7]||(p[7]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Esc")],-1))]),e.createElementVNode("div",Hn,[e.createTextVNode(e.toDisplayString(e.unref(l)("Select All"))+" ",1),p[8]||(p[8]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"A")],-1))]),e.createElementVNode("div",qn,[e.createTextVNode(e.toDisplayString(e.unref(l)("Search"))+" ",1),p[9]||(p[9]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"F")],-1))]),e.createElementVNode("div",Un,[e.createTextVNode(e.toDisplayString(e.unref(l)("Toggle Sidebar"))+" ",1),p[10]||(p[10]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"E")],-1))]),e.createElementVNode("div",On,[e.createTextVNode(e.toDisplayString(e.unref(l)("Open Settings"))+" ",1),p[11]||(p[11]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,",")],-1))]),e.createElementVNode("div",jn,[e.createTextVNode(e.toDisplayString(e.unref(l)("Toggle Full Screen"))+" ",1),p[12]||(p[12]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"Enter")],-1))]),e.createElementVNode("div",Kn,[e.createTextVNode(e.toDisplayString(e.unref(l)("Preview"))+" ",1),p[13]||(p[13]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Space")],-1))])])])):e.createCommentVNode("",!0),m.value===d.RESET?(e.openBlock(),e.createElementBlock("div",Gn,[e.createElementVNode("div",Yn,e.toDisplayString(e.unref(l)("Reset all settings to default")),1),e.createElementVNode("button",{onClick:a,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(l)("Reset Settings")),1)])):e.createCommentVNode("",!0)])])]),_:1}))}}),Wn={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function Qn(o,t){return e.openBlock(),e.createElementBlock("svg",Wn,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21q.512.078 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48 48 0 0 0-3.478-.397m-12 .562q.51-.089 1.022-.165m0 0a48 48 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a52 52 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a49 49 0 0 0-7.5 0"},null,-1)])])}const Oe={render:Qn},Xn={class:"vuefinder__delete-modal__content"},Jn={class:"vuefinder__delete-modal__form"},Zn={class:"vuefinder__delete-modal__description"},eo={class:"vuefinder__delete-modal__files vf-scrollbar"},to={class:"vuefinder__delete-modal__file"},no={key:0,class:"vuefinder__delete-modal__icon vuefinder__delete-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},oo={key:1,class:"vuefinder__delete-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},ro={class:"vuefinder__delete-modal__file-name"},lo={class:"vuefinder__delete-modal__warning"},ge=e.defineComponent({__name:"ModalDelete",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,r=t.fs,l=T.useStore(r.path),d=e.ref(t.modal.data.items),i=e.ref(""),m=()=>{d.value.length&&t.emitter.emit("vf-fetch",{params:{q:"delete",m:"post",storage:l.value.storage,path:l.value.path},body:{items:d.value.map(({path:a,type:u})=>({path:a,type:u}))},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("Files deleted.")})},onError:a=>{i.value=n(a.message)}})};return(a,u)=>(e.openBlock(),e.createBlock(Z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:m,class:"vf-btn vf-btn-danger"},e.toDisplayString(e.unref(n)("Yes, Delete!")),1),e.createElementVNode("button",{type:"button",onClick:u[1]||(u[1]=s=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1),e.createElementVNode("div",lo,e.toDisplayString(e.unref(n)("This action cannot be undone.")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(te,{icon:e.unref(Oe),title:e.unref(n)("Delete files")},null,8,["icon","title"]),e.createElementVNode("div",Xn,[e.createElementVNode("div",Jn,[e.createElementVNode("p",Zn,e.toDisplayString(e.unref(n)("Are you sure you want to delete these files?")),1),e.createElementVNode("div",eo,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,s=>(e.openBlock(),e.createElementBlock("p",to,[s.type==="dir"?(e.openBlock(),e.createElementBlock("svg",no,[...u[2]||(u[2]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",oo,[...u[3]||(u[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),e.createElementVNode("span",ro,e.toDisplayString(s.basename),1)]))),256))]),i.value.length?(e.openBlock(),e.createBlock(e.unref(i),{key:0,onHidden:u[0]||(u[0]=s=>i.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),ao={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function so(o,t){return e.openBlock(),e.createElementBlock("svg",ao,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"},null,-1)])])}const je={render:so},io={class:"vuefinder__rename-modal__content"},co={class:"vuefinder__rename-modal__item"},uo={class:"vuefinder__rename-modal__item-info"},mo={key:0,class:"vuefinder__rename-modal__icon vuefinder__rename-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},fo={key:1,class:"vuefinder__rename-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},vo={class:"vuefinder__rename-modal__item-name"},ke=e.defineComponent({__name:"ModalRename",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,r=t.fs,l=T.useStore(r.path),d=e.ref(t.modal.data.items[0]),i=e.ref(t.modal.data.items[0].basename),m=e.ref(""),a=()=>{i.value!=""&&t.emitter.emit("vf-fetch",{params:{q:"rename",m:"post",storage:l.value.storage,path:l.value.path},body:{item:d.value.path,name:i.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("%s is renamed.",i.value)})},onError:u=>{m.value=n(u.message)}})};return(u,s)=>(e.openBlock(),e.createBlock(Z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:a,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(n)("Rename")),1),e.createElementVNode("button",{type:"button",onClick:s[2]||(s[2]=c=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(te,{icon:e.unref(je),title:e.unref(n)("Rename")},null,8,["icon","title"]),e.createElementVNode("div",io,[e.createElementVNode("div",co,[e.createElementVNode("p",uo,[d.value.type==="dir"?(e.openBlock(),e.createElementBlock("svg",mo,[...s[3]||(s[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",fo,[...s[4]||(s[4]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),e.createElementVNode("span",vo,e.toDisplayString(d.value.basename),1)]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":s[0]||(s[0]=c=>i.value=c),onKeyup:e.withKeys(a,["enter"]),class:"vuefinder__rename-modal__input",placeholder:"Name",type:"text"},null,544),[[e.vModelText,i.value]]),m.value.length?(e.openBlock(),e.createBlock(e.unref(m),{key:0,onHidden:s[1]||(s[1]=c=>m.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(m.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),_o=["title"],Ke=e.defineComponent({__name:"Message",props:{error:{type:Boolean}},emits:["hidden"],setup(o,{emit:t}){const n=t,r=e.inject("ServiceContainer"),{t:l}=r.i18n,d=e.ref(!1),i=e.ref(null),m=e.ref(i.value?.innerHTML);e.watch(m,()=>d.value=!1);const a=()=>{n("hidden"),d.value=!0};return(u,s)=>(e.openBlock(),e.createElementBlock("div",null,[d.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"strMessage",ref:i,class:e.normalizeClass(["vuefinder__message",o.error?"vuefinder__message--error":"vuefinder__message--success"])},[e.renderSlot(u.$slots,"default"),e.createElementVNode("div",{class:"vuefinder__message__close",onClick:a,title:e.unref(l)("Close")},[...s[0]||(s[0]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"vuefinder__message__icon"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,_o)],2))]))}}),po={class:"vuefinder__text-preview"},ho={class:"vuefinder__text-preview__header"},go=["title"],ko={class:"vuefinder__text-preview__actions"},wo={key:0,class:"vuefinder__text-preview__content"},bo={key:1},yo=e.defineComponent({__name:"Text",emits:["success"],setup(o,{emit:t}){const n=t,r=e.ref(""),l=e.ref(""),d=e.ref(null),i=e.ref(!1),m=e.ref(""),a=e.ref(!1),u=e.inject("ServiceContainer"),{t:s}=u.i18n;e.onMounted(()=>{u.requester.send({url:"",method:"get",params:{q:"preview",storage:u.modal.data.storage,path:u.modal.data.item.path},responseType:"text"}).then(v=>{r.value=v,n("success")})});const c=()=>{i.value=!i.value,l.value=r.value},f=()=>{m.value="",a.value=!1,u.requester.send({url:"",method:"post",params:{q:"save",storage:u.modal.data.storage,path:u.modal.data.item.path},body:{content:l.value},responseType:"text"}).then(v=>{m.value=s("Updated."),r.value=v,n("success"),i.value=!i.value}).catch(v=>{m.value=s(v.message),a.value=!0})};return(v,_)=>(e.openBlock(),e.createElementBlock("div",po,[e.createElementVNode("div",ho,[e.createElementVNode("div",{class:"vuefinder__text-preview__title",id:"modal-title",title:e.unref(u).modal.data.item.path},e.toDisplayString(e.unref(u).modal.data.item.basename),9,go),e.createElementVNode("div",ko,[i.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:f,class:"vuefinder__text-preview__save-button"},e.toDisplayString(e.unref(s)("Save")),1)):e.createCommentVNode("",!0),e.unref(u).features.includes(e.unref(H).EDIT)?(e.openBlock(),e.createElementBlock("button",{key:1,class:"vuefinder__text-preview__edit-button",onClick:_[0]||(_[0]=y=>c())},e.toDisplayString(i.value?e.unref(s)("Cancel"):e.unref(s)("Edit")),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("div",null,[i.value?(e.openBlock(),e.createElementBlock("div",bo,[e.withDirectives(e.createElementVNode("textarea",{ref_key:"editInput",ref:d,"onUpdate:modelValue":_[1]||(_[1]=y=>l.value=y),class:"vuefinder__text-preview__textarea",name:"text",cols:"30",rows:"10"},null,512),[[e.vModelText,l.value]])])):(e.openBlock(),e.createElementBlock("pre",wo,e.toDisplayString(r.value),1)),m.value.length?(e.openBlock(),e.createBlock(Ke,{key:2,onHidden:_[2]||(_[2]=y=>m.value=""),error:a.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(m.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)])]))}}),Eo={class:"vuefinder__image-preview"},Vo={class:"vuefinder__image-preview__header"},No=["title"],So={class:"vuefinder__image-preview__actions"},Bo={class:"vuefinder__image-preview__image-container h-[50vh] w-full"},Co=["src"],xo=e.defineComponent({name:"ImagePreview",__name:"Image",emits:["success"],setup(o,{emit:t}){const n=t,r=e.inject("ServiceContainer"),{t:l}=r.i18n,d=e.ref(!1),i=e.ref(""),m=e.ref(!1),a=e.ref(r.requester.getPreviewUrl(r.modal.data.storage,r.modal.data.item)),u=e.ref(a.value),s=e.useTemplateRef("cropperRef"),c=async()=>{d.value=!d.value},f=async()=>{const _=s.value?.getResult({size:{width:795,height:341},fillColor:"#ffffff"})?.canvas;_&&_.toBlob(y=>{if(!y)return;i.value="",m.value=!1;const b=new FormData;b.set("file",y),r.requester.send({url:"",method:"post",params:{q:"upload",storage:r.modal.data.storage,path:r.modal.data.item.path},body:b}).then(()=>{i.value=l("Updated."),fetch(a.value,{cache:"reload",mode:"no-cors"});const k=r.root.querySelector('[data-src="'+a.value+'"]');k&&He.resetStatus(k),r.emitter.emit("vf-refresh-thumbnails"),c(),n("success")}).catch(k=>{const g=k?.message??"Error";i.value=l(g),m.value=!0})})};return e.onMounted(()=>{n("success")}),(v,_)=>(e.openBlock(),e.createElementBlock("div",Eo,[e.createElementVNode("div",Vo,[e.createElementVNode("h3",{class:"vuefinder__image-preview__title",id:"modal-title",title:e.unref(r).modal.data.item.path},e.toDisplayString(e.unref(r).modal.data.item.basename),9,No),e.createElementVNode("div",So,[d.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:f,class:"vuefinder__image-preview__crop-button"},e.toDisplayString(e.unref(l)("Crop")),1)):e.createCommentVNode("",!0),e.unref(r).features.includes(e.unref(H).EDIT)?(e.openBlock(),e.createElementBlock("button",{key:1,class:"vuefinder__image-preview__edit-button",onClick:_[0]||(_[0]=y=>c())},e.toDisplayString(d.value?e.unref(l)("Cancel"):e.unref(l)("Edit")),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("div",Bo,[d.value?(e.openBlock(),e.createBlock(e.unref(ft.Cropper),{key:1,ref_key:"cropperRef",ref:s,class:"w-full h-full",crossorigin:"anonymous",src:u.value,"stencil-props":{aspectRatio:795/341},"auto-zoom":!0,priority:"image",transitions:!0},null,8,["src"])):(e.openBlock(),e.createElementBlock("img",{key:0,style:{width:"100%",height:"100%"},src:e.unref(r).requester.getPreviewUrl(e.unref(r).modal.data.storage,e.unref(r).modal.data.item),class:"vuefinder__image-preview__image w-full h-full"},null,8,Co))]),i.value.length?(e.openBlock(),e.createBlock(e.unref(i),{key:0,onHidden:_[1]||(_[1]=y=>i.value=""),error:m.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)]))}}),$o={class:"vuefinder__default-preview"},Do={class:"vuefinder__default-preview__header"},To=["title"],Mo=e.defineComponent({__name:"Default",emits:["success"],setup(o,{emit:t}){const n=e.inject("ServiceContainer"),r=t;return e.onMounted(()=>{r("success")}),(l,d)=>(e.openBlock(),e.createElementBlock("div",$o,[e.createElementVNode("div",Do,[e.createElementVNode("h3",{class:"vuefinder__default-preview__title",id:"modal-title",title:e.unref(n).modal.data.item.path},e.toDisplayString(e.unref(n).modal.data.item.basename),9,To)]),d[0]||(d[0]=e.createElementVNode("div",null,null,-1))]))}}),Fo={class:"vuefinder__video-preview"},Ao=["title"],Lo={class:"vuefinder__video-preview__video",preload:"metadata",controls:""},Io=["src"],Ro=e.defineComponent({__name:"Video",emits:["success"],setup(o,{emit:t}){const n=e.inject("ServiceContainer"),r=t,l=()=>n.requester.getPreviewUrl(n.modal.data.storage,n.modal.data.item);return e.onMounted(()=>{r("success")}),(d,i)=>(e.openBlock(),e.createElementBlock("div",Fo,[e.createElementVNode("h3",{class:"vuefinder__video-preview__title",id:"modal-title",title:e.unref(n).modal.data.item.path},e.toDisplayString(e.unref(n).modal.data.item.basename),9,Ao),e.createElementVNode("div",null,[e.createElementVNode("video",Lo,[e.createElementVNode("source",{src:l(),type:"video/mp4"},null,8,Io),i[0]||(i[0]=e.createTextVNode(" Your browser does not support the video tag. ",-1))])])]))}}),zo={class:"vuefinder__audio-preview"},Po=["title"],Ho={class:"vuefinder__audio-preview__audio",controls:""},qo=["src"],Uo=e.defineComponent({__name:"Audio",emits:["success"],setup(o,{emit:t}){const n=t,r=e.inject("ServiceContainer"),l=()=>r.requester.getPreviewUrl(r.modal.data.storage,r.modal.data.item);return e.onMounted(()=>{n("success")}),(d,i)=>(e.openBlock(),e.createElementBlock("div",zo,[e.createElementVNode("h3",{class:"vuefinder__audio-preview__title",id:"modal-title",title:e.unref(r).modal.data.item.path},e.toDisplayString(e.unref(r).modal.data.item.basename),9,Po),e.createElementVNode("div",null,[e.createElementVNode("audio",Ho,[e.createElementVNode("source",{src:l(),type:"audio/mpeg"},null,8,qo),i[0]||(i[0]=e.createTextVNode(" Your browser does not support the audio element. ",-1))])])]))}}),Oo={class:"vuefinder__pdf-preview"},jo=["title"],Ko=["data"],Go=["src"],Yo=e.defineComponent({__name:"Pdf",emits:["success"],setup(o,{emit:t}){const n=e.inject("ServiceContainer"),r=t,l=()=>n.requester.getPreviewUrl(n.modal.data.storage,n.modal.data.item);return e.onMounted(()=>{r("success")}),(d,i)=>(e.openBlock(),e.createElementBlock("div",Oo,[e.createElementVNode("h3",{class:"vuefinder__pdf-preview__title",id:"modal-title",title:e.unref(n).modal.data.item.path},e.toDisplayString(e.unref(n).modal.data.item.basename),9,jo),e.createElementVNode("div",null,[e.createElementVNode("object",{class:"vuefinder__pdf-preview__object",data:l(),type:"application/pdf",width:"100%",height:"100%"},[e.createElementVNode("iframe",{class:"vuefinder__pdf-preview__iframe",src:l(),width:"100%",height:"100%"}," Your browser does not support PDFs ",8,Go)],8,Ko)])]))}});function Wo(o,t=null){return new Date(o*1e3).toLocaleString(t??navigator.language??"en-US")}const Qo={class:"vuefinder__preview-modal__content"},Xo={key:0},Jo={class:"vuefinder__preview-modal__loading"},Zo={key:0,class:"vuefinder__preview-modal__loading-indicator"},er={class:"vuefinder__preview-modal__details"},tr={class:"font-bold"},nr={class:"font-bold pl-2"},or={key:0,class:"vuefinder__preview-modal__note"},rr=["download","href"],xe=e.defineComponent({__name:"ModalPreview",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,r=e.ref(!1),l=i=>(t.modal.data.item.mime_type??"").startsWith(i),d=t.features.includes(H.PREVIEW);return d||(r.value=!0),(i,m)=>(e.openBlock(),e.createBlock(Z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:m[6]||(m[6]=a=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Close")),1),e.unref(t).features.includes(e.unref(H).DOWNLOAD)?(e.openBlock(),e.createElementBlock("a",{key:0,target:"_blank",class:"vf-btn vf-btn-primary",download:e.unref(t).requester.getDownloadUrl(e.unref(t).modal.data.storage,e.unref(t).modal.data.item),href:e.unref(t).requester.getDownloadUrl(e.unref(t).modal.data.storage,e.unref(t).modal.data.item)},e.toDisplayString(e.unref(n)("Download")),9,rr)):e.createCommentVNode("",!0)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createElementVNode("div",Qo,[e.unref(d)?(e.openBlock(),e.createElementBlock("div",Xo,[l("text")?(e.openBlock(),e.createBlock(yo,{key:0,onSuccess:m[0]||(m[0]=a=>r.value=!0)})):l("image")?(e.openBlock(),e.createBlock(xo,{key:1,onSuccess:m[1]||(m[1]=a=>r.value=!0)})):l("video")?(e.openBlock(),e.createBlock(Ro,{key:2,onSuccess:m[2]||(m[2]=a=>r.value=!0)})):l("audio")?(e.openBlock(),e.createBlock(Uo,{key:3,onSuccess:m[3]||(m[3]=a=>r.value=!0)})):l("application/pdf")?(e.openBlock(),e.createBlock(Yo,{key:4,onSuccess:m[4]||(m[4]=a=>r.value=!0)})):(e.openBlock(),e.createBlock(Mo,{key:5,onSuccess:m[5]||(m[5]=a=>r.value=!0)}))])):e.createCommentVNode("",!0),e.createElementVNode("div",Jo,[r.value===!1?(e.openBlock(),e.createElementBlock("div",Zo,[m[7]||(m[7]=e.createElementVNode("svg",{class:"vuefinder__preview-modal__spinner",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e.createElementVNode("circle",{class:"vuefinder__preview-modal__spinner-circle",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e.createElementVNode("path",{class:"vuefinder__preview-modal__spinner-path",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e.createElementVNode("span",null,e.toDisplayString(e.unref(n)("Loading")),1)])):e.createCommentVNode("",!0)])])]),e.createElementVNode("div",er,[e.createElementVNode("div",null,[e.createElementVNode("span",tr,e.toDisplayString(e.unref(n)("File Size"))+": ",1),e.createTextVNode(e.toDisplayString(e.unref(t).filesize(e.unref(t).modal.data.item.file_size)),1)]),e.createElementVNode("div",null,[e.createElementVNode("span",nr,e.toDisplayString(e.unref(n)("Last Modified"))+": ",1),e.createTextVNode(" "+e.toDisplayString(e.unref(Wo)(e.unref(t).modal.data.item.last_modified)),1)])]),e.unref(t).features.includes(e.unref(H).DOWNLOAD)?(e.openBlock(),e.createElementBlock("div",or,[e.createElementVNode("span",null,e.toDisplayString(e.unref(n)(`Download doesn't work? You can try right-click "Download" button, select "Save link as...".`)),1)])):e.createCommentVNode("",!0)]),_:1}))}}),lr={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",viewBox:"0 0 24 24"};function ar(o,t){return e.openBlock(),e.createElementBlock("svg",lr,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3"},null,-1)])])}const sr={render:ar},ir={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",viewBox:"0 0 24 24"};function cr(o,t){return e.openBlock(),e.createElementBlock("svg",ir,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-6l-2-2H5a2 2 0 0 0-2 2"},null,-1)])])}const ae={render:cr},dr={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"text-neutral-500 fill-sky-500 stroke-gray-100/50 dark:stroke-slate-700/50 dark:fill-slate-500",viewBox:"0 0 24 24"};function ur(o,t){return e.openBlock(),e.createElementBlock("svg",dr,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 9.776q.168-.026.344-.026h15.812q.176 0 .344.026m-16.5 0a2.25 2.25 0 0 0-1.883 2.542l.857 6a2.25 2.25 0 0 0 2.227 1.932H19.05a2.25 2.25 0 0 0 2.227-1.932l.857-6a2.25 2.25 0 0 0-1.883-2.542m-16.5 0V6A2.25 2.25 0 0 1 6 3.75h3.879a1.5 1.5 0 0 1 1.06.44l2.122 2.12a1.5 1.5 0 0 0 1.06.44H18A2.25 2.25 0 0 1 20.25 9v.776"},null,-1)])])}const $e={render:ur},mr={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"h-5 w-5",viewBox:"0 0 24 24"};function fr(o,t){return e.openBlock(),e.createElementBlock("svg",mr,[...t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"m15 4.5-4 4L7 10l-1.5 1.5 7 7L14 17l1.5-4 4-4M9 15l-4.5 4.5M14.5 4 20 9.5"},null,-1)])])}const De={render:fr},vr={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 24 24"};function _r(o,t){return e.openBlock(),e.createElementBlock("svg",vr,[...t[0]||(t[0]=[e.createElementVNode("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2m3.6 5.2a1 1 0 0 0-1.4.2L12 10.333 9.8 7.4a1 1 0 1 0-1.6 1.2l2.55 3.4-2.55 3.4a1 1 0 1 0 1.6 1.2l2.2-2.933 2.2 2.933a1 1 0 0 0 1.6-1.2L13.25 12l2.55-3.4a1 1 0 0 0-.2-1.4"},null,-1)])])}const Ge={render:_r},pr={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"h-5 w-5",viewBox:"0 0 24 24"};function hr(o,t){return e.openBlock(),e.createElementBlock("svg",pr,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"},null,-1)])])}const he={render:hr},gr={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"};function kr(o,t){return e.openBlock(),e.createElementBlock("svg",gr,[...t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M15 12H9M12 9v6"},null,-1)])])}const Ye={render:kr},wr={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"};function br(o,t){return e.openBlock(),e.createElementBlock("svg",wr,[...t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M9 12h6"},null,-1)])])}const We={render:br},yr={xmlns:"http://www.w3.org/2000/svg",fill:"none",class:"animate-spin p-0.5 h-5 w-5 text-white ml-auto",viewBox:"0 0 24 24"};function Er(o,t){return e.openBlock(),e.createElementBlock("svg",yr,[...t[0]||(t[0]=[e.createElementVNode("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",class:"opacity-25 stroke-blue-900 dark:stroke-blue-100"},null,-1),e.createElementVNode("path",{fill:"currentColor",d:"M4 12a8 8 0 0 1 8-8V0C5.373 0 0 5.373 0 12zm2 5.291A7.96 7.96 0 0 1 4 12H0c0 3.042 1.135 5.824 3 7.938z",class:"opacity-75"},null,-1)])])}const Te={render:Er};function Me(o,t){const n=o.findIndex(r=>r.path===t.path);n>-1?o[n]=t:o.push(t)}const Vr={class:"vuefinder__folder-loader-indicator"},Nr={key:1,class:"vuefinder__folder-loader-indicator--icon"},Qe=e.defineComponent({__name:"FolderLoaderIndicator",props:e.mergeModels({storage:{},path:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(o){const t=o,n=e.inject("ServiceContainer"),{t:r}=n.i18n,l=e.useModel(o,"modelValue"),d=e.ref(!1);e.watch(()=>l.value,()=>i()?.folders.length||m());function i(){return n.treeViewData.find(a=>a.path===t.path)}const m=()=>{d.value=!0,n.requester.send({url:"",method:"get",params:{q:"subfolders",storage:t.storage,path:t.path}}).then(a=>{Me(n.treeViewData,{path:t.path,type:"dir",...a})}).catch(a=>{}).finally(()=>{d.value=!1})};return(a,u)=>(e.openBlock(),e.createElementBlock("div",Vr,[d.value?(e.openBlock(),e.createBlock(e.unref(Te),{key:0,class:"vuefinder__folder-loader-indicator--loading"})):(e.openBlock(),e.createElementBlock("div",Nr,[l.value&&i()?.folders.length?(e.openBlock(),e.createBlock(e.unref(We),{key:0,class:"vuefinder__folder-loader-indicator--minus"})):e.createCommentVNode("",!0),l.value?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(Ye),{key:1,class:"vuefinder__folder-loader-indicator--plus"}))]))]))}});function Sr(o){const[t,n]=Br(o);if(!n||n==="/")return t+"://";const r=n.replace(/\/+$/,""),l=r.lastIndexOf("/");return l===0?t+"://":t+":/"+r.slice(0,l)}function Br(o){const t=o.indexOf(":/");return t===-1?[void 0,o]:[o.slice(0,t),o.slice(t+2)||"/"]}function ie(o,t=[]){const n="vfDragEnterCounter",r=o.fs,l=T.useStore(r.selectedItems);function d(s,c){s.preventDefault(),r.getDraggedItem()===c.path||!c||c.type!=="dir"||l.value.some(v=>v.path===c.path||Sr(v.path)===c.path)?s.dataTransfer&&(s.dataTransfer.dropEffect="none",s.dataTransfer.effectAllowed="none"):(s.dataTransfer&&(s.dataTransfer.dropEffect="copy",s.dataTransfer.effectAllowed="all"),s.currentTarget.classList.add(...t))}function i(s){s.preventDefault();const c=s.currentTarget,f=Number(c.dataset[n]||0);c.dataset[n]=String(f+1)}function m(s){s.preventDefault();const c=s.currentTarget,v=Number(c.dataset[n]||0)-1;v<=0?(delete c.dataset[n],c.classList.remove(...t)):c.dataset[n]=String(v)}function a(s,c){if(!c)return;s.preventDefault();const f=s.currentTarget;delete f.dataset[n],f.classList.remove(...t);const v=s.dataTransfer?.getData("items")||"[]",y=JSON.parse(v).map(b=>r.sortedFiles.get().find(k=>k.path===b));r.clearDraggedItem(),o.modal.open(we,{items:{from:y,to:c}})}function u(s){return{dragover:c=>d(c,s),dragenter:i,dragleave:m,drop:c=>a(c,s)}}return{events:u}}const Cr=["onClick"],xr=["title","onDblclick","onClick"],$r={class:"vuefinder__treesubfolderlist__item-icon"},Dr={class:"vuefinder__treesubfolderlist__subfolder"},Tr=e.defineComponent({__name:"TreeSubfolderList",props:{storage:{},path:{},compact:{type:Boolean}},emits:["select"],setup(o,{emit:t}){const n=e.inject("ServiceContainer"),r=n.fs,l=ie(n,["bg-blue-200","dark:bg-slate-600"]),d=e.ref({}),i=T.useStore(r.path),m=o,a=t,u=e.ref(null);e.onMounted(()=>{m.path===m.storage+"://"&&u.value&&Be.OverlayScrollbars(u.value,{scrollbars:{theme:"vf-theme-dark dark:vf-theme-light"}})});const s=e.computed(()=>n.treeViewData.find(c=>c.path===m.path)?.folders||[]);return(c,f)=>{const v=e.resolveComponent("TreeSubfolderList",!0);return e.openBlock(),e.createElementBlock("ul",{ref_key:"parentSubfolderList",ref:u,class:"vuefinder__treesubfolderlist__container"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,_=>(e.openBlock(),e.createElementBlock("li",{key:_.path,class:"vuefinder__treesubfolderlist__item"},[e.createElementVNode("div",e.mergeProps(e.toHandlers(e.unref(l).events({..._,type:"dir"}),!0),{class:"vuefinder__treesubfolderlist__item-content"}),[e.createElementVNode("div",{class:"vuefinder__treesubfolderlist__item-toggle",onClick:y=>d.value[_.path]=!d.value[_.path]},[e.createVNode(Qe,{storage:o.storage,path:_.path,modelValue:d.value[_.path],"onUpdate:modelValue":y=>d.value[_.path]=y},null,8,["storage","path","modelValue","onUpdate:modelValue"])],8,Cr),e.createElementVNode("div",{class:"vuefinder__treesubfolderlist__item-link",title:_.path,onDblclick:y=>d.value[_.path]=!d.value[_.path],onClick:y=>m.compact?a("select",{..._,type:"dir"}):e.unref(n).emitter.emit("vf-fetch",{params:{q:"index",storage:m.storage,path:_.path}})},[e.createElementVNode("div",$r,[e.unref(i)?.path===_.path?(e.openBlock(),e.createBlock(e.unref($e),{key:0})):(e.openBlock(),e.createBlock(e.unref(ae),{key:1}))]),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__treesubfolderlist__item-text",{"vuefinder__treesubfolderlist__item-text--active":e.unref(i)?.path===_.path}])},e.toDisplayString(_.basename),3)],40,xr)],16),e.createElementVNode("div",Dr,[e.withDirectives(e.createVNode(v,{storage:m.storage,path:_.path,compact:m.compact,onSelect:f[0]||(f[0]=y=>a("select",y))},null,8,["storage","path","compact"]),[[e.vShow,d.value[_.path]]])])]))),128))],512)}}}),Xe=e.defineComponent({__name:"TreeStorageItem",props:{storage:{},compact:{type:Boolean}},emits:["select"],setup(o,{emit:t}){const n=e.inject("ServiceContainer"),r=n.fs,l=e.ref(!1),d=o,i=t,m=ie(n,["bg-blue-200","dark:bg-slate-600"]),a=T.useStore(r.path),u=e.computed(()=>d.storage===a.value?.storage),s={storage:d.storage,path:d.storage+"://",type:"dir",basename:d.storage,extension:"",file_size:null,last_modified:null,mime_type:null,visibility:"public"};function c(f){d.compact?i("select",s):f===a.value?.storage?l.value=!l.value:(n.emitter.emit("vf-search-exit"),n.emitter.emit("vf-fetch",{params:{q:"index",storage:f}}))}return(f,v)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",{onClick:v[2]||(v[2]=_=>c(o.storage)),class:"vuefinder__treestorageitem__header"},[e.createElementVNode("div",e.mergeProps(e.toHandlers(e.unref(m).events(s),!0),{class:["vuefinder__treestorageitem__info",u.value?"vuefinder__treestorageitem__info--active":""]}),[e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__treestorageitem__icon",u.value?"vuefinder__treestorageitem__icon--active":""])},[e.createVNode(e.unref(he))],2),e.createElementVNode("div",null,e.toDisplayString(o.storage),1)],16),e.createElementVNode("div",{class:"vuefinder__treestorageitem__loader",onClick:v[1]||(v[1]=e.withModifiers(_=>l.value=!l.value,["stop"]))},[e.createVNode(Qe,{storage:o.storage,path:o.storage+"://",modelValue:l.value,"onUpdate:modelValue":v[0]||(v[0]=_=>l.value=_)},null,8,["storage","path","modelValue"])])]),e.withDirectives(e.createVNode(Tr,{storage:o.storage,path:o.storage+"://",class:"vuefinder__treestorageitem__subfolder",compact:d.compact,onSelect:v[3]||(v[3]=_=>i("select",_))},null,8,["storage","path","compact"]),[[e.vShow,l.value]])],64))}}),Mr={class:"vuefinder__folder-indicator"},Fr={class:"vuefinder__folder-indicator--icon"},Je=e.defineComponent({__name:"FolderIndicator",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(o){const t=e.useModel(o,"modelValue");return(n,r)=>(e.openBlock(),e.createElementBlock("div",Mr,[e.createElementVNode("div",Fr,[t.value?(e.openBlock(),e.createBlock(e.unref(We),{key:0,class:"vuefinder__folder-indicator--minus"})):e.createCommentVNode("",!0),t.value?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(Ye),{key:1,class:"vuefinder__folder-indicator--plus"}))])]))}}),Ar={key:0,class:"vuefinder__treeview__header"},Lr={class:"vuefinder__treeview__pinned-label"},Ir={class:"vuefinder__treeview__pin-text text-nowrap"},Rr={key:0,class:"vuefinder__treeview__pinned-list"},zr=["onClick"],Pr=["title"],Hr=["onClick"],qr={key:0},Ur={class:"vuefinder__treeview__no-pinned"},Or=["onClick"],jr={class:"vuefinder__treeview__storage-icon"},Kr={class:"vuefinder__treeview__storage-name"},Gr={key:1,class:"vuefinder__treeview__compact"},Yr={class:"vuefinder__treeview__compact-header"},Wr={class:"vuefinder__treeview__compact-title"},Qr={class:"vuefinder__treeview__compact-content"},Xr={key:0,class:"vuefinder__treeview__compact-section"},Jr={class:"vuefinder__treeview__compact-section-title"},Zr={class:"vuefinder__treeview__compact-list"},el=["onClick"],tl={class:"vuefinder__treeview__compact-text"},nl={class:"vuefinder__treeview__compact-section-title"},ol={class:"vuefinder__treeview__compact-list"},rl=["onClick"],ll={class:"vuefinder__treeview__compact-text"},al=["onClick"],sl={class:"vuefinder__treeview__compact-text"},il=e.defineComponent({__name:"TreeViewSelector",props:{modelValue:{},showPinnedFolders:{type:Boolean},compact:{type:Boolean}},emits:["update:modelValue"],setup(o,{emit:t}){const n=e.inject("ServiceContainer"),{t:r}=n.i18n,{getStore:l,setStore:d}=n.storage,i=n.fs,m=n.config,a=t,u=T.useStore(m.state),s=T.useStore(i.sortedFiles),c=T.useStore(i.path),f=ie(n,["bg-blue-200","dark:bg-slate-600"]),v=e.ref(190),_=e.ref(l("pinned-folders-opened",!0));e.watch(_,S=>d("pinned-folders-opened",S));const y=S=>{m.set("pinnedFolders",m.get("pinnedFolders").filter($=>$.path!==S.path))},b=e.ref(null);e.watch(s,S=>{const $=S.filter(V=>V.type==="dir");Me(n.treeViewData,{path:c.value?.path||"",folders:$.map(V=>({storage:V.storage,path:V.path,basename:V.basename,type:"dir"}))})});const k=e.computed(()=>{const S={};return i.storages.get().forEach($=>{S[$]=x($+"://")}),S}),g=S=>{a("update:modelValue",S)},p=S=>{const $={storage:S,path:S+"://",type:"dir",basename:S,extension:"",file_size:null,last_modified:null,mime_type:null,visibility:"public"};a("update:modelValue",$)},x=(S,$=0)=>{const V=[],M=n.treeViewData.find(z=>z.path===S);return M&&M.folders.length>0?M.folders.forEach(z=>{const U={...z,type:"dir",extension:"",file_size:null,last_modified:null,mime_type:null,visibility:"public",depth:$};V.push(U);const L=x(z.path,$+1);V.push(...L)}):$===0&&console.log("No tree data available for",S,"attempting to fetch..."),V};return(S,$)=>o.compact?(e.openBlock(),e.createElementBlock("div",Gr,[e.createElementVNode("div",Yr,[e.createElementVNode("div",Wr,e.toDisplayString(e.unref(r)("Select Target Folder")),1)]),e.createElementVNode("div",Qr,[o.showPinnedFolders&&e.unref(u).pinnedFolders.length?(e.openBlock(),e.createElementBlock("div",Xr,[e.createElementVNode("div",Jr,e.toDisplayString(e.unref(r)("Pinned Folders")),1),e.createElementVNode("div",Zr,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(u).pinnedFolders,V=>(e.openBlock(),e.createElementBlock("div",{key:V.path,class:e.normalizeClass(["vuefinder__treeview__compact-item",{"vuefinder__treeview__compact-item--selected":o.modelValue?.path===V.path}]),onClick:M=>g(V)},[e.createVNode(e.unref(ae),{class:"vuefinder__treeview__compact-icon"}),e.createElementVNode("span",tl,e.toDisplayString(V.basename),1)],10,el))),128))])])):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(i).storages.get(),V=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__treeview__compact-section",key:V},[e.createElementVNode("div",nl,e.toDisplayString(V),1),e.createElementVNode("div",ol,[e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__treeview__compact-item",{"vuefinder__treeview__compact-item--selected":o.modelValue?.path===V+"://"}]),onClick:M=>p(V)},[e.createVNode(e.unref(he),{class:"vuefinder__treeview__compact-icon"}),e.createElementVNode("span",ll,e.toDisplayString(V)+" ("+e.toDisplayString(e.unref(r)("Root"))+")",1)],10,rl),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(k.value[V],M=>(e.openBlock(),e.createElementBlock("div",{key:M.path,class:e.normalizeClass(["vuefinder__treeview__compact-item",{"vuefinder__treeview__compact-item--selected":o.modelValue?.path===M.path}]),onClick:z=>g(M),style:e.normalizeStyle({marginLeft:M.depth*16+"px"})},[e.createVNode(e.unref(ae),{class:"vuefinder__treeview__compact-icon"}),e.createElementVNode("span",sl,e.toDisplayString(M.basename),1)],14,al))),128))])]))),128))])])):(e.openBlock(),e.createElementBlock("div",{key:0,style:e.normalizeStyle("min-width:100px;max-width:75%; width: "+v.value+"px"),class:"vuefinder__treeview__container"},[e.createElementVNode("div",{ref_key:"treeViewScrollElement",ref:b,class:"vuefinder__treeview__scroll"},[o.showPinnedFolders?(e.openBlock(),e.createElementBlock("div",Ar,[e.createElementVNode("div",{onClick:$[1]||($[1]=V=>_.value=!_.value),class:"vuefinder__treeview__pinned-toggle"},[e.createElementVNode("div",Lr,[e.createVNode(e.unref(De),{class:"vuefinder__treeview__pin-icon"}),e.createElementVNode("div",Ir,e.toDisplayString(e.unref(r)("Pinned Folders")),1)]),e.createVNode(Je,{modelValue:_.value,"onUpdate:modelValue":$[0]||($[0]=V=>_.value=V)},null,8,["modelValue"])]),_.value?(e.openBlock(),e.createElementBlock("ul",Rr,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(u).pinnedFolders,V=>(e.openBlock(),e.createElementBlock("li",{key:V.path,class:"vuefinder__treeview__pinned-item"},[e.createElementVNode("div",e.mergeProps(e.toHandlers(e.unref(f).events(V),!0),{class:["vuefinder__treeview__pinned-folder",{"vuefinder__treeview__pinned-folder--selected":o.modelValue?.path===V.path}],onClick:M=>g(V)}),[e.unref(c)?.path!==V.path?(e.openBlock(),e.createBlock(e.unref(ae),{key:0,class:"vuefinder__treeview__folder-icon"})):e.createCommentVNode("",!0),e.unref(c)?.path===V.path?(e.openBlock(),e.createBlock(e.unref($e),{key:1,class:"vuefinder__treeview__open-folder-icon"})):e.createCommentVNode("",!0),e.createElementVNode("div",{title:V.path,class:e.normalizeClass(["vuefinder__treeview__folder-name",{"vuefinder__treeview__folder-name--active":e.unref(c)?.path===V.path}])},e.toDisplayString(V.basename),11,Pr)],16,zr),e.createElementVNode("div",{class:"vuefinder__treeview__remove-folder",onClick:M=>y(V)},[e.createVNode(e.unref(Ge),{class:"vuefinder__treeview__remove-icon"})],8,Hr)]))),128)),e.unref(u).pinnedFolders.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("li",qr,[e.createElementVNode("div",Ur,e.toDisplayString(e.unref(r)("No folders pinned")),1)]))])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(i).storages.get(),V=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__treeview__storage",key:V},[e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__treeview__storage-item",{"vuefinder__treeview__storage-item--selected":o.modelValue?.path===V+"://"}]),onClick:M=>p(V)},[e.createElementVNode("div",jr,[e.createVNode(e.unref(he))]),e.createElementVNode("div",Kr,e.toDisplayString(V),1)],10,Or),e.createVNode(Xe,{storage:V,compact:!0,onSelect:g},null,8,["storage"])]))),128))],512)],4))}}),cl={class:"vuefinder__move-modal__content"},dl={class:"vuefinder__move-modal__description"},ul={class:"vuefinder__move-modal__files vf-scrollbar"},ml={key:0,class:"vuefinder__move-modal__icon vuefinder__move-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},fl={key:1,class:"vuefinder__move-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},vl={class:"vuefinder__move-modal__file-name"},_l={class:"vuefinder__move-modal__target-title"},pl={class:"vuefinder__move-modal__target-input-container"},hl=["placeholder"],gl={key:0,class:"vuefinder__move-modal__tree-selector"},kl={class:"vuefinder__move-modal__options"},wl={class:"vuefinder__move-modal__checkbox-label"},bl={class:"vuefinder__move-modal__checkbox-text"},yl={class:"vuefinder__move-modal__selected-items"},Ze=e.defineComponent({__name:"ModalTransfer",props:{q:{},title:{},body:{},successBtn:{},successText:{}},setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,r=t.fs,l=T.useStore(r.path),d=o,i=e.ref(t.modal.data.items.from),m=e.ref(t.modal.data.items.to),a=e.ref(""),u=e.ref(!1),s=e.ref(!1),c=v=>{v&&(m.value=v,s.value=!1)},f=()=>{if(i.value.length){const v=u.value?"copy":d.q||"move";t.emitter.emit("vf-fetch",{params:{q:v,m:"post",storage:l.value.storage,path:l.value.path},body:{items:i.value.map(({path:_,type:y})=>({path:_,type:y})),item:m.value.path},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:d.successText})},onError:_=>{a.value=n(_.message)}})}};return(v,_)=>(e.openBlock(),e.createBlock(Z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:f,class:"vf-btn vf-btn-primary"},e.toDisplayString(d.successBtn),1),e.createElementVNode("button",{type:"button",onClick:_[6]||(_[6]=y=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1),e.createElementVNode("div",yl,e.toDisplayString(e.unref(n)("%s item(s) selected.",i.value.length)),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(te,{icon:e.unref(sr),title:d.title},null,8,["icon","title"]),e.createElementVNode("div",cl,[e.createElementVNode("p",dl,e.toDisplayString(d.body),1),e.createElementVNode("div",ul,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,y=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__move-modal__file",key:y.path},[e.createElementVNode("div",null,[y.type==="dir"?(e.openBlock(),e.createElementBlock("svg",ml,[..._[7]||(_[7]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",fl,[..._[8]||(_[8]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])]))]),e.createElementVNode("div",vl,e.toDisplayString(y.path),1)]))),128))]),e.createElementVNode("h4",_l,e.toDisplayString(e.unref(n)("Target Directory")),1),e.createElementVNode("div",pl,[e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":_[0]||(_[0]=y=>m.value.path=y),class:"vuefinder__move-modal__target-input",placeholder:e.unref(n)("Select target folder"),readonly:"",onClick:_[1]||(_[1]=y=>s.value=!s.value)},null,8,hl),[[e.vModelText,m.value.path]]),e.createElementVNode("button",{type:"button",onClick:_[2]||(_[2]=y=>s.value=!s.value),class:"vuefinder__move-modal__target-button"},e.toDisplayString(e.unref(n)("Browse")),1)]),s.value?(e.openBlock(),e.createElementBlock("div",gl,[e.createVNode(il,{modelValue:m.value,"onUpdate:modelValue":[_[3]||(_[3]=y=>m.value=y),c],compact:!0,"show-pinned-folders":!0},null,8,["modelValue"])])):e.createCommentVNode("",!0),e.createElementVNode("div",kl,[e.createElementVNode("label",wl,[e.withDirectives(e.createElementVNode("input",{type:"checkbox","onUpdate:modelValue":_[4]||(_[4]=y=>u.value=y),class:"vuefinder__move-modal__checkbox"},null,512),[[e.vModelCheckbox,u.value]]),e.createElementVNode("span",bl,e.toDisplayString(e.unref(n)("Create a copy instead of moving")),1)])]),a.value.length?(e.openBlock(),e.createBlock(e.unref(a),{key:1,onHidden:_[5]||(_[5]=y=>a.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value),1)]),_:1})):e.createCommentVNode("",!0)])])]),_:1}))}}),we=e.defineComponent({__name:"ModalMove",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n;return(r,l)=>(e.openBlock(),e.createBlock(Ze,{q:"move",title:e.unref(n)("Move files"),body:e.unref(n)("Are you sure you want to move these files"),"success-btn":e.unref(n)("Yes, Move!"),"success-text":e.unref(n)("Files moved.")},null,8,["title","body","success-btn","success-text"]))}}),Fe=e.defineComponent({__name:"ModalCopy",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n;return(r,l)=>(e.openBlock(),e.createBlock(Ze,{q:"copy",title:e.unref(n)("Copy files"),body:e.unref(n)("Are you sure you want to copy these files"),"success-btn":e.unref(n)("Yes, Copy!"),"success-text":e.unref(n)("Files copied.")},null,8,["title","body","success-btn","success-text"]))}}),Q={ESCAPE:"Escape",F2:"F2",F5:"F5",DELETE:"Delete",ENTER:"Enter",BACKSLASH:"Backslash",KEY_A:"KeyA",KEY_E:"KeyE",KEY_F:"KeyF",SPACE:"Space",KEY_C:"KeyC",KEY_X:"KeyX",KEY_V:"KeyV"};function El(o){const t=o.search,n=o.fs,r=o.config,l=T.useStore(t.state),d=T.useStore(n.selectedItems),i=m=>{if(m.code===Q.ESCAPE&&(o.modal.close(),o.root.focus()),!o.modal.visible&&!l.value?.searchMode){if(m.code===Q.F2&&o.features.includes(H.RENAME)&&d.value.length===1&&o.modal.open(ke,{items:d.value}),m.code===Q.F5&&o.emitter.emit("vf-fetch",{params:{q:"index",storage:n.path.get().storage,path:n.path.get().path}}),m.code===Q.DELETE&&d.value.length===0&&o.modal.open(ge,{items:d.value}),m.ctrlKey&&m.code===Q.BACKSLASH&&o.modal.open(Ce),m.ctrlKey&&m.code===Q.KEY_F&&o.features.includes(H.SEARCH)&&(t.enterSearchMode(),m.preventDefault()),m.ctrlKey&&m.code===Q.KEY_E&&(r.toggle("showTreeView"),m.preventDefault()),m.ctrlKey&&m.code===Q.ENTER&&(r.toggle("fullScreen"),o.root.focus()),m.ctrlKey&&m.code===Q.KEY_A&&(n.selectAll(),m.preventDefault()),m.code===Q.SPACE&&d.value.length===1&&d.value[0]?.type!=="dir"&&o.modal.open(xe,{storage:n.path.get().storage,item:d.value[0]}),m.metaKey&&m.code===Q.KEY_C){if(d.value.length===0){o.emitter.emit("vf-toast-push",{type:"error",label:o.i18n.t("No items selected")});return}n.setClipboard("copy",new Set(d.value.map(a=>a.path))),o.emitter.emit("vf-toast-push",{label:d.value.length===1?o.i18n.t("Item copied to clipboard"):o.i18n.t("%s items copied to clipboard",d.value.length)}),m.preventDefault()}if(m.metaKey&&m.code===Q.KEY_X){if(d.value.length===0){o.emitter.emit("vf-toast-push",{type:"error",label:o.i18n.t("No items selected")});return}n.setClipboard("cut",new Set(d.value.map(a=>a.path))),o.emitter.emit("vf-toast-push",{label:d.value.length===1?o.i18n.t("Item cut to clipboard"):o.i18n.t("%s items cut to clipboard",d.value.length)}),m.preventDefault()}if(m.metaKey&&m.code===Q.KEY_V){if(n.getClipboard().items.size===0){o.emitter.emit("vf-toast-push",{type:"error",label:o.i18n.t("No items in clipboard")});return}if(n.getClipboard().path===n.path.get().path){o.emitter.emit("vf-toast-push",{type:"error",label:o.i18n.t("Cannot paste items to the same directory")});return}if(n.getClipboard().type==="cut"){o.modal.open(we,{items:{from:Array.from(n.getClipboard().items),to:n.path.get()}}),n.clearClipboard();return}if(n.getClipboard().type==="copy"){o.modal.open(Fe,{items:{from:Array.from(n.getClipboard().items),to:n.path.get()}});return}m.preventDefault()}}};e.onMounted(()=>{o.root.addEventListener("keydown",i)}),e.onBeforeUnmount(()=>{o.root.removeEventListener("keydown",i)})}const Vl={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function Nl(o,t){return e.openBlock(),e.createElementBlock("svg",Vl,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M12 10.5v6m3-3H9m4.06-7.19-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44z"},null,-1)])])}const et={render:Nl},Sl={class:"vuefinder__new-folder-modal__content"},Bl={class:"vuefinder__new-folder-modal__form"},Cl={class:"vuefinder__new-folder-modal__description"},xl=["placeholder"],Ae=e.defineComponent({__name:"ModalNewFolder",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,r=t.fs,l=T.useStore(r.path),d=e.ref(""),i=e.ref(""),m=()=>{d.value!==""&&t.emitter.emit("vf-fetch",{params:{q:"newfolder",m:"post",storage:l.value.storage,path:l.value.path},body:{name:d.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("%s is created.",d.value)})},onError:a=>{i.value=n(a.message)}})};return(a,u)=>(e.openBlock(),e.createBlock(Z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:m,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(n)("Create")),1),e.createElementVNode("button",{type:"button",onClick:u[2]||(u[2]=s=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(te,{icon:e.unref(et),title:e.unref(n)("New Folder")},null,8,["icon","title"]),e.createElementVNode("div",Sl,[e.createElementVNode("div",Bl,[e.createElementVNode("p",Cl,e.toDisplayString(e.unref(n)("Create a new folder")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":u[0]||(u[0]=s=>d.value=s),onKeyup:e.withKeys(m,["enter"]),class:"vuefinder__new-folder-modal__input",placeholder:e.unref(n)("Folder Name"),type:"text"},null,40,xl),[[e.vModelText,d.value]]),i.value.length?(e.openBlock(),e.createBlock(e.unref(i),{key:0,onHidden:u[1]||(u[1]=s=>i.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),$l={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function Dl(o,t){return e.openBlock(),e.createElementBlock("svg",$l,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9"},null,-1)])])}const tt={render:Dl},Tl={class:"vuefinder__new-file-modal__content"},Ml={class:"vuefinder__new-file-modal__form"},Fl={class:"vuefinder__new-file-modal__description"},Al=["placeholder"],nt=e.defineComponent({__name:"ModalNewFile",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,r=t.fs,l=T.useStore(r.path),d=e.ref(""),i=e.ref(""),m=()=>{d.value!==""&&t.emitter.emit("vf-fetch",{params:{q:"newfile",m:"post",storage:l.value.storage,path:l.value.path},body:{name:d.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("%s is created.",d.value)})},onError:a=>{i.value=n(a.message)}})};return(a,u)=>(e.openBlock(),e.createBlock(Z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:m,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(n)("Create")),1),e.createElementVNode("button",{type:"button",onClick:u[2]||(u[2]=s=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(te,{icon:e.unref(tt),title:e.unref(n)("New File")},null,8,["icon","title"]),e.createElementVNode("div",Tl,[e.createElementVNode("div",Ml,[e.createElementVNode("p",Fl,e.toDisplayString(e.unref(n)("Create a new file")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":u[0]||(u[0]=s=>d.value=s),onKeyup:e.withKeys(m,["enter"]),class:"vuefinder__new-file-modal__input",placeholder:e.unref(n)("File Name"),type:"text"},null,40,Al),[[e.vModelText,d.value]]),i.value.length?(e.openBlock(),e.createBlock(e.unref(i),{key:0,onHidden:u[1]||(u[1]=s=>i.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),Y={PENDING:0,CANCELED:1,UPLOADING:2,ERROR:3,DONE:10};function Ll(){const o=e.inject("ServiceContainer"),{t}=o.i18n,n=o.fs,r=T.useStore(n.path),l=o.config,d=e.ref({QUEUE_ENTRY_STATUS:Y}),i=e.ref(null),m=e.ref(null),a=e.ref(null),u=e.ref(null),s=e.ref(null),c=e.ref(null),f=e.ref([]),v=e.ref(""),_=e.ref(!1),y=e.ref(!1);let b;const k=L=>f.value.findIndex(j=>j.id===L),g=(L,j)=>b.addFile({name:j||L.name,type:L.type,data:L,source:"Local"}),p=L=>L.status===Y.DONE?"text-green-600":L.status===Y.ERROR||L.status===Y.CANCELED?"text-red-600":"",x=L=>L.status===Y.DONE?"✓":L.status===Y.ERROR||L.status===Y.CANCELED?"!":"...",S=()=>u.value?.click(),$=()=>o.modal.close(),V=()=>{if(_.value||!f.value.filter(L=>L.status!==Y.DONE).length){_.value||(v.value=t("Please select file to upload first."));return}v.value="",b.retryAll(),b.upload()},M=()=>{b.cancelAll(),f.value.forEach(L=>{L.status!==Y.DONE&&(L.status=Y.CANCELED,L.statusName=t("Canceled"))}),_.value=!1},z=L=>{_.value||(b.removeFile(L.id),f.value.splice(k(L.id),1))},U=L=>{if(!_.value)if(b.cancelAll(),L){const j=f.value.filter(E=>E.status!==Y.DONE);f.value=[],j.forEach(E=>g(E.originalFile,E.name))}else f.value=[]};return e.onMounted(()=>{b=new vt({debug:o.debug,restrictions:{maxFileSize:Vt(l.maxFileSize??"10mb")},locale:o.i18n.t("uppy"),onBeforeFileAdded:(E,B)=>{if(B[E.id]!=null){const I=k(E.id);f.value[I]?.status===Y.PENDING&&(v.value=b.i18n("noDuplicates",{fileName:E.name})),f.value=f.value.filter(R=>R.id!==E.id)}return f.value.push({id:E.id,name:E.name,size:o.filesize(E.size),status:Y.PENDING,statusName:t("Pending upload"),percent:null,originalFile:E.data}),!0}}),b.use(_t,{endpoint:"WILL_BE_REPLACED_BEFORE_UPLOAD",limit:5,timeout:0}),b.on("restriction-failed",(E,B)=>{const C=f.value[k(E.id)];C&&z(C),v.value=B.message}),b.on("upload",()=>{const E=o.requester.transformRequestParams({url:"",method:"post",params:{q:"upload",storage:r.value.storage,path:r.value.path}});b.setMeta({...E.body});const B=b.getPlugin("XHRUpload");B&&(B.opts.method=E.method,B.opts.endpoint=E.url+"?"+new URLSearchParams(E.params),B.opts.headers=E.headers),delete E.headers["Content-Type"],_.value=!0,f.value.forEach(C=>{C.status!==Y.DONE&&(C.percent=null,C.status=Y.UPLOADING,C.statusName=t("Pending upload"))})}),b.on("upload-progress",(E,B)=>{const C=B.bytesTotal??1,I=Math.floor(B.bytesUploaded/C*100),R=k(E.id);R!==-1&&f.value[R]&&(f.value[R].percent=`${I}%`)}),b.on("upload-success",E=>{const B=f.value[k(E.id)];B&&(B.status=Y.DONE,B.statusName=t("Done"))}),b.on("upload-error",(E,B)=>{const C=f.value[k(E.id)];C&&(C.percent=null,C.status=Y.ERROR,C.statusName=B?.isNetworkError?t("Network Error, Unable establish connection to the server or interrupted."):B?.message||t("Unknown Error"))}),b.on("error",E=>{v.value=E.message,_.value=!1,o.emitter.emit("vf-fetch",{params:{q:"index"},noCloseModal:!0})}),b.on("complete",()=>{_.value=!1,o.emitter.emit("vf-fetch",{params:{q:"index",path:r.value.path,storage:r.value.storage},noCloseModal:!0})}),u.value?.addEventListener("click",()=>m.value?.click()),s.value?.addEventListener("click",()=>a.value?.click()),c.value?.addEventListener("dragover",E=>{E.preventDefault(),y.value=!0}),c.value?.addEventListener("dragleave",E=>{E.preventDefault(),y.value=!1});const L=(E,B)=>{B.isFile&&B.file(C=>E(B,C)),B.isDirectory&&B.createReader().readEntries(C=>C.forEach(I=>L(E,I)))};c.value?.addEventListener("drop",E=>{E.preventDefault(),y.value=!1;const B=/^[/\\](.+)/,C=E.dataTransfer?.items;C&&Array.from(C).forEach(I=>{I.kind==="file"&&L((R,q)=>{const F=B.exec(R.fullPath);g(q,F?F[1]:q.name)},I.webkitGetAsEntry())})});const j=E=>{const B=E.target,C=B.files;if(C){for(const I of C)g(I);B.value=""}};m.value?.addEventListener("change",j),a.value?.addEventListener("change",j)}),{container:i,internalFileInput:m,internalFolderInput:a,pickFiles:u,pickFolders:s,dropArea:c,queue:f,message:v,uploading:_,hasFilesInDropArea:y,definitions:d,openFileSelector:S,upload:V,cancel:M,remove:z,clear:U,close:$,getClassNameForEntry:p,getIconForEntry:x}}function Se(o,t=14){const n=`((?=([\\w\\W]{0,${t}}))([\\w\\W]{${t+1},})([\\w\\W]{8,}))`;return o.replace(new RegExp(n),"$2..$4")}const Il={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function Rl(o,t){return e.openBlock(),e.createElementBlock("svg",Il,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"},null,-1)])])}const ot={render:Rl},zl={class:"vuefinder__upload-modal__content"},Pl={key:0,class:"pointer-events-none"},Hl={key:1,class:"pointer-events-none"},ql=["disabled"],Ul=["disabled"],Ol={class:"vuefinder__upload-modal__file-list vf-scrollbar"},jl=["textContent"],Kl={class:"vuefinder__upload-modal__file-info"},Gl={class:"vuefinder__upload-modal__file-name hidden md:block"},Yl={class:"vuefinder__upload-modal__file-name md:hidden"},Wl={key:0,class:"ml-auto"},Ql=["title","disabled","onClick"],Xl={key:0,class:"py-2"},Jl=["disabled"],rt=e.defineComponent({__name:"ModalUpload",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,{container:r,internalFileInput:l,internalFolderInput:d,pickFiles:i,pickFolders:m,dropArea:a,queue:u,message:s,uploading:c,hasFilesInDropArea:f,definitions:v,openFileSelector:_,upload:y,cancel:b,remove:k,clear:g,close:p,getClassNameForEntry:x,getIconForEntry:S}=Ll();return($,V)=>(e.openBlock(),e.createBlock(Z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",class:"vf-btn vf-btn-primary",disabled:e.unref(c),onClick:V[4]||(V[4]=e.withModifiers((...M)=>e.unref(y)&&e.unref(y)(...M),["prevent"]))},e.toDisplayString(e.unref(n)("Upload")),9,Jl),e.unref(c)?(e.openBlock(),e.createElementBlock("button",{key:0,type:"button",class:"vf-btn vf-btn-secondary",onClick:V[5]||(V[5]=e.withModifiers((...M)=>e.unref(b)&&e.unref(b)(...M),["prevent"]))},e.toDisplayString(e.unref(n)("Cancel")),1)):(e.openBlock(),e.createElementBlock("button",{key:1,type:"button",class:"vf-btn vf-btn-secondary",onClick:V[6]||(V[6]=e.withModifiers((...M)=>e.unref(p)&&e.unref(p)(...M),["prevent"]))},e.toDisplayString(e.unref(n)("Close")),1))]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(te,{icon:e.unref(ot),title:e.unref(n)("Upload Files")},null,8,["icon","title"]),e.createElementVNode("div",zl,[e.createElementVNode("div",{class:"vuefinder__upload-modal__drop-area",ref_key:"dropArea",ref:a,onClick:V[0]||(V[0]=(...M)=>e.unref(_)&&e.unref(_)(...M))},[e.unref(f)?(e.openBlock(),e.createElementBlock("div",Pl,e.toDisplayString(e.unref(n)("Release to drop these files.")),1)):(e.openBlock(),e.createElementBlock("div",Hl,e.toDisplayString(e.unref(n)("Drag and drop the files/folders to here or click here.")),1))],512),e.createElementVNode("div",{ref_key:"container",ref:r,class:"vuefinder__upload-modal__buttons"},[e.createElementVNode("button",{ref_key:"pickFiles",ref:i,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Select Files")),513),e.createElementVNode("button",{ref_key:"pickFolders",ref:m,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Select Folders")),513),e.createElementVNode("button",{type:"button",class:"vf-btn vf-btn-secondary",disabled:e.unref(c),onClick:V[1]||(V[1]=M=>e.unref(g)(!1))},e.toDisplayString(e.unref(n)("Clear all")),9,ql),e.createElementVNode("button",{type:"button",class:"vf-btn vf-btn-secondary",disabled:e.unref(c),onClick:V[2]||(V[2]=M=>e.unref(g)(!0))},e.toDisplayString(e.unref(n)("Clear only successful")),9,Ul)],512),e.createElementVNode("div",Ol,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(u),M=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__upload-modal__file-entry",key:M.id},[e.createElementVNode("span",{class:e.normalizeClass(["vuefinder__upload-modal__file-icon",e.unref(x)(M)])},[e.createElementVNode("span",{class:"vuefinder__upload-modal__file-icon-text",textContent:e.toDisplayString(e.unref(S)(M))},null,8,jl)],2),e.createElementVNode("div",Kl,[e.createElementVNode("div",Gl,e.toDisplayString(e.unref(Se)(M.name,40))+" ("+e.toDisplayString(M.size)+") ",1),e.createElementVNode("div",Yl,e.toDisplayString(e.unref(Se)(M.name,16))+" ("+e.toDisplayString(M.size)+") ",1),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__upload-modal__file-status",e.unref(x)(M)])},[e.createTextVNode(e.toDisplayString(M.statusName)+" ",1),M.status===e.unref(v).QUEUE_ENTRY_STATUS.UPLOADING?(e.openBlock(),e.createElementBlock("b",Wl,e.toDisplayString(M.percent),1)):e.createCommentVNode("",!0)],2)]),e.createElementVNode("button",{type:"button",class:e.normalizeClass(["vuefinder__upload-modal__file-remove",e.unref(c)?"disabled":""]),title:e.unref(n)("Delete"),disabled:e.unref(c),onClick:z=>e.unref(k)(M)},[...V[7]||(V[7]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"vuefinder__upload-modal__file-remove-icon"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])],10,Ql)]))),128)),e.unref(u).length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",Xl,e.toDisplayString(e.unref(n)("No files selected!")),1))]),e.unref(s).length?(e.openBlock(),e.createBlock(Ke,{key:0,onHidden:V[3]||(V[3]=M=>s.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(s)),1)]),_:1})):e.createCommentVNode("",!0)])]),e.createElementVNode("input",{ref_key:"internalFileInput",ref:l,type:"file",multiple:"",class:"hidden"},null,512),e.createElementVNode("input",{ref_key:"internalFolderInput",ref:d,type:"file",multiple:"",webkitdirectory:"",class:"hidden"},null,512)]),_:1}))}}),Zl={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function ea(o,t){return e.openBlock(),e.createElementBlock("svg",Zl,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5m6 4.125 2.25 2.25m0 0 2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125"},null,-1)])])}const lt={render:ea},ta={class:"vuefinder__unarchive-modal__content"},na={class:"vuefinder__unarchive-modal__items"},oa={key:0,class:"vuefinder__unarchive-modal__icon vuefinder__unarchive-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},ra={key:1,class:"vuefinder__unarchive-modal__icon vuefinder__unarchive-modal__icon--file",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},la={class:"vuefinder__unarchive-modal__item-name"},aa={class:"vuefinder__unarchive-modal__info"},Le=e.defineComponent({__name:"ModalUnarchive",setup(o){const t=e.inject("ServiceContainer"),n=t.fs,r=T.useStore(n.path),{t:l}=t.i18n,d=e.ref(t.modal.data.items[0]),i=e.ref(""),m=e.ref([]),a=()=>{t.emitter.emit("vf-fetch",{params:{q:"unarchive",m:"post",storage:r.value.storage,path:r.value.path},body:{item:d.value.path},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:l("The file unarchived.")})},onError:u=>{i.value=l(u.message)}})};return(u,s)=>(e.openBlock(),e.createBlock(Z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:a,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(l)("Unarchive")),1),e.createElementVNode("button",{type:"button",onClick:s[1]||(s[1]=c=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(l)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(te,{icon:e.unref(lt),title:e.unref(l)("Unarchive")},null,8,["icon","title"]),e.createElementVNode("div",ta,[e.createElementVNode("div",na,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.value,c=>(e.openBlock(),e.createElementBlock("p",{class:"vuefinder__unarchive-modal__item",key:c.path},[c.type==="dir"?(e.openBlock(),e.createElementBlock("svg",oa,[...s[2]||(s[2]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",ra,[...s[3]||(s[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),e.createElementVNode("span",la,e.toDisplayString(c.basename),1)]))),128)),e.createElementVNode("p",aa,e.toDisplayString(e.unref(l)("The archive will be unarchived at"))+" ("+e.toDisplayString(e.unref(r).path)+")",1),i.value.length?(e.openBlock(),e.createBlock(e.unref(i),{key:0,onHidden:s[0]||(s[0]=c=>i.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),sa={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function ia(o,t){return e.openBlock(),e.createElementBlock("svg",sa,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125"},null,-1)])])}const at={render:ia},ca={class:"vuefinder__archive-modal__content"},da={class:"vuefinder__archive-modal__form"},ua={class:"vuefinder__archive-modal__files vf-scrollbar"},ma={class:"vuefinder__archive-modal__file"},fa={key:0,class:"vuefinder__archive-modal__icon vuefinder__archive-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},va={key:1,class:"vuefinder__archive-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},_a={class:"vuefinder__archive-modal__file-name"},pa=["placeholder"],Ie=e.defineComponent({__name:"ModalArchive",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,r=t.fs,l=T.useStore(r.path),d=e.ref(""),i=e.ref(""),m=e.ref(t.modal.data.items),a=()=>{m.value.length&&t.emitter.emit("vf-fetch",{params:{q:"archive",m:"post",storage:l.value.storage,path:l.value.path},body:{items:m.value.map(({path:u,type:s})=>({path:u,type:s})),name:d.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("The file(s) archived.")})},onError:u=>{i.value=n(u.message)}})};return(u,s)=>(e.openBlock(),e.createBlock(Z,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:a,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(n)("Archive")),1),e.createElementVNode("button",{type:"button",onClick:s[2]||(s[2]=c=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(te,{icon:e.unref(at),title:e.unref(n)("Archive the files")},null,8,["icon","title"]),e.createElementVNode("div",ca,[e.createElementVNode("div",da,[e.createElementVNode("div",ua,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.value,c=>(e.openBlock(),e.createElementBlock("p",ma,[c.type==="dir"?(e.openBlock(),e.createElementBlock("svg",fa,[...s[3]||(s[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",va,[...s[4]||(s[4]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),e.createElementVNode("span",_a,e.toDisplayString(c.basename),1)]))),256))]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":s[0]||(s[0]=c=>d.value=c),onKeyup:e.withKeys(a,["enter"]),class:"vuefinder__archive-modal__input",placeholder:e.unref(n)("Archive name. (.zip file will be created)"),type:"text"},null,40,pa),[[e.vModelText,d.value]]),i.value.length?(e.openBlock(),e.createBlock(e.unref(i),{key:0,onHidden:s[1]||(s[1]=c=>i.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),ha={class:"vuefinder__menubar__container"},ga=["onClick","onMouseenter"],ka={class:"vuefinder__menubar__label"},wa=["onMouseenter"],ba=["onClick"],ya={key:0,class:"vuefinder__menubar__dropdown__label"},Ea={key:1,class:"vuefinder__menubar__dropdown__checkmark"},Va=e.defineComponent({__name:"MenuBar",setup(o){const t=e.inject("ServiceContainer");t||console.error("MenuBar: ServiceContainer not found");const{t:n}=t?.i18n||{t:p=>p},r=t?.fs,l=t?.config,d=t?.search,i=T.useStore(l?.state||{}),m=T.useStore(d?.state||{}),a=T.useStore(r?.selectedItems||[]),u=T.useStore(r?.storages||[]),s=e.ref(null),c=e.ref(!1),f=e.computed(()=>window.opener!==null||window.name!==""||window.history.length<=1),v=e.computed(()=>[{id:"file",label:n("File"),items:[{id:"new-folder",label:n("New Folder"),action:()=>t?.modal?.open(Ae,{items:a.value}),enabled:()=>t?.features?.includes(H.NEW_FOLDER)||!1},{id:"new-file",label:n("New File"),action:()=>t?.modal?.open(nt,{items:a.value}),enabled:()=>t?.features?.includes(H.NEW_FILE)||!1},{type:"separator"},{id:"upload",label:n("Upload"),action:()=>t?.modal?.open(rt,{items:a.value}),enabled:()=>t?.features?.includes(H.UPLOAD)||!1},{type:"separator"},{id:"search",label:n("Search"),action:()=>d?.enterSearchMode(),enabled:()=>t?.features?.includes(H.SEARCH)},{type:"separator"},{id:"archive",label:n("Archive"),action:()=>{a.value.length>0&&t?.modal?.open(Ie,{items:a.value})},enabled:()=>a.value.length>0&&t?.features?.includes(H.ARCHIVE)},{id:"unarchive",label:n("Unarchive"),action:()=>{a.value.length===1&&a.value[0]?.mime_type==="application/zip"&&t?.modal?.open(Le,{items:a.value})},enabled:()=>a.value.length===1&&a.value[0]?.mime_type==="application/zip"&&t?.features?.includes(H.UNARCHIVE)},{type:"separator"},{id:"preview",label:n("Preview"),action:()=>{a.value.length===1&&a.value[0]?.type!=="dir"&&t?.modal?.open(xe,{storage:r?.path?.get()?.storage,item:a.value[0]})},enabled:()=>a.value.length===1&&a.value[0]?.type!=="dir"},...f.value?[{type:"separator"},{id:"exit",label:n("Exit"),action:()=>{try{window.close()}catch(p){console.log("Cannot close window:",p.message)}},enabled:()=>!0}]:[]]},{id:"edit",label:n("Edit"),items:[{id:"select-all",label:n("Select All"),action:()=>r?.selectAll(),enabled:()=>!0},{id:"deselect",label:n("Deselect All"),action:()=>r?.clearSelection(),enabled:()=>a.value.length>0},{type:"separator"},{id:"cut",label:n("Cut"),action:()=>{a.value.length>0&&r?.setClipboard("cut",new Set(a.value.map(p=>p.path)))},enabled:()=>a.value.length>0},{id:"copy",label:n("Copy"),action:()=>{a.value.length>0&&r?.setClipboard("copy",new Set(a.value.map(p=>p.path)))},enabled:()=>a.value.length>0},{id:"paste",label:n("Paste"),action:()=>{const p=r?.getClipboard();p?.items?.size>0&&t?.modal?.open(p.type==="cut"?we:Fe,{items:Array.from(p.items),targetPath:r?.path?.get()?.path})},enabled:()=>r?.getClipboard()?.items?.size>0},{type:"separator"},{id:"copy-path",label:n("Copy Path"),action:()=>{if(a.value.length===1){const p=a.value[0];navigator.clipboard.writeText(p.path).catch(x=>{console.error("Failed to copy path:",x)})}},enabled:()=>a.value.length===1},{id:"copy-download-url",label:n("Copy Download URL"),action:()=>{if(a.value.length===1){const p=a.value[0],x=r?.path?.get()?.storage??"local",S=t?.requester?.getDownloadUrl(x,p);S&&navigator.clipboard.writeText(S).catch($=>{console.error("Failed to copy download URL:",$)})}},enabled:()=>a.value.length===1},{type:"separator"},{id:"rename",label:n("Rename"),action:()=>{a.value.length===1&&t?.modal?.open(ke,{items:a.value})},enabled:()=>a.value.length===1&&t?.features?.includes(H.RENAME)},{id:"delete",label:n("Delete"),action:()=>{a.value.length>0&&t?.modal?.open(ge,{items:a.value})},enabled:()=>a.value.length>0&&t?.features?.includes(H.DELETE)}]},{id:"view",label:n("View"),items:[{id:"refresh",label:n("Refresh"),action:()=>{t?.emitter?.emit("vf-fetch",{params:{q:"index",storage:r?.path?.get()?.storage,path:r?.path?.get()?.path}})},enabled:()=>!0},{type:"separator"},{id:"grid-view",label:n("Grid View"),action:()=>l?.set("view","grid"),enabled:()=>!m.value?.query?.length,checked:()=>i.value?.view==="grid"},{id:"list-view",label:n("List View"),action:()=>l?.set("view","list"),enabled:()=>!m.value?.query?.length,checked:()=>i.value?.view==="list"},{type:"separator"},{id:"tree-view",label:n("Tree View"),action:()=>l?.toggle("showTreeView"),enabled:()=>!0,checked:()=>i.value?.showTreeView},{id:"thumbnails",label:n("Show Thumbnails"),action:()=>l?.toggle("showThumbnails"),enabled:()=>!0,checked:()=>i.value?.showThumbnails},{id:"show-hidden-files",label:n("Show Hidden Files"),action:()=>l?.toggle("showHiddenFiles"),enabled:()=>!0,checked:()=>i.value?.showHiddenFiles},{type:"separator"},{id:"fullscreen",label:n("Full Screen"),action:()=>l?.toggle("fullScreen"),enabled:()=>t?.features?.includes(H.FULL_SCREEN),checked:()=>i.value?.fullScreen}]},{id:"go",label:n("Go"),items:[{id:"forward",label:n("Forward"),action:()=>{r?.goForward(),t?.emitter?.emit("vf-fetch",{params:{q:"index",storage:r?.path?.get()?.storage??"local",path:r?.currentPath?.get()??""}})},enabled:()=>r?.canGoForward?.get()??!1},{id:"back",label:n("Back"),action:()=>{r?.goBack(),t?.emitter?.emit("vf-fetch",{params:{q:"index",storage:r?.path?.get()?.storage??"local",path:r?.currentPath?.get()??""}})},enabled:()=>r?.canGoBack?.get()??!1},{id:"open-containing-folder",label:n("Open containing folder"),action:()=>{const p=r?.path?.get();if(p?.breadcrumb&&p.breadcrumb.length>0){const S=p.breadcrumb[p.breadcrumb.length-2]?.path??`${p.storage}://`;r?.setPath(S),t?.emitter?.emit("vf-fetch",{params:{q:"index",storage:p.storage??"local",path:S}})}},enabled:()=>{const p=r?.path?.get();return p?.breadcrumb&&p.breadcrumb.length>0}},{type:"separator"},...(u.value||[]).map(p=>({id:`storage-${p}`,label:p,action:()=>{const x=`${p}://`;r?.setPath(x),t?.emitter?.emit("vf-fetch",{params:{q:"index",storage:p,path:x}})},enabled:()=>!0})),{type:"separator"},{id:"go-to-folder",label:n("Go to Folder"),action:()=>{const p=prompt(n("Enter folder path:"));p&&(r?.setPath(p),t?.emitter?.emit("vf-fetch",{params:{q:"index",storage:r?.path?.get()?.storage??"local",path:p}}))},enabled:()=>!0}]},{id:"help",label:n("Help"),items:[{id:"about",label:n("About"),action:()=>t?.modal?.open(Ce),enabled:()=>!0}]}]),_=p=>{s.value===p?b():(s.value=p,c.value=!0)},y=p=>{c.value&&(s.value=p)},b=()=>{s.value=null,c.value=!1},k=p=>{b(),p()},g=p=>{p.target.closest(".vuefinder__menubar")||b()};return e.onMounted(()=>{document.addEventListener("click",g)}),e.onUnmounted(()=>{document.removeEventListener("click",g)}),(p,x)=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__menubar",onClick:x[0]||(x[0]=e.withModifiers(()=>{},["stop"]))},[e.createElementVNode("div",ha,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(v.value,S=>(e.openBlock(),e.createElementBlock("div",{key:S.id,class:e.normalizeClass(["vuefinder__menubar__item",{"vuefinder__menubar__item--active":s.value===S.id}]),onClick:$=>_(S.id),onMouseenter:$=>y(S.id)},[e.createElementVNode("span",ka,e.toDisplayString(S.label),1),s.value===S.id?(e.openBlock(),e.createElementBlock("div",{key:0,class:"vuefinder__menubar__dropdown",onMouseenter:$=>y(S.id)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(S.items,$=>(e.openBlock(),e.createElementBlock("div",{key:$.id||$.type,class:e.normalizeClass(["vuefinder__menubar__dropdown__item",{"vuefinder__menubar__dropdown__item--separator":$.type==="separator","vuefinder__menubar__dropdown__item--disabled":$.enabled&&!$.enabled(),"vuefinder__menubar__dropdown__item--checked":$.checked&&$.checked()}]),onClick:e.withModifiers(V=>$.type!=="separator"&&$.enabled&&$.enabled()?k($.action):null,["stop"])},[$.type!=="separator"?(e.openBlock(),e.createElementBlock("span",ya,e.toDisplayString($.label),1)):e.createCommentVNode("",!0),$.checked&&$.checked()?(e.openBlock(),e.createElementBlock("span",Ea," ✓ ")):e.createCommentVNode("",!0)],10,ba))),128))],40,wa)):e.createCommentVNode("",!0)],42,ga))),128))])]))}}),Na={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function Sa(o,t){return e.openBlock(),e.createElementBlock("svg",Na,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"},null,-1)])])}const Ba={render:Sa},Ca={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function xa(o,t){return e.openBlock(),e.createElementBlock("svg",Ca,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"},null,-1)])])}const $a={render:xa},Da={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function Ta(o,t){return e.openBlock(),e.createElementBlock("svg",Da,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25zm0 9.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18zM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25zm0 9.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18z"},null,-1)])])}const Ma={render:Ta},Fa={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function Aa(o,t){return e.openBlock(),e.createElementBlock("svg",Fa,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75"},null,-1)])])}const La={render:Aa},Ia={fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function Ra(o,t){return e.openBlock(),e.createElementBlock("svg",Ia,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M3 4a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v2.586a1 1 0 0 1-.293.707l-6.414 6.414a1 1 0 0 0-.293.707V17l-4 4v-6.586a1 1 0 0 0-.293-.707L3.293 7.293A1 1 0 0 1 3 6.586z"},null,-1)])])}const za={render:Ra},Pa={class:"vuefinder__toolbar"},Ha={key:0,class:"vuefinder__toolbar__actions"},qa=["title"],Ua=["title"],Oa=["title"],ja=["title"],Ka=["title"],Ga=["title"],Ya=["title"],Wa={key:1,class:"vuefinder__toolbar__search-results"},Qa={class:"pl-2"},Xa={class:"dark:bg-gray-700 bg-gray-200 text-xs px-2 py-1 rounded"},Ja={class:"vuefinder__toolbar__controls"},Za={class:"vuefinder__toolbar__control vuefinder__toolbar__dropdown-container"},es=["title"],ts={class:"relative"},ns={key:0,class:"vuefinder__toolbar__filter-indicator"},os={key:0,class:"vuefinder__toolbar__dropdown"},rs={class:"vuefinder__toolbar__dropdown-content"},ls={class:"vuefinder__toolbar__dropdown-section"},as={class:"vuefinder__toolbar__dropdown-label"},ss={class:"vuefinder__toolbar__dropdown-row"},is={value:"name"},cs={value:"size"},ds={value:"modified"},us={value:""},ms={value:"asc"},fs={value:"desc"},vs={class:"vuefinder__toolbar__dropdown-section"},_s={class:"vuefinder__toolbar__dropdown-label"},ps={class:"vuefinder__toolbar__dropdown-options"},hs={class:"vuefinder__toolbar__dropdown-option"},gs={class:"vuefinder__toolbar__option-text"},ks={class:"vuefinder__toolbar__dropdown-option"},ws={class:"vuefinder__toolbar__option-text"},bs={class:"vuefinder__toolbar__dropdown-option"},ys={class:"vuefinder__toolbar__option-text"},Es={class:"vuefinder__toolbar__dropdown-toggle"},Vs={for:"showHidden",class:"vuefinder__toolbar__toggle-label"},Ns={class:"vuefinder__toolbar__dropdown-reset"},Ss=["title"],Bs=["title"],Cs=e.defineComponent({name:"VfToolbar",__name:"Toolbar",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,r=t.fs,l=t.config,d=t.search,i=T.useStore(l.state),m=T.useStore(d.state),a=T.useStore(r.selectedItems),u=T.useStore(r.sort),s=T.useStore(r.filter);e.watch(()=>i.value.fullScreen,()=>{if(i.value.fullScreen){const k=document.querySelector("body");k&&(k.style.overflow="hidden")}else{const k=document.querySelector("body");k&&(k.style.overflow="")}t.emitter.emit("vf-fullscreen-toggle")});const c=e.ref(!1),f=k=>{k.target.closest(".vuefinder__toolbar__dropdown-container")||(c.value=!1)};e.onMounted(()=>{document.addEventListener("click",f)}),e.onUnmounted(()=>{document.removeEventListener("click",f)});const v=e.ref({sortBy:"name",sortOrder:"",filterKind:"all",showHidden:i.value.showHiddenFiles});e.watch(()=>v.value.sortBy,k=>{if(!v.value.sortOrder){r.clearSort();return}k==="name"?r.setSort("basename",v.value.sortOrder):k==="size"?r.setSort("file_size",v.value.sortOrder):k==="modified"&&r.setSort("last_modified",v.value.sortOrder)}),e.watch(()=>v.value.sortOrder,k=>{if(!k){r.clearSort();return}v.value.sortBy==="name"?r.setSort("basename",k):v.value.sortBy==="size"?r.setSort("file_size",k):v.value.sortBy==="modified"&&r.setSort("last_modified",k)}),e.watch(u,k=>{k.active?(k.column==="basename"?v.value.sortBy="name":k.column==="file_size"?v.value.sortBy="size":k.column==="last_modified"&&(v.value.sortBy="modified"),v.value.sortOrder=k.order):v.value.sortOrder=""},{immediate:!0}),e.watch(()=>v.value.filterKind,k=>{r.setFilter(k,i.value.showHiddenFiles)}),e.watch(()=>v.value.showHidden,k=>{l.set("showHiddenFiles",k),r.setFilter(v.value.filterKind,k)}),e.watch(s,k=>{v.value.filterKind=k.kind},{immediate:!0}),e.watch(()=>i.value.showHiddenFiles,k=>{v.value.showHidden=k,r.setFilter(v.value.filterKind,k)},{immediate:!0});const _=()=>l.set("view",i.value.view==="grid"?"list":"grid"),y=e.computed(()=>s.value.kind!=="all"||!i.value.showHiddenFiles||u.value.active),b=()=>{v.value={sortBy:"name",sortOrder:"",filterKind:"all",showHidden:!0},l.set("showHiddenFiles",!0),r.clearSort(),r.clearFilter()};return(k,g)=>(e.openBlock(),e.createElementBlock("div",Pa,[e.unref(m).query.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",Ha,[e.unref(t).features.includes(e.unref(H).NEW_FOLDER)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"mx-1.5",title:e.unref(n)("New Folder"),onClick:g[0]||(g[0]=p=>e.unref(t).modal.open(Ae,{items:e.unref(a)}))},[e.createVNode(e.unref(et))],8,qa)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(H).NEW_FILE)?(e.openBlock(),e.createElementBlock("div",{key:1,class:"mx-1.5",title:e.unref(n)("New File"),onClick:g[1]||(g[1]=p=>e.unref(t).modal.open(nt,{items:e.unref(a)}))},[e.createVNode(e.unref(tt))],8,Ua)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(H).RENAME)?(e.openBlock(),e.createElementBlock("div",{key:2,class:"mx-1.5",title:e.unref(n)("Rename"),onClick:g[2]||(g[2]=p=>e.unref(a).length!==1||e.unref(t).modal.open(ke,{items:e.unref(a)}))},[e.createVNode(e.unref(je),{class:e.normalizeClass(e.unref(a).length===1?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,Oa)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(H).DELETE)?(e.openBlock(),e.createElementBlock("div",{key:3,class:"mx-1.5",title:e.unref(n)("Delete"),onClick:g[3]||(g[3]=p=>!e.unref(a).length||e.unref(t).modal.open(ge,{items:e.unref(a)}))},[e.createVNode(e.unref(Oe),{class:e.normalizeClass(e.unref(a).length?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,ja)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(H).UPLOAD)?(e.openBlock(),e.createElementBlock("div",{key:4,class:"mx-1.5",title:e.unref(n)("Upload"),onClick:g[4]||(g[4]=p=>e.unref(t).modal.open(rt,{items:e.unref(a)}))},[e.createVNode(e.unref(ot))],8,Ka)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(H).UNARCHIVE)&&e.unref(a).length===1&&e.unref(a)[0].mime_type==="application/zip"?(e.openBlock(),e.createElementBlock("div",{key:5,class:"mx-1.5",title:e.unref(n)("Unarchive"),onClick:g[5]||(g[5]=p=>!e.unref(a).length||e.unref(t).modal.open(Le,{items:e.unref(a)}))},[e.createVNode(e.unref(lt),{class:e.normalizeClass(e.unref(a).length?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,Ga)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(H).ARCHIVE)?(e.openBlock(),e.createElementBlock("div",{key:6,class:"mx-1.5",title:e.unref(n)("Archive"),onClick:g[6]||(g[6]=p=>!e.unref(a).length||e.unref(t).modal.open(Ie,{items:e.unref(a)}))},[e.createVNode(e.unref(at),{class:e.normalizeClass(e.unref(a).length?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,Ya)):e.createCommentVNode("",!0)])),e.unref(m).query?(e.openBlock(),e.createElementBlock("div",Wa,[e.createElementVNode("div",Qa,[e.createTextVNode(e.toDisplayString(e.unref(n)("Search results for"))+" ",1),e.createElementVNode("span",Xa,e.toDisplayString(e.unref(m).query),1)]),e.unref(l).get("loadingIndicator")==="circular"&&e.unref(r).isLoading()?(e.openBlock(),e.createBlock(e.unref(Te),{key:0})):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.createElementVNode("div",Ja,[e.createElementVNode("div",Za,[e.createElementVNode("div",{title:e.unref(n)("Filter"),onClick:g[7]||(g[7]=p=>c.value=!c.value),class:"vuefinder__toolbar__dropdown-trigger"},[e.createElementVNode("div",ts,[e.createVNode(e.unref(za),{class:"vf-toolbar-icon vuefinder__toolbar__icon w-6 h-6"}),y.value?(e.openBlock(),e.createElementBlock("div",ns)):e.createCommentVNode("",!0)])],8,es),c.value?(e.openBlock(),e.createElementBlock("div",os,[e.createElementVNode("div",rs,[e.createElementVNode("div",ls,[e.createElementVNode("div",as,e.toDisplayString(e.unref(n)("Sorting")),1),e.createElementVNode("div",ss,[e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":g[8]||(g[8]=p=>v.value.sortBy=p),class:"vuefinder__toolbar__dropdown-select"},[e.createElementVNode("option",is,e.toDisplayString(e.unref(n)("Name")),1),e.createElementVNode("option",cs,e.toDisplayString(e.unref(n)("Size")),1),e.createElementVNode("option",ds,e.toDisplayString(e.unref(n)("Date")),1)],512),[[e.vModelSelect,v.value.sortBy]]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":g[9]||(g[9]=p=>v.value.sortOrder=p),class:"vuefinder__toolbar__dropdown-select"},[e.createElementVNode("option",us,e.toDisplayString(e.unref(n)("None")),1),e.createElementVNode("option",ms,e.toDisplayString(e.unref(n)("Asc")),1),e.createElementVNode("option",fs,e.toDisplayString(e.unref(n)("Desc")),1)],512),[[e.vModelSelect,v.value.sortOrder]])])]),e.createElementVNode("div",vs,[e.createElementVNode("div",_s,e.toDisplayString(e.unref(n)("Show")),1),e.createElementVNode("div",ps,[e.createElementVNode("label",hs,[e.withDirectives(e.createElementVNode("input",{type:"radio",name:"filterKind",value:"all","onUpdate:modelValue":g[10]||(g[10]=p=>v.value.filterKind=p),class:"vuefinder__toolbar__radio"},null,512),[[e.vModelRadio,v.value.filterKind]]),e.createElementVNode("span",gs,e.toDisplayString(e.unref(n)("All items")),1)]),e.createElementVNode("label",ks,[e.withDirectives(e.createElementVNode("input",{type:"radio",name:"filterKind",value:"files","onUpdate:modelValue":g[11]||(g[11]=p=>v.value.filterKind=p),class:"vuefinder__toolbar__radio"},null,512),[[e.vModelRadio,v.value.filterKind]]),e.createElementVNode("span",ws,e.toDisplayString(e.unref(n)("Files only")),1)]),e.createElementVNode("label",bs,[e.withDirectives(e.createElementVNode("input",{type:"radio",name:"filterKind",value:"folders","onUpdate:modelValue":g[12]||(g[12]=p=>v.value.filterKind=p),class:"vuefinder__toolbar__radio"},null,512),[[e.vModelRadio,v.value.filterKind]]),e.createElementVNode("span",ys,e.toDisplayString(e.unref(n)("Folders only")),1)])])]),e.createElementVNode("div",Es,[e.createElementVNode("label",Vs,e.toDisplayString(e.unref(n)("Show hidden files")),1),e.withDirectives(e.createElementVNode("input",{type:"checkbox",id:"showHidden","onUpdate:modelValue":g[13]||(g[13]=p=>v.value.showHidden=p),class:"vuefinder__toolbar__checkbox"},null,512),[[e.vModelCheckbox,v.value.showHidden]])]),e.createElementVNode("div",Ns,[e.createElementVNode("button",{onClick:b,class:"vuefinder__toolbar__reset-button"},e.toDisplayString(e.unref(n)("Reset")),1)])])])):e.createCommentVNode("",!0)]),e.unref(t).features.includes(e.unref(H).FULL_SCREEN)?(e.openBlock(),e.createElementBlock("div",{key:0,onClick:g[14]||(g[14]=p=>e.unref(l).toggle("fullScreen")),class:"mx-1.5",title:e.unref(n)("Toggle Full Screen")},[e.unref(i).fullScreen?(e.openBlock(),e.createBlock(e.unref($a),{key:0})):(e.openBlock(),e.createBlock(e.unref(Ba),{key:1}))],8,Ss)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"mx-1.5",title:e.unref(n)("Change View"),onClick:g[15]||(g[15]=p=>e.unref(m).query.length||_())},[e.unref(i).view==="grid"?(e.openBlock(),e.createBlock(e.unref(Ma),{key:0,class:e.normalizeClass(["vf-toolbar-icon",e.unref(m).query.length?"vf-toolbar-icon-disabled":""])},null,8,["class"])):e.createCommentVNode("",!0),e.unref(i).view==="list"?(e.openBlock(),e.createBlock(e.unref(La),{key:1,class:e.normalizeClass(["vf-toolbar-icon",e.unref(m).query.length?"vf-toolbar-icon-disabled":""])},null,8,["class"])):e.createCommentVNode("",!0)],8,Bs)])]))}}),xs=(o,t=0,n=!1)=>{let r;return(...l)=>{n&&!r&&o(...l),clearTimeout(r),r=setTimeout(()=>{o(...l)},t)}},ze=(o,t,n)=>{const r=e.ref(o);return e.customRef((l,d)=>({get(){return l(),r.value},set:xs(i=>{r.value=i,d()},t,!1)}))},$s={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer",viewBox:"-40 -40 580 580"};function Ds(o,t){return e.openBlock(),e.createElementBlock("svg",$s,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M463.5 224h8.5c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2S461.9 48.1 455 55l-41.6 41.6c-87.6-86.5-228.7-86.2-315.8 1-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2S334.3 224 344 224z"},null,-1)])])}const Ts={render:Ds},Ms={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-0.5 rounded",viewBox:"0 0 20 20"};function Fs(o,t){return e.openBlock(),e.createElementBlock("svg",Ms,[...t[0]||(t[0]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 9.707a1 1 0 0 1 0-1.414l4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1-1.414 1.414L11 7.414V15a1 1 0 1 1-2 0V7.414L6.707 9.707a1 1 0 0 1-1.414 0",class:"pointer-events-none","clip-rule":"evenodd"},null,-1)])])}const As={render:Fs},Ls={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer",viewBox:"0 0 24 24"};function Is(o,t){return e.openBlock(),e.createElementBlock("svg",Ls,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1)])])}const Rs={render:Is},zs={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-gray-800 cursor-pointer",viewBox:"0 0 20 20"};function Ps(o,t){return e.openBlock(),e.createElementBlock("svg",zs,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M10.707 2.293a1 1 0 0 0-1.414 0l-7 7a1 1 0 0 0 1.414 1.414L4 10.414V17a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-6.586l.293.293a1 1 0 0 0 1.414-1.414z",class:"pointer-events-none"},null,-1)])])}const Hs={render:Ps},qs={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 m-auto stroke-gray-400 fill-gray-100 dark:stroke-gray-400 dark:fill-gray-400/20",viewBox:"0 0 20 20"};function Us(o,t){return e.openBlock(),e.createElementBlock("svg",qs,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607"},null,-1)])])}const Os={render:Us},js={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"w-6 h-6 cursor-pointer",viewBox:"0 0 24 24"};function Ks(o,t){return e.openBlock(),e.createElementBlock("svg",js,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1)])])}const Gs={render:Ks},Ys={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"h-6 w-6 p-1 rounded text-slate-700 dark:text-neutral-300 cursor-pointer",viewBox:"0 0 24 24"};function Ws(o,t){return e.openBlock(),e.createElementBlock("svg",Ys,[...t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M9 6h11M12 12h8M15 18h5M5 6v.01M8 12v.01M11 18v.01"},null,-1)])])}const Qs={render:Ws},Xs={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 448 512"};function Js(o,t){return e.openBlock(),e.createElementBlock("svg",Xs,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M8 256a56 56 0 1 1 112 0 56 56 0 1 1-112 0m160 0a56 56 0 1 1 112 0 56 56 0 1 1-112 0m216-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112"},null,-1)])])}const Zs={render:Js},ei={class:"vuefinder__breadcrumb__container"},ti=["title"],ni=["title"],oi=["title"],ri=["title"],li={class:"vuefinder__breadcrumb__list"},ai={key:0,class:"vuefinder__breadcrumb__hidden-list"},si={class:"relative"},ii=["title","onClick"],ci={class:"vuefinder__breadcrumb__search-mode"},di=["placeholder"],ui=["onClick"],mi={class:"vuefinder__breadcrumb__hidden-item-content"},fi={class:"vuefinder__breadcrumb__hidden-item-text"},vi=e.defineComponent({__name:"Breadcrumb",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,r=t.search,l=t.fs,d=t.config,i=T.useStore(d.state),m=T.useStore(r.state),a=T.useStore(l.path),u=T.useStore(l.loading),s=e.computed(()=>m.value?.searchMode??!1),c=e.ref(null),f=ze(0,100),v=e.ref(5),_=e.ref(!1),y=e.computed(()=>a.value?.breadcrumb??[]);function b(F,D){return F.length>D?[F.slice(-D),F.slice(0,-D)]:[F,[]]}const k=e.computed(()=>b(y.value,v.value)[0]),g=e.computed(()=>b(y.value,v.value)[1]);e.watch(f,()=>{if(!c.value)return;const F=c.value.children;let D=0,P=0;const K=5,X=1;v.value=K,e.nextTick(()=>{for(let re=F.length-1;re>=0;re--){const ne=F[re];if(D+ne.offsetWidth>f.value-40)break;D+=parseInt(ne.offsetWidth.toString(),10),P++}P<X&&(P=X),P>K&&(P=K),v.value=P})});const p=()=>{c.value&&(f.value=c.value.offsetWidth)},x=e.ref(null);e.onMounted(()=>{x.value=new ResizeObserver(p),c.value&&x.value.observe(c.value)}),e.onUnmounted(()=>{x.value&&x.value.disconnect()});const S=ie(t,["bg-blue-200","dark:bg-slate-600"]);function $(F=null){F??=y.value.length-2;const D={basename:a.value?.storage??"local",extension:"",path:(a.value?.storage??"local")+"://",storage:a.value?.storage??"local",type:"dir",file_size:null,last_modified:null,mime_type:null,visibility:""};return y.value[F]??D}const V=()=>{I()},M=()=>{r.exitSearchMode(),k.value.length>0&&!s.value&&t.emitter.emit("vf-fetch",{params:{q:"index",storage:a.value?.storage??"local",path:y.value[y.value.length-2]?.path??(a.value?.storage??"local")+"://"}})},z=F=>{t.emitter.emit("vf-fetch",{params:{q:"index",storage:a.value?.storage,path:F.path}}),_.value=!1},U=()=>{_.value&&(_.value=!1)},L={mounted(F,D){F.clickOutsideEvent=function(P){F===P.target||F.contains(P.target)||D.value()},document.body.addEventListener("click",F.clickOutsideEvent)},beforeUnmount(F){document.body.removeEventListener("click",F.clickOutsideEvent)}},j=()=>{d.toggle("showTreeView")},E=e.ref(null),B=ze("",400);e.watch(B,F=>{t.emitter.emit("vf-toast-clear"),r.setQuery(F)}),r.state.listen(F=>{B.value=F?.query??""}),e.watch(s,F=>{F&&e.nextTick(()=>{E.value&&E.value.focus()})}),t.emitter.on("vf-search-exit",()=>{r.exitSearchMode()});const C=()=>{B.value===""&&r.exitSearchMode()},I=()=>{r.exitSearchMode(),t.emitter.emit("vf-fetch",{params:{q:"index",storage:a.value.storage,path:a.value.path}})},R=e.ref({x:0,y:0}),q=(F,D=null)=>{if(F.currentTarget instanceof HTMLElement){const{x:P,y:K,height:X}=F.currentTarget.getBoundingClientRect();R.value={x:P,y:K+X}}_.value=D??!_.value};return(F,D)=>(e.openBlock(),e.createElementBlock("div",ei,[e.createElementVNode("span",{title:e.unref(n)("Toggle Tree View")},[e.createVNode(e.unref(Qs),{onClick:j,class:e.normalizeClass(["vuefinder__breadcrumb__toggle-tree",e.unref(i).showTreeView?"vuefinder__breadcrumb__toggle-tree--active":""])},null,8,["class"])],8,ti),e.createElementVNode("span",{title:e.unref(n)("Go up a directory")},[e.createVNode(e.unref(As),e.mergeProps(e.toHandlers(y.value.length&&!s.value?e.unref(S).events($()):{}),{onClick:M,class:y.value.length&&!s.value?"vuefinder__breadcrumb__go-up--active":"vuefinder__breadcrumb__go-up--inactive"}),null,16,["class"])],8,ni),e.unref(l).isLoading()?(e.openBlock(),e.createElementBlock("span",{key:1,title:e.unref(n)("Cancel")},[e.createVNode(e.unref(Rs),{onClick:D[0]||(D[0]=P=>e.unref(t).emitter.emit("vf-fetch-abort"))})],8,ri)):(e.openBlock(),e.createElementBlock("span",{key:0,title:e.unref(n)("Refresh")},[e.createVNode(e.unref(Ts),{onClick:V})],8,oi)),e.withDirectives(e.createElementVNode("div",{class:"group vuefinder__breadcrumb__search-container",onClick:D[3]||(D[3]=(...P)=>e.unref(r).enterSearchMode&&e.unref(r).enterSearchMode(...P))},[e.createElementVNode("div",null,[e.createVNode(e.unref(Hs),e.mergeProps(e.toHandlers(e.unref(S).events($(-1))),{onClick:D[1]||(D[1]=e.withModifiers(P=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",storage:e.unref(a).storage??"local"}}),["stop"]))}),null,16)]),e.createElementVNode("div",li,[g.value.length?e.withDirectives((e.openBlock(),e.createElementBlock("div",ai,[D[5]||(D[5]=e.createElementVNode("div",{class:"vuefinder__breadcrumb__separator"},"/",-1)),e.createElementVNode("div",si,[e.createElementVNode("span",{onDragenter:D[2]||(D[2]=P=>q(P,!0)),onClick:e.withModifiers(q,["stop"]),class:"vuefinder__breadcrumb__hidden-toggle"},[e.createVNode(e.unref(Zs),{class:"vuefinder__breadcrumb__hidden-toggle-icon"})],32)])])),[[L,U]]):e.createCommentVNode("",!0)]),e.createElementVNode("div",{ref_key:"breadcrumbContainer",ref:c,class:"vuefinder__breadcrumb__visible-list pointer-events-none"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(k.value,(P,K)=>(e.openBlock(),e.createElementBlock("div",{key:K},[D[6]||(D[6]=e.createElementVNode("span",{class:"vuefinder__breadcrumb__separator"},"/",-1)),e.createElementVNode("span",e.mergeProps(e.toHandlers(e.unref(S).events(P),!0),{class:"vuefinder__breadcrumb__item pointer-events-auto",title:P.basename,onClick:e.withModifiers(X=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",storage:e.unref(a).storage,path:P.path}}),["stop"])}),e.toDisplayString(P.name),17,ii)]))),128))],512),e.unref(d).get("loadingIndicator")==="circular"&&e.unref(u)?(e.openBlock(),e.createBlock(e.unref(Te),{key:0})):e.createCommentVNode("",!0)],512),[[e.vShow,!s.value]]),e.withDirectives(e.createElementVNode("div",ci,[e.createElementVNode("div",null,[e.createVNode(e.unref(Os))]),e.withDirectives(e.createElementVNode("input",{ref_key:"searchInput",ref:E,onKeydown:e.withKeys(I,["esc"]),onBlur:C,"onUpdate:modelValue":D[4]||(D[4]=P=>e.isRef(B)?B.value=P:null),placeholder:e.unref(n)("Search anything.."),class:"vuefinder__breadcrumb__search-input",type:"text"},null,40,di),[[e.vModelText,e.unref(B)]]),e.createVNode(e.unref(Gs),{onClick:I})],512),[[e.vShow,s.value]]),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.withDirectives(e.createElementVNode("div",{style:e.normalizeStyle({position:"absolute",top:R.value.y+"px",left:R.value.x+"px"}),class:"vuefinder vuefinder__breadcrumb__hidden-dropdown"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(g.value,(P,K)=>(e.openBlock(),e.createElementBlock("div",e.mergeProps({key:K},e.toHandlers(e.unref(S).events(P),!0),{onClick:X=>z(P),class:"vuefinder__breadcrumb__hidden-item"}),[e.createElementVNode("div",mi,[e.createElementVNode("span",null,[e.createVNode(e.unref(ae),{class:"vuefinder__breadcrumb__hidden-item-icon"})]),D[7]||(D[7]=e.createTextVNode()),e.createElementVNode("span",fi,e.toDisplayString(P.name),1)])],16,ui))),128))],4),[[e.vShow,_.value]])]))]))}});function _i(o,t){const{scrollContainer:n,itemWidth:r=100,rowHeight:l,overscan:d=2,containerPadding:i=48,lockItemsPerRow:m}=t,a=o,u=()=>typeof l=="number"?l:l.value,s=e.ref(0),c=e.ref(6),f=e.ref(600);let v=null;const _=e.computed(()=>Math.ceil(a.value.length/c.value)),y=e.computed(()=>_.value*u()),b=e.computed(()=>{const z=u(),U=Math.max(0,Math.floor(s.value/z)-d),L=Math.min(_.value,Math.ceil((s.value+f.value)/z)+d);return{start:U,end:L}}),k=e.computed(()=>{const{start:z,end:U}=b.value;return Array.from({length:U-z},(L,j)=>z+j)}),g=()=>f.value,p=()=>m.value,x=()=>{if(p()){c.value=1;return}if(n.value){const z=n.value.clientWidth-i;c.value=Math.max(Math.floor(z/r),2)}},S=z=>{const U=z.target;s.value=U.scrollTop};e.watch(()=>a.value.length,()=>{x()});const $=(z,U)=>{const L=U*c.value;return z.slice(L,L+c.value)},V=(z,U,L,j,E)=>{const B=[];for(let C=U;C<=L;C++)for(let I=j;I<=E;I++){const R=C*c.value+I;R<z.length&&z[R]&&B.push(z[R])}return B},M=z=>({row:Math.floor(z/c.value),col:z%c.value});return e.onMounted(async()=>{await e.nextTick(),n.value&&(f.value=n.value.clientHeight||600),x(),window.addEventListener("resize",()=>{n.value&&(f.value=n.value.clientHeight||600),x()}),n.value&&"ResizeObserver"in window&&(v=new ResizeObserver(z=>{const U=z[0];U&&(f.value=Math.round(U.contentRect.height)),x()}),v.observe(n.value))}),e.onUnmounted(()=>{window.removeEventListener("resize",x),v&&(v.disconnect(),v=null)}),{scrollTop:s,itemsPerRow:c,totalRows:_,totalHeight:y,visibleRange:b,visibleRows:k,updateItemsPerRow:x,handleScroll:S,getRowItems:$,getItemsInRange:V,getItemPosition:M,getContainerHeight:g}}function pi(o){const{getItemPosition:t,getItemsInRange:n,getKey:r,selectionObject:l,rowHeight:d,itemWidth:i}=o,m=Math.floor(Math.random()*2**32).toString(),u=e.inject("ServiceContainer").fs,s=T.useStore(u.selectedKeys),c=T.useStore(u.sortedFiles);T.useStore(u.selectedCount);const f=e.ref(new Set),v=e.ref(!1),_=e.ref(!1),y=e.ref(null),b=E=>E.map(B=>B.getAttribute("data-key")).filter(B=>!!B),k=E=>{E.selection.getSelection().forEach(B=>{E.selection.deselect(B,!0)})},g=E=>{s.value&&s.value.forEach(B=>{const C=document.querySelector(`[data-key="${B}"]`);C&&E.selection.select(C,!0)})},p=E=>{if(E.size===0)return null;const C=Array.from(E).map(D=>{const P=c.value?.findIndex(K=>r(K)===D)??-1;return t(P>=0?P:0)}),I=Math.min(...C.map(D=>D.row)),R=Math.max(...C.map(D=>D.row)),q=Math.min(...C.map(D=>D.col)),F=Math.max(...C.map(D=>D.col));return{minRow:I,maxRow:R,minCol:q,maxCol:F}},x=E=>{v.value=!1,!E.event?.metaKey&&!E.event?.ctrlKey&&(_.value=!0),E.selection.resolveSelectables(),k(E),g(E)},S=({event:E,selection:B})=>{const C=E;C&&"type"in C&&C.type==="touchend"&&C.preventDefault();const I=E;if(!I?.ctrlKey&&!I?.metaKey&&(u.clearSelection(),B.clearSelection(!0,!0)),f.value.clear(),I&&l.value){const R=l.value.getSelectables()[0]?.closest(".scroller-"+m);if(R){const q=R.getBoundingClientRect(),F=I.clientY-q.top+R.scrollTop,D=I.clientX-q.left,P=Math.floor(F/d.value),K=Math.floor(D/i);y.value={row:P,col:K}}}},$=E=>{const B=E.selection,C=b(E.store.changed.added),I=b(E.store.changed.removed);_.value=!1,v.value=!0,C.forEach(R=>{s.value&&!s.value.has(R)&&f.value.add(R),u.select(R)}),I.forEach(R=>{document.querySelector(`[data-key="${R}"]`)&&c.value?.find(F=>r(F)===R)&&f.value.delete(R),u.deselect(R)}),B.resolveSelectables(),g(E)},V=()=>{f.value.clear()},M=E=>{if(E.event&&y.value&&f.value.size>0){const C=Array.from(f.value).map(I=>{const R=c.value?.findIndex(q=>r(q)===I)??-1;return R>=0?t(R):null}).filter(I=>I!==null);if(C.length>0){const I=[...C,y.value],R={minRow:Math.min(...I.map(q=>q.row)),maxRow:Math.max(...I.map(q=>q.row)),minCol:Math.min(...I.map(q=>q.col)),maxCol:Math.max(...I.map(q=>q.col))};n(c.value||[],R.minRow,R.maxRow,R.minCol,R.maxCol).forEach(q=>{const F=r(q);document.querySelector(`[data-key="${F}"]`)||u.select(F)})}}},z=E=>{M(E),k(E),g(E),u.setSelectedCount(s.value?.size||0),v.value=!1,y.value=null},U=()=>{l.value=new pt({selectables:[".file-item-"+m],boundaries:[".scroller-"+m],selectionContainerClass:"selection-area-container",behaviour:{overlap:"invert",intersect:"touch",startThreshold:0,triggers:[0],scrolling:{speedDivider:10,manualSpeed:750,startScrollMargins:{x:0,y:10}}},features:{touch:!0,range:!0,deselectOnBlur:!0,singleTap:{allow:!1,intersect:"native"}}}),l.value.on("beforestart",x),l.value.on("start",S),l.value.on("move",$),l.value.on("stop",z)},L=()=>{l.value&&(l.value.destroy(),l.value=null)},j=E=>{_.value&&(l.value?.clearSelection(),V(),_.value=!1);const B=E;!f.value.size&&!_.value&&!B?.ctrlKey&&!B?.metaKey&&(u.clearSelection(),l.value?.clearSelection())};return e.onMounted(()=>{const E=B=>{!B.buttons&&v.value&&(v.value=!1)};document.addEventListener("dragleave",E),e.onUnmounted(()=>{document.removeEventListener("dragleave",E)})}),{isDragging:v,selectionStarted:_,explorerId:m,extractIds:b,cleanupSelection:k,refreshSelection:g,getSelectionRange:p,selectSelectionRange:M,initializeSelectionArea:U,destroySelectionArea:L,handleContentClick:j}}const hi={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 20 20"};function gi(o,t){return e.openBlock(),e.createElementBlock("svg",hi,[...t[0]||(t[0]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 0 1 1.414 0L10 10.586l3.293-3.293a1 1 0 1 1 1.414 1.414l-4 4a1 1 0 0 1-1.414 0l-4-4a1 1 0 0 1 0-1.414","clip-rule":"evenodd"},null,-1)])])}const ki={render:gi},wi={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 20 20"};function bi(o,t){return e.openBlock(),e.createElementBlock("svg",wi,[...t[0]||(t[0]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M14.707 12.707a1 1 0 0 1-1.414 0L10 9.414l-3.293 3.293a1 1 0 0 1-1.414-1.414l4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1 0 1.414","clip-rule":"evenodd"},null,-1)])])}const yi={render:bi},pe=e.defineComponent({__name:"SortIcon",props:{direction:{}},setup(o){return(t,n)=>(e.openBlock(),e.createElementBlock("div",null,[o.direction==="asc"?(e.openBlock(),e.createBlock(e.unref(ki),{key:0})):e.createCommentVNode("",!0),o.direction==="desc"?(e.openBlock(),e.createBlock(e.unref(yi),{key:1})):e.createCommentVNode("",!0)]))}}),Ei={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"absolute h-6 w-6 md:h-12 md:w-12 m-auto stroke-neutral-500 fill-white dark:fill-gray-700 dark:stroke-gray-600 z-10",viewBox:"0 0 24 24"};function Vi(o,t){return e.openBlock(),e.createElementBlock("svg",Ei,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 0 0 2-2V9.414a1 1 0 0 0-.293-.707l-5.414-5.414A1 1 0 0 0 12.586 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2"},null,-1)])])}const Ni={render:Vi},Si={class:"vuefinder__drag-item__container"},Bi={class:"vuefinder__drag-item__count"},Ci=e.defineComponent({__name:"DragItem",props:{count:{}},setup(o){const t=o;return(n,r)=>(e.openBlock(),e.createElementBlock("div",Si,[e.createVNode(e.unref(Ni)),e.createElementVNode("div",Bi,e.toDisplayString(t.count),1)]))}}),xi={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"text-neutral-500",viewBox:"0 0 24 24"};function $i(o,t){return e.openBlock(),e.createElementBlock("svg",xi,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 0 0 2-2V9.414a1 1 0 0 0-.293-.707l-5.414-5.414A1 1 0 0 0 12.586 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2"},null,-1)])])}const Di={render:$i},Ti={key:3,class:"vuefinder__item-icon__extension"},Pe=e.defineComponent({__name:"ItemIcon",props:{item:{},ext:{type:Boolean},small:{type:Boolean}},setup(o){const t=o,n=e.inject("ServiceContainer"),r=T.useStore(n.config.state),l=n.customIcon?.(n,r,t.item);return(d,i)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__item-icon",o.small?"vuefinder__item-icon--small":"vuefinder__item-icon--large"])},[e.unref(l)?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(l).is),e.normalizeProps(e.mergeProps({key:0},e.unref(l).props||{})),null,16)):o.item.type==="dir"?(e.openBlock(),e.createBlock(e.unref(ae),{key:1})):(e.openBlock(),e.createBlock(e.unref(Di),{key:2})),!e.unref(l)&&o.ext&&o.item.type!=="dir"&&o.item.extension?(e.openBlock(),e.createElementBlock("div",Ti,e.toDisplayString(o.item.extension.substring(0,3)),1)):e.createCommentVNode("",!0)],2))}}),Mi=["data-key","data-row","data-col","draggable"],Fi={key:0},Ai={class:"vuefinder__explorer__item-grid-content"},Li=["data-src","alt"],Ii={class:"vuefinder__explorer__item-title"},Ri={key:1,class:"vuefinder__explorer__item-list-content"},zi={class:"vuefinder__explorer__item-list-name"},Pi={class:"vuefinder__explorer__item-list-icon"},Hi={class:"vuefinder__explorer__item-name"},qi={key:0,class:"vuefinder__explorer__item-path"},Ui={key:1,class:"vuefinder__explorer__item-size"},Oi={key:0},ji={key:2,class:"vuefinder__explorer__item-date"},Ki=e.defineComponent({__name:"FileItem",props:{item:{},view:{},compact:{type:Boolean},showThumbnails:{type:Boolean},isSelected:{type:Boolean},isDragging:{type:Boolean},rowIndex:{},colIndex:{},showPath:{type:Boolean},explorerId:{}},emits:["click","dblclick","contextmenu","dragstart","dragend"],setup(o,{emit:t}){const n=o,r=t,l=e.inject("ServiceContainer"),d=l.fs,i=l.config,m=e.computed(()=>["file-item-"+n.explorerId,n.view==="grid"?"vf-explorer-item-grid":"vf-explorer-item-list",n.isSelected?"vf-explorer-selected":""]),a=e.computed(()=>({opacity:n.isDragging||d.isCut(n.item.path)?.5:""}));let u=null;const s=e.ref(null);let c=!1;const f=()=>{u&&clearTimeout(u),v.value=!0},v=e.ref(!0),_=y=>{if(v.value=!1,u&&(y.preventDefault(),clearTimeout(u)),!c)c=!0,r("click",y),s.value=setTimeout(()=>{c=!1},300);else return c=!1,r("dblclick",y),u&&clearTimeout(u),!1;if(y.currentTarget&&y.currentTarget instanceof HTMLElement){const b=y.currentTarget.getBoundingClientRect();y.preventDefault(),u=setTimeout(()=>{let p=b.y+b.height;p+146>window.innerHeight-10&&(p=b.y-146),p<10&&(p=10);const x=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!0,view:window,button:2,buttons:0,clientX:b.x,clientY:p});y.target?.dispatchEvent(x)},300)}};return(y,b)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(m.value),style:e.normalizeStyle(a.value),"data-key":o.item.path,"data-row":o.rowIndex,"data-col":o.colIndex,draggable:v.value,onTouchstart:b[1]||(b[1]=k=>_(k)),onTouchend:b[2]||(b[2]=k=>f()),onClick:b[3]||(b[3]=k=>r("click",k)),onDblclick:b[4]||(b[4]=k=>r("dblclick",k)),onContextmenu:b[5]||(b[5]=e.withModifiers(k=>r("contextmenu",k),["prevent","stop"])),onDragstart:b[6]||(b[6]=k=>r("dragstart",k)),onDragend:b[7]||(b[7]=k=>r("dragend",k))},[o.view==="grid"?(e.openBlock(),e.createElementBlock("div",Fi,[e.createElementVNode("div",Ai,[(o.item.mime_type??"").startsWith("image")&&o.showThumbnails?(e.openBlock(),e.createElementBlock("img",{key:0,onTouchstart:b[0]||(b[0]=k=>k.preventDefault()),src:"data:image/png;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",class:"vuefinder__explorer__item-thumbnail lazy","data-src":e.unref(l).requester.getPreviewUrl(o.item.storage,o.item),alt:o.item.basename},null,40,Li)):(e.openBlock(),e.createBlock(Pe,{key:1,item:o.item,ext:!0},null,8,["item"]))]),e.createElementVNode("span",Ii,e.toDisplayString(e.unref(Se)(o.item.basename)),1)])):(e.openBlock(),e.createElementBlock("div",Ri,[e.createElementVNode("div",zi,[e.createElementVNode("div",Pi,[e.createVNode(Pe,{item:o.item,small:o.compact},null,8,["item","small"])]),e.createElementVNode("span",Hi,e.toDisplayString(o.item.basename),1)]),o.showPath?(e.openBlock(),e.createElementBlock("div",qi,e.toDisplayString(o.item.path),1)):e.createCommentVNode("",!0),o.showPath?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",Ui,[o.item.file_size?(e.openBlock(),e.createElementBlock("div",Oi,e.toDisplayString(e.unref(l).filesize(o.item.file_size)),1)):e.createCommentVNode("",!0)])),!o.showPath&&o.item.last_modified?(e.openBlock(),e.createElementBlock("div",ji,e.toDisplayString(new Date(o.item.last_modified*1e3).toLocaleString()),1)):e.createCommentVNode("",!0)])),e.unref(i).get("pinnedFolders").find(k=>k.path===o.item.path)?(e.openBlock(),e.createBlock(e.unref(De),{key:2,class:"vuefinder__item--pinned"})):e.createCommentVNode("",!0)],46,Mi))}}),Gi=["data-row"],Ne=e.defineComponent({__name:"FileRow",props:{rowIndex:{},rowHeight:{},view:{},itemsPerRow:{},items:{},compact:{type:Boolean},showThumbnails:{type:Boolean},showPath:{type:Boolean},isDraggingItem:{type:Function},isSelected:{type:Function},dragNDropEvents:{type:Function},explorerId:{}},emits:["click","dblclick","contextmenu","dragstart","dragend"],setup(o,{emit:t}){const n=o,r=t,l=e.computed(()=>[n.view==="grid"?"vf-explorer-item-grid-row":"vf-explorer-item-list-row","pointer-events-none"]),d=e.computed(()=>({position:"absolute",top:0,left:0,width:"100%",height:`${n.rowHeight}px`,transform:`translateY(${n.rowIndex*n.rowHeight}px)`})),i=e.computed(()=>n.view==="grid"?{gridTemplateColumns:`repeat(${n.itemsPerRow||1}, 1fr)`}:{gridTemplateColumns:"1fr"});return(m,a)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(l.value),"data-row":o.rowIndex,style:e.normalizeStyle(d.value)},[e.createElementVNode("div",{class:e.normalizeClass(["grid justify-self-start",{"w-full":o.view==="list"}]),style:e.normalizeStyle(i.value)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.items,(u,s)=>(e.openBlock(),e.createBlock(Ki,e.mergeProps({key:u.path,item:u,view:o.view,compact:o.compact,"show-thumbnails":o.showThumbnails,"show-path":o.showPath,"is-selected":o.isSelected(u.path),"is-dragging":o.isDraggingItem(u.path),"row-index":o.rowIndex,"col-index":s},e.toHandlers(o.dragNDropEvents(u)),{onClick:a[0]||(a[0]=c=>r("click",c)),onDblclick:a[1]||(a[1]=c=>r("dblclick",c)),onContextmenu:a[2]||(a[2]=c=>r("contextmenu",c)),onDragstart:a[3]||(a[3]=c=>r("dragstart",c)),onDragend:a[4]||(a[4]=c=>r("dragend",c)),explorerId:o.explorerId}),null,16,["item","view","compact","show-thumbnails","show-path","is-selected","is-dragging","row-index","col-index","explorerId"]))),128))],6)],14,Gi))}}),Yi=["onClick"],Wi=e.defineComponent({__name:"Toast",setup(o){const t=e.inject("ServiceContainer"),{getStore:n}=t.storage,r=e.ref(n("full-screen",!1)),l=e.ref([]),d=a=>a==="error"?"text-red-400 border-red-400 dark:text-red-300 dark:border-red-300":"text-lime-600 border-lime-600 dark:text-lime-300 dark:border-lime-1300",i=a=>{l.value.splice(a,1)},m=a=>{let u=l.value.findIndex(s=>s.id===a);u!==-1&&i(u)};return t.emitter.on("vf-toast-clear",()=>{l.value=[]}),t.emitter.on("vf-toast-push",a=>{let u=new Date().getTime().toString(36).concat(performance.now().toString(),Math.random().toString()).replace(/\./g,"");a.id=u,l.value.push(a),setTimeout(()=>{m(u)},5e3)}),(a,u)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__toast",r.value.value?"vuefinder__toast--fixed":"vuefinder__toast--absolute"])},[e.createVNode(e.TransitionGroup,{name:"vuefinder__toast-item","enter-active-class":"vuefinder__toast-item--enter-active","leave-active-class":"vuefinder__toast-item--leave-active","leave-to-class":"vuefinder__toast-item--leave-to"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,(s,c)=>(e.openBlock(),e.createElementBlock("div",{key:c,onClick:f=>i(c),class:e.normalizeClass(["vuefinder__toast__message",d(s.type)])},e.toDisplayString(s.label),11,Yi))),128))]),_:1})],2))}}),Qi={class:"vuefinder__explorer__container"},Xi={ref:"customScrollBar",class:"vuefinder__explorer__scrollbar"},Ji={key:0,class:"vuefinder__explorer__header"},Zi={key:0,class:"vuefinder__linear-loader"},ec=e.defineComponent({__name:"Explorer",setup(o){const t=e.inject("ServiceContainer"),n=ie(t,["bg-blue-200","dark:bg-slate-600"]),r=e.useTemplateRef("dragImage"),l=e.shallowRef(null),d=e.useTemplateRef("scrollContainer"),i=e.useTemplateRef("scrollContent"),m=t.search,a=t.fs,u=t.config,s=T.useStore(u.state),c=T.useStore(m.state),f=T.useStore(a.sort),v=T.useStore(a.sortedFiles),_=T.useStore(a.selectedKeys),y=T.useStore(a.loading),b=h=>_.value?.has(h)??!1;let k=null;const g=e.ref(null),p=e.useTemplateRef("customScrollBar"),x=e.useTemplateRef("customScrollBarContainer"),S=e.computed(()=>{const h=s.value.view,w=s.value.compactListView;return h==="grid"&&!(c.value.searchMode&&c.value.query.length)?88:w?24:50}),{t:$}=t.i18n,{itemsPerRow:V,totalHeight:M,visibleRows:z,handleScroll:U,getRowItems:L,getItemsInRange:j,getItemPosition:E,updateItemsPerRow:B}=_i(e.computed(()=>v.value??[]),{scrollContainer:d,itemWidth:104,rowHeight:S,overscan:2,containerPadding:0,lockItemsPerRow:e.computed(()=>s.value.view==="list"||!!c.value.query.length)}),{explorerId:C,isDragging:I,initializeSelectionArea:R,destroySelectionArea:q,handleContentClick:F}=pi({getItemPosition:E,getItemsInRange:j,getKey:h=>h.path,selectionObject:l,rowHeight:S,itemWidth:104}),D=e.ref(null),P=h=>{if(!h||!D.value)return!1;const w=_.value?.has(D.value)??!1;return I.value&&(w?_.value?.has(h)??!1:h===D.value)};e.watch(()=>u.get("view"),h=>{h==="list"?V.value=1:B()},{immediate:!0}),e.watch(V,h=>{u.get("view")==="list"&&h!==1&&(V.value=1)});const K=h=>v.value?.[h];e.onMounted(()=>{if(R(),l.value&&l.value.on("beforestart",({event:h})=>{const w=h?.target===i.value;if(!h?.metaKey&&!h?.ctrlKey&&!h?.altKey&&!w)return!1}),d.value&&(k=new He({elements_selector:".lazy",container:d.value})),e.watch(()=>c.value.query,h=>{const w=a.path.get().storage,N=a.path.get().path;!w||!N||h&&t.emitter.emit("vf-fetch",{params:{q:"search",storage:w,path:N,filter:h},onSuccess:A=>{A.files.length||t.emitter.emit("vf-toast-push",{label:$("No search result found.")})}})}),x.value){const h=Be.OverlayScrollbars(x.value,{scrollbars:{theme:"vf-scrollbars-theme"}},{initialized:w=>{g.value=w},scroll:w=>{const{scrollOffsetElement:N}=w.elements();d.value&&d.value.scrollTo({top:N.scrollTop,left:0})}});g.value=h}d.value&&d.value.addEventListener("scroll",()=>{const h=g.value;if(!h)return;const{scrollOffsetElement:w}=h.elements();w.scrollTo({top:d.value.scrollTop,left:0})})}),e.onMounted(()=>{t.emitter.on("vf-refresh-thumbnails",()=>{k&&k.update()})}),e.onUpdated(()=>{if(k&&k.update(),g.value&&p.value&&d.value){const w=d.value.scrollHeight>d.value.clientHeight,N=p.value;N.style.display=w?"block":"none",N.style.height=`${M.value}px`}}),e.onUnmounted(()=>{q(),k&&(k.destroy(),k=null),g.value&&(g.value.destroy(),g.value=null)});const X=h=>{const w=h.target?.closest(".file-item-"+C),N=h;if(w){const A=String(w.getAttribute("data-key"));!N?.ctrlKey&&!N?.metaKey&&(h.type!=="touchstart"||!a.isSelected(A))&&(a.clearSelection(),l.value?.clearSelection(!0,!0)),l.value?.resolveSelectables(),h.type==="touchstart"&&a.isSelected(A)?a.select(A):a.toggleSelect(A)}a.setSelectedCount(_.value?.size||0)},re=h=>{const w=t.contextMenuItems.find(N=>N.show(t,{searchQuery:"",items:[h],target:h}));w&&w.action(t,[h])},ne=h=>{const w=h.target?.closest(".file-item-"+C),N=w?String(w.getAttribute("data-key")):null;if(!N)return;const A=v.value?.find(ee=>ee.path===N);A&&re(A)},_e=()=>{const h=_.value;return v.value?.filter(w=>h?.has(w.path))||[]},ce=h=>{h.preventDefault();const w=h.target?.closest(".file-item-"+C);if(w){const N=String(w.getAttribute("data-key")),A=v.value?.find(ee=>ee.path===N);_.value?.has(N)||(a.clearSelection(),a.select(N)),t.emitter.emit("vf-contextmenu-show",{event:h,items:_e(),target:A})}},be=h=>{h.preventDefault(),t.emitter.emit("vf-contextmenu-show",{event:h,items:_e()})},de=h=>{if(h.altKey||h.ctrlKey||h.metaKey)return h.preventDefault(),!1;I.value=!0;const w=h.target?.closest(".file-item-"+C);if(D.value=w?String(w.dataset.key):null,h.dataTransfer&&D.value){h.dataTransfer.setDragImage(r.value,0,15),h.dataTransfer.effectAllowed="all",h.dataTransfer.dropEffect="copy";const N=_.value?.has(D.value)?Array.from(_.value):[D.value];h.dataTransfer.setData("items",JSON.stringify(N)),a.setDraggedItem(D.value)}},ue=()=>{D.value=null};return(h,w)=>(e.openBlock(),e.createElementBlock("div",Qi,[e.createElementVNode("div",{ref:"customScrollBarContainer",class:e.normalizeClass(["vuefinder__explorer__scrollbar-container",[{"grid-view":e.unref(s).view==="grid"},{"search-active":e.unref(c).hasQuery}]])},[e.createElementVNode("div",Xi,null,512)],2),e.unref(s).view==="list"||e.unref(c).hasQuery?(e.openBlock(),e.createElementBlock("div",Ji,[e.createElementVNode("div",{onClick:w[0]||(w[0]=N=>e.unref(a).toggleSort("basename")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--name vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref($)("Name"))+" ",1),e.withDirectives(e.createVNode(pe,{direction:e.unref(f).order},null,8,["direction"]),[[e.vShow,e.unref(f).active&&e.unref(f).column==="basename"]])]),e.unref(c).hasQuery?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,onClick:w[1]||(w[1]=N=>e.unref(a).toggleSort("file_size")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--size vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref($)("Size"))+" ",1),e.withDirectives(e.createVNode(pe,{direction:e.unref(f).order},null,8,["direction"]),[[e.vShow,e.unref(f).active&&e.unref(f).column==="file_size"]])])),e.unref(c).hasQuery?(e.openBlock(),e.createElementBlock("div",{key:1,onClick:w[2]||(w[2]=N=>e.unref(a).toggleSort("path")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--path vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref($)("Filepath"))+" ",1),e.withDirectives(e.createVNode(pe,{direction:e.unref(f).order},null,8,["direction"]),[[e.vShow,e.unref(f).active&&e.unref(f).column==="path"]])])):e.createCommentVNode("",!0),e.unref(c).hasQuery?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:2,onClick:w[3]||(w[3]=N=>e.unref(a).toggleSort("last_modified")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--date vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref($)("Date"))+" ",1),e.withDirectives(e.createVNode(pe,{direction:e.unref(f).order},null,8,["direction"]),[[e.vShow,e.unref(f).active&&e.unref(f).column==="last_modified"]])]))])):e.createCommentVNode("",!0),e.createElementVNode("div",{ref_key:"scrollContainer",ref:d,class:e.normalizeClass(["vuefinder__explorer__selector-area","scroller-"+e.unref(C)]),onScroll:w[5]||(w[5]=(...N)=>e.unref(U)&&e.unref(U)(...N))},[e.unref(u).get("loadingIndicator")==="linear"&&e.unref(y)?(e.openBlock(),e.createElementBlock("div",Zi)):e.createCommentVNode("",!0),e.createElementVNode("div",{ref_key:"scrollContent",ref:i,class:"scrollContent min-h-full",style:e.normalizeStyle({height:`${e.unref(M)}px`,position:"relative",width:"100%"}),onContextmenu:e.withModifiers(be,["self","prevent"]),onClick:w[4]||(w[4]=e.withModifiers((...N)=>e.unref(F)&&e.unref(F)(...N),["self"]))},[e.createElementVNode("div",{ref_key:"dragImage",ref:r,class:"vuefinder__explorer__drag-item"},[e.createVNode(Ci,{count:D.value&&e.unref(_)?.has(D.value)?e.unref(_)?.size:1},null,8,["count"])],512),e.unref(c).query.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(e.unref(z),N=>(e.openBlock(),e.createBlock(Ne,{key:N,"row-index":N,"row-height":S.value,view:"list",items:K(N)?[K(N)]:[],compact:e.unref(s).compactListView,"show-path":!0,"is-dragging-item":P,"is-selected":b,"drag-n-drop-events":A=>e.unref(n).events(A),explorerId:e.unref(C),onClick:X,onDblclick:ne,onContextmenu:ce,onDragstart:de,onDragend:ue},null,8,["row-index","row-height","items","compact","drag-n-drop-events","explorerId"]))),128)):e.unref(s).view==="grid"?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(e.unref(z),N=>(e.openBlock(),e.createBlock(Ne,{key:N,"row-index":N,"row-height":S.value,view:"grid","items-per-row":e.unref(V),items:e.unref(L)(e.unref(v),N),"show-thumbnails":e.unref(s).showThumbnails,"is-dragging-item":P,"is-selected":b,"drag-n-drop-events":A=>e.unref(n).events(A),explorerId:e.unref(C),onClick:X,onDblclick:ne,onContextmenu:ce,onDragstart:de,onDragend:ue},null,8,["row-index","row-height","items-per-row","items","show-thumbnails","drag-n-drop-events","explorerId"]))),128)):(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:2},e.renderList(e.unref(z),N=>(e.openBlock(),e.createBlock(Ne,{key:N,"row-index":N,"row-height":S.value,view:"list",items:K(N)?[K(N)]:[],compact:e.unref(s).compactListView,"is-dragging-item":P,"is-selected":b,"drag-n-drop-events":A=>e.unref(n).events(A),explorerId:e.unref(C),onClick:X,onDblclick:ne,onContextmenu:ce,onDragstart:de,onDragend:ue},null,8,["row-index","row-height","items","compact","drag-n-drop-events","explorerId"]))),128))],36)],34),e.createVNode(Wi)]))}}),tc=["href","download"],nc=["onClick"],oc=e.defineComponent({__name:"ContextMenu",setup(o){const t=e.inject("ServiceContainer"),n=t.search,r=T.useStore(n.state),l=e.ref(null),d=e.ref([]),i=e.reactive({active:!1,items:[],positions:{left:"0px",top:"0px"}});t.emitter.on("vf-context-selected",s=>{d.value=s});const m=s=>s.link(t,d.value),a=s=>{t.emitter.emit("vf-contextmenu-hide"),s.action(t,d.value)};t.emitter.on("vf-contextmenu-show",({event:s,items:c,target:f=null})=>{if(i.items=t.contextMenuItems.filter(v=>v.show(t,{searchQuery:r.value.query,items:c,target:f})),r.value.query)if(f)t.emitter.emit("vf-context-selected",[f]);else return;else!f&&!r.value.query?t.emitter.emit("vf-context-selected",[]):c.length>1&&c.some(v=>v.path===f.path)?t.emitter.emit("vf-context-selected",c):t.emitter.emit("vf-context-selected",[f]);u(s)}),t.emitter.on("vf-contextmenu-hide",()=>{i.active=!1});const u=s=>{const c=t.root,f=t.root.getBoundingClientRect(),v=c.getBoundingClientRect();let _=s.clientX-f.left,y=s.clientY-f.top;i.active=!0,e.nextTick(()=>{const b=l.value?.getBoundingClientRect();let k=b?.height??0,g=b?.width??0;_=v.right-s.pageX+window.scrollX<g?_-g:_,y=v.bottom-s.pageY+window.scrollY<k?y-k:y,i.positions={left:String(_)+"px",top:String(y)+"px"}})};return(s,c)=>e.withDirectives((e.openBlock(),e.createElementBlock("ul",{ref_key:"contextmenu",ref:l,class:e.normalizeClass([i.active?"vuefinder__context-menu--active":"vuefinder__context-menu--inactive","vuefinder__context-menu"]),style:e.normalizeStyle(i.positions)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.items,f=>(e.openBlock(),e.createElementBlock("li",{class:"vuefinder__context-menu__item",key:f.title},[f.link?(e.openBlock(),e.createElementBlock("a",{key:0,class:"vuefinder__context-menu__link",target:"_blank",href:m(f),download:m(f),onClick:c[0]||(c[0]=v=>e.unref(t).emitter.emit("vf-contextmenu-hide"))},[e.createElementVNode("span",null,e.toDisplayString(f.title(e.unref(t).i18n)),1)],8,tc)):(e.openBlock(),e.createElementBlock("div",{key:1,class:"vuefinder__context-menu__action",onClick:v=>a(f)},[e.createElementVNode("span",null,e.toDisplayString(f.title(e.unref(t).i18n)),1)],8,nc))]))),128))],6)),[[e.vShow,i.active]])}}),rc={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"2",class:"h-5 w-5 stroke-slate-500 cursor-pointer",viewBox:"0 0 24 24"};function lc(o,t){return e.openBlock(),e.createElementBlock("svg",rc,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0"},null,-1)])])}const ac={render:lc},sc={class:"vuefinder__status-bar__wrapper"},ic={class:"vuefinder__status-bar__storage"},cc=["title"],dc={class:"vuefinder__status-bar__storage-icon"},uc=["value"],mc=["value"],fc={class:"vuefinder__status-bar__info space-x-2"},vc={key:0},_c={key:1},pc={key:0,class:"vuefinder__status-bar__size"},hc={class:"vuefinder__status-bar__actions"},gc=["title"],kc=e.defineComponent({__name:"Statusbar",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,r=t.fs,l=t.search;T.useStore(l.state),T.useStore(l.hasQuery);const d=T.useStore(r.sortedFiles),i=T.useStore(r.path),m=T.useStore(r.selectedCount),a=T.useStore(r.storages),u=T.useStore(r.selectedItems),s=T.useStore(r.path),c=v=>{const _=v.target.value;t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",storage:_}})},f=e.computed(()=>!u.value||u.value.length===0?0:u.value.reduce((v,_)=>v+(_.file_size||0),0));return(v,_)=>(e.openBlock(),e.createElementBlock("div",sc,[e.createElementVNode("div",ic,[e.createElementVNode("div",{class:"vuefinder__status-bar__storage-container",title:e.unref(n)("Storage")},[e.createElementVNode("div",dc,[e.createVNode(e.unref(he))]),e.createElementVNode("select",{name:"vuefinder-media-selector",value:e.unref(i)?.storage,onChange:c,class:"vuefinder__status-bar__storage-select",tabindex:"-1"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a),y=>(e.openBlock(),e.createElementBlock("option",{value:y,key:y},e.toDisplayString(y),9,mc))),128))],40,uc)],8,cc),e.createElementVNode("div",fc,[e.unref(m)===0?(e.openBlock(),e.createElementBlock("span",vc,e.toDisplayString(e.unref(d).length)+" "+e.toDisplayString(e.unref(n)("items")),1)):(e.openBlock(),e.createElementBlock("span",_c,[e.createTextVNode(e.toDisplayString(e.unref(m))+" "+e.toDisplayString(e.unref(n)("selected"))+" ",1),f.value?(e.openBlock(),e.createElementBlock("span",pc,e.toDisplayString(e.unref(t).filesize(f.value)),1)):e.createCommentVNode("",!0)]))])]),e.createElementVNode("div",hc,[e.renderSlot(v.$slots,"actions",{path:e.unref(s).path,count:e.unref(m)||0,selected:e.unref(u)||[]}),e.createElementVNode("span",{class:"vuefinder__status-bar__about",title:e.unref(n)("About"),onClick:_[0]||(_[0]=y=>e.unref(t).modal.open(Ce))},[e.createVNode(e.unref(ac))],8,gc)])]))}}),wc={class:"vuefinder__treeview__header"},bc={class:"vuefinder__treeview__pinned-label"},yc={class:"vuefinder__treeview__pin-text text-nowrap"},Ec={key:0,class:"vuefinder__treeview__pinned-list"},Vc=["onClick"],Nc=["title"],Sc=["onClick"],Bc={key:0},Cc={class:"vuefinder__treeview__no-pinned"},xc=e.defineComponent({__name:"TreeView",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,{getStore:r,setStore:l}=t.storage,d=t.fs,i=t.config,m=T.useStore(i.state),a=T.useStore(d.sortedFiles),u=T.useStore(d.path),s=ie(t,["bg-blue-200","dark:bg-slate-600"]),c=e.ref(190),f=e.ref(r("pinned-folders-opened",!0));e.watch(f,b=>l("pinned-folders-opened",b));const v=b=>{i.set("pinnedFolders",i.get("pinnedFolders").filter(k=>k.path!==b.path))},_=b=>{const k=b.clientX,g=b.target.parentElement;if(!g)return;const p=g.getBoundingClientRect().width;g.classList.remove("transition-[width]"),g.classList.add("transition-none");const x=$=>{c.value=p+$.clientX-k,c.value<50&&(c.value=0,i.set("showTreeView",!1)),c.value>50&&i.set("showTreeView",!0)},S=()=>{const $=g.getBoundingClientRect();c.value=$.width,g.classList.add("transition-[width]"),g.classList.remove("transition-none"),window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",S)};window.addEventListener("mousemove",x),window.addEventListener("mouseup",S)},y=e.ref(null);return e.onMounted(()=>{y.value&&Be.OverlayScrollbars(y.value,{overflow:{x:"hidden"},scrollbars:{theme:"vf-theme-dark dark:vf-theme-light"}})}),e.watch(a,b=>{const k=b.filter(g=>g.type==="dir");Me(t.treeViewData,{path:u.value?.path||"",folders:k.map(g=>({storage:g.storage,path:g.path,basename:g.basename,type:"dir"}))})}),(b,k)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",{onClick:k[0]||(k[0]=g=>e.unref(i).toggle("showTreeView")),class:e.normalizeClass(["vuefinder__treeview__overlay",e.unref(m).showTreeView?"vuefinder__treeview__backdrop":"hidden"])},null,2),e.createElementVNode("div",{style:e.normalizeStyle(e.unref(m).showTreeView?"min-width:100px;max-width:75%; width: "+c.value+"px":"width: 0"),class:"vuefinder__treeview__container"},[e.createElementVNode("div",{ref_key:"treeViewScrollElement",ref:y,class:"vuefinder__treeview__scroll"},[e.createElementVNode("div",wc,[e.createElementVNode("div",{onClick:k[2]||(k[2]=g=>f.value=!f.value),class:"vuefinder__treeview__pinned-toggle"},[e.createElementVNode("div",bc,[e.createVNode(e.unref(De),{class:"vuefinder__treeview__pin-icon"}),e.createElementVNode("div",yc,e.toDisplayString(e.unref(n)("Pinned Folders")),1)]),e.createVNode(Je,{modelValue:f.value,"onUpdate:modelValue":k[1]||(k[1]=g=>f.value=g)},null,8,["modelValue"])]),f.value?(e.openBlock(),e.createElementBlock("ul",Ec,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(m).pinnedFolders,g=>(e.openBlock(),e.createElementBlock("li",{key:g.path,class:"vuefinder__treeview__pinned-item"},[e.createElementVNode("div",e.mergeProps(e.toHandlers(e.unref(s).events(g),!0),{class:"vuefinder__treeview__pinned-folder",onClick:p=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",storage:g.storage,path:g.path}})}),[e.unref(u)?.path!==g.path?(e.openBlock(),e.createBlock(e.unref(ae),{key:0,class:"vuefinder__treeview__folder-icon"})):e.createCommentVNode("",!0),e.unref(u)?.path===g.path?(e.openBlock(),e.createBlock(e.unref($e),{key:1,class:"vuefinder__treeview__open-folder-icon"})):e.createCommentVNode("",!0),e.createElementVNode("div",{title:g.path,class:e.normalizeClass(["vuefinder__treeview__folder-name",{"vuefinder__treeview__folder-name--active":e.unref(u)?.path===g.path}])},e.toDisplayString(g.basename),11,Nc)],16,Vc),e.createElementVNode("div",{class:"vuefinder__treeview__remove-folder",onClick:p=>v(g)},[e.createVNode(e.unref(Ge),{class:"vuefinder__treeview__remove-icon"})],8,Sc)]))),128)),e.unref(m).pinnedFolders.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("li",Bc,[e.createElementVNode("div",Cc,e.toDisplayString(e.unref(n)("No folders pinned")),1)]))])):e.createCommentVNode("",!0)]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(d).storages.get(),g=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__treeview__storage",key:g},[e.createVNode(Xe,{storage:g},null,8,["storage"])]))),128))],512),e.createElementVNode("div",{onMousedown:_,class:"vuefinder__treeview__resize-handle"},null,32)],4)],64))}}),W={newfolder:"newfolder",selectAll:"selectAll",pinFolder:"pinFolder",unpinFolder:"unpinFolder",delete:"delete",refresh:"refresh",preview:"preview",open:"open",openDir:"openDir",download:"download",download_archive:"download_archive",archive:"archive",unarchive:"unarchive",rename:"rename",move:"move",copy:"copy"};function $c(o){return o.items.length>1&&o.items.some(t=>t.path===o.target?.path)?"many":o.target?"one":"none"}function G(o){const t=Object.assign({needsSearchQuery:!1},o);return(n,r)=>!(t.needsSearchQuery!==!!r.searchQuery||t.target!==void 0&&t.target!==$c(r)||t.targetType!==void 0&&t.targetType!==r.target?.type||t.mimeType!==void 0&&t.mimeType!==r.target?.mime_type||t.feature!==void 0&&!n.features.includes(t.feature))}function fe(...o){return(t,n)=>o.some(r=>r(t,n))}function ve(...o){return(t,n)=>o.every(r=>r(t,n))}const st=[{id:W.openDir,title:({t:o})=>o("Open containing folder"),action:(o,t)=>{const n=t[0];n&&(o.emitter.emit("vf-fetch",{params:{q:"index",storage:n.storage,path:n.dir}}),o.search.setQuery("",!0))},show:G({target:"one",needsSearchQuery:!0})},{id:W.refresh,title:({t:o})=>o("Refresh"),action:o=>{const t=o.fs;o.emitter.emit("vf-fetch",{params:{q:"index",storage:t.path.get().storage,path:t.path.get().path}})},show:fe(G({target:"none"}),G({target:"many"}))},{id:W.selectAll,title:({t:o})=>o("Select All"),action:o=>{o.fs.selectAll()},show:G({target:"none"})},{id:W.newfolder,title:({t:o})=>o("New Folder"),action:o=>o.modal.open(Ae),show:G({target:"none",feature:H.NEW_FOLDER})},{id:W.open,title:({t:o})=>o("Open"),action:(o,t)=>{o.emitter.emit("vf-search-exit"),t[0]&&o.emitter.emit("vf-fetch",{params:{q:"index",storage:t[0].storage,path:t[0].path}})},show:G({target:"one",targetType:"dir"})},{id:W.pinFolder,title:({t:o})=>o("Pin Folder"),action:(o,t)=>{const n=o.config,r=n.get("pinnedFolders"),l=r.concat(t.filter(d=>r.findIndex(i=>i.path===d.path)===-1));n.set("pinnedFolders",l)},show:ve(G({target:"one",targetType:"dir"}),(o,t)=>o.config.get("pinnedFolders").findIndex(l=>l.path===t.target?.path)===-1)},{id:W.unpinFolder,title:({t:o})=>o("Unpin Folder"),action:(o,t)=>{const n=o.config,r=n.get("pinnedFolders");n.set("pinnedFolders",r.filter(l=>!t.find(d=>d.path===l.path)))},show:ve(G({target:"one",targetType:"dir"}),(o,t)=>o.config.get("pinnedFolders").findIndex(l=>l.path===t.target?.path)!==-1)},{id:W.preview,title:({t:o})=>o("Preview"),action:(o,t)=>o.modal.open(xe,{storage:t[0]?.storage,item:t[0]}),show:ve(G({target:"one",feature:H.PREVIEW}),(o,t)=>t.target?.type!=="dir")},{id:W.download,link:(o,t)=>o.requester.getDownloadUrl(t[0]?.storage,t[0]),title:({t:o})=>o("Download"),action:()=>{},show:ve(G({target:"one",feature:H.DOWNLOAD}),(o,t)=>t.target?.type!=="dir")},{id:W.rename,title:({t:o})=>o("Rename"),action:(o,t)=>o.modal.open(ke,{items:t}),show:G({target:"one",feature:H.RENAME})},{id:W.move,title:({t:o})=>o("Move"),action:(o,t)=>{const n=o.fs,r={storage:n.path.get().storage||"",path:n.path.get().path||"",type:"dir"};o.modal.open(we,{items:{from:t,to:r}})},show:fe(G({target:"one",feature:H.MOVE}),G({target:"many",feature:H.MOVE}))},{id:W.copy,title:({t:o})=>o("Copy"),action:(o,t)=>{const n=o.fs,r={storage:n.path.get().storage||"",path:n.path.get().path||"",type:"dir"};o.modal.open(Fe,{items:{from:t,to:r}})},show:fe(G({target:"one",feature:H.COPY}),G({target:"many",feature:H.COPY}))},{id:W.archive,title:({t:o})=>o("Archive"),action:(o,t)=>o.modal.open(Ie,{items:t}),show:fe(G({target:"many",feature:H.ARCHIVE}),ve(G({target:"one",feature:H.ARCHIVE}),(o,t)=>t.target?.mime_type!=="application/zip"))},{id:W.unarchive,title:({t:o})=>o("Unarchive"),action:(o,t)=>o.modal.open(Le,{items:t}),show:G({target:"one",feature:H.UNARCHIVE,mimeType:"application/zip"})},{id:W.delete,title:({t:o})=>o("Delete"),action:(o,t)=>{o.modal.open(ge,{items:t})},show:fe(G({feature:H.DELETE,target:"one"}),G({feature:H.DELETE,target:"many"}))}],Dc={class:"vuefinder",ref:"root",tabindex:"0"},Tc={class:"vuefinder__main__content"},it=e.defineComponent({__name:"VueFinder",props:{id:{default:"vf"},request:{},persist:{type:Boolean,default:!1},path:{default:""},features:{type:[Boolean,Array],default:!0},debug:{type:Boolean,default:!1},theme:{default:"system"},locale:{default:void 0},maxHeight:{},maxFileSize:{default:"10mb"},fullScreen:{type:Boolean,default:!1},showTreeView:{type:Boolean,default:!1},pinnedFolders:{default:()=>[]},showThumbnails:{type:Boolean,default:!0},loadingIndicator:{default:"linear"},contextMenuItems:{default:()=>st},onError:{},onSelect:{},icon:{}},emits:["select","path-update"],setup(o,{emit:t}){const n=t,r=o,l=Dt(r,e.inject("VueFinderOptions"));e.provide("ServiceContainer",l);const d=l.config,i=l.fs,m=T.useStore(d.state);El(l);let a=null;l.emitter.on("vf-fetch-abort",()=>{a&&a.abort(),i.setLoading(!1)}),l.emitter.on("vf-fetch",({params:s,body:c=null,onSuccess:f=null,onError:v=null,noCloseModal:_=!1})=>{["index","search"].includes(s.q)&&(a&&a.abort(),i.setLoading(!0)),a=new AbortController;const y=a.signal;l.requester.send({url:"",method:s.m||"get",params:s,body:c,abortSignal:y}).then(b=>{i.setPath(b.dirname),d.get("persist")&&d.set("path",b.dirname),_||l.modal.close(),i.setFiles(b.files),i.clearSelection(),i.setSelectedCount(0),i.setStorages(b.storages),f&&f(b)}).catch(b=>{console.error(b),v?v(b):b&&typeof b=="object"&&"message"in b&&l.emitter.emit("vf-toast-push",{label:b.message,type:"error"})}).finally(()=>{["index","search"].includes(s.q)&&i.setLoading(!1)})});function u(s){let c={};s&&s.includes("://")&&(c={storage:s.split("://")[0],path:s}),l.emitter.emit("vf-fetch",{params:{q:"index",storage:i.path.get().storage,...c},onError:r.onError??(f=>{f&&typeof f=="object"&&"message"in f&&l.emitter.emit("vf-toast-push",{label:f.message,type:"error"})})})}return e.onMounted(()=>{e.watch(()=>r.path,c=>{u(c)});const s=d.get("persist")?d.get("path"):r.path;i.setPath(s),u(s),i.path.listen(c=>{n("path-update",c)}),i.selectedItems.listen(c=>{n("select",c)})}),(s,c)=>(e.openBlock(),e.createElementBlock("div",Dc,[e.createElementVNode("div",{class:e.normalizeClass(e.unref(l).theme.actualValue),style:{height:"100%",width:"100%"}},[e.createElementVNode("div",{class:e.normalizeClass([e.unref(m).fullScreen?"vuefinder__main__fixed":"vuefinder__main__relative","vuefinder__main__container"]),onMousedown:c[0]||(c[0]=f=>e.unref(l).emitter.emit("vf-contextmenu-hide")),onTouchstart:c[1]||(c[1]=f=>e.unref(l).emitter.emit("vf-contextmenu-hide"))},[e.createVNode(Va),e.createVNode(Cs),e.createVNode(vi),e.createElementVNode("div",Tc,[e.createVNode(xc),e.createVNode(ec)]),e.createVNode(kc,null,{actions:e.withCtx(f=>[e.renderSlot(s.$slots,"status-bar",e.normalizeProps(e.guardReactiveProps(f)))]),_:3})],34),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.createVNode(e.Transition,{name:"fade"},{default:e.withCtx(()=>[e.unref(l).modal.visible?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(l).modal.type),{key:0})):e.createCommentVNode("",!0)]),_:1})])),e.createVNode(oc)],2)],512))}}),ct={install(o,t={}){t.i18n=t.i18n??{};let[n]=Object.keys(t.i18n);t.locale=t.locale??n??"en",o.provide("VueFinderOptions",t),o.component("VueFinder",it)}};exports.ContextMenuIds=W;exports.VueFinder=it;exports.VueFinderPlugin=ct;exports.contextMenuItems=st;exports.default=ct;
