"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),L=require("@nanostores/vue"),Tn=require("mitt"),Mn=require("@nanostores/persistent"),X=require("nanostores"),Fn=require("vue-advanced-cropper"),Gt=require("vanilla-lazyload"),Ye=require("overlayscrollbars"),An=require("@uppy/core"),In=require("@uppy/xhr-upload"),Rn=require("@viselect/vanilla"),dt=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");class Ln{config;constructor(t){this.config=Object.assign({baseUrl:"",headers:{},params:{},body:{},xsrfHeaderName:"X-CSRF-Token",fetchParams:{}},t)}customFetch=async(...t)=>{let[o,r]=t;this.config.fetchRequestInterceptor&&(r=this.config.fetchRequestInterceptor(r));let l=await fetch(o,r);return this.config.fetchResponseInterceptor&&(l=await this.config.fetchResponseInterceptor(l)),l};transformRequestParams(t){const o=this.config,r={};dt!=null&&dt!==""&&o.xsrfHeaderName&&(r[o.xsrfHeaderName]=dt);const l=Object.assign({},o.headers,r,t.headers),s=Object.assign({},o.params,t.params),a=o.baseUrl+t.url,u=t.method;let c;if(u!=="get")if(t.body instanceof FormData){const i=t.body;o.body!=null&&Object.entries(this.config.body).forEach(([d,g])=>{i.append(d,String(g))}),c=i}else{const i=Object.assign({},t.body??{});o.body!=null&&Object.assign(i,this.config.body),c=i}const m={url:a,method:u,headers:l,params:s,body:c};if(o.transformRequest!=null){const i=o.transformRequest({url:a,method:u,headers:l,params:s,body:c??null});i.url!=null&&(m.url=i.url),i.method!=null&&(m.method=i.method),i.params!=null&&(m.params=i.params),i.headers!=null&&(m.headers=i.headers),i.body!=null&&(m.body=i.body)}return m}getDownloadUrl(t,o){if(o.url!=null)return o.url;const r=this.transformRequestParams({url:"",method:"get",params:{q:"download",storage:t,path:o.path}});return r.url+"?"+new URLSearchParams(r.params).toString()}getPreviewUrl(t,o){if(o.url!=null)return o.url;const r=this.transformRequestParams({url:"",method:"get",params:{q:"preview",storage:t,path:o.path}});return r.url+"?"+new URLSearchParams(r.params).toString()}async send(t){const o=this.transformRequestParams(t),r=t.responseType||"json",l={method:t.method,headers:o.headers,signal:t.abortSignal},s=o.url+"?"+new URLSearchParams(o.params);if(o.method!=="get"&&o.body!=null){let u;o.body instanceof FormData?u=t.body:(u=JSON.stringify(o.body),l.headers["Content-Type"]="application/json"),l.body=u}this.config.fetchParams&&Object.assign(l,this.config.fetchParams);const a=await this.customFetch(s,l);if(a.ok)return await a[r]();throw await a.json()}}function Pn(n){const t={baseUrl:"",headers:{},params:{},body:{},xsrfHeaderName:"X-CSRF-Token",fetchParams:{}};return typeof n=="string"?Object.assign(t,{baseUrl:n}):Object.assign(t,n),new Ln(t)}function On(n){let t=localStorage.getItem(n+"_storage");const o=e.reactive(JSON.parse(t??"{}"));e.watch(o,r);function r(){Object.keys(o).length?localStorage.setItem(n+"_storage",JSON.stringify(o)):localStorage.removeItem(n+"_storage")}function l(c,m){o[c]=m}function s(c){delete o[c]}function a(){Object.keys(o).forEach(c=>s(c))}return{getStore:(c,m=null)=>c in o?o[c]:m,setStore:l,removeStore:s,clearStore:a}}async function zn(n,t){const o=t[n];return typeof o=="function"?(await o()).default:o}function Hn(n,t,o,r){const{getStore:l,setStore:s}=n,a=e.ref({}),u=e.ref(l("locale",t)),c=(d,g=t)=>{zn(d,r).then(_=>{a.value=_,s("locale",d),u.value=d,s("translations",_),Object.values(r).length>1&&(o.emit("vf-toast-push",{label:"The language is set to "+d}),o.emit("vf-language-saved"))}).catch(_=>{g?(o.emit("vf-toast-push",{label:"The selected locale is not yet supported!",type:"error"}),c(g,null)):(console.error(_),o.emit("vf-toast-push",{label:"Locale cannot be loaded!",type:"error"}))})};e.watch(u,d=>{c(d)}),!l("locale")&&!Object.keys(r).length?c(t):a.value=l("translations");const m=(d,...g)=>g.length?m(d=d.replace("%s",String(g.shift())),...g):d;function i(d,...g){return a.value&&Object.prototype.hasOwnProperty.call(a.value,d)?m(a.value[d]||d,...g):m(d,...g)}return e.reactive({t:i,locale:u})}const z={EDIT:"edit",NEW_FILE:"newfile",NEW_FOLDER:"newfolder",PREVIEW:"preview",ARCHIVE:"archive",UNARCHIVE:"unarchive",SEARCH:"search",RENAME:"rename",UPLOAD:"upload",DELETE:"delete",FULL_SCREEN:"fullscreen",DOWNLOAD:"download",LANGUAGE:"language",MOVE:"move",COPY:"copy"},Un=Object.values(z),jn="4.0.0-dev";function wt(n,t,o,r,l){return t=Math,o=t.log,r=1024,l=o(n)/o(r)|0,(n/t.pow(r,l)).toFixed(0)+" "+(l?"KMGTPEZY"[--l]+"iB":"B")}function Yt(n,t,o,r,l){return t=Math,o=t.log,r=1e3,l=o(n)/o(r)|0,(n/t.pow(r,l)).toFixed(0)+" "+(l?"KMGTPEZY"[--l]+"B":"B")}function qn(n){if(typeof n=="number")return n;const t={k:1,m:2,g:3,t:4},r=/(\d+(?:\.\d+)?)\s?(k|m|g|t)?b?/i.exec(n);if(!r)return 0;const l=parseFloat(r[1]||"0"),s=(r[2]||"").toLowerCase(),a=t[s]??0;return Math.round(l*Math.pow(1024,a))}function Kn(){const n=e.shallowRef(null),t=e.ref(!1),o=e.ref(),r=e.ref(!1);return{visible:t,type:n,data:o,open:(u,c=null)=>{document.querySelector("body").style.overflow="hidden",t.value=!0,n.value=u,o.value=c},close:()=>{document.querySelector("body").style.overflow="",t.value=!1,n.value=null},setEditMode:u=>{r.value=u},editMode:r}}const ut={view:"grid",fullScreen:!1,showTreeView:!1,showHiddenFiles:!0,compactListView:!0,metricUnits:!1,showThumbnails:!0,persist:!1,path:"",initialPath:null,loadingIndicator:"circular",maxFileSize:null,pinnedFolders:[]},Wn=(n,t={})=>{const o=`vuefinder_config_${n}`,r=Mn.persistentAtom(o,{...ut,...t},{encode:JSON.stringify,decode:JSON.parse}),l=(i={})=>{const d=r.get(),g={...ut,...i,...d};r.set(g)},s=i=>r.get()[i],a=()=>r.get(),u=(i,d)=>{const g=r.get();typeof i=="object"&&i!==null?r.set({...g,...i}):r.set({...g,[i]:d})};return{state:r,init:l,get:s,set:u,toggle:i=>{const d=r.get();u(i,!d[i])},all:a,reset:()=>{r.set({...ut})}}};function Gn(n,t){if(typeof n=="string"&&typeof t=="string")return n.toLowerCase().localeCompare(t.toLowerCase());const o=Number(n)||0,r=Number(t)||0;return o===r?0:o<r?-1:1}const Yn=()=>{const n=X.atom(""),t=X.atom([]),o=X.atom(!1),r=X.atom([]),l=X.atom({active:!1,column:"",order:""}),s=X.atom({kind:"all",showHidden:!1}),a=X.atom(new Set),u=X.atom({type:"copy",path:"",items:new Set}),c=X.atom(null),m=X.atom(0),i=X.atom(!1),d=X.atom([]),g=X.atom(-1),_=X.computed([n],S=>{const B=(S||"local://").trim(),F=B.indexOf("://"),R=F>=0?B.slice(0,F):"",G=(F>=0?B.slice(F+3):B).split("/").filter(Boolean);let Y="";const Ee=G.map(oe=>(Y=Y?`${Y}/${oe}`:oe,{basename:oe,name:oe,path:R?`${R}://${Y}`:Y,type:"dir"}));return{storage:R,breadcrumb:Ee,path:B}}),E=X.computed([r,l,s],(S,B,F)=>{let R=S;F.kind==="files"?R=R.filter(oe=>oe.type==="file"):F.kind==="folders"&&(R=R.filter(oe=>oe.type==="dir")),F.showHidden||(R=R.filter(oe=>!oe.basename.startsWith(".")));const{active:te,column:G,order:Y}=B;if(!te||!G)return R;const Ee=Y==="asc"?1:-1;return R.slice().sort((oe,Dn)=>Gn(oe[G],Dn[G])*Ee)}),b=X.computed([r,a],(S,B)=>B.size===0?[]:S.filter(F=>B.has(F.path))),h=(S,B)=>{const F=n.get();if((B??!0)&&F!==S){const R=d.get(),te=g.get();te<R.length-1&&R.splice(te+1),R.length===0&&F&&R.push(F),R.push(S),d.set([...R]),g.set(R.length-1)}n.set(S)},f=S=>{r.set(S??[])},k=S=>{t.set(S??[])},v=(S,B)=>{l.set({active:!0,column:S,order:B})},p=S=>{const B=l.get();B.active&&B.column===S?l.set({active:B.order==="asc",column:S,order:"desc"}):l.set({active:!0,column:S,order:"asc"})},V=()=>{l.set({active:!1,column:"",order:""})},N=(S,B)=>{s.set({kind:S,showHidden:B})},A=()=>{s.set({kind:"all",showHidden:!1})},I=(S,B="multiple")=>{const F=new Set(a.get());B==="single"&&F.clear(),F.add(S),a.set(F),m.set(F.size)},T=S=>{const B=new Set(a.get());B.delete(S),a.set(B),m.set(B.size)},O=S=>a.get().has(S),q=(S,B="multiple")=>{const F=new Set(a.get());F.has(S)?F.delete(S):(B==="single"&&F.clear(),F.add(S)),a.set(F),m.set(F.size)},W=(S="multiple",B)=>{if(S==="single"){const F=r.get()[0];if(F){const R=F.path;a.set(new Set([R])),m.set(1)}}else if(B?.selectionFilterType||B?.selectionFilterMimeIncludes&&B.selectionFilterMimeIncludes.length>0){const F=r.get().filter(R=>{const te=B.selectionFilterType,G=B.selectionFilterMimeIncludes;return te==="files"&&R.type==="dir"||te==="dirs"&&R.type==="file"?!1:G&&Array.isArray(G)&&G.length>0&&R.type!=="dir"?R.mime_type?G.some(Y=>R.mime_type?.startsWith(Y)):!1:!0}).map(R=>R.path);a.set(new Set(F)),m.set(F.length)}else{const F=new Set(r.get().map(R=>R.path));a.set(F),m.set(F.size)}},P=()=>{a.set(new Set),m.set(0)},j=S=>{const B=new Set(S??[]);a.set(B),m.set(B.size)},K=S=>{m.set(S)},$=S=>{i.set(!!S)},x=()=>i.get(),w=(S,B)=>{const F=r.get().filter(R=>B.has(R.path));u.set({type:S,path:_.get().path,items:new Set(F)})},y=S=>X.computed([u],B=>B.type==="cut"&&Array.from(B.items).some(F=>F.path===S)),C=S=>X.computed([u],B=>B.type==="copy"&&Array.from(B.items).some(F=>F.path===S)),D=S=>{const B=y(S);return L.useStore(B).value??!1},H=S=>{const B=C(S);return L.useStore(B).value??!1},J=()=>{u.set({type:"copy",path:"",items:new Set})},ee=()=>u.get(),fe=S=>{c.set(S)},he=()=>c.get(),be=()=>{c.set(null)},Ie=()=>{const S=d.get(),B=g.get();if(B>0){const F=B-1,R=S[F];R&&(g.set(F),h(R,!1))}},Re=()=>{const S=d.get(),B=g.get();if(B<S.length-1){const F=B+1,R=S[F];R&&(g.set(F),h(R,!1))}},it=X.computed([g],S=>S>0),Le=X.computed([d,g],(S,B)=>B<S.length-1);return{files:r,storages:t,currentPath:n,sort:l,filter:s,selectedKeys:a,selectedCount:m,loading:i,draggedItem:c,clipboardItems:u,path:_,sortedFiles:E,selectedItems:b,setPath:h,setFiles:f,setStorages:k,setSort:v,toggleSort:p,clearSort:V,setFilter:N,clearFilter:A,select:I,deselect:T,toggleSelect:q,selectAll:W,isSelected:O,clearSelection:P,setSelection:j,setSelectedCount:K,setLoading:$,isLoading:x,setClipboard:w,createIsCut:y,createIsCopied:C,isCut:D,isCopied:H,clearClipboard:J,getClipboard:ee,setDraggedItem:fe,getDraggedItem:he,clearDraggedItem:be,setReadOnly:S=>{o.set(S)},getReadOnly:()=>o.get(),isReadOnly:S=>o.get()?!0:S.read_only??!1,goBack:Ie,goForward:Re,canGoBack:it,canGoForward:Le,navigationHistory:d,historyIndex:g}},Xn=(n,t)=>{const o=On(n.id),r=Tn(),l=t.i18n,s=n.locale??t.locale,a=Wn(n.id,n.config??{}),u=Yn(),c=m=>Array.isArray(m)?m:Un;return e.reactive({version:jn,config:a,fs:u,root:e.useTemplateRef("root"),debug:n.debug,emitter:r,storage:o,i18n:Hn(o,s,r,l),modal:Kn(),requester:Pn(n.request),features:c(n.features),selectionMode:n.selectionMode||"multiple",selectionFilterType:e.computed(()=>n.selectionFilterType||"both"),selectionFilterMimeIncludes:e.computed(()=>n.selectionFilterMimeIncludes||[]),treeViewData:[],filesize:a.get("metricUnits")?Yt:wt,contextMenuItems:n.contextMenuItems})},pt=[{name:"light",displayName:"Light",description:"Clean and bright interface"},{name:"dark",displayName:"Dark",description:"Dark interface for low-light environments"},{name:"midnight",displayName:"Midnight",description:"Deep dark theme with blue accents"},{name:"latte",displayName:"Latte",description:"Warm coffee-inspired theme"},{name:"rose",displayName:"Rose",description:"Sweet pastel pink theme"},{name:"mythril",displayName:"Mythril",description:"Modern blue-gray theme"},{name:"lime",displayName:"Dark Lime",description:"Dark theme with bright lime accents"},{name:"sky",displayName:"Sky",description:"Dark theme with soft sky colors"},{name:"ocean",displayName:"Oceanic",description:"Deep blue ocean inspired theme"},{name:"palenight",displayName:"Palenight",description:"Popular dark theme with purple accents"},{name:"arctic",displayName:"Arctic",description:"Cool arctic-inspired color palette"},{name:"code",displayName:"Code",description:"Clean code editor inspired theme"}];function mt(n,t){const o=t||document.documentElement,r=o.querySelector(".vuefinder");r?r.setAttribute("data-theme",n):o.classList.contains("vuefinder")&&o.setAttribute("data-theme",n)}function Me(n){const t=n||document.documentElement,o=t.querySelector(".vuefinder");if(o){const r=o.getAttribute("data-theme");if(r&&pt.some(l=>l.name===r))return r}else if(t.classList.contains("vuefinder")){const r=t.getAttribute("data-theme");if(r&&pt.some(l=>l.name===r))return r}return"light"}const Qn=["data-theme"],Jn={class:"vuefinder__modal-layout__container"},Zn={class:"vuefinder__modal-layout__content"},eo={key:0,class:"vuefinder__modal-layout__footer"},to={key:0,class:"vuefinder__modal-drag-overlay"},no={class:"vuefinder__modal-drag-message"},ie=e.defineComponent({__name:"ModalLayout",props:{showDragOverlay:{type:Boolean},dragOverlayText:{}},setup(n){const t=e.ref(null),o=e.inject("ServiceContainer"),r=n,l=Me();e.onMounted(()=>{const a=document.querySelector(".v-f-modal input");a&&a.focus(),e.nextTick(()=>{if(document.querySelector(".v-f-modal input")&&window.innerWidth<768&&t.value){const u=t.value.getBoundingClientRect().bottom+16;window.scrollTo({top:u,left:0,behavior:"smooth"})}})});const s=a=>{a.target.classList.contains("vuefinder__modal-layout__wrapper")&&(a.preventDefault(),a.stopPropagation())};return(a,u)=>(e.openBlock(),e.createElementBlock("div",{"data-theme":e.unref(l),class:"vuefinder vuefinder__modal-layout","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",onKeyup:u[1]||(u[1]=e.withKeys(c=>e.unref(o).modal.close(),["esc"])),tabindex:"0"},[u[2]||(u[2]=e.createElementVNode("div",{class:"vuefinder__modal-layout__overlay"},null,-1)),e.createElementVNode("div",Jn,[e.createElementVNode("div",{class:"vuefinder__modal-layout__wrapper",onContextmenu:s,onMousedown:u[0]||(u[0]=e.withModifiers(c=>e.unref(o).modal.close(),["self"]))},[e.createElementVNode("div",{ref_key:"modalBody",ref:t,class:"vuefinder__modal-layout__body"},[e.createElementVNode("div",Zn,[e.renderSlot(a.$slots,"default")]),a.$slots.buttons?(e.openBlock(),e.createElementBlock("div",eo,[e.renderSlot(a.$slots,"buttons")])):e.createCommentVNode("",!0)],512)],32)]),r.showDragOverlay?(e.openBlock(),e.createElementBlock("div",to,[e.createElementVNode("div",no,e.toDisplayString(r.dragOverlayText||"Drag and drop the files/folders to here."),1)])):e.createCommentVNode("",!0)],40,Qn))}}),oo={class:"vuefinder__modal-header"},ro={class:"vuefinder__modal-header__icon-container"},lo={class:"vuefinder__modal-header__title",id:"modal-title"},ue=e.defineComponent({__name:"ModalHeader",props:{title:{},icon:{}},setup(n){return(t,o)=>(e.openBlock(),e.createElementBlock("div",oo,[e.createElementVNode("div",ro,[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.icon),{class:"vuefinder__modal-header__icon"}))]),e.createElementVNode("h3",lo,e.toDisplayString(n.title),1)]))}}),ao={props:{on:{type:String,required:!0}},setup(n,{emit:t,slots:o}){const r=e.inject("ServiceContainer"),l=e.ref(!1),{t:s}=r.i18n;let a=null;const u=()=>{clearTimeout(a),l.value=!0,a=setTimeout(()=>{l.value=!1},2e3)};return e.onMounted(()=>{r.emitter.on(n.on,u)}),e.onUnmounted(()=>{clearTimeout(a)}),{shown:l,t:s}}},so=(n,t)=>{const o=n.__vccOpts||n;for(const[r,l]of t)o[r]=l;return o},io={key:1};function co(n,t,o,r,l,s){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__action-message",{"vuefinder__action-message--hidden":!r.shown}])},[n.$slots.default?e.renderSlot(n.$slots,"default",{key:0}):(e.openBlock(),e.createElementBlock("span",io,e.toDisplayString(r.t("Saved.")),1))],2)}const Ve=so(ao,[["render",co]]),uo={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"};function mo(n,t){return e.openBlock(),e.createElementBlock("svg",uo,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87q.11.06.22.127c.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a8 8 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a7 7 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a7 7 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a7 7 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124q.108-.066.22-.128c.332-.183.582-.495.644-.869z"},null,-1),e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0"},null,-1)])])}const Xt={render:mo},fo={class:"vuefinder__about-modal__content"},vo={class:"vuefinder__about-modal__main"},po={class:"vuefinder__about-modal__tabs","aria-label":"Tabs"},_o=["onClick","aria-current"],ho={key:0,class:"vuefinder__about-modal__tab-content"},go={class:"vuefinder__about-modal__description"},wo={href:"https://vuefinder.ozdemir.be",class:"vuefinder__about-modal__link",target:"_blank"},ko={href:"https://github.com/n1crack/vuefinder",class:"vuefinder__about-modal__link",target:"_blank"},yo={key:1,class:"vuefinder__about-modal__tab-content"},bo={class:"vuefinder__about-modal__description"},Eo={class:"vuefinder__about-modal__settings"},Vo={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},No={class:"vuefinder__about-modal__setting-input"},xo=["checked"],So={class:"vuefinder__about-modal__setting-label"},Co={for:"metric_unit",class:"vuefinder__about-modal__label"},Bo={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},$o={class:"vuefinder__about-modal__setting-input"},Do=["checked"],To={class:"vuefinder__about-modal__setting-label"},Mo={for:"large_icons",class:"vuefinder__about-modal__label"},Fo={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},Ao={class:"vuefinder__about-modal__setting-input"},Io=["checked"],Ro={class:"vuefinder__about-modal__setting-label"},Lo={for:"persist_path",class:"vuefinder__about-modal__label"},Po={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},Oo={class:"vuefinder__about-modal__setting-input"},zo=["checked"],Ho={class:"vuefinder__about-modal__setting-label"},Uo={for:"show_thumbnails",class:"vuefinder__about-modal__label"},jo={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},qo={class:"vuefinder__about-modal__setting-input"},Ko={for:"theme",class:"vuefinder__about-modal__label"},Wo={class:"vuefinder__about-modal__setting-label"},Go=["value"],Yo=["label"],Xo=["value"],Qo={key:0,class:"vuefinder__about-modal__setting"},Jo={class:"vuefinder__about-modal__setting-input"},Zo={for:"language",class:"vuefinder__about-modal__label"},er={class:"vuefinder__about-modal__setting-label"},tr=["label"],nr=["value"],or={key:2,class:"vuefinder__about-modal__tab-content"},rr={class:"vuefinder__about-modal__shortcuts"},lr={class:"vuefinder__about-modal__shortcut"},ar={class:"vuefinder__about-modal__shortcut"},sr={class:"vuefinder__about-modal__shortcut"},ir={class:"vuefinder__about-modal__shortcut"},cr={class:"vuefinder__about-modal__shortcut"},dr={class:"vuefinder__about-modal__shortcut"},ur={class:"vuefinder__about-modal__shortcut"},mr={class:"vuefinder__about-modal__shortcut"},fr={class:"vuefinder__about-modal__shortcut"},vr={class:"vuefinder__about-modal__shortcut"},pr={key:3,class:"vuefinder__about-modal__tab-content"},_r={class:"vuefinder__about-modal__description"},kt=e.defineComponent({__name:"ModalAbout",setup(n){const t=e.inject("ServiceContainer"),o=e.inject("setTheme"),r=t.config,{clearStore:l}=t.storage,{t:s}=t.i18n,a={ABOUT:"about",SETTINGS:"settings",SHORTCUTS:"shortcuts",RESET:"reset"},u=e.computed(()=>[{name:s("About"),key:a.ABOUT,current:!1},{name:s("Settings"),key:a.SETTINGS,current:!1},{name:s("Shortcuts"),key:a.SHORTCUTS,current:!1},{name:s("Reset"),key:a.RESET,current:!1}]),c=e.ref("about"),m=async()=>{r.reset(),l(),location.reload()},i=v=>{o&&o(v),t.emitter.emit("vf-theme-saved")},d=()=>{r.toggle("metricUnits"),t.filesize=r.get("metricUnits")?Yt:wt,t.emitter.emit("vf-metric-units-saved")},g=()=>{r.toggle("compactListView"),t.emitter.emit("vf-compact-view-saved")},_=()=>{r.toggle("showThumbnails"),t.emitter.emit("vf-show-thumbnails-saved")},E=()=>{r.toggle("persist"),t.emitter.emit("vf-persist-path-saved")},{i18n:b}=e.inject("VueFinderOptions"),f=Object.fromEntries(Object.entries({ar:"Arabic (العربيّة)",en:"English",fr:"French (Français)",de:"German (Deutsch)",fa:"Persian (فارسی)",he:"Hebrew (עִברִית)",hi:"Hindi (हिंदी)",pl:"Polish (Polski)",ru:"Russian (Pусский)",sv:"Swedish (Svenska)",tr:"Turkish (Türkçe)",nl:"Dutch (Nederlands)",zhCN:"Simplified Chinese (简体中文)",zhTW:"Traditional Chinese (繁體中文)"}).filter(([v])=>Object.keys(b).includes(v))),k=e.computed(()=>pt.reduce((v,p)=>(v[p.name]=p.displayName,v),{}));return(v,p)=>(e.openBlock(),e.createBlock(ie,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:p[2]||(p[2]=V=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(s)("Close")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",fo,[e.createVNode(ue,{icon:e.unref(Xt),title:"Vuefinder "+e.unref(t).version},null,8,["icon","title"]),e.createElementVNode("div",vo,[e.createElementVNode("div",null,[e.createElementVNode("div",null,[e.createElementVNode("nav",po,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value,V=>(e.openBlock(),e.createElementBlock("button",{key:V.name,onClick:N=>c.value=V.key,class:e.normalizeClass([V.key===c.value?"vuefinder__about-modal__tab--active":"vuefinder__about-modal__tab--inactive","vuefinder__about-modal__tab"]),"aria-current":V.current?"page":void 0},e.toDisplayString(V.name),11,_o))),128))])])]),c.value===a.ABOUT?(e.openBlock(),e.createElementBlock("div",ho,[e.createElementVNode("div",go,e.toDisplayString(e.unref(s)("Vuefinder is a simple, lightweight, and fast file manager library for Vue.js applications")),1),e.createElementVNode("a",wo,e.toDisplayString(e.unref(s)("Project home")),1),e.createElementVNode("a",ko,e.toDisplayString(e.unref(s)("Follow on GitHub")),1)])):e.createCommentVNode("",!0),c.value===a.SETTINGS?(e.openBlock(),e.createElementBlock("div",yo,[e.createElementVNode("div",bo,e.toDisplayString(e.unref(s)("Customize your experience with the following settings")),1),e.createElementVNode("div",Eo,[e.createElementVNode("fieldset",null,[e.createElementVNode("div",Vo,[e.createElementVNode("div",No,[e.createElementVNode("input",{id:"metric_unit",name:"metric_unit",type:"checkbox",checked:e.unref(r).get("metricUnits"),onChange:d,class:"vuefinder__about-modal__checkbox"},null,40,xo)]),e.createElementVNode("div",So,[e.createElementVNode("label",Co,[e.createTextVNode(e.toDisplayString(e.unref(s)("Use Metric Units"))+" ",1),e.createVNode(Ve,{class:"ms-3",on:"vf-metric-units-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(s)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",Bo,[e.createElementVNode("div",$o,[e.createElementVNode("input",{id:"large_icons",name:"large_icons",type:"checkbox",checked:e.unref(r).get("compactListView"),onChange:g,class:"vuefinder__about-modal__checkbox"},null,40,Do)]),e.createElementVNode("div",To,[e.createElementVNode("label",Mo,[e.createTextVNode(e.toDisplayString(e.unref(s)("Compact list view"))+" ",1),e.createVNode(Ve,{class:"ms-3",on:"vf-compact-view-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(s)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",Fo,[e.createElementVNode("div",Ao,[e.createElementVNode("input",{id:"persist_path",name:"persist_path",type:"checkbox",checked:e.unref(r).get("persist"),onChange:E,class:"vuefinder__about-modal__checkbox"},null,40,Io)]),e.createElementVNode("div",Ro,[e.createElementVNode("label",Lo,[e.createTextVNode(e.toDisplayString(e.unref(s)("Persist path on reload"))+" ",1),e.createVNode(Ve,{class:"ms-3",on:"vf-persist-path-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(s)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",Po,[e.createElementVNode("div",Oo,[e.createElementVNode("input",{id:"show_thumbnails",name:"show_thumbnails",type:"checkbox",checked:e.unref(r).get("showThumbnails"),onChange:_,class:"vuefinder__about-modal__checkbox"},null,40,zo)]),e.createElementVNode("div",Ho,[e.createElementVNode("label",Uo,[e.createTextVNode(e.toDisplayString(e.unref(s)("Show thumbnails"))+" ",1),e.createVNode(Ve,{class:"ms-3",on:"vf-show-thumbnails-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(s)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",jo,[e.createElementVNode("div",qo,[e.createElementVNode("label",Ko,e.toDisplayString(e.unref(s)("Theme")),1)]),e.createElementVNode("div",Wo,[e.createElementVNode("select",{id:"theme",value:e.unref(Me)(),onChange:p[0]||(p[0]=V=>i(V.target?.value)),class:"vuefinder__about-modal__select"},[e.createElementVNode("optgroup",{label:e.unref(s)("Theme")},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(k.value,(V,N)=>(e.openBlock(),e.createElementBlock("option",{value:N},e.toDisplayString(V),9,Xo))),256))],8,Yo)],40,Go),e.createVNode(Ve,{class:"ms-3",on:"vf-theme-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(s)("Saved.")),1)]),_:1})])]),e.unref(t).features.includes(e.unref(z).LANGUAGE)&&Object.keys(e.unref(f)).length>1?(e.openBlock(),e.createElementBlock("div",Qo,[e.createElementVNode("div",Jo,[e.createElementVNode("label",Zo,e.toDisplayString(e.unref(s)("Language")),1)]),e.createElementVNode("div",er,[e.withDirectives(e.createElementVNode("select",{id:"language","onUpdate:modelValue":p[1]||(p[1]=V=>e.unref(t).i18n.locale=V),class:"vuefinder__about-modal__select"},[e.createElementVNode("optgroup",{label:e.unref(s)("Language")},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(f),(V,N)=>(e.openBlock(),e.createElementBlock("option",{value:N},e.toDisplayString(V),9,nr))),256))],8,tr)],512),[[e.vModelSelect,e.unref(t).i18n.locale]]),e.createVNode(Ve,{class:"ms-3",on:"vf-language-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(s)("Saved.")),1)]),_:1})])])):e.createCommentVNode("",!0)])])])):e.createCommentVNode("",!0),c.value===a.SHORTCUTS?(e.openBlock(),e.createElementBlock("div",or,[e.createElementVNode("div",rr,[e.createElementVNode("div",lr,[e.createElementVNode("div",null,e.toDisplayString(e.unref(s)("Rename")),1),p[3]||(p[3]=e.createElementVNode("kbd",null,"F2",-1))]),e.createElementVNode("div",ar,[e.createElementVNode("div",null,e.toDisplayString(e.unref(s)("Refresh")),1),p[4]||(p[4]=e.createElementVNode("kbd",null,"F5",-1))]),e.createElementVNode("div",sr,[e.createTextVNode(e.toDisplayString(e.unref(s)("Delete"))+" ",1),p[5]||(p[5]=e.createElementVNode("kbd",null,"Del",-1))]),e.createElementVNode("div",ir,[e.createTextVNode(e.toDisplayString(e.unref(s)("Escape"))+" ",1),p[6]||(p[6]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Esc")],-1))]),e.createElementVNode("div",cr,[e.createTextVNode(e.toDisplayString(e.unref(s)("Select All"))+" ",1),p[7]||(p[7]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"A")],-1))]),e.createElementVNode("div",dr,[e.createTextVNode(e.toDisplayString(e.unref(s)("Search"))+" ",1),p[8]||(p[8]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"F")],-1))]),e.createElementVNode("div",ur,[e.createTextVNode(e.toDisplayString(e.unref(s)("Toggle Sidebar"))+" ",1),p[9]||(p[9]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"E")],-1))]),e.createElementVNode("div",mr,[e.createTextVNode(e.toDisplayString(e.unref(s)("Open Settings"))+" ",1),p[10]||(p[10]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,",")],-1))]),e.createElementVNode("div",fr,[e.createTextVNode(e.toDisplayString(e.unref(s)("Toggle Full Screen"))+" ",1),p[11]||(p[11]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"Enter")],-1))]),e.createElementVNode("div",vr,[e.createTextVNode(e.toDisplayString(e.unref(s)("Preview"))+" ",1),p[12]||(p[12]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Space")],-1))])])])):e.createCommentVNode("",!0),c.value===a.RESET?(e.openBlock(),e.createElementBlock("div",pr,[e.createElementVNode("div",_r,e.toDisplayString(e.unref(s)("Reset all settings to default")),1),e.createElementVNode("button",{onClick:m,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(s)("Reset Settings")),1)])):e.createCommentVNode("",!0)])])]),_:1}))}}),hr={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",viewBox:"0 0 24 24"};function gr(n,t){return e.openBlock(),e.createElementBlock("svg",hr,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21q.512.078 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48 48 0 0 0-3.478-.397m-12 .562q.51-.089 1.022-.165m0 0a48 48 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a52 52 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a49 49 0 0 0-7.5 0"},null,-1)])])}const Qt={render:gr},wr={class:"vuefinder__delete-modal__content"},kr={class:"vuefinder__delete-modal__form"},yr={class:"vuefinder__delete-modal__description"},br={class:"vuefinder__delete-modal__files vf-scrollbar"},Er={class:"vuefinder__delete-modal__file"},Vr={key:0,class:"vuefinder__delete-modal__icon vuefinder__delete-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Nr={key:1,class:"vuefinder__delete-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},xr={class:"vuefinder__delete-modal__file-name"},Sr={class:"vuefinder__delete-modal__warning"},Xe=e.defineComponent({__name:"ModalDelete",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=L.useStore(r.path),s=e.ref(t.modal.data.items),a=e.ref(""),u=()=>{s.value.length&&t.emitter.emit("vf-fetch",{params:{q:"delete",m:"post",path:l.value.path},body:{items:s.value.map(({path:c,type:m})=>({path:c,type:m}))},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:o("Files deleted.")}),t.emitter.emit("vf-delete-complete",s.value)},onError:c=>{a.value=o(c.message)}})};return(c,m)=>(e.openBlock(),e.createBlock(ie,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:u,class:"vf-btn vf-btn-danger"},e.toDisplayString(e.unref(o)("Yes, Delete!")),1),e.createElementVNode("button",{type:"button",onClick:m[1]||(m[1]=i=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1),e.createElementVNode("div",Sr,e.toDisplayString(e.unref(o)("This action cannot be undone.")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(ue,{icon:e.unref(Qt),title:e.unref(o)("Delete files")},null,8,["icon","title"]),e.createElementVNode("div",wr,[e.createElementVNode("div",kr,[e.createElementVNode("p",yr,e.toDisplayString(e.unref(o)("Are you sure you want to delete these files?")),1),e.createElementVNode("div",br,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,i=>(e.openBlock(),e.createElementBlock("p",Er,[i.type==="dir"?(e.openBlock(),e.createElementBlock("svg",Vr,[...m[2]||(m[2]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",Nr,[...m[3]||(m[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),e.createElementVNode("span",xr,e.toDisplayString(i.basename),1)]))),256))]),a.value.length?(e.openBlock(),e.createBlock(e.unref(a),{key:0,onHidden:m[0]||(m[0]=i=>a.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),Cr={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",viewBox:"0 0 24 24"};function Br(n,t){return e.openBlock(),e.createElementBlock("svg",Cr,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"},null,-1)])])}const Jt={render:Br},$r={class:"vuefinder__rename-modal__content"},Dr={class:"vuefinder__rename-modal__item"},Tr={class:"vuefinder__rename-modal__item-info"},Mr={key:0,class:"vuefinder__rename-modal__icon vuefinder__rename-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Fr={key:1,class:"vuefinder__rename-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Ar={class:"vuefinder__rename-modal__item-name"},Qe=e.defineComponent({__name:"ModalRename",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=L.useStore(r.path),s=e.ref(t.modal.data.items[0]),a=e.ref(t.modal.data.items[0].basename),u=e.ref(""),c=()=>{a.value!=""&&t.emitter.emit("vf-fetch",{params:{q:"rename",m:"post",path:l.value.path},body:{item:s.value.path,name:a.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:o("%s is renamed.",a.value)})},onError:m=>{u.value=o(m.message)}})};return(m,i)=>(e.openBlock(),e.createBlock(ie,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:c,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Rename")),1),e.createElementVNode("button",{type:"button",onClick:i[2]||(i[2]=d=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(ue,{icon:e.unref(Jt),title:e.unref(o)("Rename")},null,8,["icon","title"]),e.createElementVNode("div",$r,[e.createElementVNode("div",Dr,[e.createElementVNode("p",Tr,[s.value.type==="dir"?(e.openBlock(),e.createElementBlock("svg",Mr,[...i[3]||(i[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",Fr,[...i[4]||(i[4]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),e.createElementVNode("span",Ar,e.toDisplayString(s.value.basename),1)]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":i[0]||(i[0]=d=>a.value=d),onKeyup:e.withKeys(c,["enter"]),class:"vuefinder__rename-modal__input",placeholder:"Name",type:"text"},null,544),[[e.vModelText,a.value]]),u.value.length?(e.openBlock(),e.createBlock(e.unref(u),{key:0,onHidden:i[1]||(i[1]=d=>u.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(u.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),Ir=["title"],Zt=e.defineComponent({__name:"Message",props:{error:{type:Boolean}},emits:["hidden"],setup(n,{emit:t}){const o=t,r=e.inject("ServiceContainer"),{t:l}=r.i18n,s=e.ref(!1),a=e.ref(null),u=e.ref(a.value?.innerHTML);e.watch(u,()=>s.value=!1);const c=()=>{o("hidden"),s.value=!0};return(m,i)=>(e.openBlock(),e.createElementBlock("div",null,[s.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"strMessage",ref:a,class:e.normalizeClass(["vuefinder__message",n.error?"vuefinder__message--error":"vuefinder__message--success"])},[e.renderSlot(m.$slots,"default"),e.createElementVNode("div",{class:"vuefinder__message__close",onClick:c,title:e.unref(l)("Close")},[...i[0]||(i[0]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"vuefinder__message__icon"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Ir)],2))]))}}),Rr={class:"vuefinder__text-preview"},Lr={class:"vuefinder__text-preview__header"},Pr=["title"],Or={class:"vuefinder__text-preview__actions"},zr={key:0,class:"vuefinder__text-preview__content"},Hr={key:1},Ur=e.defineComponent({__name:"Text",emits:["success"],setup(n,{emit:t}){const o=t,r=e.ref(""),l=e.ref(""),s=e.ref(null),a=e.ref(!1),u=e.ref(""),c=e.ref(!1),m=e.inject("ServiceContainer"),{t:i}=m.i18n;e.onMounted(()=>{m.requester.send({url:"",method:"get",params:{q:"preview",storage:m.modal.data.storage,path:m.modal.data.item.path},responseType:"text"}).then(_=>{r.value=_,o("success")})});const d=()=>{a.value=!a.value,l.value=r.value,m.modal.setEditMode(a.value)},g=()=>{u.value="",c.value=!1,m.requester.send({url:"",method:"post",params:{q:"save",storage:m.modal.data.storage,path:m.modal.data.item.path},body:{content:l.value},responseType:"text"}).then(_=>{u.value=i("Updated."),r.value=_,o("success"),a.value=!a.value}).catch(_=>{u.value=i(_.message),c.value=!0})};return(_,E)=>(e.openBlock(),e.createElementBlock("div",Rr,[e.createElementVNode("div",Lr,[e.createElementVNode("div",{class:"vuefinder__text-preview__title",id:"modal-title",title:e.unref(m).modal.data.item.path},e.toDisplayString(e.unref(m).modal.data.item.basename),9,Pr),e.createElementVNode("div",Or,[a.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:g,class:"vuefinder__text-preview__save-button"},e.toDisplayString(e.unref(i)("Save")),1)):e.createCommentVNode("",!0),e.unref(m).features.includes(e.unref(z).EDIT)?(e.openBlock(),e.createElementBlock("button",{key:1,class:"vuefinder__text-preview__edit-button",onClick:E[0]||(E[0]=b=>d())},e.toDisplayString(a.value?e.unref(i)("Cancel"):e.unref(i)("Edit")),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("div",null,[a.value?(e.openBlock(),e.createElementBlock("div",Hr,[e.withDirectives(e.createElementVNode("textarea",{ref_key:"editInput",ref:s,"onUpdate:modelValue":E[1]||(E[1]=b=>l.value=b),class:"vuefinder__text-preview__textarea",name:"text",cols:"30",rows:"10"},null,512),[[e.vModelText,l.value]])])):(e.openBlock(),e.createElementBlock("pre",zr,e.toDisplayString(r.value),1)),u.value.length?(e.openBlock(),e.createBlock(Zt,{key:2,onHidden:E[2]||(E[2]=b=>u.value=""),error:c.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(u.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)])]))}}),jr={class:"vuefinder__image-preview"},qr={class:"vuefinder__image-preview__header"},Kr=["title"],Wr={class:"vuefinder__image-preview__actions"},Gr={class:"vuefinder__image-preview__image-container"},Yr=["src"],Xr=e.defineComponent({name:"ImagePreview",__name:"Image",emits:["success"],setup(n,{emit:t}){const o=t,r=e.inject("ServiceContainer"),{t:l}=r.i18n,s=e.ref(!1),a=e.ref(""),u=e.ref(!1),c=e.ref(r.requester.getPreviewUrl(r.modal.data.storage,r.modal.data.item)),m=e.ref(c.value),i=e.useTemplateRef("cropperRef"),d=async()=>{s.value=!s.value,r.modal.setEditMode(s.value)},g=async()=>{const E=i.value?.getResult({size:{width:795,height:341},fillColor:"#ffffff"})?.canvas;E&&E.toBlob(b=>{if(!b)return;a.value="",u.value=!1;const h=new FormData;h.set("file",b),r.requester.send({url:"",method:"post",params:{q:"upload",storage:r.modal.data.storage,path:r.modal.data.item.path},body:h}).then(()=>{a.value=l("Updated."),fetch(c.value,{cache:"reload",mode:"no-cors"});const f=r.root.querySelector('[data-src="'+c.value+'"]');f&&Gt.resetStatus(f),r.emitter.emit("vf-refresh-thumbnails"),d(),o("success")}).catch(f=>{const k=f?.message??"Error";a.value=l(k),u.value=!0})})};return e.onMounted(()=>{o("success")}),(_,E)=>(e.openBlock(),e.createElementBlock("div",jr,[e.createElementVNode("div",qr,[e.createElementVNode("h3",{class:"vuefinder__image-preview__title",id:"modal-title",title:e.unref(r).modal.data.item.path},e.toDisplayString(e.unref(r).modal.data.item.basename),9,Kr),e.createElementVNode("div",Wr,[s.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:g,class:"vuefinder__image-preview__crop-button"},e.toDisplayString(e.unref(l)("Crop")),1)):e.createCommentVNode("",!0),e.unref(r).features.includes(e.unref(z).EDIT)?(e.openBlock(),e.createElementBlock("button",{key:1,class:"vuefinder__image-preview__edit-button",onClick:E[0]||(E[0]=b=>d())},e.toDisplayString(s.value?e.unref(l)("Cancel"):e.unref(l)("Edit")),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("div",Gr,[s.value?(e.openBlock(),e.createBlock(e.unref(Fn.Cropper),{key:1,ref_key:"cropperRef",ref:i,class:"w-full h-full",crossorigin:"anonymous",src:m.value,"auto-zoom":!0,priority:"image",transitions:!0},null,8,["src"])):(e.openBlock(),e.createElementBlock("img",{key:0,style:{},src:e.unref(r).requester.getPreviewUrl(e.unref(r).modal.data.storage,e.unref(r).modal.data.item),class:"vuefinder__image-preview__image w-full h-full"},null,8,Yr))]),a.value.length?(e.openBlock(),e.createBlock(e.unref(a),{key:0,onHidden:E[1]||(E[1]=b=>a.value=""),error:u.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)]))}}),Qr={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function Jr(n,t){return e.openBlock(),e.createElementBlock("svg",Qr,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 0 0 2-2V9.414a1 1 0 0 0-.293-.707l-5.414-5.414A1 1 0 0 0 12.586 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2"},null,-1)])])}const Oe={render:Jr},Zr={class:"vuefinder__default-preview"},el={class:"vuefinder__default-preview__content"},tl={class:"vuefinder__default-preview__header"},nl=["title"],ol={class:"vuefinder__default-preview__icon-container"},rl=["title"],ll=e.defineComponent({__name:"Default",emits:["success"],setup(n,{emit:t}){const o=e.inject("ServiceContainer"),r=t;return e.onMounted(()=>{r("success")}),(l,s)=>(e.openBlock(),e.createElementBlock("div",Zr,[e.createElementVNode("div",el,[e.createElementVNode("div",tl,[e.createElementVNode("h3",{class:"vuefinder__default-preview__title",id:"modal-title",title:e.unref(o).modal.data.item.path},e.toDisplayString(e.unref(o).modal.data.item.basename),9,nl)]),e.createElementVNode("div",ol,[e.createVNode(e.unref(Oe),{class:"vuefinder__default-preview__file-icon"}),e.createElementVNode("div",{class:"vuefinder__default-preview__file-name",id:"modal-title",title:e.unref(o).modal.data.item.path},e.toDisplayString(e.unref(o).modal.data.item.basename),9,rl)])])]))}}),al={class:"vuefinder__video-preview"},sl=["title"],il={class:"vuefinder__video-preview__video",preload:"metadata",controls:""},cl=["src"],dl=e.defineComponent({__name:"Video",emits:["success"],setup(n,{emit:t}){const o=e.inject("ServiceContainer"),r=t,l=()=>o.requester.getPreviewUrl(o.modal.data.storage,o.modal.data.item);return e.onMounted(()=>{r("success")}),(s,a)=>(e.openBlock(),e.createElementBlock("div",al,[e.createElementVNode("h3",{class:"vuefinder__video-preview__title",id:"modal-title",title:e.unref(o).modal.data.item.path},e.toDisplayString(e.unref(o).modal.data.item.basename),9,sl),e.createElementVNode("div",null,[e.createElementVNode("video",il,[e.createElementVNode("source",{src:l(),type:"video/mp4"},null,8,cl),a[0]||(a[0]=e.createTextVNode(" Your browser does not support the video tag. ",-1))])])]))}}),ul={class:"vuefinder__audio-preview"},ml=["title"],fl={class:"vuefinder__audio-preview__audio",controls:""},vl=["src"],pl=e.defineComponent({__name:"Audio",emits:["success"],setup(n,{emit:t}){const o=t,r=e.inject("ServiceContainer"),l=()=>r.requester.getPreviewUrl(r.modal.data.storage,r.modal.data.item);return e.onMounted(()=>{o("success")}),(s,a)=>(e.openBlock(),e.createElementBlock("div",ul,[e.createElementVNode("h3",{class:"vuefinder__audio-preview__title",id:"modal-title",title:e.unref(r).modal.data.item.path},e.toDisplayString(e.unref(r).modal.data.item.basename),9,ml),e.createElementVNode("div",null,[e.createElementVNode("audio",fl,[e.createElementVNode("source",{src:l(),type:"audio/mpeg"},null,8,vl),a[0]||(a[0]=e.createTextVNode(" Your browser does not support the audio element. ",-1))])])]))}}),_l={class:"vuefinder__pdf-preview"},hl=["title"],gl=["data"],wl=["src"],kl=e.defineComponent({__name:"Pdf",emits:["success"],setup(n,{emit:t}){const o=e.inject("ServiceContainer"),r=t,l=()=>o.requester.getPreviewUrl(o.modal.data.storage,o.modal.data.item);return e.onMounted(()=>{r("success")}),(s,a)=>(e.openBlock(),e.createElementBlock("div",_l,[e.createElementVNode("h3",{class:"vuefinder__pdf-preview__title",id:"modal-title",title:e.unref(o).modal.data.item.path},e.toDisplayString(e.unref(o).modal.data.item.basename),9,hl),e.createElementVNode("div",null,[e.createElementVNode("object",{class:"vuefinder__pdf-preview__object",data:l(),type:"application/pdf",width:"100%",height:"100%"},[e.createElementVNode("iframe",{class:"vuefinder__pdf-preview__iframe",src:l(),width:"100%",height:"100%"}," Your browser does not support PDFs ",8,wl)],8,gl)])]))}});function yl(n,t=null){return new Date(n*1e3).toLocaleString(t??navigator.language??"en-US")}const bl={key:0,class:"vuefinder__preview-modal__nav-overlay"},El=["disabled","title"],Vl=["disabled","title"],Nl={class:"vuefinder__preview-modal__content"},xl={key:0},Sl={class:"vuefinder__preview-modal__loading"},Cl={key:0,class:"vuefinder__preview-modal__loading-indicator"},Bl={class:"vuefinder__preview-modal__details"},$l={class:"font-bold"},Dl={class:"font-bold pl-2"},Tl={key:0,class:"vuefinder__preview-modal__note"},Ml=["download","href"],Je=e.defineComponent({__name:"ModalPreview",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=e.ref(!1),l=b=>(t.modal.data.item.mime_type??"").startsWith(b),s=t.features.includes(z.PREVIEW);s||(r.value=!0);const a=e.computed(()=>t.modal.data.item),u=L.useStore(t.fs.sortedFiles),c=e.computed(()=>u.value.filter(b=>b.type==="file")),m=e.computed(()=>c.value.findIndex(b=>b.path===a.value.path)),i=e.computed(()=>m.value>0),d=e.computed(()=>m.value<c.value.length-1),g=()=>{if(t.modal.editMode.value||!i.value)return;const b=c.value[m.value-1];t.fs.clearSelection(),t.fs.select(b.path),t.modal.data.item=b,t.modal.data.storage=t.modal.data.storage},_=()=>{if(t.modal.editMode.value||!d.value)return;const b=c.value[m.value+1];t.fs.clearSelection(),t.fs.select(b.path),t.modal.data.item=b,t.modal.data.storage=t.modal.data.storage},E=b=>{if(b.key==="Escape"){b.preventDefault(),b.stopPropagation(),t.modal.close();return}(b.key==="ArrowLeft"||b.key==="ArrowRight")&&(b.preventDefault(),b.stopPropagation(),b.key==="ArrowLeft"?g():_())};return e.onMounted(()=>{const b=document.querySelector(".vuefinder__preview-modal");b&&b.focus()}),(b,h)=>(e.openBlock(),e.createBlock(ie,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:h[6]||(h[6]=f=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Close")),1),e.unref(t).features.includes(e.unref(z).DOWNLOAD)?(e.openBlock(),e.createElementBlock("a",{key:0,target:"_blank",class:"vf-btn vf-btn-primary",download:e.unref(t).requester.getDownloadUrl(e.unref(t).modal.data.storage,e.unref(t).modal.data.item),href:e.unref(t).requester.getDownloadUrl(e.unref(t).modal.data.storage,e.unref(t).modal.data.item)},e.toDisplayString(e.unref(o)("Download")),9,Ml)):e.createCommentVNode("",!0)]),default:e.withCtx(()=>[e.createElementVNode("div",{class:"vuefinder__preview-modal",onKeydown:E,tabindex:"0"},[e.unref(t).modal.editMode?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",bl,[e.createElementVNode("button",{onClick:g,disabled:!i.value,class:"vuefinder__preview-modal__nav-side vuefinder__preview-modal__nav-side--left",title:e.unref(o)("Previous file")},[...h[7]||(h[7]=[e.createElementVNode("svg",{class:"vuefinder__preview-modal__nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e.createElementVNode("polyline",{points:"15,18 9,12 15,6"})],-1)])],8,El),e.createElementVNode("button",{onClick:_,disabled:!d.value,class:"vuefinder__preview-modal__nav-side vuefinder__preview-modal__nav-side--right",title:e.unref(o)("Next file")},[...h[8]||(h[8]=[e.createElementVNode("svg",{class:"vuefinder__preview-modal__nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e.createElementVNode("polyline",{points:"9,18 15,12 9,6"})],-1)])],8,Vl)])),e.createElementVNode("div",Nl,[e.unref(s)?(e.openBlock(),e.createElementBlock("div",xl,[l("text")?(e.openBlock(),e.createBlock(Ur,{key:0,onSuccess:h[0]||(h[0]=f=>r.value=!0)})):l("image")?(e.openBlock(),e.createBlock(Xr,{key:1,onSuccess:h[1]||(h[1]=f=>r.value=!0)})):l("video")?(e.openBlock(),e.createBlock(dl,{key:2,onSuccess:h[2]||(h[2]=f=>r.value=!0)})):l("audio")?(e.openBlock(),e.createBlock(pl,{key:3,onSuccess:h[3]||(h[3]=f=>r.value=!0)})):l("application/pdf")?(e.openBlock(),e.createBlock(kl,{key:4,onSuccess:h[4]||(h[4]=f=>r.value=!0)})):(e.openBlock(),e.createBlock(ll,{key:5,onSuccess:h[5]||(h[5]=f=>r.value=!0)}))])):e.createCommentVNode("",!0),e.createElementVNode("div",Sl,[r.value===!1?(e.openBlock(),e.createElementBlock("div",Cl,[h[9]||(h[9]=e.createElementVNode("svg",{class:"vuefinder__preview-modal__spinner",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e.createElementVNode("circle",{class:"vuefinder__preview-modal__spinner-circle",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e.createElementVNode("path",{class:"vuefinder__preview-modal__spinner-path",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e.createElementVNode("span",null,e.toDisplayString(e.unref(o)("Loading")),1)])):e.createCommentVNode("",!0)])])],32),e.createElementVNode("div",Bl,[e.createElementVNode("div",null,[e.createElementVNode("span",$l,e.toDisplayString(e.unref(o)("File Size"))+": ",1),e.createTextVNode(e.toDisplayString(e.unref(t).filesize(e.unref(t).modal.data.item.file_size)),1)]),e.createElementVNode("div",null,[e.createElementVNode("span",Dl,e.toDisplayString(e.unref(o)("Last Modified"))+": ",1),e.createTextVNode(" "+e.toDisplayString(e.unref(yl)(e.unref(t).modal.data.item.last_modified)),1)])]),e.unref(t).features.includes(e.unref(z).DOWNLOAD)?(e.openBlock(),e.createElementBlock("div",Tl,[e.createElementVNode("span",null,e.toDisplayString(e.unref(o)(`Download doesn't work? You can try right-click "Download" button, select "Save link as...".`)),1)])):e.createCommentVNode("",!0)]),_:1}))}}),Fl={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",viewBox:"0 0 24 24"};function Al(n,t){return e.openBlock(),e.createElementBlock("svg",Fl,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3"},null,-1)])])}const Il={render:Al},Rl={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function Ll(n,t){return e.openBlock(),e.createElementBlock("svg",Rl,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-6l-2-2H5a2 2 0 0 0-2 2"},null,-1)])])}const ve={render:Ll},Pl={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"};function Ol(n,t){return e.openBlock(),e.createElementBlock("svg",Pl,[...t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M12 5v14M5 12h14"},null,-1)])])}const Ze={render:Ol},zl={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"};function Hl(n,t){return e.openBlock(),e.createElementBlock("svg",zl,[...t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M5 12h14"},null,-1)])])}const et={render:Hl},Ul={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"h-5 w-5",viewBox:"0 0 24 24"};function jl(n,t){return e.openBlock(),e.createElementBlock("svg",Ul,[...t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"m15 4.5-4 4L7 10l-1.5 1.5 7 7L14 17l1.5-4 4-4M9 15l-4.5 4.5M14.5 4 20 9.5"},null,-1)])])}const yt={render:jl},ql={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function Kl(n,t){return e.openBlock(),e.createElementBlock("svg",ql,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"},null,-1)])])}const bt={render:Kl},Wl={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"};function Gl(n,t){return e.openBlock(),e.createElementBlock("svg",Wl,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 9.776q.168-.026.344-.026h15.812q.176 0 .344.026m-16.5 0a2.25 2.25 0 0 0-1.883 2.542l.857 6a2.25 2.25 0 0 0 2.227 1.932H19.05a2.25 2.25 0 0 0 2.227-1.932l.857-6a2.25 2.25 0 0 0-1.883-2.542m-16.5 0V6A2.25 2.25 0 0 1 6 3.75h3.879a1.5 1.5 0 0 1 1.06.44l2.122 2.12a1.5 1.5 0 0 0 1.06.44H18A2.25 2.25 0 0 1 20.25 9v.776"},null,-1)])])}const Et={render:Gl},Yl={class:"vuefinder__modal-tree__folder-item"},Xl={class:"vuefinder__modal-tree__folder-content"},Ql={key:1,class:"vuefinder__modal-tree__folder-spacer"},Jl={class:"vuefinder__modal-tree__folder-text"},Zl={key:0,class:"vuefinder__modal-tree__subfolders"},ea=300,ta=e.defineComponent({__name:"ModalTreeFolderItem",props:{folder:{},storage:{},modelValue:{},expandedFolders:{},modalTreeData:{},currentPath:{}},emits:["update:modelValue","selectAndClose","toggleFolder"],setup(n,{emit:t}){const o=e.inject("ServiceContainer"),{t:r}=o.i18n,l=o.fs,s=n,a=t;L.useStore(l.path);const u=e.computed(()=>{const f=`${s.storage}:${s.folder.path}`;return s.expandedFolders[f]||!1}),c=e.computed(()=>s.modelValue?.path===s.folder.path),m=e.computed(()=>s.currentPath?.path===s.folder.path),i=e.computed(()=>s.modalTreeData[s.folder.path]||[]),d=e.computed(()=>i.value.length>0||s.folder.type==="dir"),g=()=>{a("toggleFolder",s.storage,s.folder.path)},_=()=>{a("update:modelValue",s.folder)},E=()=>{a("update:modelValue",s.folder),a("selectAndClose",s.folder)};let b=0;const h=()=>{const f=Date.now();f-b<ea?E():_(),b=f};return(f,k)=>{const v=e.resolveComponent("ModalTreeFolderItem",!0);return e.openBlock(),e.createElementBlock("div",Yl,[e.createElementVNode("div",Xl,[d.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"vuefinder__modal-tree__folder-toggle",onClick:g},[u.value?(e.openBlock(),e.createBlock(e.unref(et),{key:1,class:"vuefinder__modal-tree__folder-toggle-icon"})):(e.openBlock(),e.createBlock(e.unref(Ze),{key:0,class:"vuefinder__modal-tree__folder-toggle-icon"}))])):(e.openBlock(),e.createElementBlock("div",Ql)),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__modal-tree__folder-link",{"vuefinder__modal-tree__folder-link--selected":c.value,"vuefinder__modal-tree__folder-link--current":m.value}]),onClick:_,onDblclick:E,onTouchend:h},[u.value?(e.openBlock(),e.createBlock(e.unref(Et),{key:1,class:"vuefinder__item-icon__folder--open vuefinder__modal-tree__folder-icon"})):(e.openBlock(),e.createBlock(e.unref(ve),{key:0,class:"vuefinder__modal-tree__folder-icon vuefinder__item-icon__folder"})),e.createElementVNode("span",Jl,e.toDisplayString(n.folder.basename),1)],34)]),u.value&&d.value?(e.openBlock(),e.createElementBlock("div",Zl,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,p=>(e.openBlock(),e.createBlock(v,{key:p.path,folder:p,storage:n.storage,modelValue:n.modelValue,expandedFolders:n.expandedFolders,modalTreeData:n.modalTreeData,currentPath:n.currentPath,"onUpdate:modelValue":k[0]||(k[0]=V=>f.$emit("update:modelValue",V)),onSelectAndClose:k[1]||(k[1]=V=>f.$emit("selectAndClose",V)),onToggleFolder:k[2]||(k[2]=(V,N)=>f.$emit("toggleFolder",V,N))},null,8,["folder","storage","modelValue","expandedFolders","modalTreeData","currentPath"]))),128))])):e.createCommentVNode("",!0)])}}}),na={class:"vuefinder__modal-tree"},oa={class:"vuefinder__modal-tree__header"},ra={class:"vuefinder__modal-tree__title"},la={key:0,class:"vuefinder__modal-tree__section"},aa={class:"vuefinder__modal-tree__section-title"},sa={class:"vuefinder__modal-tree__list"},ia=["onClick","onDblclick","onTouchend"],ca={class:"vuefinder__modal-tree__text"},da={class:"vuefinder__modal-tree__text-storage"},ua={class:"vuefinder__modal-tree__section-title"},ma={class:"vuefinder__modal-tree__list"},fa={class:"vuefinder__modal-tree__storage-item"},va={class:"vuefinder__modal-tree__storage-content"},pa=["onClick"],_a=["onClick","onDblclick","onTouchend"],ha={class:"vuefinder__modal-tree__storage-text"},ga={key:0,class:"vuefinder__modal-tree__subfolders"},At=300,Vt=e.defineComponent({__name:"ModalTreeSelector",props:{modelValue:{},showPinnedFolders:{type:Boolean},currentPath:{}},emits:["update:modelValue","selectAndClose"],setup(n,{emit:t}){const o=e.inject("ServiceContainer"),{t:r}=o.i18n,l=o.fs,s=o.config,a=t,u=L.useStore(l.sortedFiles),c=L.useStore(l.storages),m=L.useStore(l.path),i=e.ref(null),d=e.ref({}),g=e.ref({});e.watch(u,N=>{const A=N.filter(T=>T.type==="dir"),I=m.value?.path||"";I&&(g.value[I]=A.map(T=>({...T,type:"dir"})))});const _=(N,A)=>{const I=`${N}:${A}`;d.value={...d.value,[I]:!d.value[I]},d.value[I]&&!g.value[A]&&o.emitter.emit("vf-fetch",{params:{q:"index",path:A},dontChangePath:!0,onSuccess:T=>{if(T.files){const O=T.files.filter(q=>q.type==="dir");g.value[A]=O.map(q=>({...q,type:"dir"}))}}})},E=N=>g.value[N]||[],b=N=>{N&&a("update:modelValue",N)},h=N=>{N&&(a("update:modelValue",N),a("selectAndClose",N))},f=N=>{const A={storage:N,path:N+"://",basename:N,type:"dir",extension:"",file_size:null,last_modified:null,mime_type:null,visibility:"public",dir:N+"://"};a("update:modelValue",A)},k=N=>{const A={storage:N,path:N+"://",basename:N,type:"dir",extension:"",file_size:null,last_modified:null,mime_type:null,visibility:"public",dir:N+"://"};a("update:modelValue",A),a("selectAndClose",A)};let v=0;const p=N=>{if(!N)return;const A=Date.now();A-v<At?h(N):b(N),v=A},V=N=>{const A=Date.now();A-v<At?k(N):f(N),v=A};return e.onMounted(()=>{i.value&&Ye.OverlayScrollbars(i.value,{overflow:{x:"hidden"},scrollbars:{theme:"vf-scrollbars-theme"}})}),(N,A)=>(e.openBlock(),e.createElementBlock("div",na,[e.createElementVNode("div",oa,[e.createElementVNode("div",ra,e.toDisplayString(e.unref(r)("Select Target Folder")),1)]),e.createElementVNode("div",{ref_key:"modalContentElement",ref:i,class:"vuefinder__modal-tree__content"},[n.showPinnedFolders&&e.unref(s).get("pinnedFolders").length?(e.openBlock(),e.createElementBlock("div",la,[e.createElementVNode("div",aa,e.toDisplayString(e.unref(r)("Pinned Folders")),1),e.createElementVNode("div",sa,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(s).get("pinnedFolders"),I=>(e.openBlock(),e.createElementBlock("div",{key:I.path,class:e.normalizeClass(["vuefinder__modal-tree__item",{"vuefinder__modal-tree__item--selected":n.modelValue?.path===I.path}]),onClick:T=>b(I),onDblclick:T=>h(I),onTouchend:T=>p(I)},[e.createVNode(e.unref(ve),{class:"vuefinder__modal-tree__icon vuefinder__item-icon__folder"}),e.createElementVNode("div",ca,e.toDisplayString(I.basename),1),e.createElementVNode("div",da,e.toDisplayString(I.storage),1),e.createVNode(e.unref(yt),{class:"vuefinder__modal-tree__icon vuefinder__modal-tree__icon--pin"})],42,ia))),128))])])):e.createCommentVNode("",!0),e.createElementVNode("div",ua,e.toDisplayString(e.unref(r)("Storages")),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Array.isArray(e.unref(c))?e.unref(c):e.unref(c).value||[],I=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__modal-tree__section",key:I},[e.createElementVNode("div",ma,[e.createElementVNode("div",fa,[e.createElementVNode("div",va,[e.createElementVNode("div",{class:"vuefinder__modal-tree__storage-toggle",onClick:e.withModifiers(T=>_(I,I+"://"),["stop"])},[d.value[`${I}:${I}://`]?(e.openBlock(),e.createBlock(e.unref(et),{key:1,class:"vuefinder__modal-tree__toggle-icon"})):(e.openBlock(),e.createBlock(e.unref(Ze),{key:0,class:"vuefinder__modal-tree__toggle-icon"}))],8,pa),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__modal-tree__storage-link",{"vuefinder__modal-tree__storage-link--selected":n.modelValue?.path===I+"://"}]),onClick:T=>f(I),onDblclick:T=>k(I),onTouchend:T=>V(I)},[e.createVNode(e.unref(bt),{class:"vuefinder__modal-tree__storage-icon"}),e.createElementVNode("span",ha,e.toDisplayString(I),1)],42,_a)]),d.value[`${I}:${I}://`]?(e.openBlock(),e.createElementBlock("div",ga,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(E(I+"://"),T=>(e.openBlock(),e.createBlock(ta,{key:T.path,folder:T,storage:I,modelValue:n.modelValue,expandedFolders:d.value,modalTreeData:g.value,currentPath:n.currentPath,"onUpdate:modelValue":b,onSelectAndClose:h,onToggleFolder:_},null,8,["folder","storage","modelValue","expandedFolders","modalTreeData","currentPath"]))),128))])):e.createCommentVNode("",!0)])])]))),128))],512)]))}}),wa={class:"vuefinder__move-modal__content"},ka={class:"vuefinder__move-modal__description"},ya={class:"vuefinder__move-modal__files vf-scrollbar"},ba={key:0,class:"vuefinder__move-modal__icon vuefinder__move-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Ea={key:1,class:"vuefinder__move-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Va={class:"vuefinder__move-modal__file-name"},Na={class:"vuefinder__move-modal__target-title"},xa={class:"vuefinder__move-modal__target-container"},Sa={class:"vuefinder__move-modal__target-path"},Ca={class:"vuefinder__move-modal__target-storage"},Ba={key:0,class:"vuefinder__move-modal__target-folder"},$a={class:"vuefinder__move-modal__target-badge"},Da={class:"vuefinder__move-modal__options"},Ta={class:"vuefinder__move-modal__checkbox-label"},Ma={class:"vuefinder__move-modal__checkbox-text"},Fa={class:"vuefinder__move-modal__selected-items"},en=e.defineComponent({__name:"ModalTransfer",props:{q:{}},setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=L.useStore(r.path),s=n,a=e.ref(t.modal.data.items.from),u=e.ref(t.modal.data.items.to),c=e.ref(""),m=e.ref(!1),i=e.ref(!1),d=e.computed(()=>m.value?o("Copy files"):o("Move files")),g=e.computed(()=>m.value?o("Are you sure you want to copy these files?"):o("Are you sure you want to move these files?")),_=e.computed(()=>m.value?o("Yes, Copy!"):o("Yes, Move!")),E=e.computed(()=>m.value?o("Files copied."):o("Files moved.")),b=v=>{v&&(u.value=v)},h=v=>{v&&(u.value=v,i.value=!1)},f=()=>{const v=u.value.path;if(!v)return{storage:"local",path:""};if(v.endsWith("://"))return{storage:v.replace("://",""),path:""};const p=v.split("://");return{storage:p[0]||"local",path:p[1]||""}},k=()=>{if(a.value.length){const v=m.value?"copy":s.q||"move";t.emitter.emit("vf-fetch",{params:{q:v,m:"post",path:l.value.path},body:{items:a.value.map(({path:p,type:V})=>({path:p,type:V})),item:u.value.path},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:E})},onError:p=>{c.value=o(p.message)}})}};return(v,p)=>(e.openBlock(),e.createBlock(ie,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:k,class:"vf-btn vf-btn-primary"},e.toDisplayString(_.value),1),e.createElementVNode("button",{type:"button",onClick:p[4]||(p[4]=V=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1),e.createElementVNode("div",Fa,e.toDisplayString(e.unref(o)("%s item(s) selected.",a.value.length)),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(ue,{icon:e.unref(Il),title:d.value},null,8,["icon","title"]),e.createElementVNode("div",wa,[e.createElementVNode("p",ka,e.toDisplayString(g.value),1),e.createElementVNode("div",ya,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,V=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__move-modal__file",key:V.path},[e.createElementVNode("div",null,[V.type==="dir"?(e.openBlock(),e.createElementBlock("svg",ba,[...p[5]||(p[5]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",Ea,[...p[6]||(p[6]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])]))]),e.createElementVNode("div",Va,e.toDisplayString(V.path),1)]))),128))]),e.createElementVNode("h4",Na,e.toDisplayString(e.unref(o)("Target Directory")),1),e.createElementVNode("div",xa,[e.createElementVNode("div",{class:"vuefinder__move-modal__target-display",onClick:p[0]||(p[0]=V=>i.value=!i.value)},[e.createElementVNode("div",Sa,[e.createElementVNode("span",Ca,e.toDisplayString(f().storage)+"://",1),f().path?(e.openBlock(),e.createElementBlock("span",Ba,e.toDisplayString(f().path),1)):e.createCommentVNode("",!0)]),e.createElementVNode("span",$a,e.toDisplayString(e.unref(o)("Browse")),1)])]),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__move-modal__tree-selector",i.value?"vuefinder__move-modal__tree-selector--expanded":"vuefinder__move-modal__tree-selector--collapsed"])},[e.createVNode(Vt,{modelValue:u.value,"onUpdate:modelValue":[p[1]||(p[1]=V=>u.value=V),b],"show-pinned-folders":!0,onSelectAndClose:h},null,8,["modelValue"])],2),e.createElementVNode("div",Da,[e.createElementVNode("label",Ta,[e.withDirectives(e.createElementVNode("input",{type:"checkbox","onUpdate:modelValue":p[2]||(p[2]=V=>m.value=V),class:"vuefinder__move-modal__checkbox"},null,512),[[e.vModelCheckbox,m.value]]),e.createElementVNode("span",Ma,e.toDisplayString(e.unref(o)("Create a copy instead of moving")),1)])]),c.value.length?(e.openBlock(),e.createBlock(e.unref(c),{key:0,onHidden:p[3]||(p[3]=V=>c.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.value),1)]),_:1})):e.createCommentVNode("",!0)])])]),_:1}))}}),xe=e.defineComponent({__name:"ModalMove",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n;return(r,l)=>(e.openBlock(),e.createBlock(en,{q:"move"}))}}),Nt=e.defineComponent({__name:"ModalCopy",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n;return(r,l)=>(e.openBlock(),e.createBlock(en,{q:"copy"}))}}),Aa=(n,t=0,o=!1)=>{let r;return(...l)=>{o&&!r&&n(...l),clearTimeout(r),r=setTimeout(()=>{n(...l)},t)}},tn=(n,t,o)=>{const r=e.ref(n);return e.customRef((l,s)=>({get(){return l(),r.value},set:Aa(a=>{r.value=a,s()},t,!1)}))},Ia={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"};function Ra(n,t){return e.openBlock(),e.createElementBlock("svg",Ia,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607"},null,-1)])])}const xt={render:Ra},La={xmlns:"http://www.w3.org/2000/svg",fill:"none",class:"animate-spin p-0.5 h-5 w-5 text-white ml-auto",viewBox:"0 0 24 24"};function Pa(n,t){return e.openBlock(),e.createElementBlock("svg",La,[...t[0]||(t[0]=[e.createElementVNode("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",class:"opacity-25 stroke-blue-900 dark:stroke-blue-100"},null,-1),e.createElementVNode("path",{fill:"currentColor",d:"M4 12a8 8 0 0 1 8-8V0C5.373 0 0 5.373 0 12zm2 5.291A7.96 7.96 0 0 1 4 12H0c0 3.042 1.135 5.824 3 7.938z",class:"opacity-75"},null,-1)])])}const tt={render:Pa},Oa={class:"vuefinder__search-modal__search-input"},za=["value","placeholder","disabled"],Ha={key:0,class:"vuefinder__search-modal__loading"},Ua=e.defineComponent({name:"SearchInput",__name:"SearchInput",props:{modelValue:{},isSearching:{type:Boolean},disabled:{type:Boolean}},emits:["update:modelValue","keydown"],setup(n,{expose:t,emit:o}){const r=o,l=e.inject("ServiceContainer"),{t:s}=l.i18n,a=e.ref(null),u=m=>{const i=m.target;r("update:modelValue",i.value)},c=m=>{r("keydown",m)};return t({focus:()=>{a.value&&a.value.focus()}}),(m,i)=>(e.openBlock(),e.createElementBlock("div",Oa,[e.createVNode(e.unref(xt),{class:"vuefinder__search-modal__search-icon"}),e.createElementVNode("input",{ref_key:"searchInput",ref:a,value:n.modelValue,type:"text",placeholder:e.unref(s)("Search Files"),disabled:n.disabled,class:"vuefinder__search-modal__input",onKeydown:c,onKeyup:i[0]||(i[0]=e.withModifiers(()=>{},["stop"])),onInput:u},null,40,za),n.isSearching?(e.openBlock(),e.createElementBlock("div",Ha,[e.createVNode(e.unref(tt),{class:"vuefinder__search-modal__loading-icon"})])):e.createCommentVNode("",!0)]))}}),ze=Math.min,we=Math.max,He=Math.round,Pe=Math.floor,ce=n=>({x:n,y:n}),ja={left:"right",right:"left",bottom:"top",top:"bottom"},qa={start:"end",end:"start"};function It(n,t,o){return we(n,ze(t,o))}function nt(n,t){return typeof n=="function"?n(t):n}function ke(n){return n.split("-")[0]}function ot(n){return n.split("-")[1]}function nn(n){return n==="x"?"y":"x"}function on(n){return n==="y"?"height":"width"}const Ka=new Set(["top","bottom"]);function pe(n){return Ka.has(ke(n))?"y":"x"}function rn(n){return nn(pe(n))}function Wa(n,t,o){o===void 0&&(o=!1);const r=ot(n),l=rn(n),s=on(l);let a=l==="x"?r===(o?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=Ue(a)),[a,Ue(a)]}function Ga(n){const t=Ue(n);return[_t(n),t,_t(t)]}function _t(n){return n.replace(/start|end/g,t=>qa[t])}const Rt=["left","right"],Lt=["right","left"],Ya=["top","bottom"],Xa=["bottom","top"];function Qa(n,t,o){switch(n){case"top":case"bottom":return o?t?Lt:Rt:t?Rt:Lt;case"left":case"right":return t?Ya:Xa;default:return[]}}function Ja(n,t,o,r){const l=ot(n);let s=Qa(ke(n),o==="start",r);return l&&(s=s.map(a=>a+"-"+l),t&&(s=s.concat(s.map(_t)))),s}function Ue(n){return n.replace(/left|right|bottom|top/g,t=>ja[t])}function Za(n){return{top:0,right:0,bottom:0,left:0,...n}}function es(n){return typeof n!="number"?Za(n):{top:n,right:n,bottom:n,left:n}}function je(n){const{x:t,y:o,width:r,height:l}=n;return{width:r,height:l,top:o,left:t,right:t+r,bottom:o+l,x:t,y:o}}function Pt(n,t,o){let{reference:r,floating:l}=n;const s=pe(t),a=rn(t),u=on(a),c=ke(t),m=s==="y",i=r.x+r.width/2-l.width/2,d=r.y+r.height/2-l.height/2,g=r[u]/2-l[u]/2;let _;switch(c){case"top":_={x:i,y:r.y-l.height};break;case"bottom":_={x:i,y:r.y+r.height};break;case"right":_={x:r.x+r.width,y:d};break;case"left":_={x:r.x-l.width,y:d};break;default:_={x:r.x,y:r.y}}switch(ot(t)){case"start":_[a]-=g*(o&&m?-1:1);break;case"end":_[a]+=g*(o&&m?-1:1);break}return _}const ts=async(n,t,o)=>{const{placement:r="bottom",strategy:l="absolute",middleware:s=[],platform:a}=o,u=s.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let m=await a.getElementRects({reference:n,floating:t,strategy:l}),{x:i,y:d}=Pt(m,r,c),g=r,_={},E=0;for(let b=0;b<u.length;b++){const{name:h,fn:f}=u[b],{x:k,y:v,data:p,reset:V}=await f({x:i,y:d,initialPlacement:r,placement:g,strategy:l,middlewareData:_,rects:m,platform:a,elements:{reference:n,floating:t}});i=k??i,d=v??d,_={..._,[h]:{..._[h],...p}},V&&E<=50&&(E++,typeof V=="object"&&(V.placement&&(g=V.placement),V.rects&&(m=V.rects===!0?await a.getElementRects({reference:n,floating:t,strategy:l}):V.rects),{x:i,y:d}=Pt(m,g,c)),b=-1)}return{x:i,y:d,placement:g,strategy:l,middlewareData:_}};async function ln(n,t){var o;t===void 0&&(t={});const{x:r,y:l,platform:s,rects:a,elements:u,strategy:c}=n,{boundary:m="clippingAncestors",rootBoundary:i="viewport",elementContext:d="floating",altBoundary:g=!1,padding:_=0}=nt(t,n),E=es(_),h=u[g?d==="floating"?"reference":"floating":d],f=je(await s.getClippingRect({element:(o=await(s.isElement==null?void 0:s.isElement(h)))==null||o?h:h.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(u.floating)),boundary:m,rootBoundary:i,strategy:c})),k=d==="floating"?{x:r,y:l,width:a.floating.width,height:a.floating.height}:a.reference,v=await(s.getOffsetParent==null?void 0:s.getOffsetParent(u.floating)),p=await(s.isElement==null?void 0:s.isElement(v))?await(s.getScale==null?void 0:s.getScale(v))||{x:1,y:1}:{x:1,y:1},V=je(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:k,offsetParent:v,strategy:c}):k);return{top:(f.top-V.top+E.top)/p.y,bottom:(V.bottom-f.bottom+E.bottom)/p.y,left:(f.left-V.left+E.left)/p.x,right:(V.right-f.right+E.right)/p.x}}const ns=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(t){var o,r;const{placement:l,middlewareData:s,rects:a,initialPlacement:u,platform:c,elements:m}=t,{mainAxis:i=!0,crossAxis:d=!0,fallbackPlacements:g,fallbackStrategy:_="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:b=!0,...h}=nt(n,t);if((o=s.arrow)!=null&&o.alignmentOffset)return{};const f=ke(l),k=pe(u),v=ke(u)===u,p=await(c.isRTL==null?void 0:c.isRTL(m.floating)),V=g||(v||!b?[Ue(u)]:Ga(u)),N=E!=="none";!g&&N&&V.push(...Ja(u,b,E,p));const A=[u,...V],I=await ln(t,h),T=[];let O=((r=s.flip)==null?void 0:r.overflows)||[];if(i&&T.push(I[f]),d){const j=Wa(l,a,p);T.push(I[j[0]],I[j[1]])}if(O=[...O,{placement:l,overflows:T}],!T.every(j=>j<=0)){var q,W;const j=(((q=s.flip)==null?void 0:q.index)||0)+1,K=A[j];if(K&&(!(d==="alignment"?k!==pe(K):!1)||O.every(w=>pe(w.placement)===k?w.overflows[0]>0:!0)))return{data:{index:j,overflows:O},reset:{placement:K}};let $=(W=O.filter(x=>x.overflows[0]<=0).sort((x,w)=>x.overflows[1]-w.overflows[1])[0])==null?void 0:W.placement;if(!$)switch(_){case"bestFit":{var P;const x=(P=O.filter(w=>{if(N){const y=pe(w.placement);return y===k||y==="y"}return!0}).map(w=>[w.placement,w.overflows.filter(y=>y>0).reduce((y,C)=>y+C,0)]).sort((w,y)=>w[1]-y[1])[0])==null?void 0:P[0];x&&($=x);break}case"initialPlacement":$=u;break}if(l!==$)return{reset:{placement:$}}}return{}}}},os=new Set(["left","top"]);async function rs(n,t){const{placement:o,platform:r,elements:l}=n,s=await(r.isRTL==null?void 0:r.isRTL(l.floating)),a=ke(o),u=ot(o),c=pe(o)==="y",m=os.has(a)?-1:1,i=s&&c?-1:1,d=nt(t,n);let{mainAxis:g,crossAxis:_,alignmentAxis:E}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return u&&typeof E=="number"&&(_=u==="end"?E*-1:E),c?{x:_*i,y:g*m}:{x:g*m,y:_*i}}const ls=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(t){var o,r;const{x:l,y:s,placement:a,middlewareData:u}=t,c=await rs(t,n);return a===((o=u.offset)==null?void 0:o.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:l+c.x,y:s+c.y,data:{...c,placement:a}}}}},as=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(t){const{x:o,y:r,placement:l}=t,{mainAxis:s=!0,crossAxis:a=!1,limiter:u={fn:h=>{let{x:f,y:k}=h;return{x:f,y:k}}},...c}=nt(n,t),m={x:o,y:r},i=await ln(t,c),d=pe(ke(l)),g=nn(d);let _=m[g],E=m[d];if(s){const h=g==="y"?"top":"left",f=g==="y"?"bottom":"right",k=_+i[h],v=_-i[f];_=It(k,_,v)}if(a){const h=d==="y"?"top":"left",f=d==="y"?"bottom":"right",k=E+i[h],v=E-i[f];E=It(k,E,v)}const b=u.fn({...t,[g]:_,[d]:E});return{...b,data:{x:b.x-o,y:b.y-r,enabled:{[g]:s,[d]:a}}}}}};function rt(){return typeof window<"u"}function Ce(n){return an(n)?(n.nodeName||"").toLowerCase():"#document"}function le(n){var t;return(n==null||(t=n.ownerDocument)==null?void 0:t.defaultView)||window}function me(n){var t;return(t=(an(n)?n.ownerDocument:n.document)||window.document)==null?void 0:t.documentElement}function an(n){return rt()?n instanceof Node||n instanceof le(n).Node:!1}function ae(n){return rt()?n instanceof Element||n instanceof le(n).Element:!1}function de(n){return rt()?n instanceof HTMLElement||n instanceof le(n).HTMLElement:!1}function Ot(n){return!rt()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof le(n).ShadowRoot}const ss=new Set(["inline","contents"]);function Fe(n){const{overflow:t,overflowX:o,overflowY:r,display:l}=se(n);return/auto|scroll|overlay|hidden|clip/.test(t+r+o)&&!ss.has(l)}const is=new Set(["table","td","th"]);function cs(n){return is.has(Ce(n))}const ds=[":popover-open",":modal"];function lt(n){return ds.some(t=>{try{return n.matches(t)}catch{return!1}})}const us=["transform","translate","scale","rotate","perspective"],ms=["transform","translate","scale","rotate","perspective","filter"],fs=["paint","layout","strict","content"];function St(n){const t=Ct(),o=ae(n)?se(n):n;return us.some(r=>o[r]?o[r]!=="none":!1)||(o.containerType?o.containerType!=="normal":!1)||!t&&(o.backdropFilter?o.backdropFilter!=="none":!1)||!t&&(o.filter?o.filter!=="none":!1)||ms.some(r=>(o.willChange||"").includes(r))||fs.some(r=>(o.contain||"").includes(r))}function vs(n){let t=_e(n);for(;de(t)&&!Se(t);){if(St(t))return t;if(lt(t))return null;t=_e(t)}return null}function Ct(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const ps=new Set(["html","body","#document"]);function Se(n){return ps.has(Ce(n))}function se(n){return le(n).getComputedStyle(n)}function at(n){return ae(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function _e(n){if(Ce(n)==="html")return n;const t=n.assignedSlot||n.parentNode||Ot(n)&&n.host||me(n);return Ot(t)?t.host:t}function sn(n){const t=_e(n);return Se(t)?n.ownerDocument?n.ownerDocument.body:n.body:de(t)&&Fe(t)?t:sn(t)}function De(n,t,o){var r;t===void 0&&(t=[]),o===void 0&&(o=!0);const l=sn(n),s=l===((r=n.ownerDocument)==null?void 0:r.body),a=le(l);if(s){const u=ht(a);return t.concat(a,a.visualViewport||[],Fe(l)?l:[],u&&o?De(u):[])}return t.concat(l,De(l,[],o))}function ht(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function cn(n){const t=se(n);let o=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const l=de(n),s=l?n.offsetWidth:o,a=l?n.offsetHeight:r,u=He(o)!==s||He(r)!==a;return u&&(o=s,r=a),{width:o,height:r,$:u}}function Bt(n){return ae(n)?n:n.contextElement}function Ne(n){const t=Bt(n);if(!de(t))return ce(1);const o=t.getBoundingClientRect(),{width:r,height:l,$:s}=cn(t);let a=(s?He(o.width):o.width)/r,u=(s?He(o.height):o.height)/l;return(!a||!Number.isFinite(a))&&(a=1),(!u||!Number.isFinite(u))&&(u=1),{x:a,y:u}}const _s=ce(0);function dn(n){const t=le(n);return!Ct()||!t.visualViewport?_s:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function hs(n,t,o){return t===void 0&&(t=!1),!o||t&&o!==le(n)?!1:t}function ye(n,t,o,r){t===void 0&&(t=!1),o===void 0&&(o=!1);const l=n.getBoundingClientRect(),s=Bt(n);let a=ce(1);t&&(r?ae(r)&&(a=Ne(r)):a=Ne(n));const u=hs(s,o,r)?dn(s):ce(0);let c=(l.left+u.x)/a.x,m=(l.top+u.y)/a.y,i=l.width/a.x,d=l.height/a.y;if(s){const g=le(s),_=r&&ae(r)?le(r):r;let E=g,b=ht(E);for(;b&&r&&_!==E;){const h=Ne(b),f=b.getBoundingClientRect(),k=se(b),v=f.left+(b.clientLeft+parseFloat(k.paddingLeft))*h.x,p=f.top+(b.clientTop+parseFloat(k.paddingTop))*h.y;c*=h.x,m*=h.y,i*=h.x,d*=h.y,c+=v,m+=p,E=le(b),b=ht(E)}}return je({width:i,height:d,x:c,y:m})}function st(n,t){const o=at(n).scrollLeft;return t?t.left+o:ye(me(n)).left+o}function un(n,t){const o=n.getBoundingClientRect(),r=o.left+t.scrollLeft-st(n,o),l=o.top+t.scrollTop;return{x:r,y:l}}function gs(n){let{elements:t,rect:o,offsetParent:r,strategy:l}=n;const s=l==="fixed",a=me(r),u=t?lt(t.floating):!1;if(r===a||u&&s)return o;let c={scrollLeft:0,scrollTop:0},m=ce(1);const i=ce(0),d=de(r);if((d||!d&&!s)&&((Ce(r)!=="body"||Fe(a))&&(c=at(r)),de(r))){const _=ye(r);m=Ne(r),i.x=_.x+r.clientLeft,i.y=_.y+r.clientTop}const g=a&&!d&&!s?un(a,c):ce(0);return{width:o.width*m.x,height:o.height*m.y,x:o.x*m.x-c.scrollLeft*m.x+i.x+g.x,y:o.y*m.y-c.scrollTop*m.y+i.y+g.y}}function ws(n){return Array.from(n.getClientRects())}function ks(n){const t=me(n),o=at(n),r=n.ownerDocument.body,l=we(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=we(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-o.scrollLeft+st(n);const u=-o.scrollTop;return se(r).direction==="rtl"&&(a+=we(t.clientWidth,r.clientWidth)-l),{width:l,height:s,x:a,y:u}}const zt=25;function ys(n,t){const o=le(n),r=me(n),l=o.visualViewport;let s=r.clientWidth,a=r.clientHeight,u=0,c=0;if(l){s=l.width,a=l.height;const i=Ct();(!i||i&&t==="fixed")&&(u=l.offsetLeft,c=l.offsetTop)}const m=st(r);if(m<=0){const i=r.ownerDocument,d=i.body,g=getComputedStyle(d),_=i.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,E=Math.abs(r.clientWidth-d.clientWidth-_);E<=zt&&(s-=E)}else m<=zt&&(s+=m);return{width:s,height:a,x:u,y:c}}const bs=new Set(["absolute","fixed"]);function Es(n,t){const o=ye(n,!0,t==="fixed"),r=o.top+n.clientTop,l=o.left+n.clientLeft,s=de(n)?Ne(n):ce(1),a=n.clientWidth*s.x,u=n.clientHeight*s.y,c=l*s.x,m=r*s.y;return{width:a,height:u,x:c,y:m}}function Ht(n,t,o){let r;if(t==="viewport")r=ys(n,o);else if(t==="document")r=ks(me(n));else if(ae(t))r=Es(t,o);else{const l=dn(n);r={x:t.x-l.x,y:t.y-l.y,width:t.width,height:t.height}}return je(r)}function mn(n,t){const o=_e(n);return o===t||!ae(o)||Se(o)?!1:se(o).position==="fixed"||mn(o,t)}function Vs(n,t){const o=t.get(n);if(o)return o;let r=De(n,[],!1).filter(u=>ae(u)&&Ce(u)!=="body"),l=null;const s=se(n).position==="fixed";let a=s?_e(n):n;for(;ae(a)&&!Se(a);){const u=se(a),c=St(a);!c&&u.position==="fixed"&&(l=null),(s?!c&&!l:!c&&u.position==="static"&&!!l&&bs.has(l.position)||Fe(a)&&!c&&mn(n,a))?r=r.filter(i=>i!==a):l=u,a=_e(a)}return t.set(n,r),r}function Ns(n){let{element:t,boundary:o,rootBoundary:r,strategy:l}=n;const a=[...o==="clippingAncestors"?lt(t)?[]:Vs(t,this._c):[].concat(o),r],u=a[0],c=a.reduce((m,i)=>{const d=Ht(t,i,l);return m.top=we(d.top,m.top),m.right=ze(d.right,m.right),m.bottom=ze(d.bottom,m.bottom),m.left=we(d.left,m.left),m},Ht(t,u,l));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function xs(n){const{width:t,height:o}=cn(n);return{width:t,height:o}}function Ss(n,t,o){const r=de(t),l=me(t),s=o==="fixed",a=ye(n,!0,s,t);let u={scrollLeft:0,scrollTop:0};const c=ce(0);function m(){c.x=st(l)}if(r||!r&&!s)if((Ce(t)!=="body"||Fe(l))&&(u=at(t)),r){const _=ye(t,!0,s,t);c.x=_.x+t.clientLeft,c.y=_.y+t.clientTop}else l&&m();s&&!r&&l&&m();const i=l&&!r&&!s?un(l,u):ce(0),d=a.left+u.scrollLeft-c.x-i.x,g=a.top+u.scrollTop-c.y-i.y;return{x:d,y:g,width:a.width,height:a.height}}function ft(n){return se(n).position==="static"}function Ut(n,t){if(!de(n)||se(n).position==="fixed")return null;if(t)return t(n);let o=n.offsetParent;return me(n)===o&&(o=o.ownerDocument.body),o}function fn(n,t){const o=le(n);if(lt(n))return o;if(!de(n)){let l=_e(n);for(;l&&!Se(l);){if(ae(l)&&!ft(l))return l;l=_e(l)}return o}let r=Ut(n,t);for(;r&&cs(r)&&ft(r);)r=Ut(r,t);return r&&Se(r)&&ft(r)&&!St(r)?o:r||vs(n)||o}const Cs=async function(n){const t=this.getOffsetParent||fn,o=this.getDimensions,r=await o(n.floating);return{reference:Ss(n.reference,await t(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Bs(n){return se(n).direction==="rtl"}const $s={convertOffsetParentRelativeRectToViewportRelativeRect:gs,getDocumentElement:me,getClippingRect:Ns,getOffsetParent:fn,getElementRects:Cs,getClientRects:ws,getDimensions:xs,getScale:Ne,isElement:ae,isRTL:Bs};function vn(n,t){return n.x===t.x&&n.y===t.y&&n.width===t.width&&n.height===t.height}function Ds(n,t){let o=null,r;const l=me(n);function s(){var u;clearTimeout(r),(u=o)==null||u.disconnect(),o=null}function a(u,c){u===void 0&&(u=!1),c===void 0&&(c=1),s();const m=n.getBoundingClientRect(),{left:i,top:d,width:g,height:_}=m;if(u||t(),!g||!_)return;const E=Pe(d),b=Pe(l.clientWidth-(i+g)),h=Pe(l.clientHeight-(d+_)),f=Pe(i),v={rootMargin:-E+"px "+-b+"px "+-h+"px "+-f+"px",threshold:we(0,ze(1,c))||1};let p=!0;function V(N){const A=N[0].intersectionRatio;if(A!==c){if(!p)return a();A?a(!1,A):r=setTimeout(()=>{a(!1,1e-7)},1e3)}A===1&&!vn(m,n.getBoundingClientRect())&&a(),p=!1}try{o=new IntersectionObserver(V,{...v,root:l.ownerDocument})}catch{o=new IntersectionObserver(V,v)}o.observe(n)}return a(!0),s}function pn(n,t,o,r){r===void 0&&(r={});const{ancestorScroll:l=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,m=Bt(n),i=l||s?[...m?De(m):[],...De(t)]:[];i.forEach(f=>{l&&f.addEventListener("scroll",o,{passive:!0}),s&&f.addEventListener("resize",o)});const d=m&&u?Ds(m,o):null;let g=-1,_=null;a&&(_=new ResizeObserver(f=>{let[k]=f;k&&k.target===m&&_&&(_.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var v;(v=_)==null||v.observe(t)})),o()}),m&&!c&&_.observe(m),_.observe(t));let E,b=c?ye(n):null;c&&h();function h(){const f=ye(n);b&&!vn(b,f)&&o(),b=f,E=requestAnimationFrame(h)}return o(),()=>{var f;i.forEach(k=>{l&&k.removeEventListener("scroll",o),s&&k.removeEventListener("resize",o)}),d?.(),(f=_)==null||f.disconnect(),_=null,c&&cancelAnimationFrame(E)}}const qe=ls,Ke=as,We=ns,Ge=(n,t,o)=>{const r=new Map,l={platform:$s,...o},s={...l.platform,_c:r};return ts(n,t,{...l,platform:s})},Ts=["disabled","title"],Ms=["data-theme"],Fs={class:"vuefinder__search-modal__dropdown-content"},As={class:"vuefinder__search-modal__dropdown-section"},Is={class:"vuefinder__search-modal__dropdown-title"},Rs={class:"vuefinder__search-modal__dropdown-options"},Ls={key:0,class:"vuefinder__search-modal__dropdown-option-check"},Ps={key:0,class:"vuefinder__search-modal__dropdown-option-check"},Os={key:0,class:"vuefinder__search-modal__dropdown-option-check"},zs={key:0,class:"vuefinder__search-modal__dropdown-option-check"},Hs=e.defineComponent({name:"SearchOptionsDropdown",__name:"SearchOptionsDropdown",props:{visible:{type:Boolean},disabled:{type:Boolean,default:!1},sizeFilter:{},selectedOption:{}},emits:["update:visible","update:sizeFilter","update:selectedOption","keydown"],setup(n,{expose:t,emit:o}){const r=n,l=o,s=e.inject("ServiceContainer"),{t:a}=s.i18n,u=e.ref(null),c=e.ref(null),m=Me();let i=null;const d=h=>{if(l("update:selectedOption",h),h.startsWith("size-")){const f=h.split("-")[1];l("update:sizeFilter",f)}},g=async()=>{r.disabled||(r.visible?(l("update:visible",!1),i&&(i(),i=null)):(l("update:visible",!0),await e.nextTick(),await _()))},_=async()=>{if(!(!u.value||!c.value)&&(await e.nextTick(),!(!u.value||!c.value))){Object.assign(c.value.style,{position:"fixed",zIndex:"10001",opacity:"0",transform:"translateY(-8px)",transition:"opacity 150ms ease-out, transform 150ms ease-out"});try{const{x:h,y:f}=await Ge(u.value,c.value,{placement:"bottom-start",middleware:[qe(8),We({padding:16}),Ke({padding:16})]});Object.assign(c.value.style,{left:`${h}px`,top:`${f}px`}),requestAnimationFrame(()=>{c.value&&Object.assign(c.value.style,{opacity:"1",transform:"translateY(0)"})})}catch(h){console.warn("Floating UI initial positioning error:",h);return}try{i=pn(u.value,c.value,async()=>{if(!(!u.value||!c.value))try{const{x:h,y:f}=await Ge(u.value,c.value,{placement:"bottom-start",middleware:[qe(8),We({padding:16}),Ke({padding:16})]});Object.assign(c.value.style,{left:`${h}px`,top:`${f}px`})}catch(h){console.warn("Floating UI positioning error:",h)}})}catch(h){console.warn("Floating UI autoUpdate setup error:",h),i=null}}},E=h=>{if(!r.visible)return;const f=["size-all","size-small","size-medium","size-large"],k=f.findIndex(v=>v===r.selectedOption);if(h.key==="ArrowDown"){h.preventDefault();const v=(k+1)%f.length;l("update:selectedOption",f[v]||null)}else if(h.key==="ArrowUp"){h.preventDefault();const v=k<=0?f.length-1:k-1;l("update:selectedOption",f[v]||null)}else h.key==="Enter"?(h.preventDefault(),r.selectedOption?.startsWith("size-")&&l("update:sizeFilter",r.selectedOption.split("-")[1])):h.key==="Escape"&&(h.preventDefault(),l("update:visible",!1),i&&(i(),i=null))},b=()=>{i&&(i(),i=null)};return e.watch(()=>r.visible,h=>{!h&&i&&(i(),i=null)}),e.onUnmounted(()=>{b()}),t({cleanup:b}),(h,f)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("button",{ref_key:"dropdownBtn",ref:u,onClick:e.withModifiers(g,["stop"]),class:e.normalizeClass(["vuefinder__search-modal__dropdown-btn",{"vuefinder__search-modal__dropdown-btn--active":n.visible}]),disabled:n.disabled,title:e.unref(a)("Search Options")},[e.createVNode(e.unref(Xt),{class:"vuefinder__search-modal__dropdown-icon"})],10,Ts),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[n.visible?(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"dropdownContent",ref:c,class:"vuefinder__search-modal__dropdown vuefinder__search-modal__dropdown--visible","data-theme":e.unref(m),onClick:f[4]||(f[4]=e.withModifiers(()=>{},["stop"])),onKeydown:E,tabindex:"-1"},[e.createElementVNode("div",Fs,[e.createElementVNode("div",As,[e.createElementVNode("div",Is,e.toDisplayString(e.unref(a)("File Size")),1),e.createElementVNode("div",Rs,[e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__search-modal__dropdown-option",{"vuefinder__search-modal__dropdown-option--selected":n.sizeFilter==="all"}]),onClick:f[0]||(f[0]=e.withModifiers(k=>d("size-all"),["stop"]))},[e.createElementVNode("span",null,e.toDisplayString(e.unref(a)("All Files")),1),n.sizeFilter==="all"?(e.openBlock(),e.createElementBlock("div",Ls,[...f[5]||(f[5]=[e.createElementVNode("svg",{viewBox:"0 0 16 16",fill:"currentColor"},[e.createElementVNode("path",{d:"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"})],-1)])])):e.createCommentVNode("",!0)],2),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__search-modal__dropdown-option",{"vuefinder__search-modal__dropdown-option--selected":n.sizeFilter==="small"}]),onClick:f[1]||(f[1]=e.withModifiers(k=>d("size-small"),["stop"]))},[e.createElementVNode("span",null,e.toDisplayString(e.unref(a)("Small (< 1MB)")),1),n.sizeFilter==="small"?(e.openBlock(),e.createElementBlock("div",Ps,[...f[6]||(f[6]=[e.createElementVNode("svg",{viewBox:"0 0 16 16",fill:"currentColor"},[e.createElementVNode("path",{d:"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"})],-1)])])):e.createCommentVNode("",!0)],2),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__search-modal__dropdown-option",{"vuefinder__search-modal__dropdown-option--selected":n.sizeFilter==="medium"}]),onClick:f[2]||(f[2]=e.withModifiers(k=>d("size-medium"),["stop"]))},[e.createElementVNode("span",null,e.toDisplayString(e.unref(a)("Medium (1-10MB)")),1),n.sizeFilter==="medium"?(e.openBlock(),e.createElementBlock("div",Os,[...f[7]||(f[7]=[e.createElementVNode("svg",{viewBox:"0 0 16 16",fill:"currentColor"},[e.createElementVNode("path",{d:"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"})],-1)])])):e.createCommentVNode("",!0)],2),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__search-modal__dropdown-option",{"vuefinder__search-modal__dropdown-option--selected":n.sizeFilter==="large"}]),onClick:f[3]||(f[3]=e.withModifiers(k=>d("size-large"),["stop"]))},[e.createElementVNode("span",null,e.toDisplayString(e.unref(a)("Large (> 10MB)")),1),n.sizeFilter==="large"?(e.openBlock(),e.createElementBlock("div",zs,[...f[8]||(f[8]=[e.createElementVNode("svg",{viewBox:"0 0 16 16",fill:"currentColor"},[e.createElementVNode("path",{d:"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"})],-1)])])):e.createCommentVNode("",!0)],2)])])])],40,Ms)):e.createCommentVNode("",!0)]))],64))}});function Us(n){const[t,o]=js(n);if(!o||o==="/")return t+"://";const r=o.replace(/\/+$/,""),l=r.lastIndexOf("/");return l===0?t+"://":t+":/"+r.slice(0,l)}function js(n){const t=n.indexOf(":/");return t===-1?[void 0,n]:[n.slice(0,t),n.slice(t+2)||"/"]}function _n(n,t=40){const o=n.match(/^([^:]+:\/\/)(.*)$/);if(!o)return n;const r=o[1],l=o[2]??"",s=l.split("/").filter(Boolean),a=s.pop();if(!a)return r+l;let u=`${r}${s.join("/")}${s.length?"/":""}${a}`;if(u.length<=t)return u;const c=a.split(/\.(?=[^\.]+$)/),m=c[0]??"",i=c[1]??"",d=m.length>10?`${m.slice(0,6)}...${m.slice(-5)}`:m,g=i?`${d}.${i}`:d;return u=`${r}${s.join("/")}${s.length?"/":""}${g}`,u.length>t&&(u=`${r}.../${g}`),u}async function hn(n){try{await navigator.clipboard.writeText(n)}catch{const o=document.createElement("textarea");o.value=n,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o)}}async function Te(n){await hn(n)}async function qs(n){await hn(n)}const Ks={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 448 512"};function Ws(n,t){return e.openBlock(),e.createElementBlock("svg",Ks,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M8 256a56 56 0 1 1 112 0 56 56 0 1 1-112 0m160 0a56 56 0 1 1 112 0 56 56 0 1 1-112 0m216-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112"},null,-1)])])}const gn={render:Ws},Gs=["title"],Ys={class:"vuefinder__search-modal__result-icon"},Xs={class:"vuefinder__search-modal__result-content"},Qs={class:"vuefinder__search-modal__result-name"},Js={key:0,class:"vuefinder__search-modal__result-size"},Zs=["title"],ei=["title"],ti=["data-item-dropdown","data-theme"],ni={class:"vuefinder__search-modal__item-dropdown-content"},oi=e.defineComponent({name:"SearchResultItem",__name:"SearchResultItem",props:{item:{},index:{},selectedIndex:{},expandedPaths:{},activeDropdown:{},selectedItemDropdownOption:{}},emits:["select","selectWithDropdown","togglePathExpansion","toggleItemDropdown","update:selectedItemDropdownOption","copyPath","openContainingFolder","preview"],setup(n,{emit:t}){const o=n,r=t,l=e.inject("ServiceContainer"),{t:s}=l.i18n,a=Me(),u=e.ref(null);let c=null;e.watch(()=>o.activeDropdown,k=>{c&&(c(),c=null),k===o.item.path&&u.value&&e.nextTick(()=>{g(o.item.path,u.value)})}),e.onUnmounted(()=>{c&&(c(),c=null)});const m=k=>o.expandedPaths.has(k),i=k=>k.type==="dir"||!k.file_size?"":wt(k.file_size),d=(k,v)=>{v.stopPropagation(),r("toggleItemDropdown",k,v)},g=async(k,v)=>{const p=document.querySelector(`[data-item-dropdown="${k}"]`);if(!(!p||!v)&&(await e.nextTick(),!(!p||!v))){Object.assign(p.style,{position:"fixed",zIndex:"10001",opacity:"0",transform:"translateY(-8px)",transition:"opacity 150ms ease-out, transform 150ms ease-out"});try{const{x:V,y:N}=await Ge(v,p,{placement:"left-start",middleware:[qe(8),We({padding:16}),Ke({padding:16})]});Object.assign(p.style,{left:`${V}px`,top:`${N}px`}),requestAnimationFrame(()=>{p&&Object.assign(p.style,{opacity:"1",transform:"translateY(0)"})})}catch(V){console.warn("Floating UI initial positioning error:",V);return}try{c=pn(v,p,async()=>{if(!(!v||!p))try{const{x:V,y:N}=await Ge(v,p,{placement:"left-start",middleware:[qe(8),We({padding:16}),Ke({padding:16})]});Object.assign(p.style,{left:`${V}px`,top:`${N}px`})}catch(V){console.warn("Floating UI positioning error:",V)}})}catch(V){console.warn("Floating UI autoUpdate setup error:",V),c=null}}},_=k=>{r("update:selectedItemDropdownOption",k)},E=async k=>{await Te(k.path),r("copyPath",k)},b=k=>{r("openContainingFolder",k)},h=k=>{r("preview",k)},f=k=>{if(!o.activeDropdown)return;const v=["copy-path","open-folder","preview"],p=o.selectedItemDropdownOption,V=v.findIndex(N=>p?.includes(N));if(k.key==="ArrowDown"){k.preventDefault();const N=(V+1)%v.length;r("update:selectedItemDropdownOption",`${v[N]||""}-${o.activeDropdown}`)}else if(k.key==="ArrowUp"){k.preventDefault();const N=V<=0?v.length-1:V-1;r("update:selectedItemDropdownOption",`${v[N]||""}-${o.activeDropdown}`)}else k.key==="Enter"?(k.preventDefault(),p&&(p.includes("copy-path")?E(o.item):p.includes("open-folder")?b(o.item):p.includes("preview")&&h(o.item))):k.key==="Escape"&&(k.preventDefault(),r("update:selectedItemDropdownOption",null))};return(k,v)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__search-modal__result-item",{"vuefinder__search-modal__result-item--selected":n.index===n.selectedIndex}]),title:n.item.basename,onClick:v[9]||(v[9]=p=>r("select",n.index))},[e.createElementVNode("div",Ys,[n.item.type==="dir"?(e.openBlock(),e.createBlock(e.unref(ve),{key:0})):(e.openBlock(),e.createBlock(e.unref(Oe),{key:1}))]),e.createElementVNode("div",Xs,[e.createElementVNode("div",Qs,[e.createTextVNode(e.toDisplayString(n.item.basename)+" ",1),i(n.item)?(e.openBlock(),e.createElementBlock("span",Js,e.toDisplayString(i(n.item)),1)):e.createCommentVNode("",!0)]),e.createElementVNode("div",{class:"vuefinder__search-modal__result-path",onClick:v[0]||(v[0]=e.withModifiers(p=>{r("select",n.index),r("togglePathExpansion",n.item.path)},["stop"])),title:n.item.path},e.toDisplayString(m(n.item.path)?n.item.path:e.unref(_n)(n.item.path)),9,Zs)]),e.createElementVNode("button",{ref_key:"buttonElementRef",ref:u,class:"vuefinder__search-modal__result-actions",onClick:v[1]||(v[1]=p=>{r("selectWithDropdown",n.index),d(n.item.path,p)}),title:e.unref(s)("More actions")},[e.createVNode(e.unref(gn),{class:"vuefinder__search-modal__result-actions-icon"})],8,ei),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[n.activeDropdown===n.item.path?(e.openBlock(),e.createElementBlock("div",{key:0,"data-item-dropdown":n.item.path,class:"vuefinder__search-modal__item-dropdown vuefinder__search-modal__item-dropdown--visible","data-theme":e.unref(a),onClick:v[8]||(v[8]=e.withModifiers(()=>{},["stop"])),onKeydown:f,tabindex:"-1"},[e.createElementVNode("div",ni,[e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__search-modal__item-dropdown-option",{"vuefinder__search-modal__item-dropdown-option--selected":n.selectedItemDropdownOption===`copy-path-${n.item.path}`}]),onClick:v[2]||(v[2]=p=>{_(`copy-path-${n.item.path}`),E(n.item)}),onFocus:v[3]||(v[3]=p=>_(`copy-path-${n.item.path}`))},[v[10]||(v[10]=e.createElementVNode("svg",{class:"vuefinder__search-modal__item-dropdown-icon",viewBox:"0 0 16 16",fill:"currentColor"},[e.createElementVNode("path",{d:"M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H6z"}),e.createElementVNode("path",{d:"M2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1H2z"})],-1)),e.createElementVNode("span",null,e.toDisplayString(e.unref(s)("Copy Path")),1)],34),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__search-modal__item-dropdown-option",{"vuefinder__search-modal__item-dropdown-option--selected":n.selectedItemDropdownOption===`open-folder-${n.item.path}`}]),onClick:v[4]||(v[4]=p=>{_(`open-folder-${n.item.path}`),b(n.item)}),onFocus:v[5]||(v[5]=p=>_(`open-folder-${n.item.path}`))},[e.createVNode(e.unref(ve),{class:"vuefinder__search-modal__item-dropdown-icon"}),e.createElementVNode("span",null,e.toDisplayString(e.unref(s)("Open Containing Folder")),1)],34),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__search-modal__item-dropdown-option",{"vuefinder__search-modal__item-dropdown-option--selected":n.selectedItemDropdownOption===`preview-${n.item.path}`}]),onClick:v[6]||(v[6]=p=>{_(`preview-${n.item.path}`),h(n.item)}),onFocus:v[7]||(v[7]=p=>_(`preview-${n.item.path}`))},[e.createVNode(e.unref(Oe),{class:"vuefinder__search-modal__item-dropdown-icon"}),e.createElementVNode("span",null,e.toDisplayString(e.unref(s)("Preview")),1)],34)])],40,ti)):e.createCommentVNode("",!0)]))],10,Gs))}}),ri={key:0,class:"vuefinder__search-modal__searching"},li={class:"vuefinder__search-modal__loading-icon"},ai={key:1,class:"vuefinder__search-modal__no-results"},si={key:2,class:"vuefinder__search-modal__results-list"},ii={class:"vuefinder__search-modal__results-header"},ge=60,jt=5,ci=e.defineComponent({name:"SearchResultsList",__name:"SearchResultsList",props:{searchResults:{},isSearching:{type:Boolean},selectedIndex:{},expandedPaths:{},activeDropdown:{},selectedItemDropdownOption:{},resultsEnter:{type:Boolean}},emits:["selectResultItem","selectResultItemWithDropdown","togglePathExpansion","toggleItemDropdown","update:selectedItemDropdownOption","copyPath","openContainingFolder","preview"],setup(n,{expose:t,emit:o}){const r=n,l=o,s=e.inject("ServiceContainer"),{t:a}=s.i18n,u=e.useTemplateRef("scrollableContainer"),c=e.computed(()=>r.searchResults.length>0),m=e.computed(()=>r.searchResults.length),i=e.ref(0),d=e.ref(600),g=e.computed(()=>r.searchResults.length*ge),_=e.computed(()=>{const v=Math.max(0,Math.floor(i.value/ge)-jt),p=Math.min(r.searchResults.length,Math.ceil((i.value+d.value)/ge)+jt);return{start:v,end:p}}),E=e.computed(()=>{const{start:v,end:p}=_.value;return r.searchResults.slice(v,p).map((V,N)=>({item:V,index:v+N,top:(v+N)*ge}))}),b=v=>{const p=v.target;i.value=p.scrollTop},h=()=>{u.value&&(d.value=u.value.clientHeight)},f=()=>{if(r.selectedIndex>=0&&u.value){const v=r.selectedIndex*ge,p=v+ge,V=u.value.scrollTop,N=u.value.clientHeight,A=V+N;let I=V;v<V?I=v:p>A&&(I=p-N),I!==V&&u.value.scrollTo({top:I,behavior:"smooth"})}},k=()=>{u.value&&(u.value.scrollTop=0,i.value=0)};return e.onMounted(()=>{h(),window.addEventListener("resize",h)}),e.onUnmounted(()=>{window.removeEventListener("resize",h)}),e.watch(()=>u.value,()=>{h()}),t({scrollSelectedIntoView:f,resetScroll:k,getContainerHeight:()=>d.value,scrollTop:()=>i.value}),(v,p)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__search-modal__results",{"vuefinder__search-modal__results--enter":n.resultsEnter}])},[n.isSearching?(e.openBlock(),e.createElementBlock("div",ri,[e.createElementVNode("div",li,[e.createVNode(e.unref(tt),{class:"vuefinder__search-modal__loading-icon"})]),e.createElementVNode("span",null,e.toDisplayString(e.unref(a)("Searching...")),1)])):c.value?(e.openBlock(),e.createElementBlock("div",si,[e.createElementVNode("div",ii,[e.createElementVNode("span",null,e.toDisplayString(e.unref(a)("Found %s results",m.value)),1)]),e.createElementVNode("div",{ref_key:"scrollableContainer",ref:u,class:"vuefinder__search-modal__results-scrollable",onScroll:b},[e.createElementVNode("div",{class:"vuefinder__search-modal__results-items",style:e.normalizeStyle({height:`${g.value}px`,position:"relative"})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(E.value,V=>(e.openBlock(),e.createElementBlock("div",{key:V.item.path,style:e.normalizeStyle({position:"absolute",top:`${V.top}px`,left:"0",width:"100%",height:`${ge}px`})},[e.createVNode(oi,{item:V.item,index:V.index,"selected-index":n.selectedIndex,"expanded-paths":n.expandedPaths,"active-dropdown":n.activeDropdown,"selected-item-dropdown-option":n.selectedItemDropdownOption,onSelect:p[0]||(p[0]=N=>l("selectResultItem",N)),onSelectWithDropdown:p[1]||(p[1]=N=>l("selectResultItemWithDropdown",N)),onTogglePathExpansion:p[2]||(p[2]=N=>l("togglePathExpansion",N)),onToggleItemDropdown:p[3]||(p[3]=(N,A)=>l("toggleItemDropdown",N,A)),"onUpdate:selectedItemDropdownOption":p[4]||(p[4]=N=>l("update:selectedItemDropdownOption",N)),onCopyPath:p[5]||(p[5]=N=>l("copyPath",N)),onOpenContainingFolder:p[6]||(p[6]=N=>l("openContainingFolder",N)),onPreview:p[7]||(p[7]=N=>l("preview",N))},null,8,["item","index","selected-index","expanded-paths","active-dropdown","selected-item-dropdown-option"])],4))),128))],4)],544)])):(e.openBlock(),e.createElementBlock("div",ai,[e.createElementVNode("span",null,e.toDisplayString(e.unref(a)("No results found")),1)]))],2))}}),di={class:"vuefinder__search-modal"},ui={class:"vuefinder__search-modal__content"},mi={class:"vuefinder__search-modal__search-bar"},fi={class:"vuefinder__search-modal__search-location"},vi=["title"],pi=["disabled"],_i={key:0,class:"vuefinder__search-modal__folder-selector"},hi={class:"vuefinder__search-modal__folder-selector-content"},gi={key:1,class:"vuefinder__search-modal__instructions"},wi={class:"vuefinder__search-modal__instructions-tips"},ki={class:"vuefinder__search-modal__tip"},yi={class:"vuefinder__search-modal__tip"},wn=e.defineComponent({name:"ModalSearch",__name:"ModalSearch",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=e.ref(null),s=e.ref(null),a=e.ref(null),u=tn("",300),c=e.ref([]),m=e.ref(!1),i=e.ref(-1),d=e.ref(!1),g=e.ref(!1),_=e.ref(null),E=e.ref("all"),b=e.ref(!1),h=e.ref(`size-${E.value}`),f=e.ref(null),k=e.ref(new Set),v=e.ref(null),p=L.useStore(r.path),V=w=>{k.value.has(w)?k.value.delete(w):k.value.add(w)},N=(w,y)=>{y&&typeof y.stopPropagation=="function"&&y.stopPropagation(),v.value===w?v.value=null:v.value=w},A=()=>{v.value=null},I=w=>{try{const y=w.dir||`${w.storage}://`;t.emitter.emit("vf-fetch",{params:{q:"index",path:y}}),t.modal.close(),A()}catch{t.emitter.emit("vf-toast-push",{label:o("Failed to open containing folder")})}},T=w=>{t.modal.open(Je,{storage:p?.value?.storage??"local",item:w}),A()},O=w=>{i.value=w,A()},q=w=>{i.value=w},W=async w=>{await Te(w.path),A()};e.watch(u,async w=>{w.trim()?(await P(w.trim()),i.value=0):(c.value=[],m.value=!1,i.value=-1)}),e.watch(E,async w=>{h.value=`size-${w}`,u.value.trim()&&!g.value&&(await P(u.value.trim()),i.value=0)}),e.watch(b,async()=>{u.value.trim()&&!g.value&&(await P(u.value.trim()),i.value=0)});const P=async w=>{if(w){m.value=!0;try{const C={q:"search",storage:p?.value?.storage??"local",filter:w},D=_.value?.path||p?.value?.path;D&&(C.path=D),E.value!=="all"&&(C.size=E.value),b.value&&(C.deep="1"),t.emitter.emit("vf-fetch",{params:C,dontCloseModal:!0,dontChangePath:!0,onSuccess:H=>{c.value=H.files||[],m.value=!1},onError:()=>{c.value=[],m.value=!1}})}catch(y){console.error("Search error:",y),c.value=[],m.value=!1}}};e.onMounted(()=>{document.addEventListener("click",x),h.value=`size-${E.value}`,e.nextTick(()=>{l.value&&l.value.focus()})});const j=()=>{g.value?(g.value=!1,u.value.trim()&&(P(u.value.trim()),i.value=0)):(d.value=!1,g.value=!0)},K=w=>{w&&(_.value=w)},$=w=>{w&&(K(w),g.value=!1,u.value.trim()&&(P(u.value.trim()),i.value=0))};e.onUnmounted(()=>{document.removeEventListener("click",x),s.value&&s.value.cleanup()});const x=w=>{const y=w.target;if(d.value&&(y.closest(".vuefinder__search-modal__dropdown")||(d.value=!1,e.nextTick(()=>{l.value&&l.value.focus()}))),v.value){const C=y.closest(".vuefinder__search-modal__item-dropdown"),D=y.closest(".vuefinder__search-modal__result-item");!C&&!D&&A()}};return(w,y)=>(e.openBlock(),e.createBlock(ie,{class:"vuefinder__search-modal-layout"},{default:e.withCtx(()=>[e.createElementVNode("div",di,[e.createVNode(ue,{icon:e.unref(xt),title:e.unref(o)("Search files")},null,8,["icon","title"]),e.createElementVNode("div",ui,[e.createElementVNode("div",mi,[e.createVNode(Ua,{ref_key:"searchInputRef",ref:l,modelValue:e.unref(u),"onUpdate:modelValue":y[0]||(y[0]=C=>e.isRef(u)?u.value=C:null),"is-searching":m.value,disabled:g.value},null,8,["modelValue","is-searching","disabled"]),e.createVNode(Hs,{ref_key:"searchOptionsDropdownRef",ref:s,visible:d.value,"onUpdate:visible":y[1]||(y[1]=C=>d.value=C),"size-filter":E.value,"onUpdate:sizeFilter":y[2]||(y[2]=C=>E.value=C),"selected-option":h.value,"onUpdate:selectedOption":y[3]||(y[3]=C=>h.value=C),disabled:g.value},null,8,["visible","size-filter","selected-option","disabled"])]),e.createElementVNode("div",{class:"vuefinder__search-modal__options",onClick:y[7]||(y[7]=e.withModifiers(()=>{},["stop"]))},[e.createElementVNode("div",fi,[e.createElementVNode("button",{onClick:e.withModifiers(j,["stop"]),class:e.normalizeClass(["vuefinder__search-modal__location-btn",{"vuefinder__search-modal__location-btn--open":g.value}])},[e.createVNode(e.unref(ve),{class:"vuefinder__search-modal__location-icon"}),e.createElementVNode("span",{class:"vuefinder__search-modal__location-text",title:_.value?.path||e.unref(p).path},e.toDisplayString(e.unref(_n)(_.value?.path||e.unref(p).path)),9,vi),y[10]||(y[10]=e.createElementVNode("svg",{class:"vuefinder__search-modal__location-arrow",viewBox:"0 0 16 16",fill:"currentColor"},[e.createElementVNode("path",{d:"M4.427 7.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 7H4.604a.25.25 0 00-.177.427z"})],-1))],2)]),e.createElementVNode("label",{class:"vuefinder__search-modal__deep-search",onClick:y[6]||(y[6]=e.withModifiers(()=>{},["stop"]))},[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":y[4]||(y[4]=C=>b.value=C),type:"checkbox",disabled:g.value,class:"vuefinder__search-modal__checkbox",onClick:y[5]||(y[5]=e.withModifiers(()=>{},["stop"]))},null,8,pi),[[e.vModelCheckbox,b.value]]),e.createElementVNode("span",null,e.toDisplayString(e.unref(o)("Include subfolders")),1)])]),g.value?(e.openBlock(),e.createElementBlock("div",_i,[e.createElementVNode("div",hi,[e.createVNode(Vt,{modelValue:_.value,"onUpdate:modelValue":[y[8]||(y[8]=C=>_.value=C),K],"show-pinned-folders":!0,"current-path":e.unref(p),onSelectAndClose:$},null,8,["modelValue","current-path"])])])):e.createCommentVNode("",!0),!e.unref(u).trim()&&!g.value?(e.openBlock(),e.createElementBlock("div",gi,[e.createElementVNode("div",wi,[e.createElementVNode("div",ki,[y[11]||(y[11]=e.createElementVNode("span",{class:"vuefinder__search-modal__tip-key"},"↑↓",-1)),e.createElementVNode("span",null,e.toDisplayString(e.unref(o)("Navigate results")),1)]),e.createElementVNode("div",yi,[y[12]||(y[12]=e.createElementVNode("span",{class:"vuefinder__search-modal__tip-key"},"Esc",-1)),e.createElementVNode("span",null,e.toDisplayString(e.unref(o)("Close search")),1)])])])):e.createCommentVNode("",!0),e.unref(u).trim()&&!g.value?(e.openBlock(),e.createBlock(ci,{key:2,ref_key:"searchResultsListRef",ref:a,"search-results":c.value,"is-searching":m.value,"selected-index":i.value,"expanded-paths":k.value,"active-dropdown":v.value,"selected-item-dropdown-option":f.value,"results-enter":!0,onSelectResultItem:O,onSelectResultItemWithDropdown:q,onTogglePathExpansion:V,onToggleItemDropdown:N,"onUpdate:selectedItemDropdownOption":y[9]||(y[9]=C=>f.value=C),onCopyPath:W,onOpenContainingFolder:I,onPreview:T},null,8,["search-results","is-searching","selected-index","expanded-paths","active-dropdown","selected-item-dropdown-option"])):e.createCommentVNode("",!0)])])]),_:1}))}}),re={ESCAPE:"Escape",F2:"F2",F5:"F5",DELETE:"Delete",ENTER:"Enter",BACKSLASH:"Backslash",KEY_A:"KeyA",KEY_E:"KeyE",KEY_F:"KeyF",SPACE:"Space",KEY_C:"KeyC",KEY_X:"KeyX",KEY_V:"KeyV"};function bi(n){const t=n.fs,o=n.config,r=L.useStore(t.selectedItems),l=s=>{if(s.code===re.ESCAPE&&(n.modal.close(),n.root.focus()),!n.modal.visible){if(s.code===re.F2&&n.features.includes(z.RENAME)&&r.value.length===1&&n.modal.open(Qe,{items:r.value}),s.code===re.F5&&n.emitter.emit("vf-fetch",{params:{q:"index",path:t.path.get().path}}),s.code===re.DELETE&&r.value.length===0&&n.modal.open(Xe,{items:r.value}),s.ctrlKey&&s.code===re.BACKSLASH&&n.modal.open(kt),s.ctrlKey&&s.code===re.KEY_F&&n.features.includes(z.SEARCH)&&(n.modal.open(wn),s.preventDefault()),s.ctrlKey&&s.code===re.KEY_E&&(o.toggle("showTreeView"),s.preventDefault()),s.ctrlKey&&s.code===re.ENTER&&(o.toggle("fullScreen"),n.root.focus()),s.ctrlKey&&s.code===re.KEY_A&&(t.selectAll(n.selectionMode||"multiple",n),s.preventDefault()),s.code===re.SPACE&&r.value.length===1&&r.value[0]?.type!=="dir"&&n.modal.open(Je,{storage:t.path.get().storage,item:r.value[0]}),s.metaKey&&s.code===re.KEY_C){if(r.value.length===0){n.emitter.emit("vf-toast-push",{type:"error",label:n.i18n.t("No items selected")});return}t.setClipboard("copy",new Set(r.value.map(a=>a.path))),n.emitter.emit("vf-toast-push",{label:r.value.length===1?n.i18n.t("Item copied to clipboard"):n.i18n.t("%s items copied to clipboard",r.value.length)}),s.preventDefault()}if(s.metaKey&&s.code===re.KEY_X){if(r.value.length===0){n.emitter.emit("vf-toast-push",{type:"error",label:n.i18n.t("No items selected")});return}t.setClipboard("cut",new Set(r.value.map(a=>a.path))),n.emitter.emit("vf-toast-push",{label:r.value.length===1?n.i18n.t("Item cut to clipboard"):n.i18n.t("%s items cut to clipboard",r.value.length)}),s.preventDefault()}if(s.metaKey&&s.code===re.KEY_V){if(t.getClipboard().items.size===0){n.emitter.emit("vf-toast-push",{type:"error",label:n.i18n.t("No items in clipboard")});return}if(t.getClipboard().path===t.path.get().path){n.emitter.emit("vf-toast-push",{type:"error",label:n.i18n.t("Cannot paste items to the same directory")});return}if(t.getClipboard().type==="cut"){n.modal.open(xe,{items:{from:Array.from(t.getClipboard().items),to:t.path.get()}}),t.clearClipboard();return}if(t.getClipboard().type==="copy"){n.modal.open(Nt,{items:{from:Array.from(t.getClipboard().items),to:t.path.get()}});return}s.preventDefault()}}};e.onMounted(()=>{n.root.addEventListener("keydown",l)}),e.onBeforeUnmount(()=>{n.root.removeEventListener("keydown",l)})}const $t=async(n,t)=>{if(t){if(t.isFile){const o=await new Promise(r=>{t.file(r)});n(t,o)}if(t.isDirectory){const o=t.createReader(),r=await new Promise(l=>{o.readEntries(l)});for(const l of r)await $t(n,l)}}};function Ei(){const n=e.ref(!1),t=e.ref([]);return{isDraggingExternal:n,externalFiles:t,handleDragEnter:u=>{u.preventDefault(),u.stopPropagation();const c=u.dataTransfer?.items;c&&Array.from(c).some(i=>i.kind==="file")&&(n.value=!0,u.isExternalDrag=!0)},handleDragOver:u=>{n.value&&u.dataTransfer&&(u.dataTransfer.dropEffect="copy",u.preventDefault(),u.stopPropagation())},handleDragLeave:u=>{u.preventDefault();const c=u.currentTarget.getBoundingClientRect(),m=u.clientX,i=u.clientY;(m<c.left||m>c.right||i<c.top||i>c.bottom)&&(n.value=!1)},handleDrop:async u=>{u.preventDefault(),u.stopPropagation(),n.value=!1;const c=u.dataTransfer?.items;if(c){const m=Array.from(c).filter(i=>i.kind==="file");if(m.length>0){t.value=[];for(const i of m){const d=i.webkitGetAsEntry?.();if(d)await $t((g,_)=>{t.value.push({name:_.name,size:_.size,type:_.type,lastModified:new Date(_.lastModified),file:_})},d);else{const g=i.getAsFile();g&&t.value.push({name:g.name,size:g.size,type:g.type,lastModified:new Date(g.lastModified),file:g})}}return t.value}}return[]},clearExternalFiles:()=>{t.value=[]}}}const Vi={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function Ni(n,t){return e.openBlock(),e.createElementBlock("svg",Vi,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M12 10.5v6m3-3H9m4.06-7.19-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44z"},null,-1)])])}const kn={render:Ni},xi={class:"vuefinder__new-folder-modal__content"},Si={class:"vuefinder__new-folder-modal__form"},Ci={class:"vuefinder__new-folder-modal__description"},Bi=["placeholder"],Dt=e.defineComponent({__name:"ModalNewFolder",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=L.useStore(r.path),s=e.ref(""),a=e.ref(""),u=()=>{s.value!==""&&t.emitter.emit("vf-fetch",{params:{q:"newfolder",m:"post",path:l.value.path},body:{name:s.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:o("%s is created.",s.value)})},onError:c=>{a.value=o(c.message)}})};return(c,m)=>(e.openBlock(),e.createBlock(ie,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:u,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Create")),1),e.createElementVNode("button",{type:"button",onClick:m[2]||(m[2]=i=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(ue,{icon:e.unref(kn),title:e.unref(o)("New Folder")},null,8,["icon","title"]),e.createElementVNode("div",xi,[e.createElementVNode("div",Si,[e.createElementVNode("p",Ci,e.toDisplayString(e.unref(o)("Create a new folder")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":m[0]||(m[0]=i=>s.value=i),onKeyup:e.withKeys(u,["enter"]),class:"vuefinder__new-folder-modal__input",placeholder:e.unref(o)("Folder Name"),type:"text"},null,40,Bi),[[e.vModelText,s.value]]),a.value.length?(e.openBlock(),e.createBlock(e.unref(a),{key:0,onHidden:m[1]||(m[1]=i=>a.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),$i={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function Di(n,t){return e.openBlock(),e.createElementBlock("svg",$i,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9"},null,-1)])])}const yn={render:Di},Ti={class:"vuefinder__new-file-modal__content"},Mi={class:"vuefinder__new-file-modal__form"},Fi={class:"vuefinder__new-file-modal__description"},Ai=["placeholder"],bn=e.defineComponent({__name:"ModalNewFile",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=L.useStore(r.path),s=e.ref(""),a=e.ref(""),u=()=>{s.value!==""&&t.emitter.emit("vf-fetch",{params:{q:"newfile",m:"post",path:l.value.path},body:{name:s.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:o("%s is created.",s.value)})},onError:c=>{a.value=o(c.message)}})};return(c,m)=>(e.openBlock(),e.createBlock(ie,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:u,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Create")),1),e.createElementVNode("button",{type:"button",onClick:m[2]||(m[2]=i=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(ue,{icon:e.unref(yn),title:e.unref(o)("New File")},null,8,["icon","title"]),e.createElementVNode("div",Ti,[e.createElementVNode("div",Mi,[e.createElementVNode("p",Fi,e.toDisplayString(e.unref(o)("Create a new file")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":m[0]||(m[0]=i=>s.value=i),onKeyup:e.withKeys(u,["enter"]),class:"vuefinder__new-file-modal__input",placeholder:e.unref(o)("File Name"),type:"text"},null,40,Ai),[[e.vModelText,s.value]]),a.value.length?(e.openBlock(),e.createBlock(e.unref(a),{key:0,onHidden:m[1]||(m[1]=i=>a.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),Z={PENDING:0,CANCELED:1,UPLOADING:2,ERROR:3,DONE:10};function Ii(){const n=e.inject("ServiceContainer"),{t}=n.i18n,o=n.fs,r=L.useStore(o.path),l=n.config,s=e.ref({QUEUE_ENTRY_STATUS:Z}),a=e.ref(null),u=e.ref(null),c=e.ref(null),m=e.ref(null),i=e.ref(null),d=e.ref([]),g=e.ref(""),_=e.ref(!1),E=e.ref(!1),b=e.ref(null);let h;const f=$=>{$.preventDefault(),$.stopPropagation(),E.value=!0},k=$=>{$.preventDefault(),$.stopPropagation(),E.value=!0},v=$=>{$.preventDefault(),$.stopPropagation(),(!$.relatedTarget||$.relatedTarget===document.body)&&(E.value=!1)},p=$=>{$.preventDefault(),$.stopPropagation(),E.value=!1;const x=/^[/\\](.+)/,w=$.dataTransfer;w&&(w.items&&w.items.length?Array.from(w.items).forEach(y=>{if(y.kind==="file"){const C=y.webkitGetAsEntry?.();if(C)$t((D,H)=>{const J=x.exec(D?.fullPath||"");N(H,J?J[1]:H.name)},C);else{const D=y.getAsFile?.();D&&N(D)}}}):w.files&&w.files.length&&Array.from(w.files).forEach(y=>N(y)))},V=$=>d.value.findIndex(x=>x.id===$),N=($,x)=>h.addFile({name:x||$.name,type:$.type,data:$,source:"Local"}),A=$=>$.status===Z.DONE?"text-green-600":$.status===Z.ERROR||$.status===Z.CANCELED?"text-red-600":"",I=$=>$.status===Z.DONE?"✓":$.status===Z.ERROR||$.status===Z.CANCELED?"!":"...",T=()=>m.value?.click(),O=()=>n.modal.close(),q=$=>{if(_.value||!d.value.filter(x=>x.status!==Z.DONE).length){_.value||(g.value=t("Please select file to upload first."));return}g.value="",b.value=$||r.value,h.upload()},W=()=>{h.cancelAll(),d.value.forEach($=>{$.status!==Z.DONE&&($.status=Z.CANCELED,$.statusName=t("Canceled"))}),_.value=!1},P=$=>{_.value||(h.removeFile($.id),d.value.splice(V($.id),1))},j=$=>{if(!_.value)if(h.cancelAll(),$){const x=d.value.filter(w=>w.status!==Z.DONE);d.value=[],x.forEach(w=>N(w.originalFile,w.name))}else d.value=[]},K=$=>{$.forEach(x=>{N(x)})};return e.onMounted(()=>{h=new An({debug:n.debug,restrictions:{maxFileSize:qn(l.maxFileSize??"10mb")},locale:n.i18n.t("uppy"),onBeforeFileAdded:(w,y)=>{if(y[w.id]!=null){const D=V(w.id);d.value[D]?.status===Z.PENDING&&(g.value=h.i18n("noDuplicates",{fileName:w.name})),d.value=d.value.filter(H=>H.id!==w.id)}return d.value.push({id:w.id,name:w.name,size:n.filesize(w.size),status:Z.PENDING,statusName:t("Pending upload"),percent:null,originalFile:w.data}),!0}}),h.use(In,{endpoint:"WILL_BE_REPLACED_BEFORE_UPLOAD",limit:5,timeout:0}),h.on("restriction-failed",(w,y)=>{const C=d.value[V(w.id)];C&&P(C),g.value=y.message}),h.on("upload",()=>{const w=b.value||r.value,y=n.requester.transformRequestParams({url:"",method:"post",params:{q:"upload",storage:w.storage,path:w.path}});h.setMeta({...y.body});const C=h.getPlugin("XHRUpload");C&&(C.opts.method=y.method,C.opts.endpoint=y.url+"?"+new URLSearchParams(y.params),C.opts.headers=y.headers),delete y.headers["Content-Type"],_.value=!0,d.value.forEach(D=>{D.status!==Z.DONE&&(D.percent=null,D.status=Z.UPLOADING,D.statusName=t("Pending upload"))})}),h.on("upload-progress",(w,y)=>{const C=y.bytesTotal??1,D=Math.floor(y.bytesUploaded/C*100),H=V(w.id);H!==-1&&d.value[H]&&(d.value[H].percent=`${D}%`)}),h.on("upload-success",w=>{const y=d.value[V(w.id)];y&&(y.status=Z.DONE,y.statusName=t("Done"))}),h.on("upload-error",(w,y)=>{const C=d.value[V(w.id)];C&&(C.percent=null,C.status=Z.ERROR,C.statusName=y?.isNetworkError?t("Network Error, Unable establish connection to the server or interrupted."):y?.message||t("Unknown Error"))}),h.on("error",w=>{g.value=w.message,_.value=!1,n.emitter.emit("vf-fetch",{params:{q:"index"},dontCloseModal:!0})}),h.on("complete",()=>{_.value=!1;const w=d.value.filter(C=>C.status===Z.DONE).map(C=>C.name),y=b.value||r.value;n.emitter.emit("vf-fetch",{params:{q:"index",path:y.path},dontCloseModal:!0,onSuccess:C=>{const D=(C?.files||[]).filter(H=>w.includes(H.basename));n.emitter.emit("vf-upload-complete",D)}})}),m.value?.addEventListener("click",()=>u.value?.click()),i.value?.addEventListener("click",()=>c.value?.click());const $={capture:!0};document.addEventListener("dragover",f,$),document.addEventListener("dragenter",k,$),document.addEventListener("dragleave",v,$),document.addEventListener("drop",p,$);const x=w=>{const y=w.target,C=y.files;if(C){for(const D of C)N(D);y.value=""}};u.value?.addEventListener("change",x),c.value?.addEventListener("change",x)}),e.onUnmounted(()=>{const $={capture:!0};document.removeEventListener("dragover",f,$),document.removeEventListener("dragenter",k,$),document.removeEventListener("dragleave",v,$),document.removeEventListener("drop",p,$)}),{container:a,internalFileInput:u,internalFolderInput:c,pickFiles:m,pickFolders:i,queue:d,message:g,uploading:_,hasFilesInDropArea:E,definitions:s,openFileSelector:T,upload:q,cancel:W,remove:P,clear:j,close:O,getClassNameForEntry:A,getIconForEntry:I,addExternalFiles:K}}function gt(n,t=14){const o=`((?=([\\w\\W]{0,${t}}))([\\w\\W]{${t+1},})([\\w\\W]{8,}))`;return n.replace(new RegExp(o),"$2..$4")}const Ri={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function Li(n,t){return e.openBlock(),e.createElementBlock("svg",Ri,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"},null,-1)])])}const En={render:Li},Pi={class:"vuefinder__upload-modal__content relative"},Oi={class:"vuefinder__upload-modal__target-section"},zi={class:"vuefinder__upload-modal__target-label"},Hi={class:"vuefinder__upload-modal__target-container"},Ui={class:"vuefinder__upload-modal__target-path"},ji={class:"vuefinder__upload-modal__target-storage"},qi={key:0,class:"vuefinder__upload-modal__target-folder"},Ki={class:"vuefinder__upload-modal__target-badge"},Wi={class:"vuefinder__upload-modal__drag-hint"},Gi={class:"vuefinder__upload-modal__file-list vf-scrollbar"},Yi=["textContent"],Xi={class:"vuefinder__upload-modal__file-info"},Qi={class:"vuefinder__upload-modal__file-name hidden md:block"},Ji={class:"vuefinder__upload-modal__file-name md:hidden"},Zi={key:0,class:"ml-auto"},ec=["title","disabled","onClick"],tc={key:0,class:"py-2"},nc=["aria-expanded"],oc={key:0,class:"vuefinder__upload-actions__menu left-0 right-0 absolute bottom-full mb-2"},rc=["disabled"],lc=["disabled"],ac=["disabled"],sc=["aria-expanded"],ic={key:0,class:"vuefinder__upload-actions__menu absolute bottom-full mb-2 left-0"},cc=["disabled"],dc=["disabled"],Tt=e.defineComponent({__name:"ModalUpload",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=L.useStore(r.path),s=e.ref(l.value),a=e.ref(!1),u=()=>{const x=s.value.path;if(!x)return{storage:"local",path:""};if(x.endsWith("://"))return{storage:x.replace("://",""),path:""};const w=x.split("://");return{storage:w[0]||"local",path:w[1]||""}},c=x=>{x&&(s.value=x)},m=x=>{x&&(s.value=x,a.value=!1)},{container:i,internalFileInput:d,internalFolderInput:g,pickFiles:_,queue:E,message:b,uploading:h,hasFilesInDropArea:f,definitions:k,openFileSelector:v,upload:p,cancel:V,remove:N,clear:A,close:I,getClassNameForEntry:T,getIconForEntry:O,addExternalFiles:q}=Ii(),W=()=>{p(s.value)};e.onMounted(()=>{t.emitter.on("vf-external-files-dropped",x=>{q(x)})}),e.onUnmounted(()=>{t.emitter.off("vf-external-files-dropped")});const P=e.ref(!1),j=e.ref(null),K=e.ref(null),$=x=>{if(!P.value)return;const w=x.target,y=j.value?.contains(w)??!1,C=K.value?.contains(w)??!1;!y&&!C&&(P.value=!1)};return e.onMounted(()=>document.addEventListener("click",$)),e.onUnmounted(()=>document.removeEventListener("click",$)),(x,w)=>(e.openBlock(),e.createBlock(ie,{showDragOverlay:e.unref(f),dragOverlayText:e.unref(o)("Drag and drop the files/folders to here.")},{buttons:e.withCtx(()=>[e.createElementVNode("div",{class:"sm:hidden relative w-full mb-2",ref_key:"actionsMenuMobileRef",ref:j},[e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__upload-actions","vuefinder__upload-actions--block",P.value?"vuefinder__upload-actions--ring":""])},[e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__main",onClick:w[3]||(w[3]=y=>e.unref(v)())},e.toDisplayString(e.unref(o)("Select Files")),1),e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__trigger",onClick:w[4]||(w[4]=e.withModifiers(y=>P.value=!P.value,["stop"])),"aria-haspopup":"menu","aria-expanded":P.value?"true":"false"},[...w[17]||(w[17]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z","clip-rule":"evenodd"})],-1)])],8,nc)],2),P.value?(e.openBlock(),e.createElementBlock("div",oc,[e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__item",onClick:w[5]||(w[5]=y=>{e.unref(v)(),P.value=!1})},e.toDisplayString(e.unref(o)("Select Files")),1),e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__item",onClick:w[6]||(w[6]=y=>{e.unref(g)?.click(),P.value=!1})},e.toDisplayString(e.unref(o)("Select Folders")),1),w[18]||(w[18]=e.createElementVNode("div",{class:"vuefinder__upload-actions__separator"},null,-1)),e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__item",disabled:e.unref(h),onClick:w[7]||(w[7]=y=>{e.unref(A)(!1),P.value=!1})},e.toDisplayString(e.unref(o)("Clear all")),9,rc),e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__item",disabled:e.unref(h),onClick:w[8]||(w[8]=y=>{e.unref(A)(!0),P.value=!1})},e.toDisplayString(e.unref(o)("Clear only successful")),9,lc)])):e.createCommentVNode("",!0)],512),e.createElementVNode("button",{type:"button",class:"vf-btn vf-btn-primary",disabled:e.unref(h)||!e.unref(E).length,onClick:e.withModifiers(W,["prevent"])},e.toDisplayString(e.unref(o)("Upload")),9,ac),e.unref(h)?(e.openBlock(),e.createElementBlock("button",{key:0,type:"button",class:"vf-btn vf-btn-secondary",onClick:w[9]||(w[9]=e.withModifiers((...y)=>e.unref(V)&&e.unref(V)(...y),["prevent"]))},e.toDisplayString(e.unref(o)("Cancel")),1)):(e.openBlock(),e.createElementBlock("button",{key:1,type:"button",class:"vf-btn vf-btn-secondary",onClick:w[10]||(w[10]=e.withModifiers((...y)=>e.unref(I)&&e.unref(I)(...y),["prevent"]))},e.toDisplayString(e.unref(o)("Close")),1)),e.createElementVNode("div",{class:"hidden sm:block relative mr-auto",ref_key:"actionsMenuDesktopRef",ref:K},[e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__upload-actions",P.value?"vuefinder__upload-actions--ring":""])},[e.createElementVNode("button",{ref_key:"pickFiles",ref:_,type:"button",class:"vuefinder__upload-actions__main"},e.toDisplayString(e.unref(o)("Select Files")),513),e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__trigger",onClick:w[11]||(w[11]=e.withModifiers(y=>P.value=!P.value,["stop"])),"aria-haspopup":"menu","aria-expanded":P.value?"true":"false"},[...w[19]||(w[19]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z","clip-rule":"evenodd"})],-1)])],8,sc)],2),P.value?(e.openBlock(),e.createElementBlock("div",ic,[e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__item",onClick:w[12]||(w[12]=y=>{e.unref(v)(),P.value=!1})},e.toDisplayString(e.unref(o)("Select Files")),1),e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__item",onClick:w[13]||(w[13]=y=>{e.unref(g)?.click(),P.value=!1})},e.toDisplayString(e.unref(o)("Select Folders")),1),w[20]||(w[20]=e.createElementVNode("div",{class:"vuefinder__upload-actions__separator"},null,-1)),e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__item",disabled:e.unref(h),onClick:w[14]||(w[14]=y=>{e.unref(A)(!1),P.value=!1})},e.toDisplayString(e.unref(o)("Clear all")),9,cc),e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__item",disabled:e.unref(h),onClick:w[15]||(w[15]=y=>{e.unref(A)(!0),P.value=!1})},e.toDisplayString(e.unref(o)("Clear only successful")),9,dc)])):e.createCommentVNode("",!0)],512)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(ue,{icon:e.unref(En),title:e.unref(o)("Upload Files")},null,8,["icon","title"]),e.createElementVNode("div",Pi,[e.createElementVNode("div",Oi,[e.createElementVNode("div",zi,e.toDisplayString(e.unref(o)("Hedef Klasör")),1),e.createElementVNode("div",Hi,[e.createElementVNode("div",{class:"vuefinder__upload-modal__target-display",onClick:w[0]||(w[0]=y=>a.value=!a.value)},[e.createElementVNode("div",Ui,[e.createElementVNode("span",ji,e.toDisplayString(u().storage)+"://",1),u().path?(e.openBlock(),e.createElementBlock("span",qi,e.toDisplayString(u().path),1)):e.createCommentVNode("",!0)]),e.createElementVNode("span",Ki,e.toDisplayString(e.unref(o)("Browse")),1)])]),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__upload-modal__tree-selector",a.value?"vuefinder__upload-modal__tree-selector--expanded":"vuefinder__upload-modal__tree-selector--collapsed"])},[e.createVNode(Vt,{modelValue:s.value,"onUpdate:modelValue":[w[1]||(w[1]=y=>s.value=y),c],"show-pinned-folders":!0,onSelectAndClose:m},null,8,["modelValue"])],2)]),e.createElementVNode("div",Wi,e.toDisplayString(e.unref(o)("You can drag & drop files anywhere while this modal is open.")),1),e.createElementVNode("div",{ref_key:"container",ref:i,class:"hidden"},null,512),e.createElementVNode("div",Gi,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(E),y=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__upload-modal__file-entry",key:y.id},[e.createElementVNode("span",{class:e.normalizeClass(["vuefinder__upload-modal__file-icon",e.unref(T)(y)])},[e.createElementVNode("span",{class:"vuefinder__upload-modal__file-icon-text",textContent:e.toDisplayString(e.unref(O)(y))},null,8,Yi)],2),e.createElementVNode("div",Xi,[e.createElementVNode("div",Qi,e.toDisplayString(e.unref(gt)(y.name,40))+" ("+e.toDisplayString(y.size)+") ",1),e.createElementVNode("div",Ji,e.toDisplayString(e.unref(gt)(y.name,16))+" ("+e.toDisplayString(y.size)+") ",1),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__upload-modal__file-status",e.unref(T)(y)])},[e.createTextVNode(e.toDisplayString(y.statusName)+" ",1),y.status===e.unref(k).QUEUE_ENTRY_STATUS.UPLOADING?(e.openBlock(),e.createElementBlock("b",Zi,e.toDisplayString(y.percent),1)):e.createCommentVNode("",!0)],2)]),e.createElementVNode("button",{type:"button",class:e.normalizeClass(["vuefinder__upload-modal__file-remove",e.unref(h)?"disabled":""]),title:e.unref(o)("Delete"),disabled:e.unref(h),onClick:C=>e.unref(N)(y)},[...w[16]||(w[16]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"vuefinder__upload-modal__file-remove-icon"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])],10,ec)]))),128)),e.unref(E).length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",tc,e.toDisplayString(e.unref(o)("No files selected!")),1))]),e.unref(b).length?(e.openBlock(),e.createBlock(Zt,{key:0,onHidden:w[2]||(w[2]=y=>b.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(b)),1)]),_:1})):e.createCommentVNode("",!0)])]),e.createElementVNode("input",{ref_key:"internalFileInput",ref:d,type:"file",multiple:"",class:"hidden"},null,512),e.createElementVNode("input",{ref_key:"internalFolderInput",ref:g,type:"file",multiple:"",webkitdirectory:"",class:"hidden"},null,512)]),_:1},8,["showDragOverlay","dragOverlayText"]))}}),uc={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function mc(n,t){return e.openBlock(),e.createElementBlock("svg",uc,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5m6 4.125 2.25 2.25m0 0 2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125"},null,-1)])])}const Vn={render:mc},fc={class:"vuefinder__unarchive-modal__content"},vc={class:"vuefinder__unarchive-modal__items"},pc={key:0,class:"vuefinder__unarchive-modal__icon vuefinder__unarchive-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},_c={key:1,class:"vuefinder__unarchive-modal__icon vuefinder__unarchive-modal__icon--file",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},hc={class:"vuefinder__unarchive-modal__item-name"},gc={class:"vuefinder__unarchive-modal__info"},Mt=e.defineComponent({__name:"ModalUnarchive",setup(n){const t=e.inject("ServiceContainer"),o=t.fs,r=L.useStore(o.path),{t:l}=t.i18n,s=e.ref(t.modal.data.items[0]),a=e.ref(""),u=e.ref([]),c=()=>{t.emitter.emit("vf-fetch",{params:{q:"unarchive",m:"post",path:r.value.path},body:{item:s.value.path},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:l("The file unarchived.")})},onError:m=>{a.value=l(m.message)}})};return(m,i)=>(e.openBlock(),e.createBlock(ie,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:c,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(l)("Unarchive")),1),e.createElementVNode("button",{type:"button",onClick:i[1]||(i[1]=d=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(l)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(ue,{icon:e.unref(Vn),title:e.unref(l)("Unarchive")},null,8,["icon","title"]),e.createElementVNode("div",fc,[e.createElementVNode("div",vc,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value,d=>(e.openBlock(),e.createElementBlock("p",{class:"vuefinder__unarchive-modal__item",key:d.path},[d.type==="dir"?(e.openBlock(),e.createElementBlock("svg",pc,[...i[2]||(i[2]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",_c,[...i[3]||(i[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),e.createElementVNode("span",hc,e.toDisplayString(d.basename),1)]))),128)),e.createElementVNode("p",gc,e.toDisplayString(e.unref(l)("The archive will be unarchived at"))+" ("+e.toDisplayString(e.unref(r).path)+")",1),a.value.length?(e.openBlock(),e.createBlock(e.unref(a),{key:0,onHidden:i[0]||(i[0]=d=>a.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),wc={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",viewBox:"0 0 24 24"};function kc(n,t){return e.openBlock(),e.createElementBlock("svg",wc,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125"},null,-1)])])}const Nn={render:kc},yc={class:"vuefinder__archive-modal__content"},bc={class:"vuefinder__archive-modal__form"},Ec={class:"vuefinder__archive-modal__files vf-scrollbar"},Vc={class:"vuefinder__archive-modal__file"},Nc={key:0,class:"vuefinder__archive-modal__icon vuefinder__archive-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},xc={key:1,class:"vuefinder__archive-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Sc={class:"vuefinder__archive-modal__file-name"},Cc=["placeholder"],Ft=e.defineComponent({__name:"ModalArchive",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=L.useStore(r.path),s=e.ref(""),a=e.ref(""),u=e.ref(t.modal.data.items),c=()=>{u.value.length&&t.emitter.emit("vf-fetch",{params:{q:"archive",m:"post",path:l.value.path},body:{items:u.value.map(({path:m,type:i})=>({path:m,type:i})),name:s.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:o("The file(s) archived.")})},onError:m=>{a.value=o(m.message)}})};return(m,i)=>(e.openBlock(),e.createBlock(ie,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:c,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Archive")),1),e.createElementVNode("button",{type:"button",onClick:i[2]||(i[2]=d=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(ue,{icon:e.unref(Nn),title:e.unref(o)("Archive the files")},null,8,["icon","title"]),e.createElementVNode("div",yc,[e.createElementVNode("div",bc,[e.createElementVNode("div",Ec,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value,d=>(e.openBlock(),e.createElementBlock("p",Vc,[d.type==="dir"?(e.openBlock(),e.createElementBlock("svg",Nc,[...i[3]||(i[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",xc,[...i[4]||(i[4]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),e.createElementVNode("span",Sc,e.toDisplayString(d.basename),1)]))),256))]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":i[0]||(i[0]=d=>s.value=d),onKeyup:e.withKeys(c,["enter"]),class:"vuefinder__archive-modal__input",placeholder:e.unref(o)("Archive name. (.zip file will be created)"),type:"text"},null,40,Cc),[[e.vModelText,s.value]]),a.value.length?(e.openBlock(),e.createBlock(e.unref(a),{key:0,onHidden:i[1]||(i[1]=d=>a.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),Bc={class:"vuefinder__menubar__container"},$c=["onClick","onMouseenter"],Dc={class:"vuefinder__menubar__label"},Tc=["onMouseenter"],Mc=["onClick"],Fc={key:0,class:"vuefinder__menubar__dropdown__label"},Ac={key:1,class:"vuefinder__menubar__dropdown__checkmark"},Ic=e.defineComponent({__name:"MenuBar",setup(n){const t=e.inject("ServiceContainer");if(!t)throw new Error("MenuBar: ServiceContainer not found");const{t:o}=t?.i18n||{t:f=>f},r=t?.fs,l=t?.config,s=L.useStore(l?.state||{}),a=L.useStore(r?.selectedItems||[]),u=L.useStore(r?.storages||[]),c=e.ref(null),m=e.ref(!1),i=e.computed(()=>window.opener!==null||window.name!==""||window.history.length<=1),d=e.computed(()=>[{id:"file",label:o("File"),items:[{id:"new-folder",label:o("New Folder"),action:()=>t?.modal?.open(Dt,{items:a.value}),enabled:()=>t?.features?.includes(z.NEW_FOLDER)||!1},{id:"new-file",label:o("New File"),action:()=>t?.modal?.open(bn,{items:a.value}),enabled:()=>t?.features?.includes(z.NEW_FILE)||!1},{type:"separator"},{id:"upload",label:o("Upload"),action:()=>t?.modal?.open(Tt,{items:a.value}),enabled:()=>t?.features?.includes(z.UPLOAD)||!1},{type:"separator"},{id:"search",label:o("Search"),action:()=>console.log("Search clicked"),enabled:()=>t?.features?.includes(z.SEARCH)},{type:"separator"},{id:"archive",label:o("Archive"),action:()=>{a.value.length>0&&t?.modal?.open(Ft,{items:a.value})},enabled:()=>a.value.length>0&&t?.features?.includes(z.ARCHIVE)},{id:"unarchive",label:o("Unarchive"),action:()=>{a.value.length===1&&a.value[0]?.mime_type==="application/zip"&&t?.modal?.open(Mt,{items:a.value})},enabled:()=>a.value.length===1&&a.value[0]?.mime_type==="application/zip"&&t?.features?.includes(z.UNARCHIVE)},{type:"separator"},{id:"preview",label:o("Preview"),action:()=>{a.value.length===1&&a.value[0]?.type!=="dir"&&t?.modal?.open(Je,{storage:r?.path?.get()?.storage,item:a.value[0]})},enabled:()=>a.value.length===1&&a.value[0]?.type!=="dir"},...i.value?[{type:"separator"},{id:"exit",label:o("Exit"),action:()=>{try{window.close()}catch{}},enabled:()=>!0}]:[]]},{id:"edit",label:o("Edit"),items:[...t?.selectionMode==="multiple"?[{id:"select-all",label:o("Select All"),action:()=>r?.selectAll(t?.selectionMode||"multiple",t),enabled:()=>!0},{id:"deselect",label:o("Deselect All"),action:()=>r?.clearSelection(),enabled:()=>a.value.length>0},{type:"separator"}]:[],{id:"cut",label:o("Cut"),action:()=>{a.value.length>0&&r?.setClipboard("cut",new Set(a.value.map(f=>f.path)))},enabled:()=>a.value.length>0},{id:"copy",label:o("Copy"),action:()=>{a.value.length>0&&r?.setClipboard("copy",new Set(a.value.map(f=>f.path)))},enabled:()=>a.value.length>0},{id:"paste",label:o("Paste"),action:()=>{const f=r?.getClipboard();f?.items?.size>0&&t?.modal?.open(f.type==="cut"?xe:Nt,{items:{from:Array.from(f.items),to:r?.path?.get()}})},enabled:()=>r?.getClipboard()?.items?.size>0},{id:"move",label:o("Move"),action:()=>{if(a.value.length>0){const f=t?.fs,k={storage:f?.path?.get()?.storage||"",path:f?.path?.get()?.path||"",type:"dir"};t?.modal?.open(xe,{items:{from:a.value,to:k}})}},enabled:()=>a.value.length>0&&t?.features?.includes(z.MOVE)},{type:"separator"},{id:"copy-path",label:o("Copy Path"),action:async()=>{if(a.value.length===1){const f=a.value[0];await Te(f.path)}else{const f=r?.path?.get();f?.path&&await Te(f.path)}},enabled:()=>!0},{id:"copy-download-url",label:o("Copy Download URL"),action:async()=>{if(a.value.length===1){const f=a.value[0],k=r?.path?.get()?.storage??"local",v=t?.requester?.getDownloadUrl(k,f);v&&await qs(v)}},enabled:()=>a.value.length===1&&a.value[0]?.type!=="dir"},{type:"separator"},{id:"rename",label:o("Rename"),action:()=>{a.value.length===1&&t?.modal?.open(Qe,{items:a.value})},enabled:()=>a.value.length===1&&t?.features?.includes(z.RENAME)},{id:"delete",label:o("Delete"),action:()=>{a.value.length>0&&t?.modal?.open(Xe,{items:a.value})},enabled:()=>a.value.length>0&&t?.features?.includes(z.DELETE)}]},{id:"view",label:o("View"),items:[{id:"refresh",label:o("Refresh"),action:()=>{t?.emitter?.emit("vf-fetch",{params:{q:"index",path:r?.path?.get()?.path}})},enabled:()=>!0},{type:"separator"},{id:"grid-view",label:o("Grid View"),action:()=>l?.set("view","grid"),checked:()=>s.value?.view==="grid"},{id:"list-view",label:o("List View"),action:()=>l?.set("view","list"),checked:()=>s.value?.view==="list"},{type:"separator"},{id:"tree-view",label:o("Tree View"),action:()=>l?.toggle("showTreeView"),enabled:()=>!0,checked:()=>s.value?.showTreeView},{id:"thumbnails",label:o("Show Thumbnails"),action:()=>l?.toggle("showThumbnails"),enabled:()=>!0,checked:()=>s.value?.showThumbnails},{id:"show-hidden-files",label:o("Show Hidden Files"),action:()=>l?.toggle("showHiddenFiles"),enabled:()=>!0,checked:()=>s.value?.showHiddenFiles},{type:"separator"},{id:"fullscreen",label:o("Full Screen"),action:()=>l?.toggle("fullScreen"),enabled:()=>t?.features?.includes(z.FULL_SCREEN),checked:()=>s.value?.fullScreen}]},{id:"go",label:o("Go"),items:[{id:"forward",label:o("Forward"),action:()=>{r?.goForward(),t?.emitter?.emit("vf-fetch",{params:{q:"index",path:r?.currentPath?.get()??""}})},enabled:()=>r?.canGoForward?.get()??!1},{id:"back",label:o("Back"),action:()=>{r?.goBack(),t?.emitter?.emit("vf-fetch",{params:{q:"index",path:r?.currentPath?.get()??""}})},enabled:()=>r?.canGoBack?.get()??!1},{id:"open-containing-folder",label:o("Open containing folder"),action:()=>{const f=r?.path?.get();if(f?.breadcrumb&&f.breadcrumb.length>0){const v=f.breadcrumb[f.breadcrumb.length-2]?.path??`${f.storage}://`;r?.setPath(v),t?.emitter?.emit("vf-fetch",{params:{q:"index",path:v}})}},enabled:()=>{const f=r?.path?.get();return f?.breadcrumb&&f.breadcrumb.length>0}},{type:"separator"},...(u.value||[]).map(f=>({id:`storage-${f}`,label:f,action:()=>{const k=`${f}://`;r?.setPath(k),t?.emitter?.emit("vf-fetch",{params:{q:"index",storage:f,path:k}})},enabled:()=>!0})),{type:"separator"},{id:"go-to-folder",label:o("Go to Folder"),action:()=>{const f=prompt(o("Enter folder path:"));f&&(r?.setPath(f),t?.emitter?.emit("vf-fetch",{params:{q:"index",path:f}}))},enabled:()=>!0}]},{id:"help",label:o("Help"),items:[{id:"about",label:o("About"),action:()=>t?.modal?.open(kt),enabled:()=>!0}]}]),g=f=>{c.value===f?E():(c.value=f,m.value=!0)},_=f=>{m.value&&(c.value=f)},E=()=>{c.value=null,m.value=!1},b=f=>{E(),f()},h=f=>{f.target.closest(".vuefinder__menubar")||E()};return e.onMounted(()=>{document.addEventListener("click",h)}),e.onUnmounted(()=>{document.removeEventListener("click",h)}),(f,k)=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__menubar",onClick:k[0]||(k[0]=e.withModifiers(()=>{},["stop"]))},[e.createElementVNode("div",Bc,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,v=>(e.openBlock(),e.createElementBlock("div",{key:v.id,class:e.normalizeClass(["vuefinder__menubar__item",{"vuefinder__menubar__item--active":c.value===v.id}]),onClick:p=>g(v.id),onMouseenter:p=>_(v.id)},[e.createElementVNode("span",Dc,e.toDisplayString(v.label),1),c.value===v.id?(e.openBlock(),e.createElementBlock("div",{key:0,class:"vuefinder__menubar__dropdown",onMouseenter:p=>_(v.id)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(v.items,p=>(e.openBlock(),e.createElementBlock("div",{key:p.id||p.type,class:e.normalizeClass(["vuefinder__menubar__dropdown__item",{"vuefinder__menubar__dropdown__item--separator":p.type==="separator","vuefinder__menubar__dropdown__item--disabled":p.enabled&&!p.enabled(),"vuefinder__menubar__dropdown__item--checked":p.checked&&p.checked()}]),onClick:e.withModifiers(V=>p.type!=="separator"&&p.enabled&&p.enabled()?b(p.action):null,["stop"])},[p.type!=="separator"?(e.openBlock(),e.createElementBlock("span",Fc,e.toDisplayString(p.label),1)):e.createCommentVNode("",!0),p.checked&&p.checked()?(e.openBlock(),e.createElementBlock("span",Ac," ✓ ")):e.createCommentVNode("",!0)],10,Mc))),128))],40,Tc)):e.createCommentVNode("",!0)],42,$c))),128))])]))}}),Rc={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",viewBox:"0 0 24 24"};function Lc(n,t){return e.openBlock(),e.createElementBlock("svg",Rc,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"},null,-1)])])}const Pc={render:Lc},Oc={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function zc(n,t){return e.openBlock(),e.createElementBlock("svg",Oc,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"},null,-1)])])}const Hc={render:zc},Uc={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function jc(n,t){return e.openBlock(),e.createElementBlock("svg",Uc,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25zm0 9.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18zM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25zm0 9.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18z"},null,-1)])])}const qc={render:jc},Kc={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function Wc(n,t){return e.openBlock(),e.createElementBlock("svg",Kc,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75"},null,-1)])])}const Gc={render:Wc},Yc={fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function Xc(n,t){return e.openBlock(),e.createElementBlock("svg",Yc,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M3 4a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v2.586a1 1 0 0 1-.293.707l-6.414 6.414a1 1 0 0 0-.293.707V17l-4 4v-6.586a1 1 0 0 0-.293-.707L3.293 7.293A1 1 0 0 1 3 6.586z"},null,-1)])])}const Qc={render:Xc},Jc={class:"vuefinder__toolbar"},Zc={class:"vuefinder__toolbar__actions"},ed=["title"],td=["title"],nd=["title"],od=["title"],rd=["title"],ld=["title"],ad=["title"],sd={class:"vuefinder__toolbar__controls"},id=["title"],cd={class:"vuefinder__toolbar__control vuefinder__toolbar__dropdown-container"},dd=["title"],ud={class:"relative"},md={key:0,class:"vuefinder__toolbar__filter-indicator"},fd={key:0,class:"vuefinder__toolbar__dropdown"},vd={class:"vuefinder__toolbar__dropdown-content"},pd={class:"vuefinder__toolbar__dropdown-section"},_d={class:"vuefinder__toolbar__dropdown-label"},hd={class:"vuefinder__toolbar__dropdown-row"},gd={value:"name"},wd={value:"size"},kd={value:"modified"},yd={value:""},bd={value:"asc"},Ed={value:"desc"},Vd={class:"vuefinder__toolbar__dropdown-section"},Nd={class:"vuefinder__toolbar__dropdown-label"},xd={class:"vuefinder__toolbar__dropdown-options"},Sd={class:"vuefinder__toolbar__dropdown-option"},Cd={class:"vuefinder__toolbar__option-text"},Bd={class:"vuefinder__toolbar__dropdown-option"},$d={class:"vuefinder__toolbar__option-text"},Dd={class:"vuefinder__toolbar__dropdown-option"},Td={class:"vuefinder__toolbar__option-text"},Md={class:"vuefinder__toolbar__dropdown-toggle"},Fd={for:"showHidden",class:"vuefinder__toolbar__toggle-label"},Ad={class:"vuefinder__toolbar__dropdown-reset"},Id=["title"],Rd=["title"],Ld=e.defineComponent({name:"VfToolbar",__name:"Toolbar",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=t.config,s=L.useStore(l.state),a=L.useStore(r.selectedItems),u=L.useStore(r.sort),c=L.useStore(r.filter);e.watch(()=>s.value.fullScreen,()=>{if(s.value.fullScreen){const b=document.querySelector("body");b&&(b.style.overflow="hidden")}else{const b=document.querySelector("body");b&&(b.style.overflow="")}t.emitter.emit("vf-fullscreen-toggle")});const m=e.ref(!1),i=b=>{b.target.closest(".vuefinder__toolbar__dropdown-container")||(m.value=!1)};e.onMounted(()=>{document.addEventListener("click",i)}),e.onUnmounted(()=>{document.removeEventListener("click",i)});const d=e.ref({sortBy:"name",sortOrder:"",filterKind:"all",showHidden:s.value.showHiddenFiles});e.watch(()=>d.value.sortBy,b=>{if(!d.value.sortOrder){r.clearSort();return}b==="name"?r.setSort("basename",d.value.sortOrder):b==="size"?r.setSort("file_size",d.value.sortOrder):b==="modified"&&r.setSort("last_modified",d.value.sortOrder)}),e.watch(()=>d.value.sortOrder,b=>{if(!b){r.clearSort();return}d.value.sortBy==="name"?r.setSort("basename",b):d.value.sortBy==="size"?r.setSort("file_size",b):d.value.sortBy==="modified"&&r.setSort("last_modified",b)}),e.watch(u,b=>{b.active?(b.column==="basename"?d.value.sortBy="name":b.column==="file_size"?d.value.sortBy="size":b.column==="last_modified"&&(d.value.sortBy="modified"),d.value.sortOrder=b.order):d.value.sortOrder=""},{immediate:!0}),e.watch(()=>d.value.filterKind,b=>{r.setFilter(b,s.value.showHiddenFiles)}),e.watch(()=>d.value.showHidden,b=>{l.set("showHiddenFiles",b),r.setFilter(d.value.filterKind,b)}),e.watch(c,b=>{d.value.filterKind=b.kind},{immediate:!0}),e.watch(()=>s.value.showHiddenFiles,b=>{d.value.showHidden=b,r.setFilter(d.value.filterKind,b)},{immediate:!0});const g=()=>l.set("view",s.value.view==="grid"?"list":"grid"),_=e.computed(()=>c.value.kind!=="all"||!s.value.showHiddenFiles||u.value.active),E=()=>{d.value={sortBy:"name",sortOrder:"",filterKind:"all",showHidden:!0},l.set("showHiddenFiles",!0),r.clearSort(),r.clearFilter()};return(b,h)=>(e.openBlock(),e.createElementBlock("div",Jc,[e.createElementVNode("div",Zc,[e.unref(t).features.includes(e.unref(z).NEW_FOLDER)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"mx-1.5",title:e.unref(o)("New Folder"),onClick:h[0]||(h[0]=f=>e.unref(t).modal.open(Dt,{items:e.unref(a)}))},[e.createVNode(e.unref(kn))],8,ed)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(z).NEW_FILE)?(e.openBlock(),e.createElementBlock("div",{key:1,class:"mx-1.5",title:e.unref(o)("New File"),onClick:h[1]||(h[1]=f=>e.unref(t).modal.open(bn,{items:e.unref(a)}))},[e.createVNode(e.unref(yn))],8,td)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(z).RENAME)?(e.openBlock(),e.createElementBlock("div",{key:2,class:"mx-1.5",title:e.unref(o)("Rename"),onClick:h[2]||(h[2]=f=>e.unref(a).length!==1||e.unref(t).modal.open(Qe,{items:e.unref(a)}))},[e.createVNode(e.unref(Jt),{class:e.normalizeClass(e.unref(a).length===1?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,nd)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(z).DELETE)?(e.openBlock(),e.createElementBlock("div",{key:3,class:"mx-1.5",title:e.unref(o)("Delete"),onClick:h[3]||(h[3]=f=>!e.unref(a).length||e.unref(t).modal.open(Xe,{items:e.unref(a)}))},[e.createVNode(e.unref(Qt),{class:e.normalizeClass(e.unref(a).length?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,od)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(z).UPLOAD)?(e.openBlock(),e.createElementBlock("div",{key:4,class:"mx-1.5",title:e.unref(o)("Upload"),onClick:h[4]||(h[4]=f=>e.unref(t).modal.open(Tt,{items:e.unref(a)}))},[e.createVNode(e.unref(En))],8,rd)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(z).UNARCHIVE)&&e.unref(a).length===1&&e.unref(a)[0].mime_type==="application/zip"?(e.openBlock(),e.createElementBlock("div",{key:5,class:"mx-1.5",title:e.unref(o)("Unarchive"),onClick:h[5]||(h[5]=f=>!e.unref(a).length||e.unref(t).modal.open(Mt,{items:e.unref(a)}))},[e.createVNode(e.unref(Vn),{class:e.normalizeClass(e.unref(a).length?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,ld)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(z).ARCHIVE)?(e.openBlock(),e.createElementBlock("div",{key:6,class:"mx-1.5",title:e.unref(o)("Archive"),onClick:h[6]||(h[6]=f=>!e.unref(a).length||e.unref(t).modal.open(Ft,{items:e.unref(a)}))},[e.createVNode(e.unref(Nn),{class:e.normalizeClass(e.unref(a).length?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,ad)):e.createCommentVNode("",!0)]),e.createElementVNode("div",sd,[e.unref(t).features.includes(e.unref(z).SEARCH)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"mx-1.5",title:e.unref(o)("Search Files"),onClick:h[7]||(h[7]=f=>e.unref(t).modal.open(wn))},[e.createVNode(e.unref(xt),{class:"vf-toolbar-icon text-(--vf-bg-primary)"})],8,id)):e.createCommentVNode("",!0),e.createElementVNode("div",cd,[e.createElementVNode("div",{title:e.unref(o)("Filter"),onClick:h[8]||(h[8]=f=>m.value=!m.value),class:"vuefinder__toolbar__dropdown-trigger"},[e.createElementVNode("div",ud,[e.createVNode(e.unref(Qc),{class:"vf-toolbar-icon vuefinder__toolbar__icon w-6 h-6"}),_.value?(e.openBlock(),e.createElementBlock("div",md)):e.createCommentVNode("",!0)])],8,dd),m.value?(e.openBlock(),e.createElementBlock("div",fd,[e.createElementVNode("div",vd,[e.createElementVNode("div",pd,[e.createElementVNode("div",_d,e.toDisplayString(e.unref(o)("Sorting")),1),e.createElementVNode("div",hd,[e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":h[9]||(h[9]=f=>d.value.sortBy=f),class:"vuefinder__toolbar__dropdown-select"},[e.createElementVNode("option",gd,e.toDisplayString(e.unref(o)("Name")),1),e.createElementVNode("option",wd,e.toDisplayString(e.unref(o)("Size")),1),e.createElementVNode("option",kd,e.toDisplayString(e.unref(o)("Date")),1)],512),[[e.vModelSelect,d.value.sortBy]]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":h[10]||(h[10]=f=>d.value.sortOrder=f),class:"vuefinder__toolbar__dropdown-select"},[e.createElementVNode("option",yd,e.toDisplayString(e.unref(o)("None")),1),e.createElementVNode("option",bd,e.toDisplayString(e.unref(o)("Asc")),1),e.createElementVNode("option",Ed,e.toDisplayString(e.unref(o)("Desc")),1)],512),[[e.vModelSelect,d.value.sortOrder]])])]),e.createElementVNode("div",Vd,[e.createElementVNode("div",Nd,e.toDisplayString(e.unref(o)("Show")),1),e.createElementVNode("div",xd,[e.createElementVNode("label",Sd,[e.withDirectives(e.createElementVNode("input",{type:"radio",name:"filterKind",value:"all","onUpdate:modelValue":h[11]||(h[11]=f=>d.value.filterKind=f),class:"vuefinder__toolbar__radio"},null,512),[[e.vModelRadio,d.value.filterKind]]),e.createElementVNode("span",Cd,e.toDisplayString(e.unref(o)("All items")),1)]),e.createElementVNode("label",Bd,[e.withDirectives(e.createElementVNode("input",{type:"radio",name:"filterKind",value:"files","onUpdate:modelValue":h[12]||(h[12]=f=>d.value.filterKind=f),class:"vuefinder__toolbar__radio"},null,512),[[e.vModelRadio,d.value.filterKind]]),e.createElementVNode("span",$d,e.toDisplayString(e.unref(o)("Files only")),1)]),e.createElementVNode("label",Dd,[e.withDirectives(e.createElementVNode("input",{type:"radio",name:"filterKind",value:"folders","onUpdate:modelValue":h[13]||(h[13]=f=>d.value.filterKind=f),class:"vuefinder__toolbar__radio"},null,512),[[e.vModelRadio,d.value.filterKind]]),e.createElementVNode("span",Td,e.toDisplayString(e.unref(o)("Folders only")),1)])])]),e.createElementVNode("div",Md,[e.createElementVNode("label",Fd,e.toDisplayString(e.unref(o)("Show hidden files")),1),e.withDirectives(e.createElementVNode("input",{type:"checkbox",id:"showHidden","onUpdate:modelValue":h[14]||(h[14]=f=>d.value.showHidden=f),class:"vuefinder__toolbar__checkbox"},null,512),[[e.vModelCheckbox,d.value.showHidden]])]),e.createElementVNode("div",Ad,[e.createElementVNode("button",{onClick:E,class:"vuefinder__toolbar__reset-button"},e.toDisplayString(e.unref(o)("Reset")),1)])])])):e.createCommentVNode("",!0)]),e.unref(t).features.includes(e.unref(z).FULL_SCREEN)?(e.openBlock(),e.createElementBlock("div",{key:1,onClick:h[15]||(h[15]=f=>e.unref(l).toggle("fullScreen")),class:"mx-1.5",title:e.unref(o)("Toggle Full Screen")},[e.unref(s).fullScreen?(e.openBlock(),e.createBlock(e.unref(Hc),{key:0,class:"vf-toolbar-icon"})):(e.openBlock(),e.createBlock(e.unref(Pc),{key:1,class:"vf-toolbar-icon"}))],8,Id)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"mx-1.5",title:e.unref(o)("Change View"),onClick:h[16]||(h[16]=f=>g())},[e.unref(s).view==="grid"?(e.openBlock(),e.createBlock(e.unref(qc),{key:0,class:"vf-toolbar-icon"})):e.createCommentVNode("",!0),e.unref(s).view==="list"?(e.openBlock(),e.createBlock(e.unref(Gc),{key:1,class:"vf-toolbar-icon"})):e.createCommentVNode("",!0)],8,Rd)])]))}}),Pd={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"vuefinder__breadcrumb__refresh-icon",viewBox:"-40 -40 580 580"};function Od(n,t){return e.openBlock(),e.createElementBlock("svg",Pd,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M463.5 224h8.5c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2S461.9 48.1 455 55l-41.6 41.6c-87.6-86.5-228.7-86.2-315.8 1-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2S334.3 224 344 224z"},null,-1)])])}const zd={render:Od},Hd={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-0.5 rounded",viewBox:"0 0 20 20"};function Ud(n,t){return e.openBlock(),e.createElementBlock("svg",Hd,[...t[0]||(t[0]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 9.707a1 1 0 0 1 0-1.414l4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1-1.414 1.414L11 7.414V15a1 1 0 1 1-2 0V7.414L6.707 9.707a1 1 0 0 1-1.414 0",class:"pointer-events-none","clip-rule":"evenodd"},null,-1)])])}const jd={render:Ud},qd={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"vuefinder__breadcrumb__close-icon",viewBox:"0 0 24 24"};function Kd(n,t){return e.openBlock(),e.createElementBlock("svg",qd,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1)])])}const Wd={render:Kd},Gd={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"};function Yd(n,t){return e.openBlock(),e.createElementBlock("svg",Gd,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M10.707 2.293a1 1 0 0 0-1.414 0l-7 7a1 1 0 0 0 1.414 1.414L4 10.414V17a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-6.586l.293.293a1 1 0 0 0 1.414-1.414z",class:"pointer-events-none"},null,-1)])])}const Xd={render:Yd},Qd={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"w-6 h-6 cursor-pointer",viewBox:"0 0 24 24"};function Jd(n,t){return e.openBlock(),e.createElementBlock("svg",Qd,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1)])])}const Zd={render:Jd},eu={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"};function tu(n,t){return e.openBlock(),e.createElementBlock("svg",eu,[...t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M9 6h11M12 12h8M15 18h5M5 6v.01M8 12v.01M11 18v.01"},null,-1)])])}const nu={render:tu},ou={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function ru(n,t){return e.openBlock(),e.createElementBlock("svg",ou,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2m-6 12h8a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2h-8a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2"},null,-1)])])}const lu={render:ru},au={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function su(n,t){return e.openBlock(),e.createElementBlock("svg",au,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0-4-4m4 4-4 4m0 6H4m0 0 4 4m-4-4 4-4"},null,-1)])])}const iu={render:su};function Ae(n,t=[]){const o="vfDragEnterCounter",r=n.fs,l=L.useStore(r.selectedItems);function s(i,d){if(i.isExternalDrag)return;i.preventDefault(),r.getDraggedItem()===d.path||!d||d.type!=="dir"||l.value.some(_=>_.path===d.path||Us(_.path)===d.path)?i.dataTransfer&&(i.dataTransfer.dropEffect="none",i.dataTransfer.effectAllowed="none"):(i.dataTransfer&&(i.dataTransfer.dropEffect="copy",i.dataTransfer.effectAllowed="all"),i.currentTarget.classList.add(...t))}function a(i){if(i.isExternalDrag)return;i.preventDefault();const d=i.currentTarget,g=Number(d.dataset[o]||0);d.dataset[o]=String(g+1)}function u(i){if(i.isExternalDrag)return;i.preventDefault();const d=i.currentTarget,_=Number(d.dataset[o]||0)-1;_<=0?(delete d.dataset[o],d.classList.remove(...t)):d.dataset[o]=String(_)}function c(i,d){if(i.isExternalDrag||!d)return;i.preventDefault();const g=i.currentTarget;delete g.dataset[o],g.classList.remove(...t);const _=i.dataTransfer?.getData("items")||"[]",b=JSON.parse(_).map(h=>r.sortedFiles.get().find(f=>f.path===h));r.clearDraggedItem(),n.modal.open(xe,{items:{from:b,to:d}})}function m(i){return{dragover:d=>s(d,i),dragenter:a,dragleave:u,drop:d=>c(d,i)}}return{events:m}}const cu={class:"vuefinder__breadcrumb__container"},du=["title"],uu=["title"],mu=["title"],fu=["title"],vu={class:"vuefinder__breadcrumb__path-container"},pu={class:"vuefinder__breadcrumb__list"},_u={key:0,class:"vuefinder__breadcrumb__hidden-list"},hu={class:"relative"},gu=["title","onClick"],wu=["title"],ku={class:"vuefinder__breadcrumb__path-mode"},yu={class:"vuefinder__breadcrumb__path-mode-content"},bu=["title"],Eu={class:"vuefinder__breadcrumb__path-text"},Vu=["title"],Nu=["data-theme"],xu=["onClick"],Su={class:"vuefinder__breadcrumb__hidden-item-content"},Cu={class:"vuefinder__breadcrumb__hidden-item-text"},Bu=e.defineComponent({__name:"Breadcrumb",setup(n){const t=e.inject("ServiceContainer"),o=e.inject("currentTheme"),{t:r}=t.i18n,l=t.fs,s=t.config,a=L.useStore(s.state),u=L.useStore(l.path),c=L.useStore(l.loading),m=e.ref(null),i=tn(0,100),d=e.ref(5),g=e.ref(!1),_=e.ref(!1),E=e.computed(()=>u.value?.breadcrumb??[]);function b(x,w){return x.length>w?[x.slice(-w),x.slice(0,-w)]:[x,[]]}const h=e.computed(()=>b(E.value,d.value)[0]),f=e.computed(()=>b(E.value,d.value)[1]);e.watch(i,()=>{if(!m.value)return;const x=m.value.children;let w=0,y=0;const C=5,D=1;d.value=C,e.nextTick(()=>{for(let H=x.length-1;H>=0;H--){const J=x[H];if(w+J.offsetWidth>i.value-40)break;w+=parseInt(J.offsetWidth.toString(),10),y++}y<D&&(y=D),y>C&&(y=C),d.value=y})});const k=()=>{m.value&&(i.value=m.value.offsetWidth)},v=e.ref(null);e.onMounted(()=>{v.value=new ResizeObserver(k),m.value&&v.value.observe(m.value)}),e.onUnmounted(()=>{v.value&&v.value.disconnect()});const p=Ae(t,["vuefinder__drag-over"]);function V(x=null){x??=E.value.length-2;const w={basename:u.value?.storage??"local",extension:"",path:(u.value?.storage??"local")+"://",storage:u.value?.storage??"local",type:"dir",file_size:null,last_modified:null,mime_type:null,visibility:""};return E.value[x]??w}const N=()=>{t.emitter.emit("vf-fetch",{params:{q:"index",path:u.value?.path}})},A=()=>{h.value.length>0&&t.emitter.emit("vf-fetch",{params:{q:"index",path:E.value[E.value.length-2]?.path??(u.value?.storage??"local")+"://"}})},I=x=>{t.emitter.emit("vf-fetch",{params:{q:"index",path:x.path}}),g.value=!1},T=()=>{g.value&&(g.value=!1)},O={mounted(x,w){x.clickOutsideEvent=function(y){x===y.target||x.contains(y.target)||w.value()},document.body.addEventListener("click",x.clickOutsideEvent)},beforeUnmount(x){document.body.removeEventListener("click",x.clickOutsideEvent)}},q=()=>{s.toggle("showTreeView")},W=e.ref({x:0,y:0}),P=(x,w=null)=>{if(x.currentTarget instanceof HTMLElement){const{x:y,y:C,height:D}=x.currentTarget.getBoundingClientRect();W.value={x:y,y:C+D}}g.value=w??!g.value},j=()=>{_.value=!_.value},K=async()=>{await Te(u.value?.path||""),t.emitter.emit("vf-toast-push",{label:r("Path copied to clipboard")})},$=()=>{_.value=!1};return(x,w)=>(e.openBlock(),e.createElementBlock("div",cu,[e.createElementVNode("span",{title:e.unref(r)("Toggle Tree View")},[e.createVNode(e.unref(nu),{onClick:q,class:e.normalizeClass(["vuefinder__breadcrumb__toggle-tree",e.unref(a).showTreeView?"vuefinder__breadcrumb__toggle-tree--active":""])},null,8,["class"])],8,du),e.createElementVNode("span",{title:e.unref(r)("Go up a directory")},[e.createVNode(e.unref(jd),e.mergeProps(e.toHandlers(E.value.length?e.unref(p).events(V()):{}),{onClick:A,class:E.value.length?"vuefinder__breadcrumb__go-up--active":"vuefinder__breadcrumb__go-up--inactive"}),null,16,["class"])],8,uu),e.unref(l).isLoading()?(e.openBlock(),e.createElementBlock("span",{key:1,title:e.unref(r)("Cancel")},[e.createVNode(e.unref(Wd),{onClick:w[0]||(w[0]=y=>e.unref(t).emitter.emit("vf-fetch-abort"))})],8,fu)):(e.openBlock(),e.createElementBlock("span",{key:0,title:e.unref(r)("Refresh")},[e.createVNode(e.unref(zd),{onClick:N})],8,mu)),e.withDirectives(e.createElementVNode("div",vu,[e.createElementVNode("div",null,[e.createVNode(e.unref(Xd),e.mergeProps({class:"vuefinder__breadcrumb__home-icon"},e.toHandlers(e.unref(p).events(V(-1))),{onClick:w[1]||(w[1]=e.withModifiers(y=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index"}}),["stop"]))}),null,16)]),e.createElementVNode("div",pu,[f.value.length?e.withDirectives((e.openBlock(),e.createElementBlock("div",_u,[w[3]||(w[3]=e.createElementVNode("div",{class:"vuefinder__breadcrumb__separator"},"/",-1)),e.createElementVNode("div",hu,[e.createElementVNode("span",{onDragenter:w[2]||(w[2]=y=>P(y,!0)),onClick:e.withModifiers(P,["stop"]),class:"vuefinder__breadcrumb__hidden-toggle"},[e.createVNode(e.unref(gn),{class:"vuefinder__breadcrumb__hidden-toggle-icon"})],32)])])),[[O,T]]):e.createCommentVNode("",!0)]),e.createElementVNode("div",{ref_key:"breadcrumbContainer",ref:m,class:"vuefinder__breadcrumb__visible-list pointer-events-none"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h.value,(y,C)=>(e.openBlock(),e.createElementBlock("div",{key:C},[w[4]||(w[4]=e.createElementVNode("span",{class:"vuefinder__breadcrumb__separator"},"/",-1)),e.createElementVNode("span",e.mergeProps(e.toHandlers(e.unref(p).events(y),!0),{class:"vuefinder__breadcrumb__item pointer-events-auto",title:y.basename,onClick:e.withModifiers(D=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",path:y.path}}),["stop"])}),e.toDisplayString(y.name),17,gu)]))),128))],512),e.unref(s).get("loadingIndicator")==="circular"&&e.unref(c)?(e.openBlock(),e.createBlock(e.unref(tt),{key:0})):e.createCommentVNode("",!0),e.createElementVNode("span",{title:e.unref(r)("Toggle Path Copy Mode"),onClick:j},[e.createVNode(e.unref(iu),{class:"vuefinder__breadcrumb__toggle-icon"})],8,wu)],512),[[e.vShow,!_.value]]),e.withDirectives(e.createElementVNode("div",ku,[e.createElementVNode("div",yu,[e.createElementVNode("div",{title:e.unref(r)("Copy Path")},[e.createVNode(e.unref(lu),{class:"vuefinder__breadcrumb__copy-icon",onClick:K})],8,bu),e.createElementVNode("div",Eu,e.toDisplayString(e.unref(u).path),1),e.createElementVNode("div",{title:e.unref(r)("Exit")},[e.createVNode(e.unref(Zd),{class:"vuefinder__breadcrumb__exit-icon",onClick:$})],8,Vu)])],512),[[e.vShow,_.value]]),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.createElementVNode("div",null,[e.withDirectives(e.createElementVNode("div",{style:e.normalizeStyle({position:"absolute",top:W.value.y+"px",left:W.value.x+"px"}),class:"vuefinder vuefinder__breadcrumb__hidden-dropdown","data-theme":e.unref(o)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.value,(y,C)=>(e.openBlock(),e.createElementBlock("div",e.mergeProps({key:C},e.toHandlers(e.unref(p).events(y),!0),{onClick:D=>I(y),class:"vuefinder__breadcrumb__hidden-item"}),[e.createElementVNode("div",Su,[e.createElementVNode("span",null,[e.createVNode(e.unref(ve),{class:"vuefinder__breadcrumb__hidden-item-icon"})]),w[5]||(w[5]=e.createTextVNode()),e.createElementVNode("span",Cu,e.toDisplayString(y.name),1)])],16,xu))),128))],12,Nu),[[e.vShow,g.value]])])]))]))}});function $u(n,t){const{scrollContainer:o,itemWidth:r=100,rowHeight:l,overscan:s=2,containerPadding:a=48,lockItemsPerRow:u}=t,c=n,m=()=>typeof l=="number"?l:l.value,i=e.ref(0),d=e.ref(6),g=e.ref(600);let _=null;const E=e.computed(()=>Math.ceil(c.value.length/d.value)),b=e.computed(()=>E.value*m()),h=e.computed(()=>{const T=m(),O=Math.max(0,Math.floor(i.value/T)-s),q=Math.min(E.value,Math.ceil((i.value+g.value)/T)+s);return{start:O,end:q}}),f=e.computed(()=>{const{start:T,end:O}=h.value;return Array.from({length:O-T},(q,W)=>T+W)}),k=()=>g.value,v=()=>u.value,p=()=>{if(v()){d.value=1;return}if(o.value){const T=o.value.clientWidth-a;d.value=Math.max(Math.floor(T/r),2)}},V=T=>{const O=T.target;i.value=O.scrollTop};e.watch(()=>c.value.length,()=>{p()});const N=(T,O)=>{if(!T||!Array.isArray(T))return[];const q=O*d.value;return T.slice(q,q+d.value)},A=(T,O,q,W,P)=>{if(!T||!Array.isArray(T))return[];const j=[];for(let K=O;K<=q;K++)for(let $=W;$<=P;$++){const x=K*d.value+$;x<T.length&&T[x]&&j.push(T[x])}return j},I=T=>({row:Math.floor(T/d.value),col:T%d.value});return e.onMounted(async()=>{await e.nextTick(),o.value&&(g.value=o.value.clientHeight||600),p(),window.addEventListener("resize",()=>{o.value&&(g.value=o.value.clientHeight||600),p()}),o.value&&"ResizeObserver"in window&&(_=new ResizeObserver(T=>{const O=T[0];O&&(g.value=Math.round(O.contentRect.height)),p()}),_.observe(o.value))}),e.onUnmounted(()=>{window.removeEventListener("resize",p),_&&(_.disconnect(),_=null)}),{scrollTop:i,itemsPerRow:d,totalRows:E,totalHeight:b,visibleRange:h,visibleRows:f,updateItemsPerRow:p,handleScroll:V,getRowItems:N,getItemsInRange:A,getItemPosition:I,getContainerHeight:k}}function Du(n){const{getItemPosition:t,getItemsInRange:o,getKey:r,selectionObject:l,rowHeight:s,itemWidth:a}=n,u=Math.floor(Math.random()*2**32).toString(),c=e.inject("ServiceContainer"),m=c.fs,i=L.useStore(m.selectedKeys),d=L.useStore(m.sortedFiles),g=e.ref(new Set),_=e.ref(!1),E=e.ref(!1),b=e.ref(null),h=x=>x.map(w=>w.getAttribute("data-key")).filter(w=>!!w),f=x=>{x.selection.getSelection().forEach(w=>{x.selection.deselect(w,!0)})},k=x=>{i.value&&i.value.forEach(w=>{const y=document.querySelector(`[data-key="${w}"]`);y&&v(w)&&x.selection.select(y,!0)})},v=x=>{const w=d.value?.find(D=>r(D)===x);if(!w)return!1;const y=c.selectionFilterType,C=c.selectionFilterMimeIncludes;return y==="files"&&w.type==="dir"||y==="dirs"&&w.type==="file"?!1:C&&Array.isArray(C)&&C.length>0?w.type==="dir"?!0:w.mime_type?C.some(D=>w.mime_type?.startsWith(D)):!1:!0},p=x=>{if(x.size===0)return null;const y=Array.from(x).map(ee=>{const fe=d.value?.findIndex(he=>r(he)===ee)??-1;return t(fe>=0?fe:0)}),C=Math.min(...y.map(ee=>ee.row)),D=Math.max(...y.map(ee=>ee.row)),H=Math.min(...y.map(ee=>ee.col)),J=Math.max(...y.map(ee=>ee.col));return{minRow:C,maxRow:D,minCol:H,maxCol:J}},V=x=>{if(c.selectionMode==="single")return!1;_.value=!1,!x.event?.metaKey&&!x.event?.ctrlKey&&(E.value=!0),x.selection.resolveSelectables(),f(x),k(x)},N=e.ref(0),A=({event:x,selection:w})=>{N.value=(l.value?.getAreaLocation().y1??0)-(c.root.getBoundingClientRect().top??0);const y=document.querySelector(".selection-area-container");if(y&&(y.dataset.theme=Me()),c.selectionMode==="single")return;const C=x;C&&"type"in C&&C.type==="touchend"&&C.preventDefault();const D=x;if(!D?.ctrlKey&&!D?.metaKey&&(m.clearSelection(),w.clearSelection(!0,!0)),g.value.clear(),D&&l.value){const H=l.value.getSelectables()[0]?.closest(".scroller-"+u);if(H){const J=H.getBoundingClientRect(),ee=D.clientY-J.top+H.scrollTop,fe=D.clientX-J.left,he=Math.floor(ee/s.value),be=Math.floor(fe/a);b.value={row:he,col:be}}}},I=()=>{if(l.value&&(_.value||E.value)&&l.value.getSelectables()[0]?.closest(".scroller-"+u)){const w=l.value.getAreaLocation(),y=c.root.getBoundingClientRect();l.value.setAreaLocation({y1:y.top+N.value,y2:y.top+N.value+(w.y2-w.y1)}),l.value._setupSelectionArea(),l.value._recalculateSelectionAreaRect()}},T=x=>{if(c.selectionMode==="single")return;const w=x.selection,y=h(x.store.changed.added),C=h(x.store.changed.removed);E.value=!1,_.value=!0,y.forEach(D=>{i.value&&!i.value.has(D)&&v(D)&&(g.value.add(D),m.select(D,c.selectionMode||"multiple"))}),C.forEach(D=>{document.querySelector(`[data-key="${D}"]`)&&d.value?.find(J=>r(J)===D)&&g.value.delete(D),m.deselect(D)}),w.resolveSelectables(),k(x),I()},O=()=>{g.value.clear()},q=x=>{if(x.event&&b.value&&g.value.size>0){const y=Array.from(g.value).map(C=>{const D=d.value?.findIndex(H=>r(H)===C)??-1;return D>=0?t(D):null}).filter(C=>C!==null);if(y.length>0){const C=[...y,b.value],D={minRow:Math.min(...C.map(H=>H.row)),maxRow:Math.max(...C.map(H=>H.row)),minCol:Math.min(...C.map(H=>H.col)),maxCol:Math.max(...C.map(H=>H.col))};o(d.value||[],D.minRow,D.maxRow,D.minCol,D.maxCol).forEach(H=>{const J=r(H);document.querySelector(`[data-key="${J}"]`)||m.select(J,c.selectionMode||"multiple")})}}},W=x=>{q(x),f(x),k(x),m.setSelectedCount(i.value?.size||0),_.value=!1,b.value=null},P=()=>{l.value=new Rn({selectables:[".file-item-"+u+":not(.vf-explorer-item--unselectable)"],boundaries:[".scroller-"+u],selectionContainerClass:"selection-area-container",behaviour:{overlap:"invert",intersect:"touch",startThreshold:0,triggers:[0],scrolling:{speedDivider:10,manualSpeed:750,startScrollMargins:{x:0,y:10}}},features:{touch:!0,range:!0,deselectOnBlur:!0,singleTap:{allow:!1,intersect:"native"}}}),l.value.on("beforestart",V),l.value.on("start",A),l.value.on("move",T),l.value.on("stop",W)},j=()=>{l.value&&(l.value.destroy(),l.value=null)},K=()=>{l.value&&(Array.from(i.value||[]).forEach(w=>{v(w)||m.deselect(w)}),j(),P())},$=x=>{E.value&&(l.value?.clearSelection(),O(),E.value=!1);const w=x;!g.value.size&&!E.value&&!w?.ctrlKey&&!w?.metaKey&&(m.clearSelection(),l.value?.clearSelection())};return e.onMounted(()=>{const x=w=>{!w.buttons&&_.value&&(_.value=!1)};document.addEventListener("dragleave",x),e.onUnmounted(()=>{document.removeEventListener("dragleave",x)})}),{isDragging:_,selectionStarted:E,explorerId:u,extractIds:h,cleanupSelection:f,refreshSelection:k,getSelectionRange:p,selectSelectionRange:q,initializeSelectionArea:P,destroySelectionArea:j,updateSelectionArea:K,handleContentClick:$,handleScrollDuringSelection:I}}const Tu={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 20 20"};function Mu(n,t){return e.openBlock(),e.createElementBlock("svg",Tu,[...t[0]||(t[0]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 0 1 1.414 0L10 10.586l3.293-3.293a1 1 0 1 1 1.414 1.414l-4 4a1 1 0 0 1-1.414 0l-4-4a1 1 0 0 1 0-1.414","clip-rule":"evenodd"},null,-1)])])}const Fu={render:Mu},Au={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 20 20"};function Iu(n,t){return e.openBlock(),e.createElementBlock("svg",Au,[...t[0]||(t[0]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M14.707 12.707a1 1 0 0 1-1.414 0L10 9.414l-3.293 3.293a1 1 0 0 1-1.414-1.414l4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1 0 1.414","clip-rule":"evenodd"},null,-1)])])}const Ru={render:Iu},vt=e.defineComponent({__name:"SortIcon",props:{direction:{}},setup(n){return(t,o)=>(e.openBlock(),e.createElementBlock("div",null,[n.direction==="asc"?(e.openBlock(),e.createBlock(e.unref(Fu),{key:0})):e.createCommentVNode("",!0),n.direction==="desc"?(e.openBlock(),e.createBlock(e.unref(Ru),{key:1})):e.createCommentVNode("",!0)]))}}),Lu={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function Pu(n,t){return e.openBlock(),e.createElementBlock("svg",Lu,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 0 0 2-2V9.414a1 1 0 0 0-.293-.707l-5.414-5.414A1 1 0 0 0 12.586 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2"},null,-1)])])}const Ou={render:Pu},zu={class:"vuefinder__drag-item__container"},Hu={class:"vuefinder__drag-item__count"},Uu=e.defineComponent({__name:"DragItem",props:{count:{}},setup(n){const t=n;return(o,r)=>(e.openBlock(),e.createElementBlock("div",zu,[e.createVNode(e.unref(Ou),{class:"vuefinder__drag-item__icon"}),e.createElementVNode("div",Hu,e.toDisplayString(t.count),1)]))}}),ju={key:2,class:"vuefinder__item-icon__extension"},qt=e.defineComponent({__name:"ItemIcon",props:{item:{},ext:{type:Boolean},small:{type:Boolean}},setup(n){const t=n,o=e.inject("ServiceContainer"),r=L.useStore(o.config.state),l={app:o,config:r.value,item:t.item};return(s,a)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__item-icon",n.small?"vuefinder__item-icon--small":"vuefinder__item-icon--large"])},[e.renderSlot(s.$slots,"icon",e.normalizeProps(e.guardReactiveProps(l)),()=>[n.item.type==="dir"?(e.openBlock(),e.createBlock(e.unref(ve),{key:0,class:"vuefinder__item-icon__folder"})):(e.openBlock(),e.createBlock(e.unref(Oe),{key:1,class:"vuefinder__item-icon__file"})),n.ext&&n.item.type!=="dir"&&n.item.extension?(e.openBlock(),e.createElementBlock("div",ju,e.toDisplayString(n.item.extension.substring(0,3)),1)):e.createCommentVNode("",!0)])],2))}}),qu={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24"};function Ku(n,t){return e.openBlock(),e.createElementBlock("svg",qu,[...t[0]||(t[0]=[e.createElementVNode("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M12 2a5 5 0 0 1 5 5v3a3 3 0 0 1 3 3v6a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3v-6a3 3 0 0 1 3-3V7a5 5 0 0 1 5-5m0 12a2 2 0 0 0-1.995 1.85L10 16a2 2 0 1 0 2-2m0-10a3 3 0 0 0-3 3v3h6V7a3 3 0 0 0-3-3"},null,-1)])])}const Kt={render:Ku},Wu=["data-key","data-row","data-col","draggable"],Gu={key:0},Yu={class:"vuefinder__explorer__item-grid-content"},Xu=["data-src","alt"],Qu={class:"vuefinder__explorer__item-title"},Ju={key:1,class:"vuefinder__explorer__item-list-content"},Zu={class:"vuefinder__explorer__item-list-name"},em={class:"vuefinder__explorer__item-list-icon"},tm={class:"vuefinder__explorer__item-name"},nm={key:0,class:"vuefinder__explorer__item-path"},om={key:1,class:"vuefinder__explorer__item-size"},rm={key:0},lm={key:2,class:"vuefinder__explorer__item-date"},am=e.defineComponent({__name:"FileItem",props:{item:{},view:{},compact:{type:Boolean},showThumbnails:{type:Boolean},isSelected:{type:Boolean},isDragging:{type:Boolean},rowIndex:{},colIndex:{},showPath:{type:Boolean},explorerId:{}},emits:["click","dblclick","contextmenu","dragstart","dragend"],setup(n,{emit:t}){const o=n,r=t,l=e.inject("ServiceContainer"),s=l.fs,a=l.config,u=e.computed(()=>{const k=l.selectionFilterType;return!k||k==="both"?!0:k==="files"&&o.item.type==="file"||k==="dirs"&&o.item.type==="dir"}),c=e.computed(()=>{const k=l.selectionFilterMimeIncludes;return!k||!k.length||o.item.type==="dir"?!0:o.item.mime_type?k.some(v=>o.item.mime_type?.startsWith(v)):!1}),m=e.computed(()=>u.value&&c.value),i=e.computed(()=>["file-item-"+o.explorerId,o.view==="grid"?"vf-explorer-item-grid":"vf-explorer-item-list",o.isSelected?"vf-explorer-selected":"",m.value?"":"vf-explorer-item--unselectable"]),d=e.computed(()=>({opacity:o.isDragging||s.isCut(o.item.path)||!m.value?.5:""}));let g=null;const _=e.ref(null);let E=!1;const b=()=>{g&&clearTimeout(g),h.value=!0},h=e.ref(!0),f=k=>{if(h.value=!1,g&&(k.preventDefault(),clearTimeout(g)),!E)E=!0,r("click",k),_.value=setTimeout(()=>{E=!1},300);else return E=!1,r("dblclick",k),g&&clearTimeout(g),!1;if(k.currentTarget&&k.currentTarget instanceof HTMLElement){const v=k.currentTarget.getBoundingClientRect();k.preventDefault(),g=setTimeout(()=>{let N=v.y+v.height;N+146>window.innerHeight-10&&(N=v.y-146),N<10&&(N=10);const A=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!0,view:window,button:2,buttons:0,clientX:v.x,clientY:N});k.target?.dispatchEvent(A)},300)}};return(k,v)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(i.value),style:e.normalizeStyle(d.value),"data-key":n.item.path,"data-row":n.rowIndex,"data-col":n.colIndex,draggable:h.value,onTouchstart:v[1]||(v[1]=p=>f(p)),onTouchend:v[2]||(v[2]=p=>b()),onClick:v[3]||(v[3]=p=>r("click",p)),onDblclick:v[4]||(v[4]=p=>r("dblclick",p)),onContextmenu:v[5]||(v[5]=e.withModifiers(p=>r("contextmenu",p),["prevent","stop"])),onDragstart:v[6]||(v[6]=p=>r("dragstart",p)),onDragend:v[7]||(v[7]=p=>r("dragend",p))},[n.view==="grid"?(e.openBlock(),e.createElementBlock("div",Gu,[e.unref(s).isReadOnly(n.item)?(e.openBlock(),e.createBlock(e.unref(Kt),{key:0,class:"vuefinder__item--readonly vuefinder__item--readonly--left",title:"Read Only"})):e.createCommentVNode("",!0),e.createElementVNode("div",Yu,[(n.item.mime_type??"").startsWith("image")&&n.showThumbnails?(e.openBlock(),e.createElementBlock("img",{key:0,onTouchstart:v[0]||(v[0]=p=>p.preventDefault()),src:"data:image/png;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",class:"vuefinder__explorer__item-thumbnail lazy","data-src":e.unref(l).requester.getPreviewUrl(n.item.storage,n.item),alt:n.item.basename},null,40,Xu)):(e.openBlock(),e.createBlock(qt,{key:1,item:n.item,ext:!0},{icon:e.withCtx(p=>[e.renderSlot(k.$slots,"icon",e.normalizeProps(e.guardReactiveProps(p)))]),_:3},8,["item"]))]),e.createElementVNode("span",Qu,e.toDisplayString(e.unref(gt)(n.item.basename)),1)])):(e.openBlock(),e.createElementBlock("div",Ju,[e.createElementVNode("div",Zu,[e.createElementVNode("div",em,[e.createVNode(qt,{item:n.item,small:n.compact},{icon:e.withCtx(p=>[e.renderSlot(k.$slots,"icon",e.normalizeProps(e.guardReactiveProps(p)))]),_:3},8,["item","small"])]),e.createElementVNode("span",tm,e.toDisplayString(n.item.basename),1),e.createElementVNode("div",null,[e.unref(s).isReadOnly(n.item)?(e.openBlock(),e.createBlock(e.unref(Kt),{key:0,class:"vuefinder__item--readonly vuefinder__item--readonly--list",title:"Read Only"})):e.createCommentVNode("",!0)])]),n.showPath?(e.openBlock(),e.createElementBlock("div",nm,e.toDisplayString(n.item.path),1)):e.createCommentVNode("",!0),n.showPath?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",om,[n.item.file_size?(e.openBlock(),e.createElementBlock("div",rm,e.toDisplayString(e.unref(l).filesize(n.item.file_size)),1)):e.createCommentVNode("",!0)])),!n.showPath&&n.item.last_modified?(e.openBlock(),e.createElementBlock("div",lm,e.toDisplayString(new Date(n.item.last_modified*1e3).toLocaleString()),1)):e.createCommentVNode("",!0)])),e.unref(a).get("pinnedFolders").find(p=>p.path===n.item.path)?(e.openBlock(),e.createBlock(e.unref(yt),{key:2,class:"vuefinder__item--pinned"})):e.createCommentVNode("",!0)],46,Wu))}}),sm=["data-row"],Wt=e.defineComponent({__name:"FileRow",props:{rowIndex:{},rowHeight:{},view:{},itemsPerRow:{},items:{},compact:{type:Boolean},showThumbnails:{type:Boolean},showPath:{type:Boolean},isDraggingItem:{type:Function},isSelected:{type:Function},dragNDropEvents:{type:Function},explorerId:{}},emits:["click","dblclick","contextmenu","dragstart","dragend"],setup(n,{emit:t}){const o=n,r=t,l=e.computed(()=>[o.view==="grid"?"vf-explorer-item-grid-row":"vf-explorer-item-list-row","pointer-events-none"]),s=e.computed(()=>({position:"absolute",top:0,left:0,width:"100%",height:`${o.rowHeight}px`,transform:`translateY(${o.rowIndex*o.rowHeight}px)`})),a=e.computed(()=>o.view==="grid"?{gridTemplateColumns:`repeat(${o.itemsPerRow||1}, 1fr)`}:{gridTemplateColumns:"1fr"});return(u,c)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(l.value),"data-row":n.rowIndex,style:e.normalizeStyle(s.value)},[e.createElementVNode("div",{class:e.normalizeClass(["grid justify-self-start",{"w-full":n.view==="list"}]),style:e.normalizeStyle(a.value)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.items,(m,i)=>(e.openBlock(),e.createBlock(am,e.mergeProps({key:m.path,item:m,view:n.view,compact:n.compact,"show-thumbnails":n.showThumbnails,"show-path":n.showPath,"is-selected":n.isSelected(m.path),"is-dragging":n.isDraggingItem(m.path),"row-index":n.rowIndex,"col-index":i},e.toHandlers(n.dragNDropEvents(m)),{onClick:c[0]||(c[0]=d=>r("click",d)),onDblclick:c[1]||(c[1]=d=>r("dblclick",d)),onContextmenu:c[2]||(c[2]=d=>r("contextmenu",d)),onDragstart:c[3]||(c[3]=d=>r("dragstart",d)),onDragend:c[4]||(c[4]=d=>r("dragend",d)),explorerId:n.explorerId}),{icon:e.withCtx(d=>[e.renderSlot(u.$slots,"icon",e.mergeProps({ref_for:!0},d))]),_:3},16,["item","view","compact","show-thumbnails","show-path","is-selected","is-dragging","row-index","col-index","explorerId"]))),128))],6)],14,sm))}}),im=["onClick"],cm=e.defineComponent({__name:"Toast",setup(n){const t=e.inject("ServiceContainer"),{getStore:o}=t.storage,r=e.ref(o("full-screen",!1)),l=e.ref([]),s=c=>c==="error"?"text-red-400 border-red-400 dark:text-red-300 dark:border-red-300":"text-lime-600 border-lime-600 dark:text-lime-300 dark:border-lime-1300",a=c=>{l.value.splice(c,1)},u=c=>{let m=l.value.findIndex(i=>i.id===c);m!==-1&&a(m)};return t.emitter.on("vf-toast-clear",()=>{l.value=[]}),t.emitter.on("vf-toast-push",c=>{let m=new Date().getTime().toString(36).concat(performance.now().toString(),Math.random().toString()).replace(/\./g,"");c.id=m,l.value.push(c),setTimeout(()=>{u(m)},5e3)}),(c,m)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__toast",r.value.value?"vuefinder__toast--fixed":"vuefinder__toast--absolute"])},[e.createVNode(e.TransitionGroup,{name:"vuefinder__toast-item","enter-active-class":"vuefinder__toast-item--enter-active","leave-active-class":"vuefinder__toast-item--leave-active","leave-to-class":"vuefinder__toast-item--leave-to"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,(i,d)=>(e.openBlock(),e.createElementBlock("div",{key:d,onClick:g=>a(d),class:e.normalizeClass(["vuefinder__toast__message",s(i.type)])},e.toDisplayString(i.label),11,im))),128))]),_:1})],2))}}),dm={class:"vuefinder__explorer__container"},um={ref:"customScrollBar",class:"vuefinder__explorer__scrollbar"},mm={key:0,class:"vuefinder__explorer__header"},fm={key:0,class:"vuefinder__linear-loader"},vm=e.defineComponent({__name:"Explorer",props:{onFileDclick:{type:Function},onFolderDclick:{type:Function}},setup(n){const t=n,o=e.inject("ServiceContainer"),r=Ae(o,["vuefinder__drag-over"]),l=e.useTemplateRef("dragImage"),s=e.shallowRef(null),a=e.useTemplateRef("scrollContainer"),u=e.useTemplateRef("scrollContent"),c=o.fs,m=o.config,i=L.useStore(m.state),d=L.useStore(c.sort),g=L.useStore(c.sortedFiles),_=L.useStore(c.selectedKeys),E=L.useStore(c.loading),b=M=>_.value?.has(M)??!1;let h=null;const f=e.ref(null),k=e.useTemplateRef("customScrollBar"),v=e.useTemplateRef("customScrollBarContainer"),p=e.computed(()=>{const M=i.value.view,U=i.value.compactListView;return M==="grid"?88:U?24:50}),{t:V}=o.i18n,{itemsPerRow:N,totalHeight:A,visibleRows:I,handleScroll:T,getRowItems:O,getItemsInRange:q,getItemPosition:W,updateItemsPerRow:P}=$u(e.computed(()=>g.value??[]),{scrollContainer:a,itemWidth:104,rowHeight:p,overscan:2,containerPadding:0,lockItemsPerRow:e.computed(()=>i.value.view==="list")}),{explorerId:j,isDragging:K,initializeSelectionArea:$,destroySelectionArea:x,updateSelectionArea:w,handleContentClick:y,handleScrollDuringSelection:C}=Du({getItemPosition:W,getItemsInRange:q,getKey:M=>M.path,selectionObject:s,rowHeight:p,itemWidth:104}),D=e.ref(null),H=M=>{if(!M||!D.value)return!1;const U=_.value?.has(D.value)??!1;return K.value&&(U?_.value?.has(M)??!1:M===D.value)},J=M=>{T(M),C()};e.watch(()=>m.get("view"),M=>{M==="list"?N.value=1:P()},{immediate:!0}),e.watch(N,M=>{m.get("view")==="list"&&M!==1&&(N.value=1)});const ee=M=>g.value?.[M];e.onMounted(()=>{if($(),s.value&&s.value.on("beforestart",({event:M})=>{const U=M?.target===u.value;if(!M?.metaKey&&!M?.ctrlKey&&!M?.altKey&&!U)return!1}),a.value&&(h=new Gt({elements_selector:".lazy",container:a.value})),e.watch(()=>[o.selectionFilterType,o.selectionFilterMimeIncludes],()=>{w()},{deep:!0}),v.value){const M=Ye.OverlayScrollbars(v.value,{scrollbars:{theme:"vf-scrollbars-theme"}},{initialized:U=>{f.value=U},scroll:U=>{const{scrollOffsetElement:S}=U.elements();a.value&&(a.value.scrollTo({top:S.scrollTop,left:0}),C())}});f.value=M}a.value&&a.value.addEventListener("scroll",()=>{const M=f.value;if(!M)return;const{scrollOffsetElement:U}=M.elements();U.scrollTo({top:a.value.scrollTop,left:0}),C()})}),e.onMounted(()=>{o.emitter.on("vf-refresh-thumbnails",()=>{h&&h.update()})}),e.onUpdated(()=>{if(h&&h.update(),f.value&&k.value&&a.value){const U=a.value.scrollHeight>a.value.clientHeight,S=k.value;S.style.display=U?"block":"none",S.style.height=`${A.value}px`}}),e.onUnmounted(()=>{x(),h&&(h.destroy(),h=null),f.value&&(f.value.destroy(),f.value=null)});const fe=M=>{const U=M.target?.closest(".file-item-"+j),S=M;if(U){const B=String(U.getAttribute("data-key")),F=g.value?.find(oe=>oe.path===B),R=o.selectionFilterType,te=o.selectionFilterMimeIncludes,G=!R||R==="both"||R==="files"&&F?.type==="file"||R==="dirs"&&F?.type==="dir";let Y=!0;if(te&&Array.isArray(te)&&te.length>0&&(F?.type==="dir"?Y=!0:F?.mime_type?Y=te.some(oe=>(F?.mime_type).startsWith(oe)):Y=!1),!G||!Y)return;const Ee=o.selectionMode||"multiple";!S?.ctrlKey&&!S?.metaKey&&(M.type!=="touchstart"||!c.isSelected(B))&&(c.clearSelection(),s.value?.clearSelection(!0,!0)),s.value?.resolveSelectables(),M.type==="touchstart"&&c.isSelected(B)?c.select(B,Ee):c.toggleSelect(B,Ee)}c.setSelectedCount(_.value?.size||0)},he=M=>{if(M.type==="file"&&t.onFileDclick){o.emitter.emit("vf-file-dclick",M);return}if(M.type==="dir"&&t.onFolderDclick){o.emitter.emit("vf-folder-dclick",M);return}const U=o.contextMenuItems.find(S=>S.show(o,{items:[M],target:M}));U&&U.action(o,[M])},be=M=>{const U=M.target?.closest(".file-item-"+j),S=U?String(U.getAttribute("data-key")):null;if(!S)return;const B=g.value?.find(Y=>Y.path===S),F=o.selectionFilterType,R=o.selectionFilterMimeIncludes,te=!F||F==="both"||F==="files"&&B?.type==="file"||F==="dirs"&&B?.type==="dir";let G=!0;R&&Array.isArray(R)&&R.length>0&&(B?.type==="dir"?G=!0:B?.mime_type?G=R.some(Y=>(B?.mime_type).startsWith(Y)):G=!1),!(!te||!G)&&B&&he(B)},Ie=()=>{const M=_.value;return g.value?.filter(U=>M?.has(U.path))||[]},Re=M=>{M.preventDefault();const U=M.target?.closest(".file-item-"+j);if(U){const S=String(U.getAttribute("data-key")),B=g.value?.find(Y=>Y.path===S),F=o.selectionFilterType,R=o.selectionFilterMimeIncludes,te=!F||F==="both"||F==="files"&&B?.type==="file"||F==="dirs"&&B?.type==="dir";let G=!0;if(R&&Array.isArray(R)&&R.length>0&&(B?.type==="dir"?G=!0:B?.mime_type?G=R.some(Y=>(B?.mime_type).startsWith(Y)):G=!1),!te||!G)return;_.value?.has(S)||(c.clearSelection(),c.select(S)),o.emitter.emit("vf-contextmenu-show",{event:M,items:Ie(),target:B})}},it=M=>{M.preventDefault(),o.emitter.emit("vf-contextmenu-show",{event:M,items:Ie()})},Le=M=>{if(M.altKey||M.ctrlKey||M.metaKey)return M.preventDefault(),!1;K.value=!0;const U=M.target?.closest(".file-item-"+j);if(D.value=U?String(U.dataset.key):null,M.dataTransfer&&D.value){M.dataTransfer.setDragImage(l.value,0,15),M.dataTransfer.effectAllowed="all",M.dataTransfer.dropEffect="copy";const S=_.value?.has(D.value)?Array.from(_.value):[D.value];M.dataTransfer.setData("items",JSON.stringify(S)),c.setDraggedItem(D.value)}},ct=()=>{D.value=null};return(M,U)=>(e.openBlock(),e.createElementBlock("div",dm,[e.createElementVNode("div",{ref:"customScrollBarContainer",class:e.normalizeClass(["vuefinder__explorer__scrollbar-container",[{"grid-view":e.unref(i).view==="grid"}]])},[e.createElementVNode("div",um,null,512)],2),e.unref(i).view==="list"?(e.openBlock(),e.createElementBlock("div",mm,[e.createElementVNode("div",{onClick:U[0]||(U[0]=S=>e.unref(c).toggleSort("basename")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--name vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(V)("Name"))+" ",1),e.withDirectives(e.createVNode(vt,{direction:e.unref(d).order},null,8,["direction"]),[[e.vShow,e.unref(d).active&&e.unref(d).column==="basename"]])]),e.createElementVNode("div",{onClick:U[1]||(U[1]=S=>e.unref(c).toggleSort("file_size")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--size vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(V)("Size"))+" ",1),e.withDirectives(e.createVNode(vt,{direction:e.unref(d).order},null,8,["direction"]),[[e.vShow,e.unref(d).active&&e.unref(d).column==="file_size"]])]),e.createElementVNode("div",{onClick:U[2]||(U[2]=S=>e.unref(c).toggleSort("last_modified")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--date vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(V)("Date"))+" ",1),e.withDirectives(e.createVNode(vt,{direction:e.unref(d).order},null,8,["direction"]),[[e.vShow,e.unref(d).active&&e.unref(d).column==="last_modified"]])])])):e.createCommentVNode("",!0),e.createElementVNode("div",{ref_key:"scrollContainer",ref:a,class:e.normalizeClass(["vuefinder__explorer__selector-area","scroller-"+e.unref(j)]),onScroll:J},[e.unref(m).get("loadingIndicator")==="linear"&&e.unref(E)?(e.openBlock(),e.createElementBlock("div",fm)):e.createCommentVNode("",!0),e.createElementVNode("div",{ref_key:"scrollContent",ref:u,class:"scrollContent min-h-full",style:e.normalizeStyle({height:`${e.unref(A)}px`,position:"relative",width:"100%"}),onContextmenu:e.withModifiers(it,["self","prevent"]),onClick:U[3]||(U[3]=e.withModifiers((...S)=>e.unref(y)&&e.unref(y)(...S),["self"]))},[e.createElementVNode("div",{ref_key:"dragImage",ref:l,class:"vuefinder__explorer__drag-item"},[e.createVNode(Uu,{count:D.value&&e.unref(_).value?.has(D.value)?e.unref(_).value?.size:1},null,8,["count"])],512),e.unref(i).view==="grid"?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(e.unref(I),S=>(e.openBlock(),e.createBlock(Wt,{key:S,"row-index":S,"row-height":p.value,view:"grid","items-per-row":e.unref(N),items:e.unref(O)(e.unref(g),S),"show-thumbnails":e.unref(i).showThumbnails,"is-dragging-item":H,"is-selected":b,"drag-n-drop-events":B=>e.unref(r).events(B),explorerId:e.unref(j),onClick:fe,onDblclick:be,onContextmenu:Re,onDragstart:Le,onDragend:ct},{icon:e.withCtx(B=>[e.renderSlot(M.$slots,"icon",e.mergeProps({ref_for:!0},B))]),_:3},8,["row-index","row-height","items-per-row","items","show-thumbnails","drag-n-drop-events","explorerId"]))),128)):(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(e.unref(I),S=>(e.openBlock(),e.createBlock(Wt,{key:S,"row-index":S,"row-height":p.value,view:"list",items:ee(S)?[ee(S)]:[],compact:e.unref(i).compactListView,"is-dragging-item":H,"is-selected":b,"drag-n-drop-events":B=>e.unref(r).events(B),explorerId:e.unref(j),onClick:fe,onDblclick:be,onContextmenu:Re,onDragstart:Le,onDragend:ct},{icon:e.withCtx(B=>[e.renderSlot(M.$slots,"icon",e.mergeProps({ref_for:!0},B))]),_:3},8,["row-index","row-height","items","compact","drag-n-drop-events","explorerId"]))),128))],36)],34),e.createVNode(cm)]))}}),pm=["href","download"],_m=["onClick"],hm=e.defineComponent({__name:"ContextMenu",setup(n){const t=e.inject("ServiceContainer"),o=e.ref(null),r=e.ref([]),l=e.reactive({active:!1,items:[],positions:{left:"0px",top:"0px"}});t.emitter.on("vf-context-selected",c=>{r.value=c});const s=c=>c.link(t,r.value),a=c=>{t.emitter.emit("vf-contextmenu-hide"),c.action(t,r.value)};t.emitter.on("vf-contextmenu-show",({event:c,items:m,target:i=null})=>{l.items=t.contextMenuItems.filter(d=>d.show(t,{items:m,target:i})),i?m.length>1&&m.some(d=>d.path===i.path)?t.emitter.emit("vf-context-selected",m):t.emitter.emit("vf-context-selected",[i]):t.emitter.emit("vf-context-selected",[]),u(c)}),t.emitter.on("vf-contextmenu-hide",()=>{l.active=!1});const u=c=>{const m=t.root,i=t.root.getBoundingClientRect(),d=m.getBoundingClientRect();let g=c.clientX-i.left,_=c.clientY-i.top;l.active=!0,e.nextTick(()=>{const E=o.value?.getBoundingClientRect();let b=E?.height??0,h=E?.width??0;g=d.right-c.pageX+window.scrollX<h?g-h:g,_=d.bottom-c.pageY+window.scrollY<b?_-b:_,l.positions={left:String(g)+"px",top:String(_)+"px"}})};return(c,m)=>e.withDirectives((e.openBlock(),e.createElementBlock("ul",{ref_key:"contextmenu",ref:o,class:e.normalizeClass([{"vuefinder__context-menu--active":l.active,"vuefinder__context-menu--inactive":!l.active},"vuefinder__context-menu"]),style:e.normalizeStyle(l.positions)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.items,i=>(e.openBlock(),e.createElementBlock("li",{class:"vuefinder__context-menu__item",key:i.title},[i.link?(e.openBlock(),e.createElementBlock("a",{key:0,class:"vuefinder__context-menu__link",target:"_blank",href:s(i),download:s(i),onClick:m[0]||(m[0]=d=>e.unref(t).emitter.emit("vf-contextmenu-hide"))},[e.createElementVNode("span",null,e.toDisplayString(i.title(e.unref(t).i18n)),1)],8,pm)):(e.openBlock(),e.createElementBlock("div",{key:1,class:"vuefinder__context-menu__action",onClick:d=>a(i)},[e.createElementVNode("span",null,e.toDisplayString(i.title(e.unref(t).i18n)),1)],8,_m))]))),128))],6)),[[e.vShow,l.active]])}}),gm={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"};function wm(n,t){return e.openBlock(),e.createElementBlock("svg",gm,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0"},null,-1)])])}const km={render:wm},ym={class:"vuefinder__status-bar__wrapper"},bm={class:"vuefinder__status-bar__storage"},Em=["title"],Vm={class:"vuefinder__status-bar__storage-icon"},Nm=["value"],xm=["value"],Sm={class:"vuefinder__status-bar__info space-x-2"},Cm={key:0},Bm={key:1},$m={key:0,class:"vuefinder__status-bar__size"},Dm={class:"vuefinder__status-bar__actions"},Tm=["title"],Mm=e.defineComponent({__name:"Statusbar",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=L.useStore(r.sortedFiles),s=L.useStore(r.path),a=L.useStore(r.selectedCount),u=L.useStore(r.storages),c=L.useStore(r.selectedItems),m=L.useStore(r.path),i=g=>{const _=g.target.value;t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",path:_+"://"}})},d=e.computed(()=>!c.value||c.value.length===0?0:c.value.reduce((g,_)=>g+(_.file_size||0),0));return(g,_)=>(e.openBlock(),e.createElementBlock("div",ym,[e.createElementVNode("div",bm,[e.createElementVNode("div",{class:"vuefinder__status-bar__storage-container",title:e.unref(o)("Storage")},[e.createElementVNode("div",Vm,[e.createVNode(e.unref(bt))]),e.createElementVNode("select",{name:"vuefinder-media-selector",value:e.unref(s)?.storage,onChange:i,class:"vuefinder__status-bar__storage-select",tabindex:"-1"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(u),E=>(e.openBlock(),e.createElementBlock("option",{value:E,key:E},e.toDisplayString(E),9,xm))),128))],40,Nm)],8,Em),e.createElementVNode("div",Sm,[e.unref(a)===0?(e.openBlock(),e.createElementBlock("span",Cm,e.toDisplayString(e.unref(l).length)+" "+e.toDisplayString(e.unref(o)("items")),1)):(e.openBlock(),e.createElementBlock("span",Bm,[e.createTextVNode(e.toDisplayString(e.unref(a))+" "+e.toDisplayString(e.unref(o)("selected"))+" ",1),d.value?(e.openBlock(),e.createElementBlock("span",$m,e.toDisplayString(e.unref(t).filesize(d.value)),1)):e.createCommentVNode("",!0)]))])]),e.createElementVNode("div",Dm,[e.renderSlot(g.$slots,"actions",{path:e.unref(m).path,count:e.unref(a)||0,selected:e.unref(c)||[]}),e.createElementVNode("span",{class:"vuefinder__status-bar__about",title:e.unref(o)("About"),onClick:_[0]||(_[0]=E=>e.unref(t).modal.open(kt))},[e.createVNode(e.unref(km),{class:"h-5 w-5 stroke-slate-500 cursor-pointer"})],8,Tm)])]))}}),Fm={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 24 24"};function Am(n,t){return e.openBlock(),e.createElementBlock("svg",Fm,[...t[0]||(t[0]=[e.createElementVNode("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2m3.6 5.2a1 1 0 0 0-1.4.2L12 10.333 9.8 7.4a1 1 0 1 0-1.6 1.2l2.55 3.4-2.55 3.4a1 1 0 1 0 1.6 1.2l2.2-2.933 2.2 2.933a1 1 0 0 0 1.6-1.2L13.25 12l2.55-3.4a1 1 0 0 0-.2-1.4"},null,-1)])])}const Im={render:Am};function xn(n,t){const o=n.findIndex(r=>r.path===t.path);o>-1?n[o]=t:n.push(t)}const Rm={class:"vuefinder__folder-loader-indicator"},Lm={key:1,class:"vuefinder__folder-loader-indicator--icon"},Sn=e.defineComponent({__name:"FolderLoaderIndicator",props:e.mergeModels({storage:{},path:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const t=n,o=e.inject("ServiceContainer"),{t:r}=o.i18n,l=e.useModel(n,"modelValue"),s=e.ref(!1);e.watch(()=>l.value,()=>a()?.folders.length||u());function a(){return o.treeViewData.find(c=>c.path===t.path)}const u=()=>{s.value=!0,o.requester.send({url:"",method:"get",params:{q:"subfolders",storage:t.storage,path:t.path}}).then(c=>{xn(o.treeViewData,{path:t.path,type:"dir",...c})}).catch(c=>{}).finally(()=>{s.value=!1})};return(c,m)=>(e.openBlock(),e.createElementBlock("div",Rm,[s.value?(e.openBlock(),e.createBlock(e.unref(tt),{key:0,class:"vuefinder__folder-loader-indicator--loading"})):(e.openBlock(),e.createElementBlock("div",Lm,[l.value?(e.openBlock(),e.createBlock(e.unref(et),{key:0,class:"vuefinder__folder-loader-indicator--minus"})):e.createCommentVNode("",!0),l.value?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(Ze),{key:1,class:"vuefinder__folder-loader-indicator--plus"}))]))]))}}),Pm={key:0},Om={class:"vuefinder__treesubfolderlist__no-folders"},zm=["onClick"],Hm=["title","onDblclick","onClick"],Um={class:"vuefinder__treesubfolderlist__item-icon"},jm={class:"vuefinder__treesubfolderlist__subfolder"},qm=e.defineComponent({__name:"TreeSubfolderList",props:{storage:{},path:{}},setup(n){const t=e.inject("ServiceContainer"),o=t.fs,r=Ae(t,["vuefinder__drag-over"]),l=e.ref({}),{t:s}=t.i18n,a=L.useStore(o.path),u=n,c=e.ref(null);e.onMounted(()=>{u.path===u.storage+"://"&&c.value&&Ye.OverlayScrollbars(c.value,{scrollbars:{theme:"vf-scrollbars-theme"}})});const m=e.computed(()=>t.treeViewData.find(i=>i.path===u.path)?.folders||[]);return(i,d)=>{const g=e.resolveComponent("TreeSubfolderList",!0);return e.openBlock(),e.createElementBlock("ul",{ref_key:"parentSubfolderList",ref:c,class:"vuefinder__treesubfolderlist__container"},[m.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("li",Pm,[e.createElementVNode("div",Om,e.toDisplayString(e.unref(s)("No folders")),1)])),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.value,_=>(e.openBlock(),e.createElementBlock("li",{key:_.path,class:"vuefinder__treesubfolderlist__item"},[e.createElementVNode("div",e.mergeProps(e.toHandlers(e.unref(r).events({..._,type:"dir"}),!0),{class:"vuefinder__treesubfolderlist__item-content"}),[e.createElementVNode("div",{class:"vuefinder__treesubfolderlist__item-toggle",onClick:E=>l.value[_.path]=!l.value[_.path]},[e.createVNode(Sn,{storage:n.storage,path:_.path,modelValue:l.value[_.path],"onUpdate:modelValue":E=>l.value[_.path]=E},null,8,["storage","path","modelValue","onUpdate:modelValue"])],8,zm),e.createElementVNode("div",{class:"vuefinder__treesubfolderlist__item-link",title:_.path,onDblclick:E=>l.value[_.path]=!l.value[_.path],onClick:E=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",path:_.path}})},[e.createElementVNode("div",Um,[e.unref(a)?.path===_.path?(e.openBlock(),e.createBlock(e.unref(Et),{key:0,class:"vuefinder__item-icon__folder--open"})):(e.openBlock(),e.createBlock(e.unref(ve),{key:1,class:"vuefinder__item-icon__folder"}))]),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__treesubfolderlist__item-text",{"vuefinder__treesubfolderlist__item-text--active":e.unref(a)?.path===_.path}])},e.toDisplayString(_.basename),3)],40,Hm)],16),e.createElementVNode("div",jm,[e.withDirectives(e.createVNode(g,{storage:u.storage,path:_.path},null,8,["storage","path"]),[[e.vShow,l.value[_.path]]])])]))),128))],512)}}}),Km=e.defineComponent({__name:"TreeStorageItem",props:{storage:{}},setup(n){const t=e.inject("ServiceContainer"),o=t.fs,r=e.ref(!1),l=n,s=Ae(t,["vuefinder__drag-over"]),a=L.useStore(o.path),u=e.computed(()=>l.storage===a.value?.storage),c={storage:l.storage,path:l.storage+"://",type:"dir",basename:l.storage,extension:"",file_size:null,last_modified:null,mime_type:null,visibility:"public"};function m(i){i===a.value?.storage?r.value=!r.value:(t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",path:i+"://"}}))}return(i,d)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",{onClick:d[2]||(d[2]=g=>m(n.storage)),class:"vuefinder__treestorageitem__header"},[e.createElementVNode("div",e.mergeProps(e.toHandlers(e.unref(s).events(c),!0),{class:["vuefinder__treestorageitem__info",u.value?"vuefinder__treestorageitem__info--active":""]}),[e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__treestorageitem__icon",u.value?"vuefinder__treestorageitem__icon--active":""])},[e.createVNode(e.unref(bt))],2),e.createElementVNode("div",null,e.toDisplayString(n.storage),1)],16),e.createElementVNode("div",{class:"vuefinder__treestorageitem__loader",onClick:d[1]||(d[1]=e.withModifiers(g=>r.value=!r.value,["stop"]))},[e.createVNode(Sn,{storage:n.storage,path:n.storage+"://",modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=g=>r.value=g)},null,8,["storage","path","modelValue"])])]),e.withDirectives(e.createVNode(qm,{storage:n.storage,path:n.storage+"://",class:"vuefinder__treestorageitem__subfolder"},null,8,["storage","path"]),[[e.vShow,r.value]])],64))}}),Wm={class:"vuefinder__folder-indicator"},Gm={class:"vuefinder__folder-indicator--icon"},Ym=e.defineComponent({__name:"FolderIndicator",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(n){const t=e.useModel(n,"modelValue");return(o,r)=>(e.openBlock(),e.createElementBlock("div",Wm,[e.createElementVNode("div",Gm,[t.value?(e.openBlock(),e.createBlock(e.unref(et),{key:0,class:"vuefinder__folder-indicator--minus"})):e.createCommentVNode("",!0),t.value?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(Ze),{key:1,class:"vuefinder__folder-indicator--plus"}))])]))}}),Xm={class:"vuefinder__treeview__header"},Qm={class:"vuefinder__treeview__pinned-label"},Jm={class:"vuefinder__treeview__pin-text text-nowrap"},Zm={key:0,class:"vuefinder__treeview__pinned-list"},ef=["onClick"],tf=["title"],nf=["onClick"],of={key:0},rf={class:"vuefinder__treeview__no-pinned"},lf=e.defineComponent({__name:"TreeView",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,{getStore:r,setStore:l}=t.storage,s=t.fs,a=t.config,u=L.useStore(a.state),c=L.useStore(s.sortedFiles),m=L.useStore(s.storages),i=L.useStore(s.path),d=Ae(t,["vuefinder__drag-over"]),g=e.ref(190),_=e.ref(r("pinned-folders-opened",!0));e.watch(_,f=>l("pinned-folders-opened",f));const E=f=>{a.set("pinnedFolders",a.get("pinnedFolders").filter(k=>k.path!==f.path))},b=f=>{const k=f.clientX,v=f.target.parentElement;if(!v)return;const p=v.getBoundingClientRect().width;v.classList.remove("transition-[width]"),v.classList.add("transition-none");const V=A=>{g.value=p+A.clientX-k,g.value<50&&(g.value=0,a.set("showTreeView",!1)),g.value>50&&a.set("showTreeView",!0)},N=()=>{const A=v.getBoundingClientRect();g.value=A.width,v.classList.add("transition-[width]"),v.classList.remove("transition-none"),window.removeEventListener("mousemove",V),window.removeEventListener("mouseup",N)};window.addEventListener("mousemove",V),window.addEventListener("mouseup",N)},h=e.ref(null);return e.onMounted(()=>{h.value&&Ye.OverlayScrollbars(h.value,{overflow:{x:"hidden"},scrollbars:{theme:"vf-scrollbars-theme"}})}),e.watch(c,f=>{const k=f.filter(v=>v.type==="dir");xn(t.treeViewData,{path:i.value?.path||"",folders:k.map(v=>({storage:v.storage,path:v.path,basename:v.basename,type:"dir"}))})}),(f,k)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",{onClick:k[0]||(k[0]=v=>e.unref(a).toggle("showTreeView")),class:e.normalizeClass(["vuefinder__treeview__overlay",e.unref(u).showTreeView?"vuefinder__treeview__backdrop":"hidden"])},null,2),e.createElementVNode("div",{style:e.normalizeStyle(e.unref(u).showTreeView?"min-width:100px;max-width:75%; width: "+g.value+"px":"width: 0"),class:"vuefinder__treeview__container"},[e.createElementVNode("div",{ref_key:"treeViewScrollElement",ref:h,class:"vuefinder__treeview__scroll"},[e.createElementVNode("div",Xm,[e.createElementVNode("div",{onClick:k[2]||(k[2]=v=>_.value=!_.value),class:"vuefinder__treeview__pinned-toggle"},[e.createElementVNode("div",Qm,[e.createVNode(e.unref(yt),{class:"vuefinder__treeview__pin-icon"}),e.createElementVNode("div",Jm,e.toDisplayString(e.unref(o)("Pinned Folders")),1)]),e.createVNode(Ym,{modelValue:_.value,"onUpdate:modelValue":k[1]||(k[1]=v=>_.value=v)},null,8,["modelValue"])]),_.value?(e.openBlock(),e.createElementBlock("ul",Zm,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(u).pinnedFolders,v=>(e.openBlock(),e.createElementBlock("li",{key:v.path,class:"vuefinder__treeview__pinned-item"},[e.createElementVNode("div",e.mergeProps(e.toHandlers(e.unref(d).events(v),!0),{class:"vuefinder__treeview__pinned-folder",onClick:p=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",path:v.path}})}),[e.unref(i)?.path!==v.path?(e.openBlock(),e.createBlock(e.unref(ve),{key:0,class:"vuefinder__treeview__folder-icon vuefinder__item-icon__folder"})):e.createCommentVNode("",!0),e.unref(i)?.path===v.path?(e.openBlock(),e.createBlock(e.unref(Et),{key:1,class:"vuefinder__item-icon__folder--open vuefinder__treeview__open-folder-icon"})):e.createCommentVNode("",!0),e.createElementVNode("div",{title:v.path,class:e.normalizeClass(["vuefinder__treeview__folder-name",{"vuefinder__treeview__folder-name--active":e.unref(i)?.path===v.path}])},e.toDisplayString(v.basename),11,tf)],16,ef),e.createElementVNode("div",{class:"vuefinder__treeview__remove-folder",onClick:p=>E(v)},[e.createVNode(e.unref(Im),{class:"vuefinder__treeview__remove-icon"})],8,nf)]))),128)),e.unref(u).pinnedFolders.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("li",of,[e.createElementVNode("div",rf,e.toDisplayString(e.unref(o)("No folders pinned")),1)]))])):e.createCommentVNode("",!0)]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(m),v=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__treeview__storage",key:v},[e.createVNode(Km,{storage:v},null,8,["storage"])]))),128))],512),e.createElementVNode("div",{onMousedown:b,class:"vuefinder__treeview__resize-handle"},null,32)],4)],64))}}),ne={newfolder:"newfolder",selectAll:"selectAll",pinFolder:"pinFolder",unpinFolder:"unpinFolder",delete:"delete",refresh:"refresh",preview:"preview",open:"open",openDir:"openDir",download:"download",download_archive:"download_archive",archive:"archive",unarchive:"unarchive",rename:"rename",move:"move",copy:"copy",paste:"paste"};function af(n){return n.items.length>1&&n.items.some(t=>t.path===n.target?.path)?"many":n.target?"one":"none"}function Q(n){const t=Object.assign({needsSearchQuery:!1},n);return(o,r)=>!(t.needsSearchQuery!==!!r.searchQuery||t.target!==void 0&&t.target!==af(r)||t.targetType!==void 0&&t.targetType!==r.target?.type||t.mimeType!==void 0&&t.mimeType!==r.target?.mime_type||t.feature!==void 0&&!o.features.includes(t.feature))}function Be(...n){return(t,o)=>n.some(r=>r(t,o))}function $e(...n){return(t,o)=>n.every(r=>r(t,o))}const Cn=[{id:ne.openDir,title:({t:n})=>n("Open containing folder"),action:(n,t)=>{const o=t[0];o&&(n.emitter.emit("vf-fetch",{params:{q:"index",path:o.dir}}),n.search.setQuery("",!0))},show:Q({target:"one",needsSearchQuery:!0})},{id:ne.refresh,title:({t:n})=>n("Refresh"),action:n=>{const t=n.fs;n.emitter.emit("vf-fetch",{params:{q:"index",path:t.path.get().path}})},show:Be(Q({target:"none"}),Q({target:"many"}))},{id:ne.selectAll,title:({t:n})=>n("Select All"),action:n=>{n.fs.selectAll(n.selectionMode||"multiple")},show:(n,t)=>n.selectionMode==="multiple"&&Q({target:"none"})(n,t)},{id:ne.newfolder,title:({t:n})=>n("New Folder"),action:n=>n.modal.open(Dt),show:Q({target:"none",feature:z.NEW_FOLDER})},{id:ne.open,title:({t:n})=>n("Open"),action:(n,t)=>{n.emitter.emit("vf-search-exit"),t[0]&&n.emitter.emit("vf-fetch",{params:{q:"index",path:t[0].path}})},show:Q({target:"one",targetType:"dir"})},{id:ne.pinFolder,title:({t:n})=>n("Pin Folder"),action:(n,t)=>{const o=n.config,r=o.get("pinnedFolders"),l=r.concat(t.filter(s=>r.findIndex(a=>a.path===s.path)===-1));o.set("pinnedFolders",l)},show:$e(Q({target:"one",targetType:"dir"}),(n,t)=>n.config.get("pinnedFolders").findIndex(l=>l.path===t.target?.path)===-1)},{id:ne.unpinFolder,title:({t:n})=>n("Unpin Folder"),action:(n,t)=>{const o=n.config,r=o.get("pinnedFolders");o.set("pinnedFolders",r.filter(l=>!t.find(s=>s.path===l.path)))},show:$e(Q({target:"one",targetType:"dir"}),(n,t)=>n.config.get("pinnedFolders").findIndex(l=>l.path===t.target?.path)!==-1)},{id:ne.preview,title:({t:n})=>n("Preview"),action:(n,t)=>n.modal.open(Je,{storage:t[0]?.storage,item:t[0]}),show:$e(Q({target:"one",feature:z.PREVIEW}),(n,t)=>t.target?.type!=="dir")},{id:ne.download,link:(n,t)=>n.requester.getDownloadUrl(t[0]?.storage,t[0]),title:({t:n})=>n("Download"),action:()=>{},show:$e(Q({target:"one",feature:z.DOWNLOAD}),(n,t)=>t.target?.type!=="dir")},{id:ne.rename,title:({t:n})=>n("Rename"),action:(n,t)=>n.modal.open(Qe,{items:t}),show:Q({target:"one",feature:z.RENAME})},{id:ne.move,title:({t:n})=>n("Move"),action:(n,t)=>{const o=n.fs,r={storage:o.path.get().storage||"",path:o.path.get().path||"",type:"dir"};n.modal.open(xe,{items:{from:t,to:r}})},show:Be(Q({target:"one",feature:z.MOVE}),Q({target:"many",feature:z.MOVE}))},{id:ne.copy,title:({t:n})=>n("Copy"),action:(n,t)=>{t.length>0&&n.fs.setClipboard("copy",new Set(t.map(o=>o.path)))},show:Be(Q({target:"one",feature:z.COPY}),Q({target:"many",feature:z.COPY}))},{id:ne.paste,title:({t:n})=>n("Paste"),action:(n,t)=>{const o=n.fs.getClipboard();if(o?.items?.size>0){const l=n.fs.path.get();let s=l.path,a=l.storage;t.length===1&&t[0].type==="dir"&&(s=t[0].path,a=t[0].storage);const u={storage:a||"",path:s||"",type:"dir"};n.modal.open(o.type==="cut"?xe:Nt,{items:{from:Array.from(o.items),to:u}})}},show:(n,t)=>n.fs.getClipboard()?.items?.size>0},{id:ne.archive,title:({t:n})=>n("Archive"),action:(n,t)=>n.modal.open(Ft,{items:t}),show:Be(Q({target:"many",feature:z.ARCHIVE}),$e(Q({target:"one",feature:z.ARCHIVE}),(n,t)=>t.target?.mime_type!=="application/zip"))},{id:ne.unarchive,title:({t:n})=>n("Unarchive"),action:(n,t)=>n.modal.open(Mt,{items:t}),show:Q({target:"one",feature:z.UNARCHIVE,mimeType:"application/zip"})},{id:ne.delete,title:({t:n})=>n("Delete"),action:(n,t)=>{n.modal.open(Xe,{items:t})},show:Be(Q({feature:z.DELETE,target:"one"}),Q({feature:z.DELETE,target:"many"}))}],sf={key:0,class:"vuefinder__external-drop-overlay vuefinder__external-drop-overlay--relative"},cf={class:"vuefinder__external-drop-message"},df={class:"vuefinder__main__content"},Bn=e.defineComponent({__name:"VueFinder",props:{id:{default:"vf"},config:{},request:{},features:{type:[Boolean,Array],default:!0},debug:{type:Boolean,default:!1},theme:{default:"light"},locale:{},contextMenuItems:{default:()=>Cn},selectionMode:{default:"multiple"},selectionFilterType:{default:"both"},selectionFilterMimeIncludes:{default:()=>[]},onError:{},onSelect:{},onPathChange:{},onUploadComplete:{},onDeleteComplete:{},onReady:{},onFileDclick:{},onFolderDclick:{}},emits:["select","path-change","upload-complete","delete-complete","error","ready","file-dclick","folder-dclick"],setup(n,{emit:t}){const o=t,r=n,l=Xn(r,e.inject("VueFinderOptions")||{});e.provide("ServiceContainer",l);const s=l.config,a=l.fs,u=L.useStore(s.state);bi(l);const{isDraggingExternal:c,handleDragEnter:m,handleDragOver:i,handleDragLeave:d,handleDrop:g}=Ei(),_=e.ref(r.theme);e.onMounted(()=>{const f=document.querySelector(".vuefinder");f&&(mt(r.theme,f),_.value=r.theme)}),e.watch(()=>r.theme,f=>{if(f&&f!==_.value){const k=document.querySelector(".vuefinder");k&&(mt(f,k),_.value=f)}},{immediate:!0}),e.provide("currentTheme",_),e.provide("setTheme",f=>{const k=document.querySelector(".vuefinder");k&&(mt(f,k),_.value=f)});let E=null;l.emitter.on("vf-fetch-abort",()=>{E&&E.abort(),a.setLoading(!1)}),l.emitter.on("vf-upload-complete",f=>{o("upload-complete",f)}),l.emitter.on("vf-delete-complete",f=>{o("delete-complete",f)}),l.emitter.on("vf-file-dclick",f=>{o("file-dclick",f)}),l.emitter.on("vf-folder-dclick",f=>{o("folder-dclick",f)}),l.emitter.on("vf-fetch",f=>{const{params:k,body:v=null,onSuccess:p=null,onError:V=null,dontCloseModal:N=!1,dontChangePath:A=!1}=f;A||["index","search"].includes(k.q)&&(E&&E.abort(),a.setLoading(!0)),E=new AbortController;const I=E.signal;l.requester.send({url:"",method:k.m||"get",params:k,body:v,abortSignal:I}).then(T=>{const O=T;A||(a.setPath(O.dirname),s.get("persist")&&s.set("path",O.dirname),a.setReadOnly(O.read_only),N||l.modal.close(),a.setFiles(O.files),a.clearSelection(),a.setSelectedCount(0),a.setStorages(O.storages)),p&&p(O)}).catch(T=>{console.error(T),V?V(T):T&&typeof T=="object"&&"message"in T&&l.emitter.emit("vf-toast-push",{label:T.message,type:"error"}),o("error",T)}).finally(()=>{["index","search"].includes(k.q)&&a.setLoading(!1)})});function b(f){let k={};f&&f.includes("://")&&(k={storage:f.split("://")[0],path:f}),l.emitter.emit("vf-fetch",{params:{q:"index",...k},onError:r.onError??(v=>{v&&typeof v=="object"&&"message"in v&&l.emitter.emit("vf-toast-push",{label:v.message,type:"error"})})})}e.onMounted(()=>{e.watch(()=>s.get("path"),k=>{b(k)});const f=s.get("persist")?s.get("path"):s.get("initialPath")??"";a.setPath(f),b(f),a.path.listen(k=>{o("path-change",k.path)}),a.selectedItems.listen(k=>{o("select",k)}),o("ready")});const h=async f=>{const k=await g(f);k.length>0&&(l.modal.open(Tt),setTimeout(()=>{l.emitter.emit("vf-external-files-dropped",k.map(v=>v.file))},100))};return(f,k)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder vuefinder__main",{"vuefinder--dragging-external":e.unref(c)}]),ref:"root",tabindex:"0",onDragenter:k[2]||(k[2]=(...v)=>e.unref(m)&&e.unref(m)(...v)),onDragover:k[3]||(k[3]=(...v)=>e.unref(i)&&e.unref(i)(...v)),onDragleave:k[4]||(k[4]=(...v)=>e.unref(d)&&e.unref(d)(...v)),onDrop:h},[e.createElementVNode("div",{class:e.normalizeClass(_.value),style:{height:"100%",width:"100%"}},[e.createElementVNode("div",{class:e.normalizeClass([e.unref(u)?.fullScreen?"vuefinder__main__fixed":"vuefinder__main__relative","vuefinder__main__container"]),onMousedown:k[0]||(k[0]=v=>e.unref(l).emitter.emit("vf-contextmenu-hide")),onTouchstart:k[1]||(k[1]=v=>e.unref(l).emitter.emit("vf-contextmenu-hide"))},[e.unref(c)?(e.openBlock(),e.createElementBlock("div",sf,[e.createElementVNode("div",cf,e.toDisplayString(e.unref(l).i18n.t("Drag and drop the files/folders to here.")),1)])):e.createCommentVNode("",!0),e.createVNode(Ic),e.createVNode(Ld),e.createVNode(Bu),e.createElementVNode("div",df,[e.createVNode(lf),e.createVNode(vm,{"on-file-dclick":r.onFileDclick,"on-folder-dclick":r.onFolderDclick},{icon:e.withCtx(v=>[e.renderSlot(f.$slots,"icon",e.normalizeProps(e.guardReactiveProps(v)))]),_:3},8,["on-file-dclick","on-folder-dclick"])]),e.createVNode(Mm,null,{actions:e.withCtx(v=>[e.renderSlot(f.$slots,"status-bar",e.normalizeProps(e.guardReactiveProps(v)))]),_:3})],34),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.createVNode(e.Transition,{name:"fade"},{default:e.withCtx(()=>[e.unref(l).modal.visible?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(l).modal.type),{key:0})):e.createCommentVNode("",!0)]),_:1})])),e.createVNode(hm)],2)],34))}}),$n={install(n,t={}){t.i18n=t.i18n??{};let[o]=Object.keys(t.i18n);t.locale=t.locale??o??"en",n.provide("VueFinderOptions",t),n.component("VueFinder",Bn)}};exports.ContextMenuIds=ne;exports.VueFinder=Bn;exports.VueFinderPlugin=$n;exports.contextMenuItems=Cn;exports.default=$n;
