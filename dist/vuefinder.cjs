"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),O=require("@nanostores/vue"),Sn=require("mitt"),Bn=require("@nanostores/persistent"),Z=require("nanostores"),$n=require("@tanstack/vue-query"),Dn=require("vue-advanced-cropper"),Wt=require("vanilla-lazyload"),Ye=require("overlayscrollbars"),Tn=require("@uppy/core"),Fn=require("@viselect/vanilla");function Mn(n){let t=localStorage.getItem(n+"_storage");const o=e.reactive(JSON.parse(t??"{}"));e.watch(o,r);function r(){Object.keys(o).length?localStorage.setItem(n+"_storage",JSON.stringify(o)):localStorage.removeItem(n+"_storage")}function l(i,m){o[i]=m}function s(i){delete o[i]}function a(){Object.keys(o).forEach(i=>s(i))}return{getStore:(i,m=null)=>i in o?o[i]:m,setStore:l,removeStore:s,clearStore:a}}async function An(n,t){const o=t[n];return typeof o=="function"?(await o()).default:o}function In(n,t,o,r){const{getStore:l,setStore:s}=n,a=e.ref({}),d=e.ref(l("locale",t)),i=(u,p=t)=>{An(u,r).then(h=>{a.value=h,s("locale",u),d.value=u,s("translations",h),Object.values(r).length>1&&(o.emit("vf-toast-push",{label:"The language is set to "+u}),o.emit("vf-language-saved"))}).catch(h=>{p?(o.emit("vf-toast-push",{label:"The selected locale is not yet supported!",type:"error"}),i(p,null)):(console.error(h),o.emit("vf-toast-push",{label:"Locale cannot be loaded!",type:"error"}))})};e.watch(d,u=>{i(u)}),!l("locale")&&!Object.keys(r).length?i(t):a.value=l("translations");const m=(u,...p)=>p.length?m(u=u.replace("%s",String(p.shift())),...p):u;function c(u,...p){return a.value&&Object.prototype.hasOwnProperty.call(a.value,u)?m(a.value[u]||u,...p):m(u,...p)}return e.reactive({t:c,locale:d})}const H={EDIT:"edit",NEW_FILE:"newfile",NEW_FOLDER:"newfolder",PREVIEW:"preview",ARCHIVE:"archive",UNARCHIVE:"unarchive",SEARCH:"search",RENAME:"rename",UPLOAD:"upload",DELETE:"delete",FULL_SCREEN:"fullscreen",DOWNLOAD:"download",LANGUAGE:"language",MOVE:"move",COPY:"copy"},On=Object.values(H),Ln="4.0.0-dev";function vt(n,t,o,r,l){return t=Math,o=t.log,r=1024,l=o(n)/o(r)|0,(n/t.pow(r,l)).toFixed(0)+" "+(l?"KMGTPEZY"[--l]+"iB":"B")}function Gt(n,t,o,r,l){return t=Math,o=t.log,r=1e3,l=o(n)/o(r)|0,(n/t.pow(r,l)).toFixed(0)+" "+(l?"KMGTPEZY"[--l]+"B":"B")}function Rn(n){if(typeof n=="number")return n;const t={k:1,m:2,g:3,t:4},r=/(\d+(?:\.\d+)?)\s?(k|m|g|t)?b?/i.exec(n);if(!r)return 0;const l=parseFloat(r[1]||"0"),s=(r[2]||"").toLowerCase(),a=t[s]??0;return Math.round(l*Math.pow(1024,a))}function Pn(){const n=e.shallowRef(null),t=e.ref(!1),o=e.ref(),r=e.ref(!1);return{visible:t,type:n,data:o,open:(d,i=null)=>{document.querySelector("body").style.overflow="hidden",t.value=!0,n.value=d,o.value=i},close:()=>{document.querySelector("body").style.overflow="",t.value=!1,n.value=null},setEditMode:d=>{r.value=d},editMode:r}}const ct={view:"grid",theme:void 0,fullScreen:!1,showTreeView:!1,showHiddenFiles:!0,compactListView:!0,metricUnits:!1,showThumbnails:!0,persist:!1,path:"",initialPath:null,loadingIndicator:"circular",maxFileSize:null,pinnedFolders:[]},zn=(n,t={})=>{const o=`vuefinder_config_${n}`,r=Bn.persistentAtom(o,{...ct,...t},{encode:JSON.stringify,decode:JSON.parse}),l=(c={})=>{const u=r.get(),p={...ct,...c,...u};r.set(p)},s=c=>r.get()[c],a=()=>r.get(),d=(c,u)=>{const p=r.get();typeof c=="object"&&c!==null?r.set({...p,...c}):r.set({...p,[c]:u})};return{state:r,init:l,get:s,set:d,toggle:c=>{const u=r.get();d(c,!u[c])},all:a,reset:()=>{r.set({...ct})}}};function Hn(n,t){if(typeof n=="string"&&typeof t=="string")return n.toLowerCase().localeCompare(t.toLowerCase());const o=Number(n)||0,r=Number(t)||0;return o===r?0:o<r?-1:1}const Un=()=>{const n=Z.atom(""),t=Z.atom([]),o=Z.atom(!1),r=Z.atom([]),l=Z.atom({active:!1,column:"",order:""}),s=Z.atom({kind:"all",showHidden:!1}),a=Z.atom(new Set),d=Z.atom({type:"copy",path:"",items:new Set}),i=Z.atom(null),m=Z.atom(0),c=Z.atom(!1),u=Z.atom([]),p=Z.atom(-1),h=Z.computed([n],S=>{const B=(S||"local://").trim(),M=B.indexOf("://"),I=M>=0?B.slice(0,M):"",oe=(M>=0?B.slice(M+3):B).split("/").filter(Boolean);let re="";const it=oe.map(se=>(re=re?`${re}/${se}`:se,{basename:se,name:se,path:I?`${I}://${re}`:re,type:"dir"}));return{storage:I,breadcrumb:it,path:B}}),V=Z.computed([r,l,s],(S,B,M)=>{let I=S;M.kind==="files"?I=I.filter(se=>se.type==="file"):M.kind==="folders"&&(I=I.filter(se=>se.type==="dir")),M.showHidden||(I=I.filter(se=>!se.basename.startsWith(".")));const{active:J,column:oe,order:re}=B;if(!J||!oe)return I;const it=re==="asc"?1:-1;return I.slice().sort((se,Cn)=>Hn(se[oe],Cn[oe])*it)}),_=Z.computed([r,a],(S,B)=>B.size===0?[]:S.filter(M=>B.has(M.path))),v=(S,B)=>{const M=n.get();if((B??!0)&&M!==S){const I=u.get(),J=p.get();J<I.length-1&&I.splice(J+1),I.length===0&&M&&I.push(M),I.push(S),u.set([...I]),p.set(I.length-1)}n.set(S)},f=S=>{r.set(S??[])},y=S=>{t.set(S??[])},g=(S,B)=>{l.set({active:!0,column:S,order:B})},k=S=>{const B=l.get();B.active&&B.column===S?l.set({active:B.order==="asc",column:S,order:"desc"}):l.set({active:!0,column:S,order:"asc"})},C=()=>{l.set({active:!1,column:"",order:""})},x=(S,B)=>{s.set({kind:S,showHidden:B})},D=()=>{s.set({kind:"all",showHidden:!1})},A=(S,B="multiple")=>{const M=new Set(a.get());B==="single"&&M.clear(),M.add(S),a.set(M),m.set(M.size)},T=S=>{const B=new Set(a.get());B.delete(S),a.set(B),m.set(B.size)},U=S=>a.get().has(S),W=(S,B="multiple")=>{const M=new Set(a.get());M.has(S)?M.delete(S):(B==="single"&&M.clear(),M.add(S)),a.set(M),m.set(M.size)},X=(S="multiple",B)=>{if(S==="single"){const M=r.get()[0];if(M){const I=M.path;a.set(new Set([I])),m.set(1)}}else if(B?.selectionFilterType||B?.selectionFilterMimeIncludes&&B.selectionFilterMimeIncludes.length>0){const M=r.get().filter(I=>{const J=B.selectionFilterType,oe=B.selectionFilterMimeIncludes;return J==="files"&&I.type==="dir"||J==="dirs"&&I.type==="file"?!1:oe&&Array.isArray(oe)&&oe.length>0&&I.type!=="dir"?I.mime_type?oe.some(re=>I.mime_type?.startsWith(re)):!1:!0}).map(I=>I.path);a.set(new Set(M)),m.set(M.length)}else{const M=new Set(r.get().map(I=>I.path));a.set(M),m.set(M.size)}},P=()=>{a.set(new Set),m.set(0)},K=S=>{const B=new Set(S??[]);a.set(B),m.set(B.size)},Y=S=>{m.set(S)},R=S=>{c.set(!!S)},b=()=>c.get(),w=(S,B)=>{const M=r.get().filter(I=>B.has(I.path));d.set({type:S,path:h.get().path,items:new Set(M)})},E=S=>Z.computed([d],B=>B.type==="cut"&&Array.from(B.items).some(M=>M.path===S)),N=S=>Z.computed([d],B=>B.type==="copy"&&Array.from(B.items).some(M=>M.path===S)),F=S=>{const B=E(S);return O.useStore(B).value??!1},L=S=>{const B=N(S);return O.useStore(B).value??!1},Q=()=>{d.set({type:"copy",path:"",items:new Set})},q=()=>d.get(),ve=S=>{i.set(S)},he=()=>i.get(),Ve=()=>{i.set(null)},$e=()=>{const S=u.get(),B=p.get();if(B>0){const M=B-1,I=S[M];I&&(p.set(M),v(I,!1))}},Oe=()=>{const S=u.get(),B=p.get();if(B<S.length-1){const M=B+1,I=S[M];I&&(p.set(M),v(I,!1))}},Le=Z.computed([p],S=>S>0),$=Z.computed([u,p],(S,B)=>B<S.length-1);return{files:r,storages:t,currentPath:n,sort:l,filter:s,selectedKeys:a,selectedCount:m,loading:c,draggedItem:i,clipboardItems:d,path:h,sortedFiles:V,selectedItems:_,setPath:v,setFiles:f,setStorages:y,setSort:g,toggleSort:k,clearSort:C,setFilter:x,clearFilter:D,select:A,deselect:T,toggleSelect:W,selectAll:X,isSelected:U,clearSelection:P,setSelection:K,setSelectedCount:Y,setLoading:R,isLoading:b,setClipboard:w,createIsCut:E,createIsCopied:N,isCut:F,isCopied:L,clearClipboard:Q,getClipboard:q,setDraggedItem:ve,getDraggedItem:he,clearDraggedItem:Ve,setReadOnly:S=>{o.set(S)},getReadOnly:()=>o.get(),isReadOnly:S=>o.get()?!0:S.read_only??!1,goBack:$e,goForward:Oe,canGoBack:Le,canGoForward:$,navigationHistory:u,historyIndex:p}},Tt={list:n=>["adapter","list",n],search:(n,t,o,r)=>["adapter","search",n,t,o,r],delete:n=>["adapter","delete",n],rename:()=>["adapter","rename"],copy:()=>["adapter","copy"],move:()=>["adapter","move"],archive:()=>["adapter","archive"],unarchive:()=>["adapter","unarchive"],createFile:()=>["adapter","createFile"],createFolder:()=>["adapter","createFolder"]};class jn{adapter;queryClient;config;onBeforeOpen;onAfterOpen;constructor(t,o={}){this.adapter=t,this.onBeforeOpen=o.onBeforeOpen,this.onAfterOpen=o.onAfterOpen,this.queryClient=o.queryClient||new $n.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:o.refetchOnWindowFocus??!1,staleTime:o.staleTime??300*1e3,retry:o.retry??2},mutations:{retry:o.retry??1}}}),this.config={queryClient:this.queryClient,refetchOnWindowFocus:o.refetchOnWindowFocus??!1,staleTime:o.staleTime??300*1e3,cacheTime:o.cacheTime??600*1e3,retry:o.retry??2,onBeforeOpen:this.onBeforeOpen??(()=>{}),onAfterOpen:this.onAfterOpen??(()=>{})}}getAdapter(){return this.adapter}getQueryClient(){return this.queryClient}async list(t){const o=Tt.list(t);return await this.queryClient.fetchQuery({queryKey:o,queryFn:()=>this.adapter.list({path:t}),staleTime:this.config.staleTime})}async open(t){this.onBeforeOpen&&this.onBeforeOpen();const o=await this.list(t);return this.onAfterOpen&&this.onAfterOpen(o),o}async delete(t){const o=await this.adapter.delete(t);return this.invalidateListQueries(),o}async rename(t){const o=await this.adapter.rename(t);return this.invalidateListQueries(),o}async copy(t){const o=await this.adapter.copy(t);return this.invalidateListQueries(),o}async move(t){const o=await this.adapter.move(t);return this.invalidateListQueries(),o}async archive(t){const o=await this.adapter.archive(t);return this.invalidateListQueries(),o}async unarchive(t){const o=await this.adapter.unarchive(t);return this.invalidateListQueries(),o}async createFile(t){const o=await this.adapter.createFile(t);return this.invalidateListQueries(),o}async createFolder(t){const o=await this.adapter.createFolder(t);return this.invalidateListQueries(),o}async getContent(t){const o=["adapter","content",t.path];return await this.queryClient.fetchQuery({queryKey:o,queryFn:()=>this.adapter.getContent(t),staleTime:this.config.staleTime})}getPreviewUrl(t){return this.adapter.getPreviewUrl(t)}getDownloadUrl(t){return this.adapter.getDownloadUrl(t)}async search(t){const o=Tt.search(t.path,t.filter,t.deep,t.size);return await this.queryClient.fetchQuery({queryKey:o,queryFn:()=>this.adapter.search(t),staleTime:this.config.staleTime})}async save(t){const o=await this.adapter.save(t);return this.invalidateListQueries(),o}invalidateListQueries(){this.queryClient.invalidateQueries({queryKey:["adapter"],exact:!1})}invalidateListQuery(t){this.queryClient.invalidateQueries({queryKey:["adapter","list",t],exact:!0})}clearCache(){this.queryClient.clear()}}function Kn(n,t){const o=O.useStore(n.state);return{current:e.computed(()=>{const s=o.value.theme;return s&&s!=="default"?s:(typeof t=="function"?t():e.unref(t))||"light"}),set:s=>{n.set("theme",s)}}}const Wn=(n,t)=>{const o=Mn(n.id),r=Sn(),l=t.i18n,s=n.locale??t.locale,a=zn(n.id,n.config??{}),d=Un(),i=u=>Array.isArray(u)?u:On,m=n.adapter,c=new jn(m);return e.reactive({version:Ln,config:a,theme:(()=>{const u=Kn(a,()=>n.theme||"light");return{get current(){return u.current.value},set:u.set}})(),fs:d,root:e.useTemplateRef("root"),debug:n.debug,emitter:r,storage:o,i18n:In(o,s,r,l),modal:Pn(),adapter:e.markRaw(c),features:i(n.features),selectionMode:n.selectionMode||"multiple",selectionFilterType:e.computed(()=>n.selectionFilterType||"both"),selectionFilterMimeIncludes:e.computed(()=>n.selectionFilterMimeIncludes||[]),treeViewData:[],filesize:a.get("metricUnits")?Gt:vt,contextMenuItems:n.contextMenuItems})},Gn=["data-theme"],qn={class:"vuefinder__modal-layout__container"},Yn={class:"vuefinder__modal-layout__content"},Qn={key:0,class:"vuefinder__modal-layout__footer"},Xn={key:0,class:"vuefinder__modal-drag-overlay"},Jn={class:"vuefinder__modal-drag-message"},de=e.defineComponent({__name:"ModalLayout",props:{showDragOverlay:{type:Boolean},dragOverlayText:{}},setup(n){const t=e.ref(null),o=e.inject("ServiceContainer");o.config;const r=n;e.onMounted(()=>{const s=document.querySelector(".v-f-modal input");s&&s.focus(),e.nextTick(()=>{if(document.querySelector(".v-f-modal input")&&window.innerWidth<768&&t.value){const a=t.value.getBoundingClientRect().bottom+16;window.scrollTo({top:a,left:0,behavior:"smooth"})}})});const l=s=>{s.target.classList.contains("vuefinder__modal-layout__wrapper")&&(s.preventDefault(),s.stopPropagation())};return(s,a)=>(e.openBlock(),e.createElementBlock("div",{"data-theme":e.unref(o).theme.current,class:"vuefinder__themer vuefinder__modal-layout","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",onKeyup:a[1]||(a[1]=e.withKeys(d=>e.unref(o).modal.close(),["esc"])),tabindex:"0"},[a[2]||(a[2]=e.createElementVNode("div",{class:"vuefinder__modal-layout__overlay"},null,-1)),e.createElementVNode("div",qn,[e.createElementVNode("div",{class:"vuefinder__modal-layout__wrapper",onContextmenu:l,onMousedown:a[0]||(a[0]=e.withModifiers(d=>e.unref(o).modal.close(),["self"]))},[e.createElementVNode("div",{ref_key:"modalBody",ref:t,class:"vuefinder__modal-layout__body"},[e.createElementVNode("div",Yn,[e.renderSlot(s.$slots,"default")]),s.$slots.buttons?(e.openBlock(),e.createElementBlock("div",Qn,[e.renderSlot(s.$slots,"buttons")])):e.createCommentVNode("",!0)],512)],32)]),r.showDragOverlay?(e.openBlock(),e.createElementBlock("div",Xn,[e.createElementVNode("div",Jn,e.toDisplayString(r.dragOverlayText||"Drag and drop the files/folders to here."),1)])):e.createCommentVNode("",!0)],40,Gn))}}),Zn={class:"vuefinder__modal-header"},eo={class:"vuefinder__modal-header__icon-container"},to={class:"vuefinder__modal-header__title",id:"modal-title"},fe=e.defineComponent({__name:"ModalHeader",props:{title:{},icon:{}},setup(n){return(t,o)=>(e.openBlock(),e.createElementBlock("div",Zn,[e.createElementVNode("div",eo,[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.icon),{class:"vuefinder__modal-header__icon"}))]),e.createElementVNode("h3",to,e.toDisplayString(n.title),1)]))}}),no={props:{on:{type:String,required:!0}},setup(n,{emit:t,slots:o}){const r=e.inject("ServiceContainer"),l=e.ref(!1),{t:s}=r.i18n;let a=null;const d=()=>{clearTimeout(a),l.value=!0,a=setTimeout(()=>{l.value=!1},2e3)};return e.onMounted(()=>{r.emitter.on(n.on,d)}),e.onUnmounted(()=>{clearTimeout(a)}),{shown:l,t:s}}},oo=(n,t)=>{const o=n.__vccOpts||n;for(const[r,l]of t)o[r]=l;return o},ro={key:1};function lo(n,t,o,r,l,s){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__action-message",{"vuefinder__action-message--hidden":!r.shown}])},[n.$slots.default?e.renderSlot(n.$slots,"default",{key:0}):(e.openBlock(),e.createElementBlock("span",ro,e.toDisplayString(r.t("Saved.")),1))],2)}const Ne=oo(no,[["render",lo]]),ao=[{name:"default",displayName:"Default"},{name:"light",displayName:"Light"},{name:"dark",displayName:"Dark"},{name:"midnight",displayName:"Midnight"},{name:"latte",displayName:"Latte"},{name:"rose",displayName:"Rose"},{name:"mythril",displayName:"Mythril"},{name:"lime",displayName:"lime"},{name:"sky",displayName:"Sky"},{name:"ocean",displayName:"Oceanic"},{name:"palenight",displayName:"Palenight"},{name:"arctic",displayName:"Arctic"},{name:"code",displayName:"Code"}],so={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"};function io(n,t){return e.openBlock(),e.createElementBlock("svg",so,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87q.11.06.22.127c.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a8 8 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a7 7 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a7 7 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a7 7 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124q.108-.066.22-.128c.332-.183.582-.495.644-.869z"},null,-1),e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0"},null,-1)])])}const qt={render:io},co={class:"vuefinder__about-modal__content"},uo={class:"vuefinder__about-modal__main"},mo={class:"vuefinder__about-modal__tabs","aria-label":"Tabs"},fo=["onClick","aria-current"],po={key:0,class:"vuefinder__about-modal__tab-content"},vo={class:"vuefinder__about-modal__description"},_o={href:"https://vuefinder.ozdemir.be",class:"vuefinder__about-modal__link",target:"_blank"},ho={href:"https://github.com/n1crack/vuefinder",class:"vuefinder__about-modal__link",target:"_blank"},go={key:1,class:"vuefinder__about-modal__tab-content"},wo={class:"vuefinder__about-modal__description"},yo={class:"vuefinder__about-modal__settings"},ko={class:"vuefinder__about-modal__settings__fieldset"},bo={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},Eo={class:"vuefinder__about-modal__setting-input"},Vo=["checked"],No={class:"vuefinder__about-modal__setting-label"},xo={for:"metric_unit",class:"vuefinder__about-modal__label"},Co={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},So={class:"vuefinder__about-modal__setting-input"},Bo=["checked"],$o={class:"vuefinder__about-modal__setting-label"},Do={for:"large_icons",class:"vuefinder__about-modal__label"},To={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},Fo={class:"vuefinder__about-modal__setting-input"},Mo=["checked"],Ao={class:"vuefinder__about-modal__setting-label"},Io={for:"persist_path",class:"vuefinder__about-modal__label"},Oo={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},Lo={class:"vuefinder__about-modal__setting-input"},Ro=["checked"],Po={class:"vuefinder__about-modal__setting-label"},zo={for:"show_thumbnails",class:"vuefinder__about-modal__label"},Ho={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},Uo={class:"vuefinder__about-modal__setting-input"},jo={for:"theme",class:"vuefinder__about-modal__label"},Ko={class:"vuefinder__about-modal__setting-label"},Wo=["value"],Go=["label"],qo=["value"],Yo={key:0,class:"vuefinder__about-modal__setting"},Qo={class:"vuefinder__about-modal__setting-input"},Xo={for:"language",class:"vuefinder__about-modal__label"},Jo={class:"vuefinder__about-modal__setting-label"},Zo=["label"],er=["value"],tr={key:2,class:"vuefinder__about-modal__tab-content"},nr={class:"vuefinder__about-modal__shortcuts"},or={class:"vuefinder__about-modal__shortcut"},rr={class:"vuefinder__about-modal__shortcut"},lr={class:"vuefinder__about-modal__shortcut"},ar={class:"vuefinder__about-modal__shortcut"},sr={class:"vuefinder__about-modal__shortcut"},ir={class:"vuefinder__about-modal__shortcut"},cr={class:"vuefinder__about-modal__shortcut"},dr={class:"vuefinder__about-modal__shortcut"},ur={class:"vuefinder__about-modal__shortcut"},mr={class:"vuefinder__about-modal__shortcut"},fr={key:3,class:"vuefinder__about-modal__tab-content"},pr={class:"vuefinder__about-modal__description"},_t=e.defineComponent({__name:"ModalAbout",setup(n){const t=e.inject("ServiceContainer"),o=t.config,{clearStore:r}=t.storage,{t:l}=t.i18n,s=O.useStore(o.state),a=e.computed(()=>s.value.theme||"default"),d={ABOUT:"about",SETTINGS:"settings",SHORTCUTS:"shortcuts",RESET:"reset"},i=e.computed(()=>[{name:l("About"),key:d.ABOUT,current:!1},{name:l("Settings"),key:d.SETTINGS,current:!1},{name:l("Shortcuts"),key:d.SHORTCUTS,current:!1},{name:l("Reset"),key:d.RESET,current:!1}]),m=e.ref("about"),c=async()=>{o.reset(),r(),location.reload()},u=g=>{g!=="default"?o.set("theme",g):o.set("theme","default"),t.emitter.emit("vf-theme-saved")},p=()=>{o.toggle("metricUnits"),t.filesize=o.get("metricUnits")?Gt:vt,t.emitter.emit("vf-metric-units-saved")},h=()=>{o.toggle("compactListView"),t.emitter.emit("vf-compact-view-saved")},V=()=>{o.toggle("showThumbnails"),t.emitter.emit("vf-show-thumbnails-saved")},_=()=>{o.toggle("persist"),t.emitter.emit("vf-persist-path-saved")},{i18n:v}=e.inject("VueFinderOptions"),y=Object.fromEntries(Object.entries({ar:"Arabic (العربيّة)",en:"English",fr:"French (Français)",de:"German (Deutsch)",fa:"Persian (فارسی)",he:"Hebrew (עִברִית)",hi:"Hindi (हिंदी)",pl:"Polish (Polski)",ru:"Russian (Pусский)",sv:"Swedish (Svenska)",tr:"Turkish (Türkçe)",nl:"Dutch (Nederlands)",zhCN:"Simplified Chinese (简体中文)",zhTW:"Traditional Chinese (繁體中文)"}).filter(([g])=>Object.keys(v).includes(g)));return(g,k)=>(e.openBlock(),e.createBlock(de,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:k[2]||(k[2]=C=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(l)("Close")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",co,[e.createVNode(fe,{icon:e.unref(qt),title:"Vuefinder "+e.unref(t).version},null,8,["icon","title"]),e.createElementVNode("div",uo,[e.createElementVNode("div",null,[e.createElementVNode("div",null,[e.createElementVNode("nav",mo,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,C=>(e.openBlock(),e.createElementBlock("button",{key:C.name,onClick:x=>m.value=C.key,class:e.normalizeClass([C.key===m.value?"vuefinder__about-modal__tab--active":"vuefinder__about-modal__tab--inactive","vuefinder__about-modal__tab"]),"aria-current":C.current?"page":void 0},e.toDisplayString(C.name),11,fo))),128))])])]),m.value===d.ABOUT?(e.openBlock(),e.createElementBlock("div",po,[e.createElementVNode("div",vo,e.toDisplayString(e.unref(l)("Vuefinder is a simple, lightweight, and fast file manager library for Vue.js applications")),1),e.createElementVNode("a",_o,e.toDisplayString(e.unref(l)("Project home")),1),e.createElementVNode("a",ho,e.toDisplayString(e.unref(l)("Follow on GitHub")),1)])):e.createCommentVNode("",!0),m.value===d.SETTINGS?(e.openBlock(),e.createElementBlock("div",go,[e.createElementVNode("div",wo,e.toDisplayString(e.unref(l)("Customize your experience with the following settings")),1),e.createElementVNode("div",yo,[e.createElementVNode("fieldset",ko,[e.createElementVNode("div",bo,[e.createElementVNode("div",Eo,[e.createElementVNode("input",{id:"metric_unit",name:"metric_unit",type:"checkbox",checked:e.unref(o).get("metricUnits"),onChange:p,class:"vuefinder__about-modal__checkbox"},null,40,Vo)]),e.createElementVNode("div",No,[e.createElementVNode("label",xo,[e.createTextVNode(e.toDisplayString(e.unref(l)("Use Metric Units"))+" ",1),e.createVNode(Ne,{class:"ms-3",on:"vf-metric-units-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(l)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",Co,[e.createElementVNode("div",So,[e.createElementVNode("input",{id:"large_icons",name:"large_icons",type:"checkbox",checked:e.unref(o).get("compactListView"),onChange:h,class:"vuefinder__about-modal__checkbox"},null,40,Bo)]),e.createElementVNode("div",$o,[e.createElementVNode("label",Do,[e.createTextVNode(e.toDisplayString(e.unref(l)("Compact list view"))+" ",1),e.createVNode(Ne,{class:"ms-3",on:"vf-compact-view-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(l)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",To,[e.createElementVNode("div",Fo,[e.createElementVNode("input",{id:"persist_path",name:"persist_path",type:"checkbox",checked:e.unref(o).get("persist"),onChange:_,class:"vuefinder__about-modal__checkbox"},null,40,Mo)]),e.createElementVNode("div",Ao,[e.createElementVNode("label",Io,[e.createTextVNode(e.toDisplayString(e.unref(l)("Persist path on reload"))+" ",1),e.createVNode(Ne,{class:"ms-3",on:"vf-persist-path-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(l)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",Oo,[e.createElementVNode("div",Lo,[e.createElementVNode("input",{id:"show_thumbnails",name:"show_thumbnails",type:"checkbox",checked:e.unref(o).get("showThumbnails"),onChange:V,class:"vuefinder__about-modal__checkbox"},null,40,Ro)]),e.createElementVNode("div",Po,[e.createElementVNode("label",zo,[e.createTextVNode(e.toDisplayString(e.unref(l)("Show thumbnails"))+" ",1),e.createVNode(Ne,{class:"ms-3",on:"vf-show-thumbnails-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(l)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",Ho,[e.createElementVNode("div",Uo,[e.createElementVNode("label",jo,e.toDisplayString(e.unref(l)("Theme")),1)]),e.createElementVNode("div",Ko,[e.createElementVNode("select",{id:"theme",value:a.value,onChange:k[0]||(k[0]=C=>u(C.target?.value)),class:"vuefinder__about-modal__select"},[e.createElementVNode("optgroup",{label:e.unref(l)("Theme")},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(ao),C=>(e.openBlock(),e.createElementBlock("option",{key:C.name,value:C.name},e.toDisplayString(C.displayName),9,qo))),128))],8,Go)],40,Wo),e.createVNode(Ne,{class:"ms-3",on:"vf-theme-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(l)("Saved.")),1)]),_:1})])]),e.unref(t).features.includes(e.unref(H).LANGUAGE)&&Object.keys(e.unref(y)).length>1?(e.openBlock(),e.createElementBlock("div",Yo,[e.createElementVNode("div",Qo,[e.createElementVNode("label",Xo,e.toDisplayString(e.unref(l)("Language")),1)]),e.createElementVNode("div",Jo,[e.withDirectives(e.createElementVNode("select",{id:"language","onUpdate:modelValue":k[1]||(k[1]=C=>e.unref(t).i18n.locale=C),class:"vuefinder__about-modal__select"},[e.createElementVNode("optgroup",{label:e.unref(l)("Language")},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(y),(C,x)=>(e.openBlock(),e.createElementBlock("option",{key:x,value:x},e.toDisplayString(C),9,er))),128))],8,Zo)],512),[[e.vModelSelect,e.unref(t).i18n.locale]]),e.createVNode(Ne,{class:"ms-3",on:"vf-language-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(l)("Saved.")),1)]),_:1})])])):e.createCommentVNode("",!0)])])])):e.createCommentVNode("",!0),m.value===d.SHORTCUTS?(e.openBlock(),e.createElementBlock("div",tr,[e.createElementVNode("div",nr,[e.createElementVNode("div",or,[e.createElementVNode("div",null,e.toDisplayString(e.unref(l)("Rename")),1),k[3]||(k[3]=e.createElementVNode("kbd",null,"F2",-1))]),e.createElementVNode("div",rr,[e.createElementVNode("div",null,e.toDisplayString(e.unref(l)("Refresh")),1),k[4]||(k[4]=e.createElementVNode("kbd",null,"F5",-1))]),e.createElementVNode("div",lr,[e.createTextVNode(e.toDisplayString(e.unref(l)("Delete"))+" ",1),k[5]||(k[5]=e.createElementVNode("kbd",null,"Del",-1))]),e.createElementVNode("div",ar,[e.createTextVNode(e.toDisplayString(e.unref(l)("Escape"))+" ",1),k[6]||(k[6]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Esc")],-1))]),e.createElementVNode("div",sr,[e.createTextVNode(e.toDisplayString(e.unref(l)("Select All"))+" ",1),k[7]||(k[7]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"A")],-1))]),e.createElementVNode("div",ir,[e.createTextVNode(e.toDisplayString(e.unref(l)("Search"))+" ",1),k[8]||(k[8]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"F")],-1))]),e.createElementVNode("div",cr,[e.createTextVNode(e.toDisplayString(e.unref(l)("Toggle Sidebar"))+" ",1),k[9]||(k[9]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"E")],-1))]),e.createElementVNode("div",dr,[e.createTextVNode(e.toDisplayString(e.unref(l)("Open Settings"))+" ",1),k[10]||(k[10]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,",")],-1))]),e.createElementVNode("div",ur,[e.createTextVNode(e.toDisplayString(e.unref(l)("Toggle Full Screen"))+" ",1),k[11]||(k[11]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"Enter")],-1))]),e.createElementVNode("div",mr,[e.createTextVNode(e.toDisplayString(e.unref(l)("Preview"))+" ",1),k[12]||(k[12]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Space")],-1))])])])):e.createCommentVNode("",!0),m.value===d.RESET?(e.openBlock(),e.createElementBlock("div",fr,[e.createElementVNode("div",pr,e.toDisplayString(e.unref(l)("Reset all settings to default")),1),e.createElementVNode("button",{onClick:c,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(l)("Reset Settings")),1)])):e.createCommentVNode("",!0)])])]),_:1}))}}),vr={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",viewBox:"0 0 24 24"};function _r(n,t){return e.openBlock(),e.createElementBlock("svg",vr,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21q.512.078 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48 48 0 0 0-3.478-.397m-12 .562q.51-.089 1.022-.165m0 0a48 48 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a52 52 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a49 49 0 0 0-7.5 0"},null,-1)])])}const Yt={render:_r},hr={class:"vuefinder__delete-modal__content"},gr={class:"vuefinder__delete-modal__form"},wr={class:"vuefinder__delete-modal__description"},yr={class:"vuefinder__delete-modal__files vf-scrollbar"},kr={class:"vuefinder__delete-modal__file"},br={key:0,class:"vuefinder__delete-modal__icon vuefinder__delete-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Er={key:1,class:"vuefinder__delete-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Vr={class:"vuefinder__delete-modal__file-name"},Nr={class:"vuefinder__delete-modal__warning"},Qe=e.defineComponent({__name:"ModalDelete",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=O.useStore(r.path),s=e.ref(t.modal.data.items),a=e.ref(""),d=()=>{console.log(s.value.map(({path:i,type:m})=>({path:i,type:m}))),s.value.length&&t.adapter.delete({path:l.value.path,items:s.value.map(({path:i,type:m})=>({path:i,type:m}))}).then(i=>{t.emitter.emit("vf-toast-push",{label:o("Files deleted.")}),t.fs.setFiles(i.files),t.modal.close()}).catch(i=>{t.emitter.emit("vf-toast-push",{label:o(i.message),type:"error"})})};return(i,m)=>(e.openBlock(),e.createBlock(de,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:d,class:"vf-btn vf-btn-danger"},e.toDisplayString(e.unref(o)("Yes, Delete!")),1),e.createElementVNode("button",{type:"button",onClick:m[1]||(m[1]=c=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1),e.createElementVNode("div",Nr,e.toDisplayString(e.unref(o)("This action cannot be undone.")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(fe,{icon:e.unref(Yt),title:e.unref(o)("Delete files")},null,8,["icon","title"]),e.createElementVNode("div",hr,[e.createElementVNode("div",gr,[e.createElementVNode("p",wr,e.toDisplayString(e.unref(o)("Are you sure you want to delete these files?")),1),e.createElementVNode("div",yr,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,c=>(e.openBlock(),e.createElementBlock("p",kr,[c.type==="dir"?(e.openBlock(),e.createElementBlock("svg",br,[...m[2]||(m[2]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",Er,[...m[3]||(m[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),e.createElementVNode("span",Vr,e.toDisplayString(c.basename),1)]))),256))]),a.value.length?(e.openBlock(),e.createBlock(e.unref(a),{key:0,onHidden:m[0]||(m[0]=c=>a.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),xr={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",viewBox:"0 0 24 24"};function Cr(n,t){return e.openBlock(),e.createElementBlock("svg",xr,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"},null,-1)])])}const Qt={render:Cr},Sr={class:"vuefinder__rename-modal__content"},Br={class:"vuefinder__rename-modal__item"},$r={class:"vuefinder__rename-modal__item-info"},Dr={key:0,class:"vuefinder__rename-modal__icon vuefinder__rename-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Tr={key:1,class:"vuefinder__rename-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Fr={class:"vuefinder__rename-modal__item-name"},Xe=e.defineComponent({__name:"ModalRename",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=O.useStore(r.path),s=e.ref(t.modal.data.items[0]),a=e.ref(s.value.basename),d=e.ref(""),i=()=>{a.value!=s.value.basename&&t.adapter.rename({path:l.value.path,item:s.value.path,name:a.value}).then(m=>{t.emitter.emit("vf-toast-push",{label:o("%s is renamed.",a.value)}),t.fs.setFiles(m.files),t.modal.close()}).catch(m=>{t.emitter.emit("vf-toast-push",{label:o(m.message),type:"error"})})};return(m,c)=>(e.openBlock(),e.createBlock(de,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:i,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Rename")),1),e.createElementVNode("button",{type:"button",onClick:c[2]||(c[2]=u=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(fe,{icon:e.unref(Qt),title:e.unref(o)("Rename")},null,8,["icon","title"]),e.createElementVNode("div",Sr,[e.createElementVNode("div",Br,[e.createElementVNode("p",$r,[s.value.type==="dir"?(e.openBlock(),e.createElementBlock("svg",Dr,[...c[3]||(c[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",Tr,[...c[4]||(c[4]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),e.createElementVNode("span",Fr,e.toDisplayString(s.value.basename),1)]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c[0]||(c[0]=u=>a.value=u),onKeyup:e.withKeys(i,["enter"]),class:"vuefinder__rename-modal__input",placeholder:"Name",type:"text"},null,544),[[e.vModelText,a.value]]),d.value.length?(e.openBlock(),e.createBlock(e.unref(d),{key:0,onHidden:c[1]||(c[1]=u=>d.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(d.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),Mr={class:"vuefinder__text-preview"},Ar={class:"vuefinder__text-preview__header"},Ir=["title"],Or={class:"vuefinder__text-preview__actions"},Lr={key:0,class:"vuefinder__text-preview__content"},Rr={key:1},Pr=e.defineComponent({__name:"Text",emits:["success"],setup(n,{emit:t}){const o=t,r=e.ref(""),l=e.ref(""),s=e.ref(null),a=e.ref(!1),d=e.ref(""),i=e.ref(!1),m=e.inject("ServiceContainer"),{t:c}=m.i18n;e.onMounted(async()=>{try{const h=await m.adapter.getContent({path:m.modal.data.item.path});r.value=h.content,o("success")}catch(h){console.error("Failed to load text content:",h),o("success")}});const u=()=>{a.value=!a.value,l.value=r.value,m.modal.setEditMode(a.value)},p=async()=>{d.value="",i.value=!1;try{const h=m.modal.data.item.path;await m.adapter.save({path:h,content:l.value}),r.value=l.value,d.value=c("Updated."),o("success"),a.value=!a.value}catch(h){const V=h;d.value=c(V.message||"Error"),i.value=!0}};return(h,V)=>(e.openBlock(),e.createElementBlock("div",Mr,[e.createElementVNode("div",Ar,[e.createElementVNode("div",{class:"vuefinder__text-preview__title",id:"modal-title",title:e.unref(m).modal.data.item.path},e.toDisplayString(e.unref(m).modal.data.item.basename),9,Ir),e.createElementVNode("div",Or,[a.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:p,class:"vuefinder__text-preview__save-button"},e.toDisplayString(e.unref(c)("Save")),1)):e.createCommentVNode("",!0),e.unref(m).features.includes(e.unref(H).EDIT)?(e.openBlock(),e.createElementBlock("button",{key:1,class:"vuefinder__text-preview__edit-button",onClick:V[0]||(V[0]=_=>u())},e.toDisplayString(a.value?e.unref(c)("Cancel"):e.unref(c)("Edit")),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("div",null,[a.value?(e.openBlock(),e.createElementBlock("div",Rr,[e.withDirectives(e.createElementVNode("textarea",{ref_key:"editInput",ref:s,"onUpdate:modelValue":V[1]||(V[1]=_=>l.value=_),class:"vuefinder__text-preview__textarea",name:"text",cols:"30",rows:"10"},null,512),[[e.vModelText,l.value]])])):(e.openBlock(),e.createElementBlock("pre",Lr,e.toDisplayString(r.value),1)),d.value.length?(e.openBlock(),e.createBlock(e.unref(d),{key:2,onHidden:V[2]||(V[2]=_=>d.value=""),error:i.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(d.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)])]))}}),zr={class:"vuefinder__image-preview"},Hr={class:"vuefinder__image-preview__header"},Ur=["title"],jr={class:"vuefinder__image-preview__actions"},Kr={class:"vuefinder__image-preview__image-container"},Wr=["src"],Gr=e.defineComponent({name:"ImagePreview",__name:"Image",emits:["success"],setup(n,{emit:t}){const o=t,r=e.inject("ServiceContainer"),{t:l}=r.i18n,s=e.ref(!1),a=e.ref(""),d=e.ref(!1),i=e.ref(r.adapter.getPreviewUrl({path:r.modal.data.item.path})),m=e.ref(i.value),c=e.useTemplateRef("cropperRef"),u=async()=>{s.value=!s.value,r.modal.setEditMode(s.value)},p=async()=>{const V=c.value?.getResult({size:{width:795,height:341},fillColor:"#ffffff"})?.canvas;V&&V.toBlob(async _=>{if(_){a.value="",d.value=!1;try{const v=new File([_],r.modal.data.item.basename,{type:"image/png"}),y=r.modal.data.item.path.split("/"),g=y.pop(),k=y.join("/");await r.adapter.upload({path:k,files:[v]}),a.value=l("Updated."),fetch(i.value,{cache:"reload",mode:"no-cors"});const C=r.root.querySelector('[data-src="'+i.value+'"]');C&&Wt.resetStatus(C),r.emitter.emit("vf-refresh-thumbnails"),u(),o("success")}catch(v){const f=v?.message??"Error";a.value=l(f),d.value=!0}}})};return e.onMounted(()=>{o("success")}),(h,V)=>(e.openBlock(),e.createElementBlock("div",zr,[e.createElementVNode("div",Hr,[e.createElementVNode("h3",{class:"vuefinder__image-preview__title",id:"modal-title",title:e.unref(r).modal.data.item.path},e.toDisplayString(e.unref(r).modal.data.item.basename),9,Ur),e.createElementVNode("div",jr,[s.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:p,class:"vuefinder__image-preview__crop-button"},e.toDisplayString(e.unref(l)("Crop")),1)):e.createCommentVNode("",!0),e.unref(r).features.includes(e.unref(H).EDIT)?(e.openBlock(),e.createElementBlock("button",{key:1,class:"vuefinder__image-preview__edit-button",onClick:V[0]||(V[0]=_=>u())},e.toDisplayString(s.value?e.unref(l)("Cancel"):e.unref(l)("Edit")),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("div",Kr,[s.value?(e.openBlock(),e.createBlock(e.unref(Dn.Cropper),{key:1,ref_key:"cropperRef",ref:c,class:"w-full h-full",crossorigin:"anonymous",src:m.value,"auto-zoom":!0,priority:"image",transitions:!0},null,8,["src"])):(e.openBlock(),e.createElementBlock("img",{key:0,style:{},src:e.unref(r).adapter.getPreviewUrl({path:e.unref(r).modal.data.item.path}),class:"vuefinder__image-preview__image w-full h-full"},null,8,Wr))]),a.value.length?(e.openBlock(),e.createBlock(e.unref(a),{key:0,onHidden:V[1]||(V[1]=_=>a.value=""),error:d.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)]))}}),qr={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function Yr(n,t){return e.openBlock(),e.createElementBlock("svg",qr,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 0 0 2-2V9.414a1 1 0 0 0-.293-.707l-5.414-5.414A1 1 0 0 0 12.586 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2"},null,-1)])])}const Pe={render:Yr},Qr={class:"vuefinder__default-preview"},Xr={class:"vuefinder__default-preview__content"},Jr={class:"vuefinder__default-preview__header"},Zr=["title"],el={class:"vuefinder__default-preview__icon-container"},tl=["title"],nl=e.defineComponent({__name:"Default",emits:["success"],setup(n,{emit:t}){const o=e.inject("ServiceContainer"),r=t;return e.onMounted(()=>{r("success")}),(l,s)=>(e.openBlock(),e.createElementBlock("div",Qr,[e.createElementVNode("div",Xr,[e.createElementVNode("div",Jr,[e.createElementVNode("h3",{class:"vuefinder__default-preview__title",id:"modal-title",title:e.unref(o).modal.data.item.path},e.toDisplayString(e.unref(o).modal.data.item.basename),9,Zr)]),e.createElementVNode("div",el,[e.createVNode(e.unref(Pe),{class:"vuefinder__default-preview__file-icon"}),e.createElementVNode("div",{class:"vuefinder__default-preview__file-name",id:"modal-title",title:e.unref(o).modal.data.item.path},e.toDisplayString(e.unref(o).modal.data.item.basename),9,tl)])])]))}}),ol={class:"vuefinder__video-preview"},rl=["title"],ll={class:"vuefinder__video-preview__video",preload:"metadata",controls:""},al=["src"],sl=e.defineComponent({__name:"Video",emits:["success"],setup(n,{emit:t}){const o=e.inject("ServiceContainer"),r=t,l=()=>o.adapter.getPreviewUrl({path:o.modal.data.item.path});return e.onMounted(()=>{r("success")}),(s,a)=>(e.openBlock(),e.createElementBlock("div",ol,[e.createElementVNode("h3",{class:"vuefinder__video-preview__title",id:"modal-title",title:e.unref(o).modal.data.item.path},e.toDisplayString(e.unref(o).modal.data.item.basename),9,rl),e.createElementVNode("div",null,[e.createElementVNode("video",ll,[e.createElementVNode("source",{src:l(),type:"video/mp4"},null,8,al),a[0]||(a[0]=e.createTextVNode(" Your browser does not support the video tag. ",-1))])])]))}}),il={class:"vuefinder__audio-preview"},cl=["title"],dl={class:"vuefinder__audio-preview__audio",controls:""},ul=["src"],ml=e.defineComponent({__name:"Audio",emits:["success"],setup(n,{emit:t}){const o=t,r=e.inject("ServiceContainer"),l=()=>r.adapter.getPreviewUrl({path:r.modal.data.item.path});return e.onMounted(()=>{o("success")}),(s,a)=>(e.openBlock(),e.createElementBlock("div",il,[e.createElementVNode("h3",{class:"vuefinder__audio-preview__title",id:"modal-title",title:e.unref(r).modal.data.item.path},e.toDisplayString(e.unref(r).modal.data.item.basename),9,cl),e.createElementVNode("div",null,[e.createElementVNode("audio",dl,[e.createElementVNode("source",{src:l(),type:"audio/mpeg"},null,8,ul),a[0]||(a[0]=e.createTextVNode(" Your browser does not support the audio element. ",-1))])])]))}}),fl={class:"vuefinder__pdf-preview"},pl=["title"],vl=["data"],_l=["src"],hl=e.defineComponent({__name:"Pdf",emits:["success"],setup(n,{emit:t}){const o=e.inject("ServiceContainer"),r=t,l=()=>o.adapter.getPreviewUrl({path:o.modal.data.item.path});return e.onMounted(()=>{r("success")}),(s,a)=>(e.openBlock(),e.createElementBlock("div",fl,[e.createElementVNode("h3",{class:"vuefinder__pdf-preview__title",id:"modal-title",title:e.unref(o).modal.data.item.path},e.toDisplayString(e.unref(o).modal.data.item.basename),9,pl),e.createElementVNode("div",null,[e.createElementVNode("object",{class:"vuefinder__pdf-preview__object",data:l(),type:"application/pdf",width:"100%",height:"100%"},[e.createElementVNode("iframe",{class:"vuefinder__pdf-preview__iframe",src:l(),width:"100%",height:"100%"}," Your browser does not support PDFs ",8,_l)],8,vl)])]))}});function gl(n,t=null){return new Date(n*1e3).toLocaleString(t??navigator.language??"en-US")}const wl={key:0,class:"vuefinder__preview-modal__nav-overlay"},yl=["disabled","title"],kl=["disabled","title"],bl={class:"vuefinder__preview-modal__content"},El={key:0},Vl={class:"vuefinder__preview-modal__loading"},Nl={key:0,class:"vuefinder__preview-modal__loading-indicator"},xl={class:"vuefinder__preview-modal__details"},Cl={class:"font-bold"},Sl={class:"font-bold pl-2"},Bl={key:0,class:"vuefinder__preview-modal__note"},$l=["download","href"],Je=e.defineComponent({__name:"ModalPreview",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=e.ref(!1),l=_=>(t.modal.data.item.mime_type??"").startsWith(_),s=t.features.includes(H.PREVIEW);s||(r.value=!0);const a=e.computed(()=>t.modal.data.item),d=O.useStore(t.fs.sortedFiles),i=e.computed(()=>d.value.filter(_=>_.type==="file")),m=e.computed(()=>i.value.findIndex(_=>_.path===a.value.path)),c=e.computed(()=>m.value>0),u=e.computed(()=>m.value<i.value.length-1),p=()=>{if(t.modal.editMode.value||!c.value)return;const _=i.value[m.value-1];t.fs.clearSelection(),t.fs.select(_.path),t.modal.data.item=_,t.modal.data.storage=t.modal.data.storage},h=()=>{if(t.modal.editMode.value||!u.value)return;const _=i.value[m.value+1];t.fs.clearSelection(),t.fs.select(_.path),t.modal.data.item=_,t.modal.data.storage=t.modal.data.storage},V=_=>{if(_.key==="Escape"){_.preventDefault(),_.stopPropagation(),t.modal.close();return}(_.key==="ArrowLeft"||_.key==="ArrowRight")&&(_.preventDefault(),_.stopPropagation(),_.key==="ArrowLeft"?p():h())};return e.onMounted(()=>{const _=document.querySelector(".vuefinder__preview-modal");_&&_.focus()}),(_,v)=>(e.openBlock(),e.createBlock(de,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:v[6]||(v[6]=f=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Close")),1),e.unref(t).features.includes(e.unref(H).DOWNLOAD)?(e.openBlock(),e.createElementBlock("a",{key:0,target:"_blank",class:"vf-btn vf-btn-primary",download:e.unref(t).adapter.getDownloadUrl({path:e.unref(t).modal.data.item.path}),href:e.unref(t).adapter.getDownloadUrl({path:e.unref(t).modal.data.item.path})},e.toDisplayString(e.unref(o)("Download")),9,$l)):e.createCommentVNode("",!0)]),default:e.withCtx(()=>[e.createElementVNode("div",{class:"vuefinder__preview-modal",onKeydown:V,tabindex:"0"},[e.unref(t).modal.editMode?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",wl,[e.createElementVNode("button",{onClick:p,disabled:!c.value,class:"vuefinder__preview-modal__nav-side vuefinder__preview-modal__nav-side--left",title:e.unref(o)("Previous file")},[...v[7]||(v[7]=[e.createElementVNode("svg",{class:"vuefinder__preview-modal__nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e.createElementVNode("polyline",{points:"15,18 9,12 15,6"})],-1)])],8,yl),e.createElementVNode("button",{onClick:h,disabled:!u.value,class:"vuefinder__preview-modal__nav-side vuefinder__preview-modal__nav-side--right",title:e.unref(o)("Next file")},[...v[8]||(v[8]=[e.createElementVNode("svg",{class:"vuefinder__preview-modal__nav-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e.createElementVNode("polyline",{points:"9,18 15,12 9,6"})],-1)])],8,kl)])),e.createElementVNode("div",bl,[e.unref(s)?(e.openBlock(),e.createElementBlock("div",El,[l("text")?(e.openBlock(),e.createBlock(Pr,{key:0,onSuccess:v[0]||(v[0]=f=>r.value=!0)})):l("image")?(e.openBlock(),e.createBlock(Gr,{key:1,onSuccess:v[1]||(v[1]=f=>r.value=!0)})):l("video")?(e.openBlock(),e.createBlock(sl,{key:2,onSuccess:v[2]||(v[2]=f=>r.value=!0)})):l("audio")?(e.openBlock(),e.createBlock(ml,{key:3,onSuccess:v[3]||(v[3]=f=>r.value=!0)})):l("application/pdf")?(e.openBlock(),e.createBlock(hl,{key:4,onSuccess:v[4]||(v[4]=f=>r.value=!0)})):(e.openBlock(),e.createBlock(nl,{key:5,onSuccess:v[5]||(v[5]=f=>r.value=!0)}))])):e.createCommentVNode("",!0),e.createElementVNode("div",Vl,[r.value===!1?(e.openBlock(),e.createElementBlock("div",Nl,[v[9]||(v[9]=e.createElementVNode("svg",{class:"vuefinder__preview-modal__spinner",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e.createElementVNode("circle",{class:"vuefinder__preview-modal__spinner-circle",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e.createElementVNode("path",{class:"vuefinder__preview-modal__spinner-path",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e.createElementVNode("span",null,e.toDisplayString(e.unref(o)("Loading")),1)])):e.createCommentVNode("",!0)])])],32),e.createElementVNode("div",xl,[e.createElementVNode("div",null,[e.createElementVNode("span",Cl,e.toDisplayString(e.unref(o)("File Size"))+": ",1),e.createTextVNode(e.toDisplayString(e.unref(t).filesize(e.unref(t).modal.data.item.file_size)),1)]),e.createElementVNode("div",null,[e.createElementVNode("span",Sl,e.toDisplayString(e.unref(o)("Last Modified"))+": ",1),e.createTextVNode(" "+e.toDisplayString(e.unref(gl)(e.unref(t).modal.data.item.last_modified)),1)])]),e.unref(t).features.includes(e.unref(H).DOWNLOAD)?(e.openBlock(),e.createElementBlock("div",Bl,[e.createElementVNode("span",null,e.toDisplayString(e.unref(o)(`Download doesn't work? You can try right-click "Download" button, select "Save link as...".`)),1)])):e.createCommentVNode("",!0)]),_:1}))}}),Dl={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",viewBox:"0 0 24 24"};function Tl(n,t){return e.openBlock(),e.createElementBlock("svg",Dl,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3"},null,-1)])])}const Fl={render:Tl},Ml={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function Al(n,t){return e.openBlock(),e.createElementBlock("svg",Ml,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-6l-2-2H5a2 2 0 0 0-2 2"},null,-1)])])}const _e={render:Al},Il={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"};function Ol(n,t){return e.openBlock(),e.createElementBlock("svg",Il,[...t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M12 5v14M5 12h14"},null,-1)])])}const Ze={render:Ol},Ll={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"};function Rl(n,t){return e.openBlock(),e.createElementBlock("svg",Ll,[...t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M5 12h14"},null,-1)])])}const et={render:Rl},Pl={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"h-5 w-5",viewBox:"0 0 24 24"};function zl(n,t){return e.openBlock(),e.createElementBlock("svg",Pl,[...t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"m15 4.5-4 4L7 10l-1.5 1.5 7 7L14 17l1.5-4 4-4M9 15l-4.5 4.5M14.5 4 20 9.5"},null,-1)])])}const ht={render:zl},Hl={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function Ul(n,t){return e.openBlock(),e.createElementBlock("svg",Hl,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"},null,-1)])])}const gt={render:Ul},jl={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"};function Kl(n,t){return e.openBlock(),e.createElementBlock("svg",jl,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 9.776q.168-.026.344-.026h15.812q.176 0 .344.026m-16.5 0a2.25 2.25 0 0 0-1.883 2.542l.857 6a2.25 2.25 0 0 0 2.227 1.932H19.05a2.25 2.25 0 0 0 2.227-1.932l.857-6a2.25 2.25 0 0 0-1.883-2.542m-16.5 0V6A2.25 2.25 0 0 1 6 3.75h3.879a1.5 1.5 0 0 1 1.06.44l2.122 2.12a1.5 1.5 0 0 0 1.06.44H18A2.25 2.25 0 0 1 20.25 9v.776"},null,-1)])])}const wt={render:Kl},Wl={class:"vuefinder__modal-tree__folder-item"},Gl={class:"vuefinder__modal-tree__folder-content"},ql={key:1,class:"vuefinder__modal-tree__folder-spacer"},Yl={class:"vuefinder__modal-tree__folder-text"},Ql={key:0,class:"vuefinder__modal-tree__subfolders"},Xl=300,Jl=e.defineComponent({__name:"ModalTreeFolderItem",props:{folder:{},storage:{},modelValue:{},expandedFolders:{},modalTreeData:{},currentPath:{}},emits:["update:modelValue","selectAndClose","toggleFolder"],setup(n,{emit:t}){const o=e.inject("ServiceContainer"),{t:r}=o.i18n,l=o.fs,s=n,a=t;O.useStore(l.path);const d=e.computed(()=>{const f=`${s.storage}:${s.folder.path}`;return s.expandedFolders[f]||!1}),i=e.computed(()=>s.modelValue?.path===s.folder.path),m=e.computed(()=>s.currentPath?.path===s.folder.path),c=e.computed(()=>s.modalTreeData[s.folder.path]||[]),u=e.computed(()=>c.value.length>0||s.folder.type==="dir"),p=()=>{a("toggleFolder",s.storage,s.folder.path)},h=()=>{a("update:modelValue",s.folder)},V=()=>{a("update:modelValue",s.folder),a("selectAndClose",s.folder)};let _=0;const v=()=>{const f=Date.now();f-_<Xl?V():h(),_=f};return(f,y)=>{const g=e.resolveComponent("ModalTreeFolderItem",!0);return e.openBlock(),e.createElementBlock("div",Wl,[e.createElementVNode("div",Gl,[u.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"vuefinder__modal-tree__folder-toggle",onClick:p},[d.value?(e.openBlock(),e.createBlock(e.unref(et),{key:1,class:"vuefinder__modal-tree__folder-toggle-icon"})):(e.openBlock(),e.createBlock(e.unref(Ze),{key:0,class:"vuefinder__modal-tree__folder-toggle-icon"}))])):(e.openBlock(),e.createElementBlock("div",ql)),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__modal-tree__folder-link",{"vuefinder__modal-tree__folder-link--selected":i.value,"vuefinder__modal-tree__folder-link--current":m.value}]),onClick:h,onDblclick:V,onTouchend:v},[d.value?(e.openBlock(),e.createBlock(e.unref(wt),{key:1,class:"vuefinder__item-icon__folder--open vuefinder__modal-tree__folder-icon"})):(e.openBlock(),e.createBlock(e.unref(_e),{key:0,class:"vuefinder__modal-tree__folder-icon vuefinder__item-icon__folder"})),e.createElementVNode("span",Yl,e.toDisplayString(n.folder.basename),1)],34)]),d.value&&u.value?(e.openBlock(),e.createElementBlock("div",Ql,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,k=>(e.openBlock(),e.createBlock(g,{key:k.path,folder:k,storage:n.storage,modelValue:n.modelValue,expandedFolders:n.expandedFolders,modalTreeData:n.modalTreeData,currentPath:n.currentPath,"onUpdate:modelValue":y[0]||(y[0]=C=>f.$emit("update:modelValue",C)),onSelectAndClose:y[1]||(y[1]=C=>f.$emit("selectAndClose",C)),onToggleFolder:y[2]||(y[2]=(C,x)=>f.$emit("toggleFolder",C,x))},null,8,["folder","storage","modelValue","expandedFolders","modalTreeData","currentPath"]))),128))])):e.createCommentVNode("",!0)])}}}),Zl={class:"vuefinder__modal-tree"},ea={class:"vuefinder__modal-tree__header"},ta={class:"vuefinder__modal-tree__title"},na={key:0,class:"vuefinder__modal-tree__section"},oa={class:"vuefinder__modal-tree__section-title"},ra={class:"vuefinder__modal-tree__list"},la=["onClick","onDblclick","onTouchend"],aa={class:"vuefinder__modal-tree__text"},sa={class:"vuefinder__modal-tree__text-storage"},ia={class:"vuefinder__modal-tree__section-title"},ca={class:"vuefinder__modal-tree__list"},da={class:"vuefinder__modal-tree__storage-item"},ua={class:"vuefinder__modal-tree__storage-content"},ma=["onClick"],fa=["onClick","onDblclick","onTouchend"],pa={class:"vuefinder__modal-tree__storage-text"},va={key:0,class:"vuefinder__modal-tree__subfolders"},Ft=300,yt=e.defineComponent({__name:"ModalTreeSelector",props:{modelValue:{},showPinnedFolders:{type:Boolean},currentPath:{}},emits:["update:modelValue","selectAndClose"],setup(n,{emit:t}){const o=e.inject("ServiceContainer"),{t:r}=o.i18n,l=o.fs,s=o.config,a=t,d=O.useStore(l.sortedFiles),i=O.useStore(l.storages),m=O.useStore(l.path),c=e.ref(null),u=e.ref({}),p=e.ref({});e.watch(d,x=>{const D=x.filter(T=>T.type==="dir"),A=m.value?.path||"";A&&(p.value[A]=D.map(T=>({...T,type:"dir"})))});const h=(x,D)=>{const A=`${x}:${D}`;u.value={...u.value,[A]:!u.value[A]},u.value[A]&&!p.value[D]&&o.adapter.list(D).then(({files:T})=>{if(T){const U=Object.values(T).filter(W=>W.type==="dir");p.value[D]=U.map(W=>({...W,type:"dir"}))}})},V=x=>p.value[x]||[],_=x=>{x&&a("update:modelValue",x)},v=x=>{x&&(a("update:modelValue",x),a("selectAndClose",x))},f=x=>{const D={storage:x,path:x+"://",basename:x,type:"dir",extension:"",file_size:null,last_modified:null,mime_type:null,visibility:"public",dir:x+"://"};a("update:modelValue",D)},y=x=>{const D={storage:x,path:x+"://",basename:x,type:"dir",extension:"",file_size:null,last_modified:null,mime_type:null,visibility:"public",dir:x+"://"};a("update:modelValue",D),a("selectAndClose",D)};let g=0;const k=x=>{if(!x)return;const D=Date.now();D-g<Ft?v(x):_(x),g=D},C=x=>{const D=Date.now();D-g<Ft?y(x):f(x),g=D};return e.onMounted(()=>{c.value&&Ye.OverlayScrollbars(c.value,{overflow:{x:"hidden"},scrollbars:{theme:"vf-scrollbars-theme"}})}),(x,D)=>(e.openBlock(),e.createElementBlock("div",Zl,[e.createElementVNode("div",ea,[e.createElementVNode("div",ta,e.toDisplayString(e.unref(r)("Select Target Folder")),1)]),e.createElementVNode("div",{ref_key:"modalContentElement",ref:c,class:"vuefinder__modal-tree__content"},[n.showPinnedFolders&&e.unref(s).get("pinnedFolders").length?(e.openBlock(),e.createElementBlock("div",na,[e.createElementVNode("div",oa,e.toDisplayString(e.unref(r)("Pinned Folders")),1),e.createElementVNode("div",ra,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(s).get("pinnedFolders"),A=>(e.openBlock(),e.createElementBlock("div",{key:A.path,class:e.normalizeClass(["vuefinder__modal-tree__item",{"vuefinder__modal-tree__item--selected":n.modelValue?.path===A.path}]),onClick:T=>_(A),onDblclick:T=>v(A),onTouchend:T=>k(A)},[e.createVNode(e.unref(_e),{class:"vuefinder__modal-tree__icon vuefinder__item-icon__folder"}),e.createElementVNode("div",aa,e.toDisplayString(A.basename),1),e.createElementVNode("div",sa,e.toDisplayString(A.storage),1),e.createVNode(e.unref(ht),{class:"vuefinder__modal-tree__icon vuefinder__modal-tree__icon--pin"})],42,la))),128))])])):e.createCommentVNode("",!0),e.createElementVNode("div",ia,e.toDisplayString(e.unref(r)("Storages")),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Array.isArray(e.unref(i))?e.unref(i):e.unref(i).value||[],A=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__modal-tree__section",key:A},[e.createElementVNode("div",ca,[e.createElementVNode("div",da,[e.createElementVNode("div",ua,[e.createElementVNode("div",{class:"vuefinder__modal-tree__storage-toggle",onClick:e.withModifiers(T=>h(A,A+"://"),["stop"])},[u.value[`${A}:${A}://`]?(e.openBlock(),e.createBlock(e.unref(et),{key:1,class:"vuefinder__modal-tree__toggle-icon"})):(e.openBlock(),e.createBlock(e.unref(Ze),{key:0,class:"vuefinder__modal-tree__toggle-icon"}))],8,ma),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__modal-tree__storage-link",{"vuefinder__modal-tree__storage-link--selected":n.modelValue?.path===A+"://"}]),onClick:T=>f(A),onDblclick:T=>y(A),onTouchend:T=>C(A)},[e.createVNode(e.unref(gt),{class:"vuefinder__modal-tree__storage-icon"}),e.createElementVNode("span",pa,e.toDisplayString(A),1)],42,fa)]),u.value[`${A}:${A}://`]?(e.openBlock(),e.createElementBlock("div",va,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(V(A+"://"),T=>(e.openBlock(),e.createBlock(Jl,{key:T.path,folder:T,storage:A,modelValue:n.modelValue,expandedFolders:u.value,modalTreeData:p.value,currentPath:n.currentPath,"onUpdate:modelValue":_,onSelectAndClose:v,onToggleFolder:h},null,8,["folder","storage","modelValue","expandedFolders","modalTreeData","currentPath"]))),128))])):e.createCommentVNode("",!0)])])]))),128))],512)]))}}),_a={class:"vuefinder__move-modal__content"},ha={class:"vuefinder__move-modal__description"},ga={class:"vuefinder__move-modal__files vf-scrollbar"},wa={key:0,class:"vuefinder__move-modal__icon vuefinder__move-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},ya={key:1,class:"vuefinder__move-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},ka={class:"vuefinder__move-modal__file-name"},ba={class:"vuefinder__move-modal__target-title"},Ea={class:"vuefinder__move-modal__target-container"},Va={class:"vuefinder__move-modal__target-path"},Na={class:"vuefinder__move-modal__target-storage"},xa={key:0,class:"vuefinder__move-modal__Destination-folder"},Ca={class:"vuefinder__move-modal__target-badge"},Sa={class:"vuefinder__move-modal__options"},Ba={class:"vuefinder__move-modal__checkbox-label"},$a={class:"vuefinder__move-modal__checkbox-text"},Da={class:"vuefinder__move-modal__selected-items"},Xt=e.defineComponent({__name:"ModalTransfer",props:{copy:{type:Boolean}},setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=n,l=e.ref(t.modal.data.items.from),s=e.ref(t.modal.data.items.to),a=e.ref(""),d=e.ref(r.copy||!1),i=e.computed(()=>d.value?"copy":"move"),m=e.ref(!1),c=e.computed(()=>d.value?o("Copy files"):o("Move files")),u=e.computed(()=>d.value?o("Are you sure you want to copy these files?"):o("Are you sure you want to move these files?")),p=e.computed(()=>d.value?o("Yes, Copy!"):o("Yes, Move!"));e.computed(()=>d.value?o("Files copied."):o("Files moved."));const h=f=>{f&&(s.value=f)},V=f=>{f&&(s.value=f,m.value=!1)},_=()=>{const f=s.value.path;if(!f)return{storage:"local",path:""};if(f.endsWith("://"))return{storage:f.replace("://",""),path:""};const y=f.split("://");return{storage:y[0]||"local",path:y[1]||""}},v=async()=>{l.value.length&&await t.adapter[i.value]({sources:l.value.map(({path:f})=>f),destination:s.value.path})};return(f,y)=>(e.openBlock(),e.createBlock(de,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:v,class:"vf-btn vf-btn-primary"},e.toDisplayString(p.value),1),e.createElementVNode("button",{type:"button",onClick:y[4]||(y[4]=g=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1),e.createElementVNode("div",Da,e.toDisplayString(e.unref(o)("%s item(s) selected.",l.value.length)),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(fe,{icon:e.unref(Fl),title:c.value},null,8,["icon","title"]),e.createElementVNode("div",_a,[e.createElementVNode("p",ha,e.toDisplayString(u.value),1),e.createElementVNode("div",ga,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,g=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__move-modal__file",key:g.path},[e.createElementVNode("div",null,[g.type==="dir"?(e.openBlock(),e.createElementBlock("svg",wa,[...y[5]||(y[5]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",ya,[...y[6]||(y[6]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])]))]),e.createElementVNode("div",ka,e.toDisplayString(g.path),1)]))),128))]),e.createElementVNode("h4",ba,e.toDisplayString(e.unref(o)("Target Directory")),1),e.createElementVNode("div",Ea,[e.createElementVNode("div",{class:"vuefinder__move-modal__target-display",onClick:y[0]||(y[0]=g=>m.value=!m.value)},[e.createElementVNode("div",Va,[e.createElementVNode("span",Na,e.toDisplayString(_().storage)+"://",1),_().path?(e.openBlock(),e.createElementBlock("span",xa,e.toDisplayString(_().path),1)):e.createCommentVNode("",!0)]),e.createElementVNode("span",Ca,e.toDisplayString(e.unref(o)("Browse")),1)])]),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__move-modal__tree-selector",m.value?"vuefinder__move-modal__tree-selector--expanded":"vuefinder__move-modal__tree-selector--collapsed"])},[e.createVNode(yt,{modelValue:s.value,"onUpdate:modelValue":[y[1]||(y[1]=g=>s.value=g),h],"show-pinned-folders":!0,onSelectAndClose:V},null,8,["modelValue"])],2),e.createElementVNode("div",Sa,[e.createElementVNode("label",Ba,[e.withDirectives(e.createElementVNode("input",{type:"checkbox","onUpdate:modelValue":y[2]||(y[2]=g=>d.value=g),class:"vuefinder__move-modal__checkbox"},null,512),[[e.vModelCheckbox,d.value]]),e.createElementVNode("span",$a,e.toDisplayString(e.unref(o)("Create a copy instead of moving")),1)])]),a.value.length?(e.openBlock(),e.createBlock(e.unref(a),{key:0,onHidden:y[3]||(y[3]=g=>a.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value),1)]),_:1})):e.createCommentVNode("",!0)])])]),_:1}))}}),Ce=e.defineComponent({__name:"ModalMove",setup(n){return(t,o)=>(e.openBlock(),e.createBlock(Xt,{copy:!1}))}}),kt=e.defineComponent({__name:"ModalCopy",setup(n){return(t,o)=>(e.openBlock(),e.createBlock(Xt,{copy:!0}))}}),Ta=(n,t=0,o=!1)=>{let r;return(...l)=>{o&&!r&&n(...l),clearTimeout(r),r=setTimeout(()=>{n(...l)},t)}},Jt=(n,t,o)=>{const r=e.ref(n);return e.customRef((l,s)=>({get(){return l(),r.value},set:Ta(a=>{r.value=a,s()},t,!1)}))},Fa={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"};function Ma(n,t){return e.openBlock(),e.createElementBlock("svg",Fa,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607"},null,-1)])])}const bt={render:Ma},Aa={xmlns:"http://www.w3.org/2000/svg",fill:"none",class:"animate-spin p-0.5 h-5 w-5 text-white ml-auto",viewBox:"0 0 24 24"};function Ia(n,t){return e.openBlock(),e.createElementBlock("svg",Aa,[...t[0]||(t[0]=[e.createElementVNode("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",class:"opacity-25 stroke-blue-900 dark:stroke-blue-100"},null,-1),e.createElementVNode("path",{fill:"currentColor",d:"M4 12a8 8 0 0 1 8-8V0C5.373 0 0 5.373 0 12zm2 5.291A7.96 7.96 0 0 1 4 12H0c0 3.042 1.135 5.824 3 7.938z",class:"opacity-75"},null,-1)])])}const tt={render:Ia},Oa={class:"vuefinder__search-modal__search-input"},La=["value","placeholder","disabled"],Ra={key:0,class:"vuefinder__search-modal__loading"},Pa=e.defineComponent({name:"SearchInput",__name:"SearchInput",props:{modelValue:{},isSearching:{type:Boolean},disabled:{type:Boolean}},emits:["update:modelValue","keydown"],setup(n,{expose:t,emit:o}){const r=o,l=e.inject("ServiceContainer"),{t:s}=l.i18n,a=e.ref(null),d=m=>{const c=m.target;r("update:modelValue",c.value)},i=m=>{r("keydown",m)};return t({focus:()=>{a.value&&a.value.focus()}}),(m,c)=>(e.openBlock(),e.createElementBlock("div",Oa,[e.createVNode(e.unref(bt),{class:"vuefinder__search-modal__search-icon"}),e.createElementVNode("input",{ref_key:"searchInput",ref:a,value:n.modelValue,type:"text",placeholder:e.unref(s)("Search Files"),disabled:n.disabled,class:"vuefinder__search-modal__input",onKeydown:i,onKeyup:c[0]||(c[0]=e.withModifiers(()=>{},["stop"])),onInput:d},null,40,La),n.isSearching?(e.openBlock(),e.createElementBlock("div",Ra,[e.createVNode(e.unref(tt),{class:"vuefinder__search-modal__loading-icon"})])):e.createCommentVNode("",!0)]))}}),ze=Math.min,ke=Math.max,He=Math.round,Re=Math.floor,ue=n=>({x:n,y:n}),za={left:"right",right:"left",bottom:"top",top:"bottom"},Ha={start:"end",end:"start"};function Mt(n,t,o){return ke(n,ze(t,o))}function nt(n,t){return typeof n=="function"?n(t):n}function be(n){return n.split("-")[0]}function ot(n){return n.split("-")[1]}function Zt(n){return n==="x"?"y":"x"}function en(n){return n==="y"?"height":"width"}const Ua=new Set(["top","bottom"]);function ge(n){return Ua.has(be(n))?"y":"x"}function tn(n){return Zt(ge(n))}function ja(n,t,o){o===void 0&&(o=!1);const r=ot(n),l=tn(n),s=en(l);let a=l==="x"?r===(o?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=Ue(a)),[a,Ue(a)]}function Ka(n){const t=Ue(n);return[mt(n),t,mt(t)]}function mt(n){return n.replace(/start|end/g,t=>Ha[t])}const At=["left","right"],It=["right","left"],Wa=["top","bottom"],Ga=["bottom","top"];function qa(n,t,o){switch(n){case"top":case"bottom":return o?t?It:At:t?At:It;case"left":case"right":return t?Wa:Ga;default:return[]}}function Ya(n,t,o,r){const l=ot(n);let s=qa(be(n),o==="start",r);return l&&(s=s.map(a=>a+"-"+l),t&&(s=s.concat(s.map(mt)))),s}function Ue(n){return n.replace(/left|right|bottom|top/g,t=>za[t])}function Qa(n){return{top:0,right:0,bottom:0,left:0,...n}}function Xa(n){return typeof n!="number"?Qa(n):{top:n,right:n,bottom:n,left:n}}function je(n){const{x:t,y:o,width:r,height:l}=n;return{width:r,height:l,top:o,left:t,right:t+r,bottom:o+l,x:t,y:o}}function Ot(n,t,o){let{reference:r,floating:l}=n;const s=ge(t),a=tn(t),d=en(a),i=be(t),m=s==="y",c=r.x+r.width/2-l.width/2,u=r.y+r.height/2-l.height/2,p=r[d]/2-l[d]/2;let h;switch(i){case"top":h={x:c,y:r.y-l.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:u};break;case"left":h={x:r.x-l.width,y:u};break;default:h={x:r.x,y:r.y}}switch(ot(t)){case"start":h[a]-=p*(o&&m?-1:1);break;case"end":h[a]+=p*(o&&m?-1:1);break}return h}const Ja=async(n,t,o)=>{const{placement:r="bottom",strategy:l="absolute",middleware:s=[],platform:a}=o,d=s.filter(Boolean),i=await(a.isRTL==null?void 0:a.isRTL(t));let m=await a.getElementRects({reference:n,floating:t,strategy:l}),{x:c,y:u}=Ot(m,r,i),p=r,h={},V=0;for(let _=0;_<d.length;_++){const{name:v,fn:f}=d[_],{x:y,y:g,data:k,reset:C}=await f({x:c,y:u,initialPlacement:r,placement:p,strategy:l,middlewareData:h,rects:m,platform:a,elements:{reference:n,floating:t}});c=y??c,u=g??u,h={...h,[v]:{...h[v],...k}},C&&V<=50&&(V++,typeof C=="object"&&(C.placement&&(p=C.placement),C.rects&&(m=C.rects===!0?await a.getElementRects({reference:n,floating:t,strategy:l}):C.rects),{x:c,y:u}=Ot(m,p,i)),_=-1)}return{x:c,y:u,placement:p,strategy:l,middlewareData:h}};async function nn(n,t){var o;t===void 0&&(t={});const{x:r,y:l,platform:s,rects:a,elements:d,strategy:i}=n,{boundary:m="clippingAncestors",rootBoundary:c="viewport",elementContext:u="floating",altBoundary:p=!1,padding:h=0}=nt(t,n),V=Xa(h),v=d[p?u==="floating"?"reference":"floating":u],f=je(await s.getClippingRect({element:(o=await(s.isElement==null?void 0:s.isElement(v)))==null||o?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(d.floating)),boundary:m,rootBoundary:c,strategy:i})),y=u==="floating"?{x:r,y:l,width:a.floating.width,height:a.floating.height}:a.reference,g=await(s.getOffsetParent==null?void 0:s.getOffsetParent(d.floating)),k=await(s.isElement==null?void 0:s.isElement(g))?await(s.getScale==null?void 0:s.getScale(g))||{x:1,y:1}:{x:1,y:1},C=je(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:y,offsetParent:g,strategy:i}):y);return{top:(f.top-C.top+V.top)/k.y,bottom:(C.bottom-f.bottom+V.bottom)/k.y,left:(f.left-C.left+V.left)/k.x,right:(C.right-f.right+V.right)/k.x}}const Za=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(t){var o,r;const{placement:l,middlewareData:s,rects:a,initialPlacement:d,platform:i,elements:m}=t,{mainAxis:c=!0,crossAxis:u=!0,fallbackPlacements:p,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:V="none",flipAlignment:_=!0,...v}=nt(n,t);if((o=s.arrow)!=null&&o.alignmentOffset)return{};const f=be(l),y=ge(d),g=be(d)===d,k=await(i.isRTL==null?void 0:i.isRTL(m.floating)),C=p||(g||!_?[Ue(d)]:Ka(d)),x=V!=="none";!p&&x&&C.push(...Ya(d,_,V,k));const D=[d,...C],A=await nn(t,v),T=[];let U=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&T.push(A[f]),u){const K=ja(l,a,k);T.push(A[K[0]],A[K[1]])}if(U=[...U,{placement:l,overflows:T}],!T.every(K=>K<=0)){var W,X;const K=(((W=s.flip)==null?void 0:W.index)||0)+1,Y=D[K];if(Y&&(!(u==="alignment"?y!==ge(Y):!1)||U.every(w=>ge(w.placement)===y?w.overflows[0]>0:!0)))return{data:{index:K,overflows:U},reset:{placement:Y}};let R=(X=U.filter(b=>b.overflows[0]<=0).sort((b,w)=>b.overflows[1]-w.overflows[1])[0])==null?void 0:X.placement;if(!R)switch(h){case"bestFit":{var P;const b=(P=U.filter(w=>{if(x){const E=ge(w.placement);return E===y||E==="y"}return!0}).map(w=>[w.placement,w.overflows.filter(E=>E>0).reduce((E,N)=>E+N,0)]).sort((w,E)=>w[1]-E[1])[0])==null?void 0:P[0];b&&(R=b);break}case"initialPlacement":R=d;break}if(l!==R)return{reset:{placement:R}}}return{}}}},es=new Set(["left","top"]);async function ts(n,t){const{placement:o,platform:r,elements:l}=n,s=await(r.isRTL==null?void 0:r.isRTL(l.floating)),a=be(o),d=ot(o),i=ge(o)==="y",m=es.has(a)?-1:1,c=s&&i?-1:1,u=nt(t,n);let{mainAxis:p,crossAxis:h,alignmentAxis:V}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return d&&typeof V=="number"&&(h=d==="end"?V*-1:V),i?{x:h*c,y:p*m}:{x:p*m,y:h*c}}const ns=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(t){var o,r;const{x:l,y:s,placement:a,middlewareData:d}=t,i=await ts(t,n);return a===((o=d.offset)==null?void 0:o.placement)&&(r=d.arrow)!=null&&r.alignmentOffset?{}:{x:l+i.x,y:s+i.y,data:{...i,placement:a}}}}},os=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(t){const{x:o,y:r,placement:l}=t,{mainAxis:s=!0,crossAxis:a=!1,limiter:d={fn:v=>{let{x:f,y}=v;return{x:f,y}}},...i}=nt(n,t),m={x:o,y:r},c=await nn(t,i),u=ge(be(l)),p=Zt(u);let h=m[p],V=m[u];if(s){const v=p==="y"?"top":"left",f=p==="y"?"bottom":"right",y=h+c[v],g=h-c[f];h=Mt(y,h,g)}if(a){const v=u==="y"?"top":"left",f=u==="y"?"bottom":"right",y=V+c[v],g=V-c[f];V=Mt(y,V,g)}const _=d.fn({...t,[p]:h,[u]:V});return{..._,data:{x:_.x-o,y:_.y-r,enabled:{[p]:s,[u]:a}}}}}};function rt(){return typeof window<"u"}function Be(n){return on(n)?(n.nodeName||"").toLowerCase():"#document"}function ae(n){var t;return(n==null||(t=n.ownerDocument)==null?void 0:t.defaultView)||window}function pe(n){var t;return(t=(on(n)?n.ownerDocument:n.document)||window.document)==null?void 0:t.documentElement}function on(n){return rt()?n instanceof Node||n instanceof ae(n).Node:!1}function ie(n){return rt()?n instanceof Element||n instanceof ae(n).Element:!1}function me(n){return rt()?n instanceof HTMLElement||n instanceof ae(n).HTMLElement:!1}function Lt(n){return!rt()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof ae(n).ShadowRoot}const rs=new Set(["inline","contents"]);function Ae(n){const{overflow:t,overflowX:o,overflowY:r,display:l}=ce(n);return/auto|scroll|overlay|hidden|clip/.test(t+r+o)&&!rs.has(l)}const ls=new Set(["table","td","th"]);function as(n){return ls.has(Be(n))}const ss=[":popover-open",":modal"];function lt(n){return ss.some(t=>{try{return n.matches(t)}catch{return!1}})}const is=["transform","translate","scale","rotate","perspective"],cs=["transform","translate","scale","rotate","perspective","filter"],ds=["paint","layout","strict","content"];function Et(n){const t=Vt(),o=ie(n)?ce(n):n;return is.some(r=>o[r]?o[r]!=="none":!1)||(o.containerType?o.containerType!=="normal":!1)||!t&&(o.backdropFilter?o.backdropFilter!=="none":!1)||!t&&(o.filter?o.filter!=="none":!1)||cs.some(r=>(o.willChange||"").includes(r))||ds.some(r=>(o.contain||"").includes(r))}function us(n){let t=we(n);for(;me(t)&&!Se(t);){if(Et(t))return t;if(lt(t))return null;t=we(t)}return null}function Vt(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const ms=new Set(["html","body","#document"]);function Se(n){return ms.has(Be(n))}function ce(n){return ae(n).getComputedStyle(n)}function at(n){return ie(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function we(n){if(Be(n)==="html")return n;const t=n.assignedSlot||n.parentNode||Lt(n)&&n.host||pe(n);return Lt(t)?t.host:t}function rn(n){const t=we(n);return Se(t)?n.ownerDocument?n.ownerDocument.body:n.body:me(t)&&Ae(t)?t:rn(t)}function Fe(n,t,o){var r;t===void 0&&(t=[]),o===void 0&&(o=!0);const l=rn(n),s=l===((r=n.ownerDocument)==null?void 0:r.body),a=ae(l);if(s){const d=ft(a);return t.concat(a,a.visualViewport||[],Ae(l)?l:[],d&&o?Fe(d):[])}return t.concat(l,Fe(l,[],o))}function ft(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function ln(n){const t=ce(n);let o=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const l=me(n),s=l?n.offsetWidth:o,a=l?n.offsetHeight:r,d=He(o)!==s||He(r)!==a;return d&&(o=s,r=a),{width:o,height:r,$:d}}function Nt(n){return ie(n)?n:n.contextElement}function xe(n){const t=Nt(n);if(!me(t))return ue(1);const o=t.getBoundingClientRect(),{width:r,height:l,$:s}=ln(t);let a=(s?He(o.width):o.width)/r,d=(s?He(o.height):o.height)/l;return(!a||!Number.isFinite(a))&&(a=1),(!d||!Number.isFinite(d))&&(d=1),{x:a,y:d}}const fs=ue(0);function an(n){const t=ae(n);return!Vt()||!t.visualViewport?fs:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function ps(n,t,o){return t===void 0&&(t=!1),!o||t&&o!==ae(n)?!1:t}function Ee(n,t,o,r){t===void 0&&(t=!1),o===void 0&&(o=!1);const l=n.getBoundingClientRect(),s=Nt(n);let a=ue(1);t&&(r?ie(r)&&(a=xe(r)):a=xe(n));const d=ps(s,o,r)?an(s):ue(0);let i=(l.left+d.x)/a.x,m=(l.top+d.y)/a.y,c=l.width/a.x,u=l.height/a.y;if(s){const p=ae(s),h=r&&ie(r)?ae(r):r;let V=p,_=ft(V);for(;_&&r&&h!==V;){const v=xe(_),f=_.getBoundingClientRect(),y=ce(_),g=f.left+(_.clientLeft+parseFloat(y.paddingLeft))*v.x,k=f.top+(_.clientTop+parseFloat(y.paddingTop))*v.y;i*=v.x,m*=v.y,c*=v.x,u*=v.y,i+=g,m+=k,V=ae(_),_=ft(V)}}return je({width:c,height:u,x:i,y:m})}function st(n,t){const o=at(n).scrollLeft;return t?t.left+o:Ee(pe(n)).left+o}function sn(n,t){const o=n.getBoundingClientRect(),r=o.left+t.scrollLeft-st(n,o),l=o.top+t.scrollTop;return{x:r,y:l}}function vs(n){let{elements:t,rect:o,offsetParent:r,strategy:l}=n;const s=l==="fixed",a=pe(r),d=t?lt(t.floating):!1;if(r===a||d&&s)return o;let i={scrollLeft:0,scrollTop:0},m=ue(1);const c=ue(0),u=me(r);if((u||!u&&!s)&&((Be(r)!=="body"||Ae(a))&&(i=at(r)),me(r))){const h=Ee(r);m=xe(r),c.x=h.x+r.clientLeft,c.y=h.y+r.clientTop}const p=a&&!u&&!s?sn(a,i):ue(0);return{width:o.width*m.x,height:o.height*m.y,x:o.x*m.x-i.scrollLeft*m.x+c.x+p.x,y:o.y*m.y-i.scrollTop*m.y+c.y+p.y}}function _s(n){return Array.from(n.getClientRects())}function hs(n){const t=pe(n),o=at(n),r=n.ownerDocument.body,l=ke(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=ke(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-o.scrollLeft+st(n);const d=-o.scrollTop;return ce(r).direction==="rtl"&&(a+=ke(t.clientWidth,r.clientWidth)-l),{width:l,height:s,x:a,y:d}}const Rt=25;function gs(n,t){const o=ae(n),r=pe(n),l=o.visualViewport;let s=r.clientWidth,a=r.clientHeight,d=0,i=0;if(l){s=l.width,a=l.height;const c=Vt();(!c||c&&t==="fixed")&&(d=l.offsetLeft,i=l.offsetTop)}const m=st(r);if(m<=0){const c=r.ownerDocument,u=c.body,p=getComputedStyle(u),h=c.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,V=Math.abs(r.clientWidth-u.clientWidth-h);V<=Rt&&(s-=V)}else m<=Rt&&(s+=m);return{width:s,height:a,x:d,y:i}}const ws=new Set(["absolute","fixed"]);function ys(n,t){const o=Ee(n,!0,t==="fixed"),r=o.top+n.clientTop,l=o.left+n.clientLeft,s=me(n)?xe(n):ue(1),a=n.clientWidth*s.x,d=n.clientHeight*s.y,i=l*s.x,m=r*s.y;return{width:a,height:d,x:i,y:m}}function Pt(n,t,o){let r;if(t==="viewport")r=gs(n,o);else if(t==="document")r=hs(pe(n));else if(ie(t))r=ys(t,o);else{const l=an(n);r={x:t.x-l.x,y:t.y-l.y,width:t.width,height:t.height}}return je(r)}function cn(n,t){const o=we(n);return o===t||!ie(o)||Se(o)?!1:ce(o).position==="fixed"||cn(o,t)}function ks(n,t){const o=t.get(n);if(o)return o;let r=Fe(n,[],!1).filter(d=>ie(d)&&Be(d)!=="body"),l=null;const s=ce(n).position==="fixed";let a=s?we(n):n;for(;ie(a)&&!Se(a);){const d=ce(a),i=Et(a);!i&&d.position==="fixed"&&(l=null),(s?!i&&!l:!i&&d.position==="static"&&!!l&&ws.has(l.position)||Ae(a)&&!i&&cn(n,a))?r=r.filter(c=>c!==a):l=d,a=we(a)}return t.set(n,r),r}function bs(n){let{element:t,boundary:o,rootBoundary:r,strategy:l}=n;const a=[...o==="clippingAncestors"?lt(t)?[]:ks(t,this._c):[].concat(o),r],d=a[0],i=a.reduce((m,c)=>{const u=Pt(t,c,l);return m.top=ke(u.top,m.top),m.right=ze(u.right,m.right),m.bottom=ze(u.bottom,m.bottom),m.left=ke(u.left,m.left),m},Pt(t,d,l));return{width:i.right-i.left,height:i.bottom-i.top,x:i.left,y:i.top}}function Es(n){const{width:t,height:o}=ln(n);return{width:t,height:o}}function Vs(n,t,o){const r=me(t),l=pe(t),s=o==="fixed",a=Ee(n,!0,s,t);let d={scrollLeft:0,scrollTop:0};const i=ue(0);function m(){i.x=st(l)}if(r||!r&&!s)if((Be(t)!=="body"||Ae(l))&&(d=at(t)),r){const h=Ee(t,!0,s,t);i.x=h.x+t.clientLeft,i.y=h.y+t.clientTop}else l&&m();s&&!r&&l&&m();const c=l&&!r&&!s?sn(l,d):ue(0),u=a.left+d.scrollLeft-i.x-c.x,p=a.top+d.scrollTop-i.y-c.y;return{x:u,y:p,width:a.width,height:a.height}}function dt(n){return ce(n).position==="static"}function zt(n,t){if(!me(n)||ce(n).position==="fixed")return null;if(t)return t(n);let o=n.offsetParent;return pe(n)===o&&(o=o.ownerDocument.body),o}function dn(n,t){const o=ae(n);if(lt(n))return o;if(!me(n)){let l=we(n);for(;l&&!Se(l);){if(ie(l)&&!dt(l))return l;l=we(l)}return o}let r=zt(n,t);for(;r&&as(r)&&dt(r);)r=zt(r,t);return r&&Se(r)&&dt(r)&&!Et(r)?o:r||us(n)||o}const Ns=async function(n){const t=this.getOffsetParent||dn,o=this.getDimensions,r=await o(n.floating);return{reference:Vs(n.reference,await t(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function xs(n){return ce(n).direction==="rtl"}const Cs={convertOffsetParentRelativeRectToViewportRelativeRect:vs,getDocumentElement:pe,getClippingRect:bs,getOffsetParent:dn,getElementRects:Ns,getClientRects:_s,getDimensions:Es,getScale:xe,isElement:ie,isRTL:xs};function un(n,t){return n.x===t.x&&n.y===t.y&&n.width===t.width&&n.height===t.height}function Ss(n,t){let o=null,r;const l=pe(n);function s(){var d;clearTimeout(r),(d=o)==null||d.disconnect(),o=null}function a(d,i){d===void 0&&(d=!1),i===void 0&&(i=1),s();const m=n.getBoundingClientRect(),{left:c,top:u,width:p,height:h}=m;if(d||t(),!p||!h)return;const V=Re(u),_=Re(l.clientWidth-(c+p)),v=Re(l.clientHeight-(u+h)),f=Re(c),g={rootMargin:-V+"px "+-_+"px "+-v+"px "+-f+"px",threshold:ke(0,ze(1,i))||1};let k=!0;function C(x){const D=x[0].intersectionRatio;if(D!==i){if(!k)return a();D?a(!1,D):r=setTimeout(()=>{a(!1,1e-7)},1e3)}D===1&&!un(m,n.getBoundingClientRect())&&a(),k=!1}try{o=new IntersectionObserver(C,{...g,root:l.ownerDocument})}catch{o=new IntersectionObserver(C,g)}o.observe(n)}return a(!0),s}function mn(n,t,o,r){r===void 0&&(r={});const{ancestorScroll:l=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:i=!1}=r,m=Nt(n),c=l||s?[...m?Fe(m):[],...Fe(t)]:[];c.forEach(f=>{l&&f.addEventListener("scroll",o,{passive:!0}),s&&f.addEventListener("resize",o)});const u=m&&d?Ss(m,o):null;let p=-1,h=null;a&&(h=new ResizeObserver(f=>{let[y]=f;y&&y.target===m&&h&&(h.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var g;(g=h)==null||g.observe(t)})),o()}),m&&!i&&h.observe(m),h.observe(t));let V,_=i?Ee(n):null;i&&v();function v(){const f=Ee(n);_&&!un(_,f)&&o(),_=f,V=requestAnimationFrame(v)}return o(),()=>{var f;c.forEach(y=>{l&&y.removeEventListener("scroll",o),s&&y.removeEventListener("resize",o)}),u?.(),(f=h)==null||f.disconnect(),h=null,i&&cancelAnimationFrame(V)}}const Ke=ns,We=os,Ge=Za,qe=(n,t,o)=>{const r=new Map,l={platform:Cs,...o},s={...l.platform,_c:r};return Ja(n,t,{...l,platform:s})},Bs=["disabled","title"],$s=["data-theme"],Ds={class:"vuefinder__search-modal__dropdown-content"},Ts={class:"vuefinder__search-modal__dropdown-section"},Fs={class:"vuefinder__search-modal__dropdown-title"},Ms={class:"vuefinder__search-modal__dropdown-options"},As={key:0,class:"vuefinder__search-modal__dropdown-option-check"},Is={key:0,class:"vuefinder__search-modal__dropdown-option-check"},Os={key:0,class:"vuefinder__search-modal__dropdown-option-check"},Ls={key:0,class:"vuefinder__search-modal__dropdown-option-check"},Rs=e.defineComponent({name:"SearchOptionsDropdown",__name:"SearchOptionsDropdown",props:{visible:{type:Boolean},disabled:{type:Boolean,default:!1},sizeFilter:{},selectedOption:{}},emits:["update:visible","update:sizeFilter","update:selectedOption","keydown"],setup(n,{expose:t,emit:o}){const r=n,l=o,s=e.inject("ServiceContainer"),{t:a}=s.i18n,d=e.ref(null),i=e.ref(null);let m=null;const c=_=>{if(l("update:selectedOption",_),_.startsWith("size-")){const v=_.split("-")[1];l("update:sizeFilter",v)}},u=async()=>{r.disabled||(r.visible?(l("update:visible",!1),m&&(m(),m=null)):(l("update:visible",!0),await e.nextTick(),await p()))},p=async()=>{if(!(!d.value||!i.value)&&(await e.nextTick(),!(!d.value||!i.value))){Object.assign(i.value.style,{position:"fixed",zIndex:"10001",opacity:"0",transform:"translateY(-8px)",transition:"opacity 150ms ease-out, transform 150ms ease-out"});try{const{x:_,y:v}=await qe(d.value,i.value,{placement:"bottom-start",strategy:"fixed",middleware:[Ke(8),Ge({padding:16}),We({padding:16})]});Object.assign(i.value.style,{left:`${_}px`,top:`${v}px`}),requestAnimationFrame(()=>{i.value&&Object.assign(i.value.style,{opacity:"1",transform:"translateY(0)"})})}catch(_){console.warn("Floating UI initial positioning error:",_);return}try{m=mn(d.value,i.value,async()=>{if(!(!d.value||!i.value))try{const{x:_,y:v}=await qe(d.value,i.value,{placement:"bottom-start",strategy:"fixed",middleware:[Ke(8),Ge({padding:16}),We({padding:16})]});Object.assign(i.value.style,{left:`${_}px`,top:`${v}px`})}catch(_){console.warn("Floating UI positioning error:",_)}})}catch(_){console.warn("Floating UI autoUpdate setup error:",_),m=null}}},h=_=>{if(!r.visible)return;const v=["size-all","size-small","size-medium","size-large"],f=v.findIndex(y=>y===r.selectedOption);if(_.key==="ArrowDown"){_.preventDefault();const y=(f+1)%v.length;l("update:selectedOption",v[y]||null)}else if(_.key==="ArrowUp"){_.preventDefault();const y=f<=0?v.length-1:f-1;l("update:selectedOption",v[y]||null)}else _.key==="Enter"?(_.preventDefault(),r.selectedOption?.startsWith("size-")&&l("update:sizeFilter",r.selectedOption.split("-")[1])):_.key==="Escape"&&(_.preventDefault(),l("update:visible",!1),m&&(m(),m=null))},V=()=>{m&&(m(),m=null)};return e.watch(()=>r.visible,_=>{!_&&m&&(m(),m=null)}),e.onUnmounted(()=>{V()}),t({cleanup:V}),(_,v)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("button",{ref_key:"dropdownBtn",ref:d,onClick:e.withModifiers(u,["stop"]),class:e.normalizeClass(["vuefinder__search-modal__dropdown-btn",{"vuefinder__search-modal__dropdown-btn--active":n.visible}]),disabled:n.disabled,title:e.unref(a)("Search Options")},[e.createVNode(e.unref(qt),{class:"vuefinder__search-modal__dropdown-icon"})],10,Bs),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[n.visible?(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"dropdownContent",ref:i,class:"vuefinder__themer vuefinder__search-modal__dropdown vuefinder__search-modal__dropdown--visible","data-theme":e.unref(s).theme.current,onClick:v[4]||(v[4]=e.withModifiers(()=>{},["stop"])),onKeydown:h,tabindex:"-1"},[e.createElementVNode("div",Ds,[e.createElementVNode("div",Ts,[e.createElementVNode("div",Fs,e.toDisplayString(e.unref(a)("File Size")),1),e.createElementVNode("div",Ms,[e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__search-modal__dropdown-option",{"vuefinder__search-modal__dropdown-option--selected":n.sizeFilter==="all"}]),onClick:v[0]||(v[0]=e.withModifiers(f=>c("size-all"),["stop"]))},[e.createElementVNode("span",null,e.toDisplayString(e.unref(a)("All Files")),1),n.sizeFilter==="all"?(e.openBlock(),e.createElementBlock("div",As,[...v[5]||(v[5]=[e.createElementVNode("svg",{viewBox:"0 0 16 16",fill:"currentColor"},[e.createElementVNode("path",{d:"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"})],-1)])])):e.createCommentVNode("",!0)],2),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__search-modal__dropdown-option",{"vuefinder__search-modal__dropdown-option--selected":n.sizeFilter==="small"}]),onClick:v[1]||(v[1]=e.withModifiers(f=>c("size-small"),["stop"]))},[e.createElementVNode("span",null,e.toDisplayString(e.unref(a)("Small (< 1MB)")),1),n.sizeFilter==="small"?(e.openBlock(),e.createElementBlock("div",Is,[...v[6]||(v[6]=[e.createElementVNode("svg",{viewBox:"0 0 16 16",fill:"currentColor"},[e.createElementVNode("path",{d:"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"})],-1)])])):e.createCommentVNode("",!0)],2),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__search-modal__dropdown-option",{"vuefinder__search-modal__dropdown-option--selected":n.sizeFilter==="medium"}]),onClick:v[2]||(v[2]=e.withModifiers(f=>c("size-medium"),["stop"]))},[e.createElementVNode("span",null,e.toDisplayString(e.unref(a)("Medium (1-10MB)")),1),n.sizeFilter==="medium"?(e.openBlock(),e.createElementBlock("div",Os,[...v[7]||(v[7]=[e.createElementVNode("svg",{viewBox:"0 0 16 16",fill:"currentColor"},[e.createElementVNode("path",{d:"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"})],-1)])])):e.createCommentVNode("",!0)],2),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__search-modal__dropdown-option",{"vuefinder__search-modal__dropdown-option--selected":n.sizeFilter==="large"}]),onClick:v[3]||(v[3]=e.withModifiers(f=>c("size-large"),["stop"]))},[e.createElementVNode("span",null,e.toDisplayString(e.unref(a)("Large (> 10MB)")),1),n.sizeFilter==="large"?(e.openBlock(),e.createElementBlock("div",Ls,[...v[8]||(v[8]=[e.createElementVNode("svg",{viewBox:"0 0 16 16",fill:"currentColor"},[e.createElementVNode("path",{d:"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"})],-1)])])):e.createCommentVNode("",!0)],2)])])])],40,$s)):e.createCommentVNode("",!0)]))],64))}});function Ps(n){const[t,o]=zs(n);if(!o||o==="/")return t+"://";const r=o.replace(/\/+$/,""),l=r.lastIndexOf("/");return l===0?t+"://":t+":/"+r.slice(0,l)}function zs(n){const t=n.indexOf(":/");return t===-1?[void 0,n]:[n.slice(0,t),n.slice(t+2)||"/"]}function fn(n,t=40){const o=n.match(/^([^:]+:\/\/)(.*)$/);if(!o)return n;const r=o[1],l=o[2]??"",s=l.split("/").filter(Boolean),a=s.pop();if(!a)return r+l;let d=`${r}${s.join("/")}${s.length?"/":""}${a}`;if(d.length<=t)return d;const i=a.split(/\.(?=[^\.]+$)/),m=i[0]??"",c=i[1]??"",u=m.length>10?`${m.slice(0,6)}...${m.slice(-5)}`:m,p=c?`${u}.${c}`:u;return d=`${r}${s.join("/")}${s.length?"/":""}${p}`,d.length>t&&(d=`${r}.../${p}`),d}async function pn(n){try{await navigator.clipboard.writeText(n)}catch{const o=document.createElement("textarea");o.value=n,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o)}}async function Me(n){await pn(n)}async function Hs(n){await pn(n)}const Us={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 448 512"};function js(n,t){return e.openBlock(),e.createElementBlock("svg",Us,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M8 256a56 56 0 1 1 112 0 56 56 0 1 1-112 0m160 0a56 56 0 1 1 112 0 56 56 0 1 1-112 0m216-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112"},null,-1)])])}const vn={render:js},Ks=["title"],Ws={class:"vuefinder__search-modal__result-icon"},Gs={class:"vuefinder__search-modal__result-content"},qs={class:"vuefinder__search-modal__result-name"},Ys={key:0,class:"vuefinder__search-modal__result-size"},Qs=["title"],Xs=["title"],Js=["data-item-dropdown","data-theme"],Zs={class:"vuefinder__search-modal__item-dropdown-content"},ei=e.defineComponent({name:"SearchResultItem",__name:"SearchResultItem",props:{item:{},index:{},selectedIndex:{},expandedPaths:{},activeDropdown:{},selectedItemDropdownOption:{}},emits:["select","selectWithDropdown","togglePathExpansion","toggleItemDropdown","update:selectedItemDropdownOption","copyPath","openContainingFolder","preview"],setup(n,{emit:t}){const o=n,r=t,l=e.inject("ServiceContainer"),{t:s}=l.i18n,a=e.ref(null);let d=null;e.watch(()=>o.activeDropdown,f=>{d&&(d(),d=null),f===o.item.path&&a.value&&e.nextTick(()=>{u(o.item.path,a.value)})}),e.onUnmounted(()=>{d&&(d(),d=null)});const i=f=>o.expandedPaths.has(f),m=f=>f.type==="dir"||!f.file_size?"":vt(f.file_size),c=(f,y)=>{y.stopPropagation(),r("toggleItemDropdown",f,y)},u=async(f,y)=>{const g=document.querySelector(`[data-item-dropdown="${f}"]`);if(!(!g||!y)&&(await e.nextTick(),!(!g||!y))){Object.assign(g.style,{position:"fixed",zIndex:"10001",opacity:"0",transform:"translateY(-8px)",transition:"opacity 150ms ease-out, transform 150ms ease-out"});try{const{x:k,y:C}=await qe(y,g,{placement:"left-start",strategy:"fixed",middleware:[Ke(8),Ge({padding:16}),We({padding:16})]});Object.assign(g.style,{left:`${k}px`,top:`${C}px`}),requestAnimationFrame(()=>{g&&Object.assign(g.style,{opacity:"1",transform:"translateY(0)"})})}catch(k){console.warn("Floating UI initial positioning error:",k);return}try{d=mn(y,g,async()=>{if(!(!y||!g))try{const{x:k,y:C}=await qe(y,g,{placement:"left-start",strategy:"fixed",middleware:[Ke(8),Ge({padding:16}),We({padding:16})]});Object.assign(g.style,{left:`${k}px`,top:`${C}px`})}catch(k){console.warn("Floating UI positioning error:",k)}})}catch(k){console.warn("Floating UI autoUpdate setup error:",k),d=null}}},p=f=>{r("update:selectedItemDropdownOption",f)},h=async f=>{await Me(f.path),r("copyPath",f)},V=f=>{r("openContainingFolder",f)},_=f=>{r("preview",f)},v=f=>{if(!o.activeDropdown)return;const y=["copy-path","open-folder","preview"],g=o.selectedItemDropdownOption,k=y.findIndex(C=>g?.includes(C));if(f.key==="ArrowDown"){f.preventDefault();const C=(k+1)%y.length;r("update:selectedItemDropdownOption",`${y[C]||""}-${o.activeDropdown}`)}else if(f.key==="ArrowUp"){f.preventDefault();const C=k<=0?y.length-1:k-1;r("update:selectedItemDropdownOption",`${y[C]||""}-${o.activeDropdown}`)}else f.key==="Enter"?(f.preventDefault(),g&&(g.includes("copy-path")?h(o.item):g.includes("open-folder")?V(o.item):g.includes("preview")&&_(o.item))):f.key==="Escape"&&(f.preventDefault(),r("update:selectedItemDropdownOption",null))};return(f,y)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__search-modal__result-item",{"vuefinder__search-modal__result-item--selected":n.index===n.selectedIndex}]),title:n.item.basename,onClick:y[9]||(y[9]=g=>r("select",n.index))},[e.createElementVNode("div",Ws,[n.item.type==="dir"?(e.openBlock(),e.createBlock(e.unref(_e),{key:0})):(e.openBlock(),e.createBlock(e.unref(Pe),{key:1}))]),e.createElementVNode("div",Gs,[e.createElementVNode("div",qs,[e.createTextVNode(e.toDisplayString(n.item.basename)+" ",1),m(n.item)?(e.openBlock(),e.createElementBlock("span",Ys,e.toDisplayString(m(n.item)),1)):e.createCommentVNode("",!0)]),e.createElementVNode("div",{class:"vuefinder__search-modal__result-path",onClick:y[0]||(y[0]=e.withModifiers(g=>{r("select",n.index),r("togglePathExpansion",n.item.path)},["stop"])),title:n.item.path},e.toDisplayString(i(n.item.path)?n.item.path:e.unref(fn)(n.item.path)),9,Qs)]),e.createElementVNode("button",{ref_key:"buttonElementRef",ref:a,class:"vuefinder__search-modal__result-actions",onClick:y[1]||(y[1]=g=>{r("selectWithDropdown",n.index),c(n.item.path,g)}),title:e.unref(s)("More actions")},[e.createVNode(e.unref(vn),{class:"vuefinder__search-modal__result-actions-icon"})],8,Xs),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[n.activeDropdown===n.item.path?(e.openBlock(),e.createElementBlock("div",{key:0,"data-item-dropdown":n.item.path,class:"vuefinder__themer vuefinder__search-modal__item-dropdown vuefinder__search-modal__item-dropdown--visible","data-theme":e.unref(l).theme.current,onClick:y[8]||(y[8]=e.withModifiers(()=>{},["stop"])),onKeydown:v,tabindex:"-1"},[e.createElementVNode("div",Zs,[e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__search-modal__item-dropdown-option",{"vuefinder__search-modal__item-dropdown-option--selected":n.selectedItemDropdownOption===`copy-path-${n.item.path}`}]),onClick:y[2]||(y[2]=g=>{p(`copy-path-${n.item.path}`),h(n.item)}),onFocus:y[3]||(y[3]=g=>p(`copy-path-${n.item.path}`))},[y[10]||(y[10]=e.createElementVNode("svg",{class:"vuefinder__search-modal__item-dropdown-icon",viewBox:"0 0 16 16",fill:"currentColor"},[e.createElementVNode("path",{d:"M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H6z"}),e.createElementVNode("path",{d:"M2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1H2z"})],-1)),e.createElementVNode("span",null,e.toDisplayString(e.unref(s)("Copy Path")),1)],34),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__search-modal__item-dropdown-option",{"vuefinder__search-modal__item-dropdown-option--selected":n.selectedItemDropdownOption===`open-folder-${n.item.path}`}]),onClick:y[4]||(y[4]=g=>{p(`open-folder-${n.item.path}`),V(n.item)}),onFocus:y[5]||(y[5]=g=>p(`open-folder-${n.item.path}`))},[e.createVNode(e.unref(_e),{class:"vuefinder__search-modal__item-dropdown-icon"}),e.createElementVNode("span",null,e.toDisplayString(e.unref(s)("Open Containing Folder")),1)],34),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__search-modal__item-dropdown-option",{"vuefinder__search-modal__item-dropdown-option--selected":n.selectedItemDropdownOption===`preview-${n.item.path}`}]),onClick:y[6]||(y[6]=g=>{p(`preview-${n.item.path}`),_(n.item)}),onFocus:y[7]||(y[7]=g=>p(`preview-${n.item.path}`))},[e.createVNode(e.unref(Pe),{class:"vuefinder__search-modal__item-dropdown-icon"}),e.createElementVNode("span",null,e.toDisplayString(e.unref(s)("Preview")),1)],34)])],40,Js)):e.createCommentVNode("",!0)]))],10,Ks))}}),ti={key:0,class:"vuefinder__search-modal__searching"},ni={class:"vuefinder__search-modal__loading-icon"},oi={key:1,class:"vuefinder__search-modal__no-results"},ri={key:2,class:"vuefinder__search-modal__results-list"},li={class:"vuefinder__search-modal__results-header"},ye=60,Ht=5,ai=e.defineComponent({name:"SearchResultsList",__name:"SearchResultsList",props:{searchResults:{},isSearching:{type:Boolean},selectedIndex:{},expandedPaths:{},activeDropdown:{},selectedItemDropdownOption:{},resultsEnter:{type:Boolean}},emits:["selectResultItem","selectResultItemWithDropdown","togglePathExpansion","toggleItemDropdown","update:selectedItemDropdownOption","copyPath","openContainingFolder","preview"],setup(n,{expose:t,emit:o}){const r=n,l=o,s=e.inject("ServiceContainer"),{t:a}=s.i18n,d=e.useTemplateRef("scrollableContainer"),i=e.computed(()=>r.searchResults.length>0),m=e.computed(()=>r.searchResults.length),c=e.ref(0),u=e.ref(600),p=e.computed(()=>r.searchResults.length*ye),h=e.computed(()=>{const g=Math.max(0,Math.floor(c.value/ye)-Ht),k=Math.min(r.searchResults.length,Math.ceil((c.value+u.value)/ye)+Ht);return{start:g,end:k}}),V=e.computed(()=>{const{start:g,end:k}=h.value;return r.searchResults.slice(g,k).map((C,x)=>({item:C,index:g+x,top:(g+x)*ye}))}),_=g=>{const k=g.target;c.value=k.scrollTop},v=()=>{d.value&&(u.value=d.value.clientHeight)},f=()=>{if(r.selectedIndex>=0&&d.value){const g=r.selectedIndex*ye,k=g+ye,C=d.value.scrollTop,x=d.value.clientHeight,D=C+x;let A=C;g<C?A=g:k>D&&(A=k-x),A!==C&&d.value.scrollTo({top:A,behavior:"smooth"})}},y=()=>{d.value&&(d.value.scrollTop=0,c.value=0)};return e.onMounted(()=>{v(),window.addEventListener("resize",v)}),e.onUnmounted(()=>{window.removeEventListener("resize",v)}),e.watch(()=>d.value,()=>{v()}),t({scrollSelectedIntoView:f,resetScroll:y,getContainerHeight:()=>u.value,scrollTop:()=>c.value}),(g,k)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__search-modal__results",{"vuefinder__search-modal__results--enter":n.resultsEnter}])},[n.isSearching?(e.openBlock(),e.createElementBlock("div",ti,[e.createElementVNode("div",ni,[e.createVNode(e.unref(tt),{class:"vuefinder__search-modal__loading-icon"})]),e.createElementVNode("span",null,e.toDisplayString(e.unref(a)("Searching...")),1)])):i.value?(e.openBlock(),e.createElementBlock("div",ri,[e.createElementVNode("div",li,[e.createElementVNode("span",null,e.toDisplayString(e.unref(a)("Found %s results",m.value)),1)]),e.createElementVNode("div",{ref_key:"scrollableContainer",ref:d,class:"vuefinder__search-modal__results-scrollable",onScroll:_},[e.createElementVNode("div",{class:"vuefinder__search-modal__results-items",style:e.normalizeStyle({height:`${p.value}px`,position:"relative"})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(V.value,C=>(e.openBlock(),e.createElementBlock("div",{key:C.item.path,style:e.normalizeStyle({position:"absolute",top:`${C.top}px`,left:"0",width:"100%",height:`${ye}px`})},[e.createVNode(ei,{item:C.item,index:C.index,"selected-index":n.selectedIndex,"expanded-paths":n.expandedPaths,"active-dropdown":n.activeDropdown,"selected-item-dropdown-option":n.selectedItemDropdownOption,onSelect:k[0]||(k[0]=x=>l("selectResultItem",x)),onSelectWithDropdown:k[1]||(k[1]=x=>l("selectResultItemWithDropdown",x)),onTogglePathExpansion:k[2]||(k[2]=x=>l("togglePathExpansion",x)),onToggleItemDropdown:k[3]||(k[3]=(x,D)=>l("toggleItemDropdown",x,D)),"onUpdate:selectedItemDropdownOption":k[4]||(k[4]=x=>l("update:selectedItemDropdownOption",x)),onCopyPath:k[5]||(k[5]=x=>l("copyPath",x)),onOpenContainingFolder:k[6]||(k[6]=x=>l("openContainingFolder",x)),onPreview:k[7]||(k[7]=x=>l("preview",x))},null,8,["item","index","selected-index","expanded-paths","active-dropdown","selected-item-dropdown-option"])],4))),128))],4)],544)])):(e.openBlock(),e.createElementBlock("div",oi,[e.createElementVNode("span",null,e.toDisplayString(e.unref(a)("No results found")),1)]))],2))}}),si={class:"vuefinder__search-modal"},ii={class:"vuefinder__search-modal__content"},ci={class:"vuefinder__search-modal__search-bar"},di={class:"vuefinder__search-modal__search-location"},ui=["title"],mi=["disabled"],fi={key:0,class:"vuefinder__search-modal__folder-selector"},pi={class:"vuefinder__search-modal__folder-selector-content"},vi={key:1,class:"vuefinder__search-modal__instructions"},_i={class:"vuefinder__search-modal__instructions-tips"},hi={class:"vuefinder__search-modal__tip"},gi={class:"vuefinder__search-modal__tip"},xt=e.defineComponent({name:"ModalSearch",__name:"ModalSearch",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=e.ref(null),s=e.ref(null),a=e.ref(null),d=Jt("",300),i=e.ref([]),m=e.ref(!1),c=e.ref(-1),u=e.ref(!1),p=e.ref(!1),h=e.ref(null),V=e.ref("all"),_=e.ref(!1),v=e.ref(`size-${V.value}`),f=e.ref(null),y=e.ref(new Set),g=e.ref(null),k=O.useStore(r.path),C=w=>{y.value.has(w)?y.value.delete(w):y.value.add(w)},x=(w,E)=>{E&&typeof E.stopPropagation=="function"&&E.stopPropagation(),g.value===w?g.value=null:g.value=w},D=()=>{g.value=null},A=w=>{try{const E=w.dir||`${w.storage}://`;t.adapter.open(E),t.modal.close(),D()}catch{t.emitter.emit("vf-toast-push",{label:o("Failed to open containing folder")})}},T=w=>{t.modal.open(Je,{storage:k?.value?.storage??"local",item:w}),D()},U=w=>{c.value=w,D()},W=w=>{c.value=w},X=async w=>{await Me(w.path),D()};e.watch(d,async w=>{w.trim()?(await P(w.trim()),c.value=0):(i.value=[],m.value=!1,c.value=-1)}),e.watch(V,async w=>{v.value=`size-${w}`,d.value.trim()&&!p.value&&(await P(d.value.trim()),c.value=0)}),e.watch(_,async()=>{d.value.trim()&&!p.value&&(await P(d.value.trim()),c.value=0)});const P=async w=>{if(w){m.value=!0;try{const E=h.value?.path||k?.value?.path,N=await t.adapter.search({path:E,filter:w,deep:_.value,size:V.value});i.value=N||[],m.value=!1}catch(E){console.error("Search error:",E),i.value=[],m.value=!1}}};e.onMounted(()=>{document.addEventListener("click",b),v.value=`size-${V.value}`,e.nextTick(()=>{l.value&&l.value.focus()})});const K=()=>{p.value?(p.value=!1,d.value.trim()&&(P(d.value.trim()),c.value=0)):(u.value=!1,p.value=!0)},Y=w=>{w&&(h.value=w)},R=w=>{w&&(Y(w),p.value=!1,d.value.trim()&&(P(d.value.trim()),c.value=0))};e.onUnmounted(()=>{document.removeEventListener("click",b),s.value&&s.value.cleanup()});const b=w=>{const E=w.target;if(u.value&&(E.closest(".vuefinder__search-modal__dropdown")||(u.value=!1,e.nextTick(()=>{l.value&&l.value.focus()}))),g.value){const N=E.closest(".vuefinder__search-modal__item-dropdown"),F=E.closest(".vuefinder__search-modal__result-item");!N&&!F&&D()}};return(w,E)=>(e.openBlock(),e.createBlock(de,{class:"vuefinder__search-modal-layout"},{default:e.withCtx(()=>[e.createElementVNode("div",si,[e.createVNode(fe,{icon:e.unref(bt),title:e.unref(o)("Search files")},null,8,["icon","title"]),e.createElementVNode("div",ii,[e.createElementVNode("div",ci,[e.createVNode(Pa,{ref_key:"searchInputRef",ref:l,modelValue:e.unref(d),"onUpdate:modelValue":E[0]||(E[0]=N=>e.isRef(d)?d.value=N:null),"is-searching":m.value,disabled:p.value},null,8,["modelValue","is-searching","disabled"]),e.createVNode(Rs,{ref_key:"searchOptionsDropdownRef",ref:s,visible:u.value,"onUpdate:visible":E[1]||(E[1]=N=>u.value=N),"size-filter":V.value,"onUpdate:sizeFilter":E[2]||(E[2]=N=>V.value=N),"selected-option":v.value,"onUpdate:selectedOption":E[3]||(E[3]=N=>v.value=N),disabled:p.value},null,8,["visible","size-filter","selected-option","disabled"])]),e.createElementVNode("div",{class:"vuefinder__search-modal__options",onClick:E[7]||(E[7]=e.withModifiers(()=>{},["stop"]))},[e.createElementVNode("div",di,[e.createElementVNode("button",{onClick:e.withModifiers(K,["stop"]),class:e.normalizeClass(["vuefinder__search-modal__location-btn",{"vuefinder__search-modal__location-btn--open":p.value}])},[e.createVNode(e.unref(_e),{class:"vuefinder__search-modal__location-icon"}),e.createElementVNode("span",{class:"vuefinder__search-modal__location-text",title:h.value?.path||e.unref(k).path},e.toDisplayString(e.unref(fn)(h.value?.path||e.unref(k).path)),9,ui),E[10]||(E[10]=e.createElementVNode("svg",{class:"vuefinder__search-modal__location-arrow",viewBox:"0 0 16 16",fill:"currentColor"},[e.createElementVNode("path",{d:"M4.427 7.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 7H4.604a.25.25 0 00-.177.427z"})],-1))],2)]),e.createElementVNode("label",{class:"vuefinder__search-modal__deep-search",onClick:E[6]||(E[6]=e.withModifiers(()=>{},["stop"]))},[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":E[4]||(E[4]=N=>_.value=N),type:"checkbox",disabled:p.value,class:"vuefinder__search-modal__checkbox",onClick:E[5]||(E[5]=e.withModifiers(()=>{},["stop"]))},null,8,mi),[[e.vModelCheckbox,_.value]]),e.createElementVNode("span",null,e.toDisplayString(e.unref(o)("Include subfolders")),1)])]),p.value?(e.openBlock(),e.createElementBlock("div",fi,[e.createElementVNode("div",pi,[e.createVNode(yt,{modelValue:h.value,"onUpdate:modelValue":[E[8]||(E[8]=N=>h.value=N),Y],"show-pinned-folders":!0,"current-path":e.unref(k),onSelectAndClose:R},null,8,["modelValue","current-path"])])])):e.createCommentVNode("",!0),!e.unref(d).trim()&&!p.value?(e.openBlock(),e.createElementBlock("div",vi,[e.createElementVNode("div",_i,[e.createElementVNode("div",hi,[E[11]||(E[11]=e.createElementVNode("span",{class:"vuefinder__search-modal__tip-key"},"↑↓",-1)),e.createElementVNode("span",null,e.toDisplayString(e.unref(o)("Navigate results")),1)]),e.createElementVNode("div",gi,[E[12]||(E[12]=e.createElementVNode("span",{class:"vuefinder__search-modal__tip-key"},"Esc",-1)),e.createElementVNode("span",null,e.toDisplayString(e.unref(o)("Close search")),1)])])])):e.createCommentVNode("",!0),e.unref(d).trim()&&!p.value?(e.openBlock(),e.createBlock(ai,{key:2,ref_key:"searchResultsListRef",ref:a,"search-results":i.value,"is-searching":m.value,"selected-index":c.value,"expanded-paths":y.value,"active-dropdown":g.value,"selected-item-dropdown-option":f.value,"results-enter":!0,onSelectResultItem:U,onSelectResultItemWithDropdown:W,onTogglePathExpansion:C,onToggleItemDropdown:x,"onUpdate:selectedItemDropdownOption":E[9]||(E[9]=N=>f.value=N),onCopyPath:X,onOpenContainingFolder:A,onPreview:T},null,8,["search-results","is-searching","selected-index","expanded-paths","active-dropdown","selected-item-dropdown-option"])):e.createCommentVNode("",!0)])])]),_:1}))}}),le={ESCAPE:"Escape",F2:"F2",F5:"F5",DELETE:"Delete",ENTER:"Enter",BACKSLASH:"Backslash",KEY_A:"KeyA",KEY_E:"KeyE",KEY_F:"KeyF",SPACE:"Space",KEY_C:"KeyC",KEY_X:"KeyX",KEY_V:"KeyV"};function wi(n){const t=n.fs,o=n.config,r=O.useStore(t.selectedItems),l=s=>{if(s.code===le.ESCAPE&&(n.modal.close(),n.root.focus()),!n.modal.visible){if(s.code===le.F2&&n.features.includes(H.RENAME)&&r.value.length===1&&n.modal.open(Xe,{items:r.value}),s.code===le.F5&&n.adapter.open(t.path.get().path),s.code===le.DELETE&&r.value.length===0&&n.modal.open(Qe,{items:r.value}),s.ctrlKey&&s.code===le.BACKSLASH&&n.modal.open(_t),s.ctrlKey&&s.code===le.KEY_F&&n.features.includes(H.SEARCH)&&(n.modal.open(xt),s.preventDefault()),s.ctrlKey&&s.code===le.KEY_E&&(o.toggle("showTreeView"),s.preventDefault()),s.ctrlKey&&s.code===le.ENTER&&(o.toggle("fullScreen"),n.root.focus()),s.ctrlKey&&s.code===le.KEY_A&&(t.selectAll(n.selectionMode||"multiple",n),s.preventDefault()),s.code===le.SPACE&&r.value.length===1&&r.value[0]?.type!=="dir"&&n.modal.open(Je,{storage:t.path.get().storage,item:r.value[0]}),s.metaKey&&s.code===le.KEY_C){if(r.value.length===0){n.emitter.emit("vf-toast-push",{type:"error",label:n.i18n.t("No items selected")});return}t.setClipboard("copy",new Set(r.value.map(a=>a.path))),n.emitter.emit("vf-toast-push",{label:r.value.length===1?n.i18n.t("Item copied to clipboard"):n.i18n.t("%s items copied to clipboard",r.value.length)}),s.preventDefault()}if(s.metaKey&&s.code===le.KEY_X){if(r.value.length===0){n.emitter.emit("vf-toast-push",{type:"error",label:n.i18n.t("No items selected")});return}t.setClipboard("cut",new Set(r.value.map(a=>a.path))),n.emitter.emit("vf-toast-push",{label:r.value.length===1?n.i18n.t("Item cut to clipboard"):n.i18n.t("%s items cut to clipboard",r.value.length)}),s.preventDefault()}if(s.metaKey&&s.code===le.KEY_V){if(t.getClipboard().items.size===0){n.emitter.emit("vf-toast-push",{type:"error",label:n.i18n.t("No items in clipboard")});return}if(t.getClipboard().path===t.path.get().path){n.emitter.emit("vf-toast-push",{type:"error",label:n.i18n.t("Cannot paste items to the same directory")});return}if(t.getClipboard().type==="cut"){n.modal.open(Ce,{items:{from:Array.from(t.getClipboard().items),to:t.path.get()}}),t.clearClipboard();return}if(t.getClipboard().type==="copy"){n.modal.open(kt,{items:{from:Array.from(t.getClipboard().items),to:t.path.get()}});return}s.preventDefault()}}};e.onMounted(()=>{n.root.addEventListener("keydown",l)}),e.onBeforeUnmount(()=>{n.root.removeEventListener("keydown",l)})}const Ct=async(n,t)=>{if(t){if(t.isFile){const o=await new Promise(r=>{t.file(r)});n(t,o)}if(t.isDirectory){const o=t.createReader(),r=await new Promise(l=>{o.readEntries(l)});for(const l of r)await Ct(n,l)}}};function yi(){const n=e.ref(!1),t=e.ref([]);return{isDraggingExternal:n,externalFiles:t,handleDragEnter:d=>{d.preventDefault(),d.stopPropagation();const i=d.dataTransfer?.items;i&&Array.from(i).some(c=>c.kind==="file")&&(n.value=!0,d.isExternalDrag=!0)},handleDragOver:d=>{n.value&&d.dataTransfer&&(d.dataTransfer.dropEffect="copy",d.preventDefault(),d.stopPropagation())},handleDragLeave:d=>{d.preventDefault();const i=d.currentTarget.getBoundingClientRect(),m=d.clientX,c=d.clientY;(m<i.left||m>i.right||c<i.top||c>i.bottom)&&(n.value=!1)},handleDrop:async d=>{d.preventDefault(),d.stopPropagation(),n.value=!1;const i=d.dataTransfer?.items;if(i){const m=Array.from(i).filter(c=>c.kind==="file");if(m.length>0){t.value=[];for(const c of m){const u=c.webkitGetAsEntry?.();if(u)await Ct((p,h)=>{t.value.push({name:h.name,size:h.size,type:h.type,lastModified:new Date(h.lastModified),file:h})},u);else{const p=c.getAsFile();p&&t.value.push({name:p.name,size:p.size,type:p.type,lastModified:new Date(p.lastModified),file:p})}}return t.value}}return[]},clearExternalFiles:()=>{t.value=[]}}}const ki={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function bi(n,t){return e.openBlock(),e.createElementBlock("svg",ki,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M12 10.5v6m3-3H9m4.06-7.19-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44z"},null,-1)])])}const _n={render:bi},Ei={class:"vuefinder__new-folder-modal__content"},Vi={class:"vuefinder__new-folder-modal__form"},Ni={class:"vuefinder__new-folder-modal__description"},xi=["placeholder"],St=e.defineComponent({__name:"ModalNewFolder",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=O.useStore(r.path),s=e.ref(""),a=e.ref(""),d=()=>{s.value!==""&&t.adapter.createFolder({path:l.value.path,name:s.value}).then(i=>{t.emitter.emit("vf-toast-push",{label:o("%s is created.",s.value)}),t.fs.setFiles(i.files),t.modal.close()}).catch(i=>{t.emitter.emit("vf-toast-push",{label:o(i.message),type:"error"})})};return(i,m)=>(e.openBlock(),e.createBlock(de,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:d,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Create")),1),e.createElementVNode("button",{type:"button",onClick:m[2]||(m[2]=c=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(fe,{icon:e.unref(_n),title:e.unref(o)("New Folder")},null,8,["icon","title"]),e.createElementVNode("div",Ei,[e.createElementVNode("div",Vi,[e.createElementVNode("p",Ni,e.toDisplayString(e.unref(o)("Create a new folder")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":m[0]||(m[0]=c=>s.value=c),onKeyup:e.withKeys(d,["enter"]),class:"vuefinder__new-folder-modal__input",placeholder:e.unref(o)("Folder Name"),type:"text"},null,40,xi),[[e.vModelText,s.value]]),a.value.length?(e.openBlock(),e.createBlock(e.unref(a),{key:0,onHidden:m[1]||(m[1]=c=>a.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),Ci={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function Si(n,t){return e.openBlock(),e.createElementBlock("svg",Ci,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9"},null,-1)])])}const hn={render:Si},Bi={class:"vuefinder__new-file-modal__content"},$i={class:"vuefinder__new-file-modal__form"},Di={class:"vuefinder__new-file-modal__description"},Ti=["placeholder"],gn=e.defineComponent({__name:"ModalNewFile",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=O.useStore(r.path),s=e.ref(""),a=e.ref(""),d=()=>{s.value!==""&&t.adapter.createFile({path:l.value.path,name:s.value}).then(i=>{t.emitter.emit("vf-toast-push",{label:o("%s is created.",s.value)}),t.fs.setFiles(i.files),t.modal.close()}).catch(i=>{t.emitter.emit("vf-toast-push",{label:o(i.message),type:"error"})})};return(i,m)=>(e.openBlock(),e.createBlock(de,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:d,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Create")),1),e.createElementVNode("button",{type:"button",onClick:m[2]||(m[2]=c=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(fe,{icon:e.unref(hn),title:e.unref(o)("New File")},null,8,["icon","title"]),e.createElementVNode("div",Bi,[e.createElementVNode("div",$i,[e.createElementVNode("p",Di,e.toDisplayString(e.unref(o)("Create a new file")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":m[0]||(m[0]=c=>s.value=c),onKeyup:e.withKeys(d,["enter"]),class:"vuefinder__new-file-modal__input",placeholder:e.unref(o)("File Name"),type:"text"},null,40,Ti),[[e.vModelText,s.value]]),a.value.length?(e.openBlock(),e.createBlock(e.unref(a),{key:0,onHidden:m[1]||(m[1]=c=>a.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),Fi=["title"],Mi=e.defineComponent({__name:"Message",props:{error:{type:Boolean}},emits:["hidden"],setup(n,{emit:t}){const o=t,r=e.inject("ServiceContainer"),{t:l}=r.i18n,s=e.ref(!1),a=e.ref(null),d=e.ref(a.value?.innerHTML);e.watch(d,()=>s.value=!1);const i=()=>{o("hidden"),s.value=!0};return(m,c)=>(e.openBlock(),e.createElementBlock("div",null,[s.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"strMessage",ref:a,class:e.normalizeClass(["vuefinder__message",n.error?"vuefinder__message--error":"vuefinder__message--success"])},[e.renderSlot(m.$slots,"default"),e.createElementVNode("div",{class:"vuefinder__message__close",onClick:i,title:e.unref(l)("Close")},[...c[0]||(c[0]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"vuefinder__message__icon"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Fi)],2))]))}}),ne={PENDING:0,CANCELED:1,UPLOADING:2,ERROR:3,DONE:10};function Ai(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=O.useStore(r.path),s=t.config,a=e.ref({QUEUE_ENTRY_STATUS:ne}),d=e.ref(null),i=e.ref(null),m=e.ref(null),c=e.ref(null),u=e.ref(null),p=e.ref([]),h=e.ref(""),V=e.ref(!1),_=e.ref(!1),v=e.ref(null);let f;const y=b=>{b.preventDefault(),b.stopPropagation(),_.value=!0},g=b=>{b.preventDefault(),b.stopPropagation(),_.value=!0},k=b=>{b.preventDefault(),b.stopPropagation(),(!b.relatedTarget||b.relatedTarget===document.body)&&(_.value=!1)},C=b=>{b.preventDefault(),b.stopPropagation(),_.value=!1;const w=/^[/\\](.+)/,E=b.dataTransfer;E&&(E.items&&E.items.length?Array.from(E.items).forEach(N=>{if(N.kind==="file"){const F=N.webkitGetAsEntry?.();if(F)Ct((L,Q)=>{const q=w.exec(L?.fullPath||"");D(Q,q?q[1]:Q.name)},F);else{const L=N.getAsFile?.();L&&D(L)}}}):E.files&&E.files.length&&Array.from(E.files).forEach(N=>D(N)))},x=b=>p.value.findIndex(w=>w.id===b),D=(b,w)=>f.addFile({name:w||b.name,type:b.type,data:b,source:"Local"}),A=b=>b.status===ne.DONE?"text-green-600":b.status===ne.ERROR||b.status===ne.CANCELED?"text-red-600":"",T=b=>b.status===ne.DONE?"✓":b.status===ne.ERROR||b.status===ne.CANCELED?"!":"...",U=()=>c.value?.click(),W=()=>t.modal.close(),X=b=>{if(V.value||!p.value.filter(w=>w.status!==ne.DONE).length){V.value||(h.value=o("Please select file to upload first."));return}h.value="",v.value=b||l.value,f.upload()},P=()=>{f.cancelAll(),p.value.forEach(b=>{b.status!==ne.DONE&&(b.status=ne.CANCELED,b.statusName=o("Canceled"))}),V.value=!1},K=b=>{V.value||(f.removeFile(b.id),p.value.splice(x(b.id),1))},Y=b=>{if(!V.value)if(f.cancelAll(),b){const w=p.value.filter(E=>E.status!==ne.DONE);p.value=[],w.forEach(E=>D(E.originalFile,E.name))}else p.value=[]},R=b=>{b.forEach(w=>{D(w)})};return e.onMounted(()=>{f=new Tn({debug:t.debug,restrictions:{maxFileSize:Rn(s.maxFileSize??"10mb")},locale:t.i18n.t("uppy"),onBeforeFileAdded:(N,F)=>{if(F[N.id]!=null){const Q=x(N.id);p.value[Q]?.status===ne.PENDING&&(h.value=f.i18n("noDuplicates",{fileName:N.name})),p.value=p.value.filter(q=>q.id!==N.id)}return p.value.push({id:N.id,name:N.name,size:t.filesize(N.size),status:ne.PENDING,statusName:o("Pending upload"),percent:null,originalFile:N.data}),!0}});const b={getTargetPath:()=>(v.value||l.value).path};if(n)n(f,b);else if(t.adapter.getAdapter().configureUploader)t.adapter.getAdapter().configureUploader(f,b);else throw new Error("No uploader configured");f.on("restriction-failed",(N,F)=>{const L=p.value[x(N.id)];L&&K(L),h.value=F.message}),f.on("upload-progress",(N,F)=>{const L=F.bytesTotal??1,Q=Math.floor(F.bytesUploaded/L*100),q=x(N.id);q!==-1&&p.value[q]&&(p.value[q].percent=`${Q}%`)}),f.on("upload-success",N=>{const F=p.value[x(N.id)];F&&(F.status=ne.DONE,F.statusName=o("Done"))}),f.on("upload-error",(N,F)=>{const L=p.value[x(N.id)];L&&(L.percent=null,L.status=ne.ERROR,L.statusName=F?.isNetworkError?o("Network Error, Unable establish connection to the server or interrupted."):F?.message||o("Unknown Error"))}),f.on("error",N=>{h.value=N.message,V.value=!1,t.adapter.open(l.value.path)}),f.on("complete",()=>{V.value=!1;const N=v.value||l.value;t.adapter.invalidateListQuery(N.path),t.adapter.open(N.path);const F=p.value.filter(L=>L.status===ne.DONE).map(L=>L.name);t.emitter.emit("vf-upload-complete",F)}),c.value?.addEventListener("click",()=>i.value?.click()),u.value?.addEventListener("click",()=>m.value?.click());const w={capture:!0};document.addEventListener("dragover",y,w),document.addEventListener("dragenter",g,w),document.addEventListener("dragleave",k,w),document.addEventListener("drop",C,w);const E=N=>{const F=N.target,L=F.files;if(L){for(const Q of L)D(Q);F.value=""}};i.value?.addEventListener("change",E),m.value?.addEventListener("change",E)}),e.onUnmounted(()=>{const b={capture:!0};document.removeEventListener("dragover",y,b),document.removeEventListener("dragenter",g,b),document.removeEventListener("dragleave",k,b),document.removeEventListener("drop",C,b)}),{container:d,internalFileInput:i,internalFolderInput:m,pickFiles:c,pickFolders:u,queue:p,message:h,uploading:V,hasFilesInDropArea:_,definitions:a,openFileSelector:U,upload:X,cancel:P,remove:K,clear:Y,close:W,getClassNameForEntry:A,getIconForEntry:T,addExternalFiles:R}}function pt(n,t=14){const o=`((?=([\\w\\W]{0,${t}}))([\\w\\W]{${t+1},})([\\w\\W]{8,}))`;return n.replace(new RegExp(o),"$2..$4")}const Ii={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function Oi(n,t){return e.openBlock(),e.createElementBlock("svg",Ii,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"},null,-1)])])}const wn={render:Oi},Li={class:"vuefinder__upload-modal__content relative"},Ri={class:"vuefinder__upload-modal__target-section"},Pi={class:"vuefinder__upload-modal__target-label"},zi={class:"vuefinder__upload-modal__target-container"},Hi={class:"vuefinder__upload-modal__target-path"},Ui={class:"vuefinder__upload-modal__target-storage"},ji={key:0,class:"vuefinder__upload-modal__target-folder"},Ki={class:"vuefinder__upload-modal__target-badge"},Wi={class:"vuefinder__upload-modal__drag-hint"},Gi={class:"vuefinder__upload-modal__file-list vf-scrollbar"},qi=["textContent"],Yi={class:"vuefinder__upload-modal__file-info"},Qi={class:"vuefinder__upload-modal__file-name hidden md:block"},Xi={class:"vuefinder__upload-modal__file-name md:hidden"},Ji={key:0,class:"ml-auto"},Zi=["title","disabled","onClick"],ec={key:0,class:"py-2"},tc=["aria-expanded"],nc={key:0,class:"vuefinder__upload-actions__menu left-0 right-0 absolute bottom-full mb-2"},oc=["disabled"],rc=["disabled"],lc=["disabled"],ac=["aria-expanded"],sc={key:0,class:"vuefinder__upload-actions__menu absolute bottom-full mb-2 left-0"},ic=["disabled"],cc=["disabled"],Bt=e.defineComponent({__name:"ModalUpload",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=O.useStore(r.path),s=e.ref(l.value),a=e.ref(!1),d=()=>{const b=s.value.path;if(!b)return{storage:"local",path:""};if(b.endsWith("://"))return{storage:b.replace("://",""),path:""};const w=b.split("://");return{storage:w[0]||"local",path:w[1]||""}},i=b=>{b&&(s.value=b)},m=b=>{b&&(s.value=b,a.value=!1)},{container:c,internalFileInput:u,internalFolderInput:p,pickFiles:h,queue:V,message:_,uploading:v,hasFilesInDropArea:f,definitions:y,openFileSelector:g,upload:k,cancel:C,remove:x,clear:D,close:A,getClassNameForEntry:T,getIconForEntry:U,addExternalFiles:W}=Ai(t.customUploader),X=()=>{k(s.value)};e.onMounted(()=>{t.emitter.on("vf-external-files-dropped",b=>{W(b)})}),e.onUnmounted(()=>{t.emitter.off("vf-external-files-dropped")});const P=e.ref(!1),K=e.ref(null),Y=e.ref(null),R=b=>{if(!P.value)return;const w=b.target,E=K.value?.contains(w)??!1,N=Y.value?.contains(w)??!1;!E&&!N&&(P.value=!1)};return e.onMounted(()=>document.addEventListener("click",R)),e.onUnmounted(()=>document.removeEventListener("click",R)),(b,w)=>(e.openBlock(),e.createBlock(de,{showDragOverlay:e.unref(f),dragOverlayText:e.unref(o)("Drag and drop the files/folders to here.")},{buttons:e.withCtx(()=>[e.createElementVNode("div",{class:"sm:hidden relative w-full mb-2",ref_key:"actionsMenuMobileRef",ref:K},[e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__upload-actions","vuefinder__upload-actions--block",P.value?"vuefinder__upload-actions--ring":""])},[e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__main",onClick:w[3]||(w[3]=E=>e.unref(g)())},e.toDisplayString(e.unref(o)("Select Files")),1),e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__trigger",onClick:w[4]||(w[4]=e.withModifiers(E=>P.value=!P.value,["stop"])),"aria-haspopup":"menu","aria-expanded":P.value?"true":"false"},[...w[17]||(w[17]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z","clip-rule":"evenodd"})],-1)])],8,tc)],2),P.value?(e.openBlock(),e.createElementBlock("div",nc,[e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__item",onClick:w[5]||(w[5]=E=>{e.unref(g)(),P.value=!1})},e.toDisplayString(e.unref(o)("Select Files")),1),e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__item",onClick:w[6]||(w[6]=E=>{e.unref(p)?.click(),P.value=!1})},e.toDisplayString(e.unref(o)("Select Folders")),1),w[18]||(w[18]=e.createElementVNode("div",{class:"vuefinder__upload-actions__separator"},null,-1)),e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__item",disabled:e.unref(v),onClick:w[7]||(w[7]=E=>{e.unref(D)(!1),P.value=!1})},e.toDisplayString(e.unref(o)("Clear all")),9,oc),e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__item",disabled:e.unref(v),onClick:w[8]||(w[8]=E=>{e.unref(D)(!0),P.value=!1})},e.toDisplayString(e.unref(o)("Clear only successful")),9,rc)])):e.createCommentVNode("",!0)],512),e.createElementVNode("button",{type:"button",class:"vf-btn vf-btn-primary",disabled:e.unref(v)||!e.unref(V).length,onClick:e.withModifiers(X,["prevent"])},e.toDisplayString(e.unref(o)("Upload")),9,lc),e.unref(v)?(e.openBlock(),e.createElementBlock("button",{key:0,type:"button",class:"vf-btn vf-btn-secondary",onClick:w[9]||(w[9]=e.withModifiers((...E)=>e.unref(C)&&e.unref(C)(...E),["prevent"]))},e.toDisplayString(e.unref(o)("Cancel")),1)):(e.openBlock(),e.createElementBlock("button",{key:1,type:"button",class:"vf-btn vf-btn-secondary",onClick:w[10]||(w[10]=e.withModifiers((...E)=>e.unref(A)&&e.unref(A)(...E),["prevent"]))},e.toDisplayString(e.unref(o)("Close")),1)),e.createElementVNode("div",{class:"hidden sm:block relative mr-auto",ref_key:"actionsMenuDesktopRef",ref:Y},[e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__upload-actions",P.value?"vuefinder__upload-actions--ring":""])},[e.createElementVNode("button",{ref_key:"pickFiles",ref:h,type:"button",class:"vuefinder__upload-actions__main"},e.toDisplayString(e.unref(o)("Select Files")),513),e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__trigger",onClick:w[11]||(w[11]=e.withModifiers(E=>P.value=!P.value,["stop"])),"aria-haspopup":"menu","aria-expanded":P.value?"true":"false"},[...w[19]||(w[19]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z","clip-rule":"evenodd"})],-1)])],8,ac)],2),P.value?(e.openBlock(),e.createElementBlock("div",sc,[e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__item",onClick:w[12]||(w[12]=E=>{e.unref(g)(),P.value=!1})},e.toDisplayString(e.unref(o)("Select Files")),1),e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__item",onClick:w[13]||(w[13]=E=>{e.unref(p)?.click(),P.value=!1})},e.toDisplayString(e.unref(o)("Select Folders")),1),w[20]||(w[20]=e.createElementVNode("div",{class:"vuefinder__upload-actions__separator"},null,-1)),e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__item",disabled:e.unref(v),onClick:w[14]||(w[14]=E=>{e.unref(D)(!1),P.value=!1})},e.toDisplayString(e.unref(o)("Clear all")),9,ic),e.createElementVNode("button",{type:"button",class:"vuefinder__upload-actions__item",disabled:e.unref(v),onClick:w[15]||(w[15]=E=>{e.unref(D)(!0),P.value=!1})},e.toDisplayString(e.unref(o)("Clear only successful")),9,cc)])):e.createCommentVNode("",!0)],512)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(fe,{icon:e.unref(wn),title:e.unref(o)("Upload Files")},null,8,["icon","title"]),e.createElementVNode("div",Li,[e.createElementVNode("div",Ri,[e.createElementVNode("div",Pi,e.toDisplayString(e.unref(o)("Hedef Klasör")),1),e.createElementVNode("div",zi,[e.createElementVNode("div",{class:"vuefinder__upload-modal__target-display",onClick:w[0]||(w[0]=E=>a.value=!a.value)},[e.createElementVNode("div",Hi,[e.createElementVNode("span",Ui,e.toDisplayString(d().storage)+"://",1),d().path?(e.openBlock(),e.createElementBlock("span",ji,e.toDisplayString(d().path),1)):e.createCommentVNode("",!0)]),e.createElementVNode("span",Ki,e.toDisplayString(e.unref(o)("Browse")),1)])]),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__upload-modal__tree-selector",a.value?"vuefinder__upload-modal__tree-selector--expanded":"vuefinder__upload-modal__tree-selector--collapsed"])},[e.createVNode(yt,{modelValue:s.value,"onUpdate:modelValue":[w[1]||(w[1]=E=>s.value=E),i],"show-pinned-folders":!0,onSelectAndClose:m},null,8,["modelValue"])],2)]),e.createElementVNode("div",Wi,e.toDisplayString(e.unref(o)("You can drag & drop files anywhere while this modal is open.")),1),e.createElementVNode("div",{ref_key:"container",ref:c,class:"hidden"},null,512),e.createElementVNode("div",Gi,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(V),E=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__upload-modal__file-entry",key:E.id},[e.createElementVNode("span",{class:e.normalizeClass(["vuefinder__upload-modal__file-icon",e.unref(T)(E)])},[e.createElementVNode("span",{class:"vuefinder__upload-modal__file-icon-text",textContent:e.toDisplayString(e.unref(U)(E))},null,8,qi)],2),e.createElementVNode("div",Yi,[e.createElementVNode("div",Qi,e.toDisplayString(e.unref(pt)(E.name,40))+" ("+e.toDisplayString(E.size)+") ",1),e.createElementVNode("div",Xi,e.toDisplayString(e.unref(pt)(E.name,16))+" ("+e.toDisplayString(E.size)+") ",1),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__upload-modal__file-status",e.unref(T)(E)])},[e.createTextVNode(e.toDisplayString(E.statusName)+" ",1),E.status===e.unref(y).QUEUE_ENTRY_STATUS.UPLOADING?(e.openBlock(),e.createElementBlock("b",Ji,e.toDisplayString(E.percent),1)):e.createCommentVNode("",!0)],2)]),e.createElementVNode("button",{type:"button",class:e.normalizeClass(["vuefinder__upload-modal__file-remove",e.unref(v)?"disabled":""]),title:e.unref(o)("Delete"),disabled:e.unref(v),onClick:N=>e.unref(x)(E)},[...w[16]||(w[16]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"vuefinder__upload-modal__file-remove-icon"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])],10,Zi)]))),128)),e.unref(V).length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",ec,e.toDisplayString(e.unref(o)("No files selected!")),1))]),e.unref(_).length?(e.openBlock(),e.createBlock(Mi,{key:0,onHidden:w[2]||(w[2]=E=>_.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(_)),1)]),_:1})):e.createCommentVNode("",!0)])]),e.createElementVNode("input",{ref_key:"internalFileInput",ref:u,type:"file",multiple:"",class:"hidden"},null,512),e.createElementVNode("input",{ref_key:"internalFolderInput",ref:p,type:"file",multiple:"",webkitdirectory:"",class:"hidden"},null,512)]),_:1},8,["showDragOverlay","dragOverlayText"]))}}),dc={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function uc(n,t){return e.openBlock(),e.createElementBlock("svg",dc,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5m6 4.125 2.25 2.25m0 0 2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125"},null,-1)])])}const yn={render:uc},mc={class:"vuefinder__unarchive-modal__content"},fc={class:"vuefinder__unarchive-modal__items"},pc={key:0,class:"vuefinder__unarchive-modal__icon vuefinder__unarchive-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},vc={key:1,class:"vuefinder__unarchive-modal__icon vuefinder__unarchive-modal__icon--file",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},_c={class:"vuefinder__unarchive-modal__item-name"},hc={class:"vuefinder__unarchive-modal__info"},$t=e.defineComponent({__name:"ModalUnarchive",setup(n){const t=e.inject("ServiceContainer"),o=t.fs,r=O.useStore(o.path),{t:l}=t.i18n,s=e.ref(t.modal.data.items[0]),a=e.ref(""),d=e.ref([]),i=()=>{t.adapter.unarchive({item:s.value.path,path:r.value.path}).then(m=>{t.emitter.emit("vf-toast-push",{label:l("The file unarchived.")}),t.fs.setFiles(m.files),t.modal.close()}).catch(m=>{t.emitter.emit("vf-toast-push",{label:l(m.message),type:"error"})})};return(m,c)=>(e.openBlock(),e.createBlock(de,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:i,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(l)("Unarchive")),1),e.createElementVNode("button",{type:"button",onClick:c[1]||(c[1]=u=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(l)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(fe,{icon:e.unref(yn),title:e.unref(l)("Unarchive")},null,8,["icon","title"]),e.createElementVNode("div",mc,[e.createElementVNode("div",fc,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,u=>(e.openBlock(),e.createElementBlock("p",{class:"vuefinder__unarchive-modal__item",key:u.path},[u.type==="dir"?(e.openBlock(),e.createElementBlock("svg",pc,[...c[2]||(c[2]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",vc,[...c[3]||(c[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),e.createElementVNode("span",_c,e.toDisplayString(u.basename),1)]))),128)),e.createElementVNode("p",hc,e.toDisplayString(e.unref(l)("The archive will be unarchived at"))+" ("+e.toDisplayString(e.unref(r).path)+")",1),a.value.length?(e.openBlock(),e.createBlock(e.unref(a),{key:0,onHidden:c[0]||(c[0]=u=>a.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),gc={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",viewBox:"0 0 24 24"};function wc(n,t){return e.openBlock(),e.createElementBlock("svg",gc,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125"},null,-1)])])}const kn={render:wc},yc={class:"vuefinder__archive-modal__content"},kc={class:"vuefinder__archive-modal__form"},bc={class:"vuefinder__archive-modal__files vf-scrollbar"},Ec={key:0,class:"vuefinder__archive-modal__icon vuefinder__archive-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Vc={key:1,class:"vuefinder__archive-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Nc={class:"vuefinder__archive-modal__file-name"},xc=["placeholder"],Dt=e.defineComponent({__name:"ModalArchive",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=O.useStore(r.path),s=e.ref(""),a=e.ref(""),d=e.ref(t.modal.data.items),i=()=>{d.value.length&&t.adapter.archive({path:l.value.path,items:d.value.map(({path:m,type:c})=>({path:m,type:c})),name:s.value}).then(m=>{t.emitter.emit("vf-toast-push",{label:o("The file(s) archived.")}),t.fs.setFiles(m.files),t.modal.close()}).catch(m=>{t.emitter.emit("vf-toast-push",{label:o(m.message),type:"error"})})};return(m,c)=>(e.openBlock(),e.createBlock(de,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:i,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Archive")),1),e.createElementVNode("button",{type:"button",onClick:c[2]||(c[2]=u=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(fe,{icon:e.unref(kn),title:e.unref(o)("Archive the files")},null,8,["icon","title"]),e.createElementVNode("div",yc,[e.createElementVNode("div",kc,[e.createElementVNode("div",bc,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,u=>(e.openBlock(),e.createElementBlock("p",{class:"vuefinder__archive-modal__file",key:u.path},[u.type==="dir"?(e.openBlock(),e.createElementBlock("svg",Ec,[...c[3]||(c[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",Vc,[...c[4]||(c[4]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),e.createElementVNode("span",Nc,e.toDisplayString(u.basename),1)]))),128))]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c[0]||(c[0]=u=>s.value=u),onKeyup:e.withKeys(i,["enter"]),class:"vuefinder__archive-modal__input",placeholder:e.unref(o)("Archive name. (.zip file will be created)"),type:"text"},null,40,xc),[[e.vModelText,s.value]]),a.value.length?(e.openBlock(),e.createBlock(e.unref(a),{key:0,onHidden:c[1]||(c[1]=u=>a.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),Cc={class:"vuefinder__menubar__container"},Sc=["onClick","onMouseenter"],Bc={class:"vuefinder__menubar__label"},$c=["onMouseenter"],Dc=["onClick"],Tc={key:0,class:"vuefinder__menubar__dropdown__label"},Fc={key:1,class:"vuefinder__menubar__dropdown__checkmark"},Mc=e.defineComponent({__name:"MenuBar",setup(n){const t=e.inject("ServiceContainer");if(!t)throw new Error("MenuBar: ServiceContainer not found");const{t:o}=t?.i18n||{t:f=>f},r=t?.fs,l=t?.config,s=O.useStore(l?.state||{}),a=O.useStore(r?.selectedItems||[]),d=O.useStore(r?.storages||[]),i=e.ref(null),m=e.ref(!1),c=e.computed(()=>window.opener!==null||window.name!==""||window.history.length<=1),u=e.computed(()=>[{id:"file",label:o("File"),items:[{id:"new-folder",label:o("New Folder"),action:()=>t?.modal?.open(St,{items:a.value}),enabled:()=>t?.features?.includes(H.NEW_FOLDER)||!1},{id:"new-file",label:o("New File"),action:()=>t?.modal?.open(gn,{items:a.value}),enabled:()=>t?.features?.includes(H.NEW_FILE)||!1},{type:"separator"},{id:"upload",label:o("Upload"),action:()=>t?.modal?.open(Bt,{items:a.value}),enabled:()=>t?.features?.includes(H.UPLOAD)||!1},{type:"separator"},{id:"search",label:o("Search"),action:()=>t.modal.open(xt),enabled:()=>t?.features?.includes(H.SEARCH)},{type:"separator"},{id:"archive",label:o("Archive"),action:()=>{a.value.length>0&&t?.modal?.open(Dt,{items:a.value})},enabled:()=>a.value.length>0&&t?.features?.includes(H.ARCHIVE)},{id:"unarchive",label:o("Unarchive"),action:()=>{a.value.length===1&&a.value[0]?.mime_type==="application/zip"&&t?.modal?.open($t,{items:a.value})},enabled:()=>a.value.length===1&&a.value[0]?.mime_type==="application/zip"&&t?.features?.includes(H.UNARCHIVE)},{type:"separator"},{id:"preview",label:o("Preview"),action:()=>{a.value.length===1&&a.value[0]?.type!=="dir"&&t?.modal?.open(Je,{storage:r?.path?.get()?.storage,item:a.value[0]})},enabled:()=>a.value.length===1&&a.value[0]?.type!=="dir"},...c.value?[{type:"separator"},{id:"exit",label:o("Exit"),action:()=>{try{window.close()}catch{}},enabled:()=>!0}]:[]]},{id:"edit",label:o("Edit"),items:[...t?.selectionMode==="multiple"?[{id:"select-all",label:o("Select All"),action:()=>r?.selectAll(t?.selectionMode||"multiple",t),enabled:()=>!0},{id:"deselect",label:o("Deselect All"),action:()=>r?.clearSelection(),enabled:()=>a.value.length>0},{type:"separator"}]:[],{id:"cut",label:o("Cut"),action:()=>{a.value.length>0&&r?.setClipboard("cut",new Set(a.value.map(f=>f.path)))},enabled:()=>a.value.length>0},{id:"copy",label:o("Copy"),action:()=>{a.value.length>0&&r?.setClipboard("copy",new Set(a.value.map(f=>f.path)))},enabled:()=>a.value.length>0},{id:"paste",label:o("Paste"),action:()=>{const f=r?.getClipboard();f?.items?.size>0&&t?.modal?.open(f.type==="cut"?Ce:kt,{items:{from:Array.from(f.items),to:r?.path?.get()}})},enabled:()=>r?.getClipboard()?.items?.size>0},{id:"move",label:o("Move"),action:()=>{if(a.value.length>0){const f=t?.fs,y={storage:f?.path?.get()?.storage||"",path:f?.path?.get()?.path||"",type:"dir"};t?.modal?.open(Ce,{items:{from:a.value,to:y}})}},enabled:()=>a.value.length>0&&t?.features?.includes(H.MOVE)},{type:"separator"},{id:"copy-path",label:o("Copy Path"),action:async()=>{if(a.value.length===1){const f=a.value[0];await Me(f.path)}else{const f=r?.path?.get();f?.path&&await Me(f.path)}},enabled:()=>!0},{id:"copy-download-url",label:o("Copy Download URL"),action:async()=>{if(a.value.length===1){const f=a.value[0],y=r?.path?.get()?.storage??"local",g=t?.requester?.getDownloadUrl(y,f);g&&await Hs(g)}},enabled:()=>a.value.length===1&&a.value[0]?.type!=="dir"},{type:"separator"},{id:"rename",label:o("Rename"),action:()=>{a.value.length===1&&t?.modal?.open(Xe,{items:a.value})},enabled:()=>a.value.length===1&&t?.features?.includes(H.RENAME)},{id:"delete",label:o("Delete"),action:()=>{a.value.length>0&&t?.modal?.open(Qe,{items:a.value})},enabled:()=>a.value.length>0&&t?.features?.includes(H.DELETE)}]},{id:"view",label:o("View"),items:[{id:"refresh",label:o("Refresh"),action:()=>{t?.adapter.list(r?.path?.get()?.path)},enabled:()=>!0},{type:"separator"},{id:"grid-view",label:o("Grid View"),action:()=>l?.set("view","grid"),checked:()=>s.value?.view==="grid"},{id:"list-view",label:o("List View"),action:()=>l?.set("view","list"),checked:()=>s.value?.view==="list"},{type:"separator"},{id:"tree-view",label:o("Tree View"),action:()=>l?.toggle("showTreeView"),enabled:()=>!0,checked:()=>s.value?.showTreeView},{id:"thumbnails",label:o("Show Thumbnails"),action:()=>l?.toggle("showThumbnails"),enabled:()=>!0,checked:()=>s.value?.showThumbnails},{id:"show-hidden-files",label:o("Show Hidden Files"),action:()=>l?.toggle("showHiddenFiles"),enabled:()=>!0,checked:()=>s.value?.showHiddenFiles},{type:"separator"},{id:"fullscreen",label:o("Full Screen"),action:()=>l?.toggle("fullScreen"),enabled:()=>t?.features?.includes(H.FULL_SCREEN),checked:()=>s.value?.fullScreen}]},{id:"go",label:o("Go"),items:[{id:"forward",label:o("Forward"),action:()=>{r?.goForward(),t?.adapter.list(r?.currentPath?.get())},enabled:()=>r?.canGoForward?.get()??!1},{id:"back",label:o("Back"),action:()=>{r?.goBack(),t?.adapter.list(r?.currentPath?.get())},enabled:()=>r?.canGoBack?.get()??!1},{id:"open-containing-folder",label:o("Open containing folder"),action:()=>{const f=r?.path?.get();if(f?.breadcrumb&&f.breadcrumb.length>0){const g=f.breadcrumb[f.breadcrumb.length-2]?.path??`${f.storage}://`;r?.setPath(g),t?.adapter.list(g)}},enabled:()=>{const f=r?.path?.get();return f?.breadcrumb&&f.breadcrumb.length>0}},{type:"separator"},...(d.value||[]).map(f=>({id:`storage-${f}`,label:f,action:()=>{const y=`${f}://`;r?.setPath(y),t?.adapter.list(y)},enabled:()=>!0})),{type:"separator"},{id:"go-to-folder",label:o("Go to Folder"),action:()=>{const f=prompt(o("Enter folder path:"));f&&(r?.setPath(f),t?.adapter.list(f))},enabled:()=>!0}]},{id:"help",label:o("Help"),items:[{id:"about",label:o("About"),action:()=>t?.modal?.open(_t),enabled:()=>!0}]}]),p=f=>{i.value===f?V():(i.value=f,m.value=!0)},h=f=>{m.value&&(i.value=f)},V=()=>{i.value=null,m.value=!1},_=f=>{V(),f()},v=f=>{f.target.closest(".vuefinder__menubar")||V()};return e.onMounted(()=>{document.addEventListener("click",v)}),e.onUnmounted(()=>{document.removeEventListener("click",v)}),(f,y)=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__menubar",onClick:y[0]||(y[0]=e.withModifiers(()=>{},["stop"]))},[e.createElementVNode("div",Cc,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value,g=>(e.openBlock(),e.createElementBlock("div",{key:g.id,class:e.normalizeClass(["vuefinder__menubar__item",{"vuefinder__menubar__item--active":i.value===g.id}]),onClick:k=>p(g.id),onMouseenter:k=>h(g.id)},[e.createElementVNode("span",Bc,e.toDisplayString(g.label),1),i.value===g.id?(e.openBlock(),e.createElementBlock("div",{key:0,class:"vuefinder__menubar__dropdown",onMouseenter:k=>h(g.id)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(g.items,k=>(e.openBlock(),e.createElementBlock("div",{key:k.id||k.type,class:e.normalizeClass(["vuefinder__menubar__dropdown__item",{"vuefinder__menubar__dropdown__item--separator":k.type==="separator","vuefinder__menubar__dropdown__item--disabled":k.enabled&&!k.enabled(),"vuefinder__menubar__dropdown__item--checked":k.checked&&k.checked()}]),onClick:e.withModifiers(C=>k.type!=="separator"&&k.enabled&&k.enabled()?_(k.action):null,["stop"])},[k.type!=="separator"?(e.openBlock(),e.createElementBlock("span",Tc,e.toDisplayString(k.label),1)):e.createCommentVNode("",!0),k.checked&&k.checked()?(e.openBlock(),e.createElementBlock("span",Fc," ✓ ")):e.createCommentVNode("",!0)],10,Dc))),128))],40,$c)):e.createCommentVNode("",!0)],42,Sc))),128))])]))}}),Ac={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",viewBox:"0 0 24 24"};function Ic(n,t){return e.openBlock(),e.createElementBlock("svg",Ac,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"},null,-1)])])}const Oc={render:Ic},Lc={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function Rc(n,t){return e.openBlock(),e.createElementBlock("svg",Lc,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"},null,-1)])])}const Pc={render:Rc},zc={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function Hc(n,t){return e.openBlock(),e.createElementBlock("svg",zc,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25zm0 9.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18zM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25zm0 9.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18z"},null,-1)])])}const Uc={render:Hc},jc={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function Kc(n,t){return e.openBlock(),e.createElementBlock("svg",jc,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75"},null,-1)])])}const Wc={render:Kc},Gc={fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function qc(n,t){return e.openBlock(),e.createElementBlock("svg",Gc,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M3 4a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v2.586a1 1 0 0 1-.293.707l-6.414 6.414a1 1 0 0 0-.293.707V17l-4 4v-6.586a1 1 0 0 0-.293-.707L3.293 7.293A1 1 0 0 1 3 6.586z"},null,-1)])])}const Yc={render:qc},Qc={class:"vuefinder__toolbar"},Xc={class:"vuefinder__toolbar__actions"},Jc=["title"],Zc=["title"],ed=["title"],td=["title"],nd=["title"],od=["title"],rd=["title"],ld={class:"vuefinder__toolbar__controls"},ad=["title"],sd={class:"vuefinder__toolbar__control vuefinder__toolbar__dropdown-container"},id=["title"],cd={class:"relative"},dd={key:0,class:"vuefinder__toolbar__filter-indicator"},ud={key:0,class:"vuefinder__toolbar__dropdown"},md={class:"vuefinder__toolbar__dropdown-content"},fd={class:"vuefinder__toolbar__dropdown-section"},pd={class:"vuefinder__toolbar__dropdown-label"},vd={class:"vuefinder__toolbar__dropdown-row"},_d={value:"name"},hd={value:"size"},gd={value:"modified"},wd={value:""},yd={value:"asc"},kd={value:"desc"},bd={class:"vuefinder__toolbar__dropdown-section"},Ed={class:"vuefinder__toolbar__dropdown-label"},Vd={class:"vuefinder__toolbar__dropdown-options"},Nd={class:"vuefinder__toolbar__dropdown-option"},xd={class:"vuefinder__toolbar__option-text"},Cd={class:"vuefinder__toolbar__dropdown-option"},Sd={class:"vuefinder__toolbar__option-text"},Bd={class:"vuefinder__toolbar__dropdown-option"},$d={class:"vuefinder__toolbar__option-text"},Dd={class:"vuefinder__toolbar__dropdown-toggle"},Td={for:"showHidden",class:"vuefinder__toolbar__toggle-label"},Fd={class:"vuefinder__toolbar__dropdown-reset"},Md=["title"],Ad=["title"],Id=e.defineComponent({name:"VfToolbar",__name:"Toolbar",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=t.config,s=O.useStore(l.state),a=O.useStore(r.selectedItems),d=O.useStore(r.sort),i=O.useStore(r.filter);e.watch(()=>s.value.fullScreen,()=>{if(s.value.fullScreen){const _=document.querySelector("body");_&&(_.style.overflow="hidden")}else{const _=document.querySelector("body");_&&(_.style.overflow="")}t.emitter.emit("vf-fullscreen-toggle")});const m=e.ref(!1),c=_=>{_.target.closest(".vuefinder__toolbar__dropdown-container")||(m.value=!1)};e.onMounted(()=>{document.addEventListener("click",c)}),e.onUnmounted(()=>{document.removeEventListener("click",c)});const u=e.ref({sortBy:"name",sortOrder:"",filterKind:"all",showHidden:s.value.showHiddenFiles});e.watch(()=>u.value.sortBy,_=>{if(!u.value.sortOrder){r.clearSort();return}_==="name"?r.setSort("basename",u.value.sortOrder):_==="size"?r.setSort("file_size",u.value.sortOrder):_==="modified"&&r.setSort("last_modified",u.value.sortOrder)}),e.watch(()=>u.value.sortOrder,_=>{if(!_){r.clearSort();return}u.value.sortBy==="name"?r.setSort("basename",_):u.value.sortBy==="size"?r.setSort("file_size",_):u.value.sortBy==="modified"&&r.setSort("last_modified",_)}),e.watch(d,_=>{_.active?(_.column==="basename"?u.value.sortBy="name":_.column==="file_size"?u.value.sortBy="size":_.column==="last_modified"&&(u.value.sortBy="modified"),u.value.sortOrder=_.order):u.value.sortOrder=""},{immediate:!0}),e.watch(()=>u.value.filterKind,_=>{r.setFilter(_,s.value.showHiddenFiles)}),e.watch(()=>u.value.showHidden,_=>{l.set("showHiddenFiles",_),r.setFilter(u.value.filterKind,_)}),e.watch(i,_=>{u.value.filterKind=_.kind},{immediate:!0}),e.watch(()=>s.value.showHiddenFiles,_=>{u.value.showHidden=_,r.setFilter(u.value.filterKind,_)},{immediate:!0});const p=()=>l.set("view",s.value.view==="grid"?"list":"grid"),h=e.computed(()=>i.value.kind!=="all"||!s.value.showHiddenFiles||d.value.active),V=()=>{u.value={sortBy:"name",sortOrder:"",filterKind:"all",showHidden:!0},l.set("showHiddenFiles",!0),r.clearSort(),r.clearFilter()};return(_,v)=>(e.openBlock(),e.createElementBlock("div",Qc,[e.createElementVNode("div",Xc,[e.unref(t).features.includes(e.unref(H).NEW_FOLDER)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"mx-1.5",title:e.unref(o)("New Folder"),onClick:v[0]||(v[0]=f=>e.unref(t).modal.open(St,{items:e.unref(a)}))},[e.createVNode(e.unref(_n))],8,Jc)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(H).NEW_FILE)?(e.openBlock(),e.createElementBlock("div",{key:1,class:"mx-1.5",title:e.unref(o)("New File"),onClick:v[1]||(v[1]=f=>e.unref(t).modal.open(gn,{items:e.unref(a)}))},[e.createVNode(e.unref(hn))],8,Zc)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(H).RENAME)?(e.openBlock(),e.createElementBlock("div",{key:2,class:"mx-1.5",title:e.unref(o)("Rename"),onClick:v[2]||(v[2]=f=>e.unref(a).length!==1||e.unref(t).modal.open(Xe,{items:e.unref(a)}))},[e.createVNode(e.unref(Qt),{class:e.normalizeClass(e.unref(a).length===1?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,ed)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(H).DELETE)?(e.openBlock(),e.createElementBlock("div",{key:3,class:"mx-1.5",title:e.unref(o)("Delete"),onClick:v[3]||(v[3]=f=>!e.unref(a).length||e.unref(t).modal.open(Qe,{items:e.unref(a)}))},[e.createVNode(e.unref(Yt),{class:e.normalizeClass(e.unref(a).length?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,td)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(H).UPLOAD)?(e.openBlock(),e.createElementBlock("div",{key:4,class:"mx-1.5",title:e.unref(o)("Upload"),onClick:v[4]||(v[4]=f=>e.unref(t).modal.open(Bt,{items:e.unref(a)}))},[e.createVNode(e.unref(wn))],8,nd)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(H).UNARCHIVE)&&e.unref(a).length===1&&e.unref(a)[0].mime_type==="application/zip"?(e.openBlock(),e.createElementBlock("div",{key:5,class:"mx-1.5",title:e.unref(o)("Unarchive"),onClick:v[5]||(v[5]=f=>!e.unref(a).length||e.unref(t).modal.open($t,{items:e.unref(a)}))},[e.createVNode(e.unref(yn),{class:e.normalizeClass(e.unref(a).length?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,od)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(H).ARCHIVE)?(e.openBlock(),e.createElementBlock("div",{key:6,class:"mx-1.5",title:e.unref(o)("Archive"),onClick:v[6]||(v[6]=f=>!e.unref(a).length||e.unref(t).modal.open(Dt,{items:e.unref(a)}))},[e.createVNode(e.unref(kn),{class:e.normalizeClass(e.unref(a).length?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,rd)):e.createCommentVNode("",!0)]),e.createElementVNode("div",ld,[e.unref(t).features.includes(e.unref(H).SEARCH)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"mx-1.5",title:e.unref(o)("Search Files"),onClick:v[7]||(v[7]=f=>e.unref(t).modal.open(xt))},[e.createVNode(e.unref(bt),{class:"vf-toolbar-icon text-(--vf-bg-primary)"})],8,ad)):e.createCommentVNode("",!0),e.createElementVNode("div",sd,[e.createElementVNode("div",{title:e.unref(o)("Filter"),onClick:v[8]||(v[8]=f=>m.value=!m.value),class:"vuefinder__toolbar__dropdown-trigger"},[e.createElementVNode("div",cd,[e.createVNode(e.unref(Yc),{class:"vf-toolbar-icon vuefinder__toolbar__icon w-6 h-6"}),h.value?(e.openBlock(),e.createElementBlock("div",dd)):e.createCommentVNode("",!0)])],8,id),m.value?(e.openBlock(),e.createElementBlock("div",ud,[e.createElementVNode("div",md,[e.createElementVNode("div",fd,[e.createElementVNode("div",pd,e.toDisplayString(e.unref(o)("Sorting")),1),e.createElementVNode("div",vd,[e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":v[9]||(v[9]=f=>u.value.sortBy=f),class:"vuefinder__toolbar__dropdown-select"},[e.createElementVNode("option",_d,e.toDisplayString(e.unref(o)("Name")),1),e.createElementVNode("option",hd,e.toDisplayString(e.unref(o)("Size")),1),e.createElementVNode("option",gd,e.toDisplayString(e.unref(o)("Date")),1)],512),[[e.vModelSelect,u.value.sortBy]]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":v[10]||(v[10]=f=>u.value.sortOrder=f),class:"vuefinder__toolbar__dropdown-select"},[e.createElementVNode("option",wd,e.toDisplayString(e.unref(o)("None")),1),e.createElementVNode("option",yd,e.toDisplayString(e.unref(o)("Asc")),1),e.createElementVNode("option",kd,e.toDisplayString(e.unref(o)("Desc")),1)],512),[[e.vModelSelect,u.value.sortOrder]])])]),e.createElementVNode("div",bd,[e.createElementVNode("div",Ed,e.toDisplayString(e.unref(o)("Show")),1),e.createElementVNode("div",Vd,[e.createElementVNode("label",Nd,[e.withDirectives(e.createElementVNode("input",{type:"radio",name:"filterKind",value:"all","onUpdate:modelValue":v[11]||(v[11]=f=>u.value.filterKind=f),class:"vuefinder__toolbar__radio"},null,512),[[e.vModelRadio,u.value.filterKind]]),e.createElementVNode("span",xd,e.toDisplayString(e.unref(o)("All items")),1)]),e.createElementVNode("label",Cd,[e.withDirectives(e.createElementVNode("input",{type:"radio",name:"filterKind",value:"files","onUpdate:modelValue":v[12]||(v[12]=f=>u.value.filterKind=f),class:"vuefinder__toolbar__radio"},null,512),[[e.vModelRadio,u.value.filterKind]]),e.createElementVNode("span",Sd,e.toDisplayString(e.unref(o)("Files only")),1)]),e.createElementVNode("label",Bd,[e.withDirectives(e.createElementVNode("input",{type:"radio",name:"filterKind",value:"folders","onUpdate:modelValue":v[13]||(v[13]=f=>u.value.filterKind=f),class:"vuefinder__toolbar__radio"},null,512),[[e.vModelRadio,u.value.filterKind]]),e.createElementVNode("span",$d,e.toDisplayString(e.unref(o)("Folders only")),1)])])]),e.createElementVNode("div",Dd,[e.createElementVNode("label",Td,e.toDisplayString(e.unref(o)("Show hidden files")),1),e.withDirectives(e.createElementVNode("input",{type:"checkbox",id:"showHidden","onUpdate:modelValue":v[14]||(v[14]=f=>u.value.showHidden=f),class:"vuefinder__toolbar__checkbox"},null,512),[[e.vModelCheckbox,u.value.showHidden]])]),e.createElementVNode("div",Fd,[e.createElementVNode("button",{onClick:V,class:"vuefinder__toolbar__reset-button"},e.toDisplayString(e.unref(o)("Reset")),1)])])])):e.createCommentVNode("",!0)]),e.unref(t).features.includes(e.unref(H).FULL_SCREEN)?(e.openBlock(),e.createElementBlock("div",{key:1,onClick:v[15]||(v[15]=f=>e.unref(l).toggle("fullScreen")),class:"mx-1.5",title:e.unref(o)("Toggle Full Screen")},[e.unref(s).fullScreen?(e.openBlock(),e.createBlock(e.unref(Pc),{key:0,class:"vf-toolbar-icon"})):(e.openBlock(),e.createBlock(e.unref(Oc),{key:1,class:"vf-toolbar-icon"}))],8,Md)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"mx-1.5",title:e.unref(o)("Change View"),onClick:v[16]||(v[16]=f=>p())},[e.unref(s).view==="grid"?(e.openBlock(),e.createBlock(e.unref(Uc),{key:0,class:"vf-toolbar-icon"})):e.createCommentVNode("",!0),e.unref(s).view==="list"?(e.openBlock(),e.createBlock(e.unref(Wc),{key:1,class:"vf-toolbar-icon"})):e.createCommentVNode("",!0)],8,Ad)])]))}}),Od={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"vuefinder__breadcrumb__refresh-icon",viewBox:"-40 -40 580 580"};function Ld(n,t){return e.openBlock(),e.createElementBlock("svg",Od,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M463.5 224h8.5c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2S461.9 48.1 455 55l-41.6 41.6c-87.6-86.5-228.7-86.2-315.8 1-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2S334.3 224 344 224z"},null,-1)])])}const Rd={render:Ld},Pd={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-0.5 rounded",viewBox:"0 0 20 20"};function zd(n,t){return e.openBlock(),e.createElementBlock("svg",Pd,[...t[0]||(t[0]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 9.707a1 1 0 0 1 0-1.414l4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1-1.414 1.414L11 7.414V15a1 1 0 1 1-2 0V7.414L6.707 9.707a1 1 0 0 1-1.414 0",class:"pointer-events-none","clip-rule":"evenodd"},null,-1)])])}const Hd={render:zd},Ud={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"vuefinder__breadcrumb__close-icon",viewBox:"0 0 24 24"};function jd(n,t){return e.openBlock(),e.createElementBlock("svg",Ud,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1)])])}const Kd={render:jd},Wd={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"};function Gd(n,t){return e.openBlock(),e.createElementBlock("svg",Wd,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M10.707 2.293a1 1 0 0 0-1.414 0l-7 7a1 1 0 0 0 1.414 1.414L4 10.414V17a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-6.586l.293.293a1 1 0 0 0 1.414-1.414z",class:"pointer-events-none"},null,-1)])])}const qd={render:Gd},Yd={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"w-6 h-6 cursor-pointer",viewBox:"0 0 24 24"};function Qd(n,t){return e.openBlock(),e.createElementBlock("svg",Yd,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1)])])}const Xd={render:Qd},Jd={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"};function Zd(n,t){return e.openBlock(),e.createElementBlock("svg",Jd,[...t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M9 6h11M12 12h8M15 18h5M5 6v.01M8 12v.01M11 18v.01"},null,-1)])])}const eu={render:Zd},tu={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function nu(n,t){return e.openBlock(),e.createElementBlock("svg",tu,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2m-6 12h8a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2h-8a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2"},null,-1)])])}const ou={render:nu},ru={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function lu(n,t){return e.openBlock(),e.createElementBlock("svg",ru,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0-4-4m4 4-4 4m0 6H4m0 0 4 4m-4-4 4-4"},null,-1)])])}const au={render:lu};function Ie(n,t=[]){const o="vfDragEnterCounter",r=n.fs,l=O.useStore(r.selectedItems);function s(c,u){if(c.isExternalDrag)return;c.preventDefault(),r.getDraggedItem()===u.path||!u||u.type!=="dir"||l.value.some(h=>h.path===u.path||Ps(h.path)===u.path)?c.dataTransfer&&(c.dataTransfer.dropEffect="none",c.dataTransfer.effectAllowed="none"):(c.dataTransfer&&(c.dataTransfer.dropEffect="copy",c.dataTransfer.effectAllowed="all"),c.currentTarget.classList.add(...t))}function a(c){if(c.isExternalDrag)return;c.preventDefault();const u=c.currentTarget,p=Number(u.dataset[o]||0);u.dataset[o]=String(p+1)}function d(c){if(c.isExternalDrag)return;c.preventDefault();const u=c.currentTarget,h=Number(u.dataset[o]||0)-1;h<=0?(delete u.dataset[o],u.classList.remove(...t)):u.dataset[o]=String(h)}function i(c,u){if(c.isExternalDrag||!u)return;c.preventDefault();const p=c.currentTarget;delete p.dataset[o],p.classList.remove(...t);const h=c.dataTransfer?.getData("items")||"[]",_=JSON.parse(h).map(v=>r.sortedFiles.get().find(f=>f.path===v));r.clearDraggedItem(),n.modal.open(Ce,{items:{from:_,to:u}})}function m(c){return{dragover:u=>s(u,c),dragenter:a,dragleave:d,drop:u=>i(u,c)}}return{events:m}}const su={class:"vuefinder__breadcrumb__container"},iu=["title"],cu=["title"],du=["title"],uu=["title"],mu={class:"vuefinder__breadcrumb__path-container"},fu={class:"vuefinder__breadcrumb__list"},pu={key:0,class:"vuefinder__breadcrumb__hidden-list"},vu={class:"relative"},_u=["title","onClick"],hu=["title"],gu={class:"vuefinder__breadcrumb__path-mode"},wu={class:"vuefinder__breadcrumb__path-mode-content"},yu=["title"],ku={class:"vuefinder__breadcrumb__path-text"},bu=["title"],Eu=["data-theme"],Vu=["onClick"],Nu={class:"vuefinder__breadcrumb__hidden-item-content"},xu={class:"vuefinder__breadcrumb__hidden-item-text"},Cu=e.defineComponent({__name:"Breadcrumb",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=t.config,s=O.useStore(l.state),a=O.useStore(r.path),d=O.useStore(r.loading),i=e.ref(null),m=Jt(0,100),c=e.ref(5),u=e.ref(!1),p=e.ref(!1),h=e.computed(()=>a.value?.breadcrumb??[]);function V(R,b){return R.length>b?[R.slice(-b),R.slice(0,-b)]:[R,[]]}const _=e.computed(()=>V(h.value,c.value)[0]),v=e.computed(()=>V(h.value,c.value)[1]);e.watch(m,()=>{if(!i.value)return;const R=i.value.children;let b=0,w=0;const E=5,N=1;c.value=E,e.nextTick(()=>{for(let F=R.length-1;F>=0;F--){const L=R[F];if(b+L.offsetWidth>m.value-40)break;b+=parseInt(L.offsetWidth.toString(),10),w++}w<N&&(w=N),w>E&&(w=E),c.value=w})});const f=()=>{i.value&&(m.value=i.value.offsetWidth)},y=e.ref(null);e.onMounted(()=>{y.value=new ResizeObserver(f),i.value&&y.value.observe(i.value)}),e.onUnmounted(()=>{y.value&&y.value.disconnect()});const g=Ie(t,["vuefinder__drag-over"]);function k(R=null){R??=h.value.length-2;const b={basename:a.value?.storage??"local",extension:"",path:(a.value?.storage??"local")+"://",storage:a.value?.storage??"local",type:"dir",file_size:null,last_modified:null,mime_type:null,visibility:""};return h.value[R]??b}const C=()=>{t.adapter.invalidateListQuery(a.value.path),t.adapter.open(a.value.path)},x=()=>{_.value.length>0&&t.adapter.open(h.value[h.value.length-2]?.path??(a.value?.storage??"local")+"://")},D=R=>{t.adapter.open(R.path),u.value=!1},A=()=>{u.value&&(u.value=!1)},T={mounted(R,b){R.clickOutsideEvent=function(w){R===w.target||R.contains(w.target)||b.value()},document.body.addEventListener("click",R.clickOutsideEvent)},beforeUnmount(R){document.body.removeEventListener("click",R.clickOutsideEvent)}},U=()=>{l.toggle("showTreeView")},W=e.ref({x:0,y:0}),X=(R,b=null)=>{if(R.currentTarget instanceof HTMLElement){const{x:w,y:E,height:N}=R.currentTarget.getBoundingClientRect();W.value={x:w,y:E+N}}u.value=b??!u.value},P=()=>{p.value=!p.value},K=async()=>{await Me(a.value?.path||""),t.emitter.emit("vf-toast-push",{label:o("Path copied to clipboard")})},Y=()=>{p.value=!1};return(R,b)=>(e.openBlock(),e.createElementBlock("div",su,[e.createElementVNode("span",{title:e.unref(o)("Toggle Tree View")},[e.createVNode(e.unref(eu),{onClick:U,class:e.normalizeClass(["vuefinder__breadcrumb__toggle-tree",e.unref(s).showTreeView?"vuefinder__breadcrumb__toggle-tree--active":""])},null,8,["class"])],8,iu),e.createElementVNode("span",{title:e.unref(o)("Go up a directory")},[e.createVNode(e.unref(Hd),e.mergeProps(e.toHandlers(h.value.length?e.unref(g).events(k()):{}),{onClick:x,class:h.value.length?"vuefinder__breadcrumb__go-up--active":"vuefinder__breadcrumb__go-up--inactive"}),null,16,["class"])],8,cu),e.unref(r).isLoading()?(e.openBlock(),e.createElementBlock("span",{key:1,title:e.unref(o)("Cancel")},[e.createVNode(e.unref(Kd),{onClick:b[0]||(b[0]=w=>e.unref(t).emitter.emit("vf-fetch-abort"))})],8,uu)):(e.openBlock(),e.createElementBlock("span",{key:0,title:e.unref(o)("Refresh")},[e.createVNode(e.unref(Rd),{onClick:C})],8,du)),e.withDirectives(e.createElementVNode("div",mu,[e.createElementVNode("div",null,[e.createVNode(e.unref(qd),e.mergeProps({class:"vuefinder__breadcrumb__home-icon"},e.toHandlers(e.unref(g).events(k(-1))),{onClick:b[1]||(b[1]=e.withModifiers(w=>e.unref(t).adapter.open(e.unref(a).storage+"://"),["stop"]))}),null,16)]),e.createElementVNode("div",fu,[v.value.length?e.withDirectives((e.openBlock(),e.createElementBlock("div",pu,[b[3]||(b[3]=e.createElementVNode("div",{class:"vuefinder__breadcrumb__separator"},"/",-1)),e.createElementVNode("div",vu,[e.createElementVNode("span",{onDragenter:b[2]||(b[2]=w=>X(w,!0)),onClick:e.withModifiers(X,["stop"]),class:"vuefinder__breadcrumb__hidden-toggle"},[e.createVNode(e.unref(vn),{class:"vuefinder__breadcrumb__hidden-toggle-icon"})],32)])])),[[T,A]]):e.createCommentVNode("",!0)]),e.createElementVNode("div",{ref_key:"breadcrumbContainer",ref:i,class:"vuefinder__breadcrumb__visible-list pointer-events-none"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(_.value,(w,E)=>(e.openBlock(),e.createElementBlock("div",{key:E},[b[4]||(b[4]=e.createElementVNode("span",{class:"vuefinder__breadcrumb__separator"},"/",-1)),e.createElementVNode("span",e.mergeProps(e.toHandlers(e.unref(g).events(w),!0),{class:"vuefinder__breadcrumb__item pointer-events-auto",title:w.basename,onClick:e.withModifiers(N=>e.unref(t).adapter.open(w.path),["stop"])}),e.toDisplayString(w.name),17,_u)]))),128))],512),e.unref(l).get("loadingIndicator")==="circular"&&e.unref(d)?(e.openBlock(),e.createBlock(e.unref(tt),{key:0})):e.createCommentVNode("",!0),e.createElementVNode("span",{title:e.unref(o)("Toggle Path Copy Mode"),onClick:P},[e.createVNode(e.unref(au),{class:"vuefinder__breadcrumb__toggle-icon"})],8,hu)],512),[[e.vShow,!p.value]]),e.withDirectives(e.createElementVNode("div",gu,[e.createElementVNode("div",wu,[e.createElementVNode("div",{title:e.unref(o)("Copy Path")},[e.createVNode(e.unref(ou),{class:"vuefinder__breadcrumb__copy-icon",onClick:K})],8,yu),e.createElementVNode("div",ku,e.toDisplayString(e.unref(a).path),1),e.createElementVNode("div",{title:e.unref(o)("Exit")},[e.createVNode(e.unref(Xd),{class:"vuefinder__breadcrumb__exit-icon",onClick:Y})],8,bu)])],512),[[e.vShow,p.value]]),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.createElementVNode("div",null,[e.withDirectives(e.createElementVNode("div",{style:e.normalizeStyle({position:"absolute",top:W.value.y+"px",left:W.value.x+"px"}),class:"vuefinder__themer vuefinder__breadcrumb__hidden-dropdown","data-theme":e.unref(t).theme.current},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(v.value,(w,E)=>(e.openBlock(),e.createElementBlock("div",e.mergeProps({key:E},e.toHandlers(e.unref(g).events(w),!0),{onClick:N=>D(w),class:"vuefinder__breadcrumb__hidden-item"}),[e.createElementVNode("div",Nu,[e.createElementVNode("span",null,[e.createVNode(e.unref(_e),{class:"vuefinder__breadcrumb__hidden-item-icon"})]),b[5]||(b[5]=e.createTextVNode()),e.createElementVNode("span",xu,e.toDisplayString(w.name),1)])],16,Vu))),128))],12,Eu),[[e.vShow,u.value]])])]))]))}});function Su(n,t){const{scrollContainer:o,itemWidth:r=100,rowHeight:l,overscan:s=2,containerPadding:a=48,lockItemsPerRow:d}=t,i=n,m=()=>typeof l=="number"?l:l.value,c=e.ref(0),u=e.ref(6),p=e.ref(600);let h=null;const V=e.computed(()=>Math.ceil(i.value.length/u.value)),_=e.computed(()=>V.value*m()),v=e.computed(()=>{const T=m(),U=Math.max(0,Math.floor(c.value/T)-s),W=Math.min(V.value,Math.ceil((c.value+p.value)/T)+s);return{start:U,end:W}}),f=e.computed(()=>{const{start:T,end:U}=v.value;return Array.from({length:U-T},(W,X)=>T+X)}),y=()=>p.value,g=()=>d.value,k=()=>{if(g()){u.value=1;return}if(o.value){const T=o.value.clientWidth-a;u.value=Math.max(Math.floor(T/r),2)}},C=T=>{const U=T.target;c.value=U.scrollTop};e.watch(()=>i.value.length,()=>{k()});const x=(T,U)=>{if(!T||!Array.isArray(T))return[];const W=U*u.value;return T.slice(W,W+u.value)},D=(T,U,W,X,P)=>{if(!T||!Array.isArray(T))return[];const K=[];for(let Y=U;Y<=W;Y++)for(let R=X;R<=P;R++){const b=Y*u.value+R;b<T.length&&T[b]&&K.push(T[b])}return K},A=T=>({row:Math.floor(T/u.value),col:T%u.value});return e.onMounted(async()=>{await e.nextTick(),o.value&&(p.value=o.value.clientHeight||600),k(),window.addEventListener("resize",()=>{o.value&&(p.value=o.value.clientHeight||600),k()}),o.value&&"ResizeObserver"in window&&(h=new ResizeObserver(T=>{const U=T[0];U&&(p.value=Math.round(U.contentRect.height)),k()}),h.observe(o.value))}),e.onUnmounted(()=>{window.removeEventListener("resize",k),h&&(h.disconnect(),h=null)}),{scrollTop:c,itemsPerRow:u,totalRows:V,totalHeight:_,visibleRange:v,visibleRows:f,updateItemsPerRow:k,handleScroll:C,getRowItems:x,getItemsInRange:D,getItemPosition:A,getContainerHeight:y}}function Bu(n){const{getItemPosition:t,getItemsInRange:o,getKey:r,selectionObject:l,rowHeight:s,itemWidth:a}=n,d=Math.floor(Math.random()*2**32).toString(),i=e.inject("ServiceContainer"),m=i.fs,c=O.useStore(m.selectedKeys),u=O.useStore(m.sortedFiles),p=e.ref(new Set),h=e.ref(!1),V=e.ref(!1),_=e.ref(null),v=b=>b.map(w=>w.getAttribute("data-key")).filter(w=>!!w),f=b=>{b.selection.getSelection().forEach(w=>{b.selection.deselect(w,!0)})},y=b=>{c.value&&c.value.forEach(w=>{const E=document.querySelector(`[data-key="${w}"]`);E&&g(w)&&b.selection.select(E,!0)})},g=b=>{const w=u.value?.find(F=>r(F)===b);if(!w)return!1;const E=i.selectionFilterType,N=i.selectionFilterMimeIncludes;return E==="files"&&w.type==="dir"||E==="dirs"&&w.type==="file"?!1:N&&Array.isArray(N)&&N.length>0?w.type==="dir"?!0:w.mime_type?N.some(F=>w.mime_type?.startsWith(F)):!1:!0},k=b=>{if(b.size===0)return null;const E=Array.from(b).map(q=>{const ve=u.value?.findIndex(he=>r(he)===q)??-1;return t(ve>=0?ve:0)}),N=Math.min(...E.map(q=>q.row)),F=Math.max(...E.map(q=>q.row)),L=Math.min(...E.map(q=>q.col)),Q=Math.max(...E.map(q=>q.col));return{minRow:N,maxRow:F,minCol:L,maxCol:Q}},C=b=>{if(i.selectionMode==="single")return!1;h.value=!1,!b.event?.metaKey&&!b.event?.ctrlKey&&(V.value=!0),b.selection.resolveSelectables(),f(b),y(b)},x=e.ref(0),D=b=>{const w=b;if(w&&"touches"in w){const E=w.touches?.[0];if(E)return{x:E.clientX,y:E.clientY}}if(w&&"changedTouches"in w){const E=w.changedTouches?.[0];if(E)return{x:E.clientX,y:E.clientY}}if(w&&"clientX"in w&&"clientY"in w){const E=w;return{x:E.clientX,y:E.clientY}}return null},A=({event:b,selection:w})=>{x.value=(l.value?.getAreaLocation().y1??0)-(i.root.getBoundingClientRect().top??0);const E=document.querySelector(".selection-area-container");if(E&&(E.dataset.theme=i.theme.current),i.selectionMode==="single")return;const N=b;N&&"type"in N&&N.type==="touchend"&&N.preventDefault();const F=b;if(!F?.ctrlKey&&!F?.metaKey&&(m.clearSelection(),w.clearSelection(!0,!0)),p.value.clear(),l.value){const L=l.value.getSelectables()[0]?.closest(".scroller-"+d);if(L){const Q=L.getBoundingClientRect(),q=D(b);if(q){const ve=q.y-Q.top+L.scrollTop,he=q.x-Q.left,Ve=Math.floor(ve/s.value),$e=Math.floor(he/a);_.value={row:Ve,col:$e}}}}},T=b=>{if(i.selectionMode==="single")return;const w=b.selection,E=v(b.store.changed.added),N=v(b.store.changed.removed);V.value=!1,h.value=!0,E.forEach(F=>{c.value&&!c.value.has(F)&&g(F)&&(p.value.add(F),m.select(F,i.selectionMode||"multiple"))}),N.forEach(F=>{document.querySelector(`[data-key="${F}"]`)&&u.value?.find(Q=>r(Q)===F)&&p.value.delete(F),m.deselect(F)}),w.resolveSelectables(),y(b)},U=()=>{p.value.clear()},W=b=>{if(b.event&&_.value&&p.value.size>0){const E=Array.from(p.value).map(N=>{const F=u.value?.findIndex(L=>r(L)===N)??-1;return F>=0?t(F):null}).filter(N=>N!==null);if(E.length>0){const N=[...E,_.value],F={minRow:Math.min(...N.map(L=>L.row)),maxRow:Math.max(...N.map(L=>L.row)),minCol:Math.min(...N.map(L=>L.col)),maxCol:Math.max(...N.map(L=>L.col))};o(u.value||[],F.minRow,F.maxRow,F.minCol,F.maxCol).forEach(L=>{const Q=r(L);document.querySelector(`[data-key="${Q}"]`)||m.select(Q,i.selectionMode||"multiple")})}}},X=b=>{W(b),f(b),y(b),m.setSelectedCount(c.value?.size||0),h.value=!1,_.value=null},P=()=>{l.value=new Fn({selectables:[".file-item-"+d+":not(.vf-explorer-item--unselectable)"],boundaries:[".scroller-"+d],selectionContainerClass:"selection-area-container",behaviour:{overlap:"invert",intersect:"touch",startThreshold:0,triggers:[0],scrolling:{speedDivider:10,manualSpeed:750,startScrollMargins:{x:0,y:10}}},features:{touch:!0,range:!0,deselectOnBlur:!0,singleTap:{allow:!1,intersect:"native"}}}),l.value.on("beforestart",C),l.value.on("start",A),l.value.on("move",T),l.value.on("stop",X)},K=()=>{l.value&&(l.value.destroy(),l.value=null)},Y=()=>{l.value&&(Array.from(c.value??new Set).forEach(w=>{g(w)||m.deselect(w)}),K(),P())},R=b=>{V.value&&(l.value?.clearSelection(),U(),V.value=!1);const w=b;!p.value.size&&!V.value&&!w?.ctrlKey&&!w?.metaKey&&(m.clearSelection(),l.value?.clearSelection())};return e.onMounted(()=>{const b=w=>{!w.buttons&&h.value&&(h.value=!1)};document.addEventListener("dragleave",b),e.onUnmounted(()=>{document.removeEventListener("dragleave",b)})}),{isDragging:h,selectionStarted:V,explorerId:d,extractIds:v,cleanupSelection:f,refreshSelection:y,getSelectionRange:k,selectSelectionRange:W,initializeSelectionArea:P,destroySelectionArea:K,updateSelectionArea:Y,handleContentClick:R}}const $u={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 20 20"};function Du(n,t){return e.openBlock(),e.createElementBlock("svg",$u,[...t[0]||(t[0]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 0 1 1.414 0L10 10.586l3.293-3.293a1 1 0 1 1 1.414 1.414l-4 4a1 1 0 0 1-1.414 0l-4-4a1 1 0 0 1 0-1.414","clip-rule":"evenodd"},null,-1)])])}const Tu={render:Du},Fu={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 20 20"};function Mu(n,t){return e.openBlock(),e.createElementBlock("svg",Fu,[...t[0]||(t[0]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M14.707 12.707a1 1 0 0 1-1.414 0L10 9.414l-3.293 3.293a1 1 0 0 1-1.414-1.414l4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1 0 1.414","clip-rule":"evenodd"},null,-1)])])}const Au={render:Mu},ut=e.defineComponent({__name:"SortIcon",props:{direction:{}},setup(n){return(t,o)=>(e.openBlock(),e.createElementBlock("div",null,[n.direction==="asc"?(e.openBlock(),e.createBlock(e.unref(Tu),{key:0})):e.createCommentVNode("",!0),n.direction==="desc"?(e.openBlock(),e.createBlock(e.unref(Au),{key:1})):e.createCommentVNode("",!0)]))}}),Iu={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function Ou(n,t){return e.openBlock(),e.createElementBlock("svg",Iu,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 0 0 2-2V9.414a1 1 0 0 0-.293-.707l-5.414-5.414A1 1 0 0 0 12.586 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2"},null,-1)])])}const Lu={render:Ou},Ru={class:"vuefinder__drag-item__container"},Pu={class:"vuefinder__drag-item__count"},zu=e.defineComponent({__name:"DragItem",props:{count:{}},setup(n){const t=n;return(o,r)=>(e.openBlock(),e.createElementBlock("div",Ru,[e.createVNode(e.unref(Lu),{class:"vuefinder__drag-item__icon"}),e.createElementVNode("div",Pu,e.toDisplayString(t.count),1)]))}}),Hu={key:2,class:"vuefinder__item-icon__extension"},Ut=e.defineComponent({__name:"ItemIcon",props:{item:{},ext:{type:Boolean},small:{type:Boolean}},setup(n){const t=n,o=e.inject("ServiceContainer"),r=O.useStore(o.config.state),l={app:o,config:r.value,item:t.item};return(s,a)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__item-icon",n.small?"vuefinder__item-icon--small":"vuefinder__item-icon--large"])},[e.renderSlot(s.$slots,"icon",e.normalizeProps(e.guardReactiveProps(l)),()=>[n.item.type==="dir"?(e.openBlock(),e.createBlock(e.unref(_e),{key:0,class:"vuefinder__item-icon__folder"})):(e.openBlock(),e.createBlock(e.unref(Pe),{key:1,class:"vuefinder__item-icon__file"})),n.ext&&n.item.type!=="dir"&&n.item.extension?(e.openBlock(),e.createElementBlock("div",Hu,e.toDisplayString(n.item.extension.substring(0,3)),1)):e.createCommentVNode("",!0)])],2))}}),Uu={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24"};function ju(n,t){return e.openBlock(),e.createElementBlock("svg",Uu,[...t[0]||(t[0]=[e.createElementVNode("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M12 2a5 5 0 0 1 5 5v3a3 3 0 0 1 3 3v6a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3v-6a3 3 0 0 1 3-3V7a5 5 0 0 1 5-5m0 12a2 2 0 0 0-1.995 1.85L10 16a2 2 0 1 0 2-2m0-10a3 3 0 0 0-3 3v3h6V7a3 3 0 0 0-3-3"},null,-1)])])}const jt={render:ju},Ku=["data-key","data-row","data-col","draggable"],Wu={key:0},Gu={class:"vuefinder__explorer__item-grid-content"},qu=["data-src","alt"],Yu={class:"vuefinder__explorer__item-title"},Qu={key:1,class:"vuefinder__explorer__item-list-content"},Xu={class:"vuefinder__explorer__item-list-name"},Ju={class:"vuefinder__explorer__item-list-icon"},Zu={class:"vuefinder__explorer__item-name"},em={key:0,class:"vuefinder__explorer__item-path"},tm={key:1,class:"vuefinder__explorer__item-size"},nm={key:0},om={key:2,class:"vuefinder__explorer__item-date"},rm=e.defineComponent({__name:"FileItem",props:{item:{},view:{},compact:{type:Boolean},showThumbnails:{type:Boolean},isSelected:{type:Boolean},isDragging:{type:Boolean},rowIndex:{},colIndex:{},showPath:{type:Boolean},explorerId:{}},emits:["click","dblclick","contextmenu","dragstart","dragend"],setup(n,{emit:t}){const o=n,r=t,l=e.inject("ServiceContainer"),s=l.fs,a=l.config,d=e.computed(()=>{const y=l.selectionFilterType;return!y||y==="both"?!0:y==="files"&&o.item.type==="file"||y==="dirs"&&o.item.type==="dir"}),i=e.computed(()=>{const y=l.selectionFilterMimeIncludes;return!y||!y.length||o.item.type==="dir"?!0:o.item.mime_type?y.some(g=>o.item.mime_type?.startsWith(g)):!1}),m=e.computed(()=>d.value&&i.value),c=e.computed(()=>["file-item-"+o.explorerId,o.view==="grid"?"vf-explorer-item-grid":"vf-explorer-item-list",o.isSelected?"vf-explorer-selected":"",m.value?"":"vf-explorer-item--unselectable"]),u=e.computed(()=>({opacity:o.isDragging||s.isCut(o.item.path)||!m.value?.5:""}));let p=null;const h=e.ref(null);let V=!1;const _=()=>{p&&clearTimeout(p),v.value=!0},v=e.ref(!0),f=y=>{if(v.value=!1,p&&(y.preventDefault(),clearTimeout(p)),!V)V=!0,r("click",y),h.value=setTimeout(()=>{V=!1},300);else return V=!1,r("dblclick",y),p&&clearTimeout(p),!1;if(y.currentTarget&&y.currentTarget instanceof HTMLElement){const g=y.currentTarget.getBoundingClientRect();y.preventDefault(),p=setTimeout(()=>{let x=g.y+g.height;x+146>window.innerHeight-10&&(x=g.y-146),x<10&&(x=10);const D=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!0,view:window,button:2,buttons:0,clientX:g.x,clientY:x});y.target?.dispatchEvent(D)},300)}};return(y,g)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(c.value),style:e.normalizeStyle(u.value),"data-key":n.item.path,"data-row":n.rowIndex,"data-col":n.colIndex,draggable:v.value,onTouchstart:g[1]||(g[1]=k=>f(k)),onTouchend:g[2]||(g[2]=k=>_()),onClick:g[3]||(g[3]=k=>r("click",k)),onDblclick:g[4]||(g[4]=k=>r("dblclick",k)),onContextmenu:g[5]||(g[5]=e.withModifiers(k=>r("contextmenu",k),["prevent","stop"])),onDragstart:g[6]||(g[6]=k=>r("dragstart",k)),onDragend:g[7]||(g[7]=k=>r("dragend",k))},[n.view==="grid"?(e.openBlock(),e.createElementBlock("div",Wu,[e.unref(s).isReadOnly(n.item)?(e.openBlock(),e.createBlock(e.unref(jt),{key:0,class:"vuefinder__item--readonly vuefinder__item--readonly--left",title:"Read Only"})):e.createCommentVNode("",!0),e.createElementVNode("div",Gu,[(n.item.mime_type??"").startsWith("image")&&n.showThumbnails?(e.openBlock(),e.createElementBlock("img",{key:0,onTouchstart:g[0]||(g[0]=k=>k.preventDefault()),src:"data:image/png;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",class:"vuefinder__explorer__item-thumbnail lazy","data-src":e.unref(l).adapter.getPreviewUrl({path:n.item.path}),alt:n.item.basename},null,40,qu)):(e.openBlock(),e.createBlock(Ut,{key:1,item:n.item,ext:!0},{icon:e.withCtx(k=>[e.renderSlot(y.$slots,"icon",e.normalizeProps(e.guardReactiveProps(k)))]),_:3},8,["item"]))]),e.createElementVNode("span",Yu,e.toDisplayString(e.unref(pt)(n.item.basename)),1)])):(e.openBlock(),e.createElementBlock("div",Qu,[e.createElementVNode("div",Xu,[e.createElementVNode("div",Ju,[e.createVNode(Ut,{item:n.item,small:n.compact},{icon:e.withCtx(k=>[e.renderSlot(y.$slots,"icon",e.normalizeProps(e.guardReactiveProps(k)))]),_:3},8,["item","small"])]),e.createElementVNode("span",Zu,e.toDisplayString(n.item.basename),1),e.createElementVNode("div",null,[e.unref(s).isReadOnly(n.item)?(e.openBlock(),e.createBlock(e.unref(jt),{key:0,class:"vuefinder__item--readonly vuefinder__item--readonly--list",title:"Read Only"})):e.createCommentVNode("",!0)])]),n.showPath?(e.openBlock(),e.createElementBlock("div",em,e.toDisplayString(n.item.path),1)):e.createCommentVNode("",!0),n.showPath?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",tm,[n.item.file_size?(e.openBlock(),e.createElementBlock("div",nm,e.toDisplayString(e.unref(l).filesize(n.item.file_size)),1)):e.createCommentVNode("",!0)])),!n.showPath&&n.item.last_modified?(e.openBlock(),e.createElementBlock("div",om,e.toDisplayString(new Date(n.item.last_modified*1e3).toLocaleString()),1)):e.createCommentVNode("",!0)])),e.unref(a).get("pinnedFolders").find(k=>k.path===n.item.path)?(e.openBlock(),e.createBlock(e.unref(ht),{key:2,class:"vuefinder__item--pinned"})):e.createCommentVNode("",!0)],46,Ku))}}),lm=["data-row"],Kt=e.defineComponent({__name:"FileRow",props:{rowIndex:{},rowHeight:{},view:{},itemsPerRow:{},items:{},compact:{type:Boolean},showThumbnails:{type:Boolean},showPath:{type:Boolean},isDraggingItem:{type:Function},isSelected:{type:Function},dragNDropEvents:{type:Function},explorerId:{}},emits:["click","dblclick","contextmenu","dragstart","dragend"],setup(n,{emit:t}){const o=n,r=t,l=e.computed(()=>[o.view==="grid"?"vf-explorer-item-grid-row":"vf-explorer-item-list-row","pointer-events-none"]),s=e.computed(()=>({position:"absolute",top:0,left:0,width:"100%",height:`${o.rowHeight}px`,transform:`translateY(${o.rowIndex*o.rowHeight}px)`})),a=e.computed(()=>o.view==="grid"?{gridTemplateColumns:`repeat(${o.itemsPerRow||1}, 1fr)`}:{gridTemplateColumns:"1fr"});return(d,i)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(l.value),"data-row":n.rowIndex,style:e.normalizeStyle(s.value)},[e.createElementVNode("div",{class:e.normalizeClass(["grid justify-self-start",{"w-full":n.view==="list"}]),style:e.normalizeStyle(a.value)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.items,(m,c)=>(e.openBlock(),e.createBlock(rm,e.mergeProps({key:m.path,item:m,view:n.view,compact:n.compact,"show-thumbnails":n.showThumbnails,"show-path":n.showPath,"is-selected":n.isSelected(m.path),"is-dragging":n.isDraggingItem(m.path),"row-index":n.rowIndex,"col-index":c},e.toHandlers(n.dragNDropEvents(m)),{onClick:i[0]||(i[0]=u=>r("click",u)),onDblclick:i[1]||(i[1]=u=>r("dblclick",u)),onContextmenu:i[2]||(i[2]=u=>r("contextmenu",u)),onDragstart:i[3]||(i[3]=u=>r("dragstart",u)),onDragend:i[4]||(i[4]=u=>r("dragend",u)),explorerId:n.explorerId}),{icon:e.withCtx(u=>[e.renderSlot(d.$slots,"icon",e.mergeProps({ref_for:!0},u))]),_:3},16,["item","view","compact","show-thumbnails","show-path","is-selected","is-dragging","row-index","col-index","explorerId"]))),128))],6)],14,lm))}}),am=["onClick"],sm=e.defineComponent({__name:"Toast",setup(n){const t=e.inject("ServiceContainer"),{getStore:o}=t.storage,r=e.ref(o("full-screen",!1)),l=e.ref([]),s=i=>i==="error"?"text-red-400 border-red-400 dark:text-red-300 dark:border-red-300":"text-lime-600 border-lime-600 dark:text-lime-300 dark:border-lime-1300",a=i=>{l.value.splice(i,1)},d=i=>{let m=l.value.findIndex(c=>c.id===i);m!==-1&&a(m)};return t.emitter.on("vf-toast-clear",()=>{l.value=[]}),t.emitter.on("vf-toast-push",i=>{let m=new Date().getTime().toString(36).concat(performance.now().toString(),Math.random().toString()).replace(/\./g,"");i.id=m,l.value.push(i),setTimeout(()=>{d(m)},5e3)}),(i,m)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__toast",r.value.value?"vuefinder__toast--fixed":"vuefinder__toast--absolute"])},[e.createVNode(e.TransitionGroup,{name:"vuefinder__toast-item","enter-active-class":"vuefinder__toast-item--enter-active","leave-active-class":"vuefinder__toast-item--leave-active","leave-to-class":"vuefinder__toast-item--leave-to"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,(c,u)=>(e.openBlock(),e.createElementBlock("div",{key:u,onClick:p=>a(u),class:e.normalizeClass(["vuefinder__toast__message",s(c.type)])},e.toDisplayString(c.label),11,am))),128))]),_:1})],2))}}),im={class:"vuefinder__explorer__container"},cm={ref:"customScrollBar",class:"vuefinder__explorer__scrollbar"},dm={key:0,class:"vuefinder__explorer__header"},um={key:0,class:"vuefinder__linear-loader"},mm=e.defineComponent({__name:"Explorer",props:{onFileDclick:{type:Function},onFolderDclick:{type:Function}},setup(n){const t=n,o=e.inject("ServiceContainer"),r=Ie(o,["vuefinder__drag-over"]),l=e.useTemplateRef("dragImage"),s=e.shallowRef(null),a=e.useTemplateRef("scrollContainer"),d=e.useTemplateRef("scrollContent"),i=o.fs,m=o.config,c=O.useStore(m.state),u=O.useStore(i.sort),p=O.useStore(i.sortedFiles),h=O.useStore(i.selectedKeys),V=O.useStore(i.loading),_=$=>h.value?.has($)??!1;let v=null;const f=e.ref(null),y=e.useTemplateRef("customScrollBar"),g=e.useTemplateRef("customScrollBarContainer"),k=e.computed(()=>{const $=c.value.view,z=c.value.compactListView;return $==="grid"?88:z?24:50}),{t:C}=o.i18n,{itemsPerRow:x,totalHeight:D,visibleRows:A,handleScroll:T,getRowItems:U,getItemsInRange:W,getItemPosition:X,updateItemsPerRow:P}=Su(e.computed(()=>p.value??[]),{scrollContainer:a,itemWidth:104,rowHeight:k,overscan:2,containerPadding:0,lockItemsPerRow:e.computed(()=>c.value.view==="list")}),{explorerId:K,isDragging:Y,initializeSelectionArea:R,destroySelectionArea:b,updateSelectionArea:w,handleContentClick:E}=Bu({getItemPosition:X,getItemsInRange:W,getKey:$=>$.path,selectionObject:s,rowHeight:k,itemWidth:104}),N=e.ref(null),F=$=>{if(!$||!N.value)return!1;const z=h.value?.has(N.value)??!1;return Y.value&&(z?h.value?.has($)??!1:$===N.value)};e.watch(()=>m.get("view"),$=>{$==="list"?x.value=1:P()},{immediate:!0}),e.watch(x,$=>{m.get("view")==="list"&&$!==1&&(x.value=1)});const L=$=>p.value?.[$];e.onMounted(()=>{if(R(),s.value&&s.value.on("beforestart",({event:$})=>{const z=$?.target===d.value;if(!$?.metaKey&&!$?.ctrlKey&&!$?.altKey&&!z)return!1}),a.value&&(v=new Wt({elements_selector:".lazy",container:a.value})),e.watch(()=>[o.selectionFilterType,o.selectionFilterMimeIncludes],()=>{w()},{deep:!0}),g.value){const $=Ye.OverlayScrollbars(g.value,{scrollbars:{theme:"vf-scrollbars-theme"}},{initialized:z=>{f.value=z},scroll:z=>{const{scrollOffsetElement:j}=z.elements();a.value&&a.value.scrollTo({top:j.scrollTop,left:0})}});f.value=$}a.value&&a.value.addEventListener("scroll",()=>{const $=f.value;if(!$)return;const{scrollOffsetElement:z}=$.elements();z.scrollTo({top:a.value.scrollTop,left:0})})}),e.onMounted(()=>{o.emitter.on("vf-refresh-thumbnails",()=>{v&&v.update()})}),e.onUpdated(()=>{if(v&&v.update(),f.value&&y.value&&a.value){const z=a.value.scrollHeight>a.value.clientHeight,j=y.value;j.style.display=z?"block":"none",j.style.height=`${D.value}px`}}),e.onUnmounted(()=>{b(),v&&(v.destroy(),v=null),f.value&&(f.value.destroy(),f.value=null)});const Q=$=>{const z=$.target?.closest(".file-item-"+K),j=$;if(z){const G=String(z.getAttribute("data-key")),S=p.value?.find(re=>re.path===G),B=o.selectionFilterType,M=o.selectionFilterMimeIncludes,I=!B||B==="both"||B==="files"&&S?.type==="file"||B==="dirs"&&S?.type==="dir";let J=!0;if(M&&Array.isArray(M)&&M.length>0&&(S?.type==="dir"?J=!0:S?.mime_type?J=M.some(re=>(S?.mime_type).startsWith(re)):J=!1),!I||!J)return;const oe=o.selectionMode||"multiple";!j?.ctrlKey&&!j?.metaKey&&($.type!=="touchstart"||!i.isSelected(G))&&(i.clearSelection(),s.value?.clearSelection(!0,!0)),s.value?.resolveSelectables(),$.type==="touchstart"&&i.isSelected(G)?i.select(G,oe):i.toggleSelect(G,oe)}i.setSelectedCount(h.value?.size||0)},q=$=>{if($.type==="file"&&t.onFileDclick){o.emitter.emit("vf-file-dclick",$);return}if($.type==="dir"&&t.onFolderDclick){o.emitter.emit("vf-folder-dclick",$);return}const z=o.contextMenuItems.find(j=>j.show(o,{items:[$],target:$}));z&&z.action(o,[$])},ve=$=>{const z=$.target?.closest(".file-item-"+K),j=z?String(z.getAttribute("data-key")):null;if(!j)return;const G=p.value?.find(J=>J.path===j),S=o.selectionFilterType,B=o.selectionFilterMimeIncludes,M=!S||S==="both"||S==="files"&&G?.type==="file"||S==="dirs"&&G?.type==="dir";let I=!0;B&&Array.isArray(B)&&B.length>0&&(G?.type==="dir"?I=!0:G?.mime_type?I=B.some(J=>(G?.mime_type).startsWith(J)):I=!1),!(!M||!I)&&G&&q(G)},he=()=>{const $=h.value;return p.value?.filter(z=>$?.has(z.path))||[]},Ve=$=>{$.preventDefault();const z=$.target?.closest(".file-item-"+K);if(z){const j=String(z.getAttribute("data-key")),G=p.value?.find(J=>J.path===j),S=o.selectionFilterType,B=o.selectionFilterMimeIncludes,M=!S||S==="both"||S==="files"&&G?.type==="file"||S==="dirs"&&G?.type==="dir";let I=!0;if(B&&Array.isArray(B)&&B.length>0&&(G?.type==="dir"?I=!0:G?.mime_type?I=B.some(J=>(G?.mime_type).startsWith(J)):I=!1),!M||!I)return;h.value?.has(j)||(i.clearSelection(),i.select(j)),o.emitter.emit("vf-contextmenu-show",{event:$,items:he(),target:G})}},$e=$=>{$.preventDefault(),o.emitter.emit("vf-contextmenu-show",{event:$,items:he()})},Oe=$=>{if($.altKey||$.ctrlKey||$.metaKey)return $.preventDefault(),!1;Y.value=!0;const z=$.target?.closest(".file-item-"+K);if(N.value=z?String(z.dataset.key):null,$.dataTransfer&&N.value){$.dataTransfer.setDragImage(l.value,0,15),$.dataTransfer.effectAllowed="all",$.dataTransfer.dropEffect="copy";const j=h.value?.has(N.value)?Array.from(h.value):[N.value];$.dataTransfer.setData("items",JSON.stringify(j)),i.setDraggedItem(N.value)}},Le=()=>{N.value=null};return($,z)=>(e.openBlock(),e.createElementBlock("div",im,[e.createElementVNode("div",{ref:"customScrollBarContainer",class:e.normalizeClass(["vuefinder__explorer__scrollbar-container",[{"grid-view":e.unref(c).view==="grid"}]])},[e.createElementVNode("div",cm,null,512)],2),e.unref(c).view==="list"?(e.openBlock(),e.createElementBlock("div",dm,[e.createElementVNode("div",{onClick:z[0]||(z[0]=j=>e.unref(i).toggleSort("basename")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--name vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(C)("Name"))+" ",1),e.withDirectives(e.createVNode(ut,{direction:e.unref(u).order},null,8,["direction"]),[[e.vShow,e.unref(u).active&&e.unref(u).column==="basename"]])]),e.createElementVNode("div",{onClick:z[1]||(z[1]=j=>e.unref(i).toggleSort("file_size")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--size vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(C)("Size"))+" ",1),e.withDirectives(e.createVNode(ut,{direction:e.unref(u).order},null,8,["direction"]),[[e.vShow,e.unref(u).active&&e.unref(u).column==="file_size"]])]),e.createElementVNode("div",{onClick:z[2]||(z[2]=j=>e.unref(i).toggleSort("last_modified")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--date vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(C)("Date"))+" ",1),e.withDirectives(e.createVNode(ut,{direction:e.unref(u).order},null,8,["direction"]),[[e.vShow,e.unref(u).active&&e.unref(u).column==="last_modified"]])])])):e.createCommentVNode("",!0),e.createElementVNode("div",{ref_key:"scrollContainer",ref:a,class:e.normalizeClass(["vuefinder__explorer__selector-area","scroller-"+e.unref(K)]),onScroll:z[4]||(z[4]=(...j)=>e.unref(T)&&e.unref(T)(...j))},[e.unref(m).get("loadingIndicator")==="linear"&&e.unref(V)?(e.openBlock(),e.createElementBlock("div",um)):e.createCommentVNode("",!0),e.createElementVNode("div",{ref_key:"scrollContent",ref:d,class:"scrollContent min-h-full",style:e.normalizeStyle({height:`${e.unref(D)}px`,position:"relative",width:"100%"}),onContextmenu:e.withModifiers($e,["self","prevent"]),onClick:z[3]||(z[3]=e.withModifiers((...j)=>e.unref(E)&&e.unref(E)(...j),["self"]))},[e.createElementVNode("div",{ref_key:"dragImage",ref:l,class:"vuefinder__explorer__drag-item"},[e.createVNode(zu,{count:N.value&&e.unref(h).has(N.value)?e.unref(h).size:1},null,8,["count"])],512),e.unref(c).view==="grid"?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(e.unref(A),j=>(e.openBlock(),e.createBlock(Kt,{key:j,"row-index":j,"row-height":k.value,view:"grid","items-per-row":e.unref(x),items:e.unref(U)(e.unref(p),j),"show-thumbnails":e.unref(c).showThumbnails,"is-dragging-item":F,"is-selected":_,"drag-n-drop-events":G=>e.unref(r).events(G),explorerId:e.unref(K),onClick:Q,onDblclick:ve,onContextmenu:Ve,onDragstart:Oe,onDragend:Le},{icon:e.withCtx(G=>[e.renderSlot($.$slots,"icon",e.mergeProps({ref_for:!0},G))]),_:3},8,["row-index","row-height","items-per-row","items","show-thumbnails","drag-n-drop-events","explorerId"]))),128)):(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(e.unref(A),j=>(e.openBlock(),e.createBlock(Kt,{key:j,"row-index":j,"row-height":k.value,view:"list",items:L(j)?[L(j)]:[],compact:e.unref(c).compactListView,"is-dragging-item":F,"is-selected":_,"drag-n-drop-events":G=>e.unref(r).events(G),explorerId:e.unref(K),onClick:Q,onDblclick:ve,onContextmenu:Ve,onDragstart:Oe,onDragend:Le},{icon:e.withCtx(G=>[e.renderSlot($.$slots,"icon",e.mergeProps({ref_for:!0},G))]),_:3},8,["row-index","row-height","items","compact","drag-n-drop-events","explorerId"]))),128))],36)],34),e.createVNode(sm)]))}}),fm=["href","download"],pm=["onClick"],vm=e.defineComponent({__name:"ContextMenu",setup(n){const t=e.inject("ServiceContainer"),o=e.ref(null),r=e.ref([]),l=e.reactive({active:!1,items:[],positions:{left:"0px",top:"0px"}});t.emitter.on("vf-context-selected",i=>{r.value=i});const s=i=>i.link(t,r.value),a=i=>{t.emitter.emit("vf-contextmenu-hide"),i.action(t,r.value)};t.emitter.on("vf-contextmenu-show",({event:i,items:m,target:c=null})=>{l.items=t.contextMenuItems.filter(u=>u.show(t,{items:m,target:c})),c?m.length>1&&m.some(u=>u.path===c.path)?t.emitter.emit("vf-context-selected",m):t.emitter.emit("vf-context-selected",[c]):t.emitter.emit("vf-context-selected",[]),d(i)}),t.emitter.on("vf-contextmenu-hide",()=>{l.active=!1});const d=i=>{const m=t.root,c=t.root.getBoundingClientRect(),u=m.getBoundingClientRect();let p=i.clientX-c.left,h=i.clientY-c.top;l.active=!0,e.nextTick(()=>{const V=o.value?.getBoundingClientRect();let _=V?.height??0,v=V?.width??0;p=u.right-i.pageX+window.scrollX<v?p-v:p,h=u.bottom-i.pageY+window.scrollY<_?h-_:h,l.positions={left:String(p)+"px",top:String(h)+"px"}})};return(i,m)=>e.withDirectives((e.openBlock(),e.createElementBlock("ul",{ref_key:"contextmenu",ref:o,class:e.normalizeClass([{"vuefinder__context-menu--active":l.active,"vuefinder__context-menu--inactive":!l.active},"vuefinder__context-menu"]),style:e.normalizeStyle(l.positions)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.items,c=>(e.openBlock(),e.createElementBlock("li",{class:"vuefinder__context-menu__item",key:c.title},[c.link?(e.openBlock(),e.createElementBlock("a",{key:0,class:"vuefinder__context-menu__link",target:"_blank",href:s(c),download:s(c),onClick:m[0]||(m[0]=u=>e.unref(t).emitter.emit("vf-contextmenu-hide"))},[e.createElementVNode("span",null,e.toDisplayString(c.title(e.unref(t).i18n)),1)],8,fm)):(e.openBlock(),e.createElementBlock("div",{key:1,class:"vuefinder__context-menu__action",onClick:u=>a(c)},[e.createElementVNode("span",null,e.toDisplayString(c.title(e.unref(t).i18n)),1)],8,pm))]))),128))],6)),[[e.vShow,l.active]])}}),_m={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"};function hm(n,t){return e.openBlock(),e.createElementBlock("svg",_m,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0"},null,-1)])])}const gm={render:hm},wm={class:"vuefinder__status-bar__wrapper"},ym={class:"vuefinder__status-bar__storage"},km=["title"],bm={class:"vuefinder__status-bar__storage-icon"},Em=["value"],Vm=["value"],Nm={class:"vuefinder__status-bar__info space-x-2"},xm={key:0},Cm={key:1},Sm={key:0,class:"vuefinder__status-bar__size"},Bm={class:"vuefinder__status-bar__actions"},$m=["title"],Dm=e.defineComponent({__name:"Statusbar",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,l=O.useStore(r.sortedFiles),s=O.useStore(r.path),a=O.useStore(r.selectedCount),d=O.useStore(r.storages),i=O.useStore(r.selectedItems),m=O.useStore(r.path),c=p=>{const h=p.target.value;t.adapter.open(h+"://")},u=e.computed(()=>!i.value||i.value.length===0?0:i.value.reduce((p,h)=>p+(h.file_size||0),0));return(p,h)=>(e.openBlock(),e.createElementBlock("div",wm,[e.createElementVNode("div",ym,[e.createElementVNode("div",{class:"vuefinder__status-bar__storage-container",title:e.unref(o)("Storage")},[e.createElementVNode("div",bm,[e.createVNode(e.unref(gt))]),e.createElementVNode("select",{name:"vuefinder-media-selector",value:e.unref(s)?.storage,onChange:c,class:"vuefinder__status-bar__storage-select",tabindex:"-1"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(d),V=>(e.openBlock(),e.createElementBlock("option",{value:V,key:V},e.toDisplayString(V),9,Vm))),128))],40,Em)],8,km),e.createElementVNode("div",Nm,[e.unref(a)===0?(e.openBlock(),e.createElementBlock("span",xm,e.toDisplayString(e.unref(l).length)+" "+e.toDisplayString(e.unref(o)("items")),1)):(e.openBlock(),e.createElementBlock("span",Cm,[e.createTextVNode(e.toDisplayString(e.unref(a))+" "+e.toDisplayString(e.unref(o)("selected"))+" ",1),u.value?(e.openBlock(),e.createElementBlock("span",Sm,e.toDisplayString(e.unref(t).filesize(u.value)),1)):e.createCommentVNode("",!0)]))])]),e.createElementVNode("div",Bm,[e.renderSlot(p.$slots,"actions",{path:e.unref(m).path,count:e.unref(a)||0,selected:e.unref(i)||[]}),e.createElementVNode("span",{class:"vuefinder__status-bar__about",title:e.unref(o)("About"),onClick:h[0]||(h[0]=V=>e.unref(t).modal.open(_t))},[e.createVNode(e.unref(gm),{class:"h-5 w-5 stroke-slate-500 cursor-pointer"})],8,$m)])]))}}),Tm={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 24 24"};function Fm(n,t){return e.openBlock(),e.createElementBlock("svg",Tm,[...t[0]||(t[0]=[e.createElementVNode("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2m3.6 5.2a1 1 0 0 0-1.4.2L12 10.333 9.8 7.4a1 1 0 1 0-1.6 1.2l2.55 3.4-2.55 3.4a1 1 0 1 0 1.6 1.2l2.2-2.933 2.2 2.933a1 1 0 0 0 1.6-1.2L13.25 12l2.55-3.4a1 1 0 0 0-.2-1.4"},null,-1)])])}const Mm={render:Fm};function bn(n,t){const o=n.findIndex(r=>r.path===t.path);o>-1?n[o]=t:n.push(t)}const Am={class:"vuefinder__folder-loader-indicator"},Im={key:1,class:"vuefinder__folder-loader-indicator--icon"},En=e.defineComponent({__name:"FolderLoaderIndicator",props:e.mergeModels({storage:{},path:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const t=n,o=e.inject("ServiceContainer"),r=e.useModel(n,"modelValue"),l=e.ref(!1);e.watch(()=>r.value,()=>s());const s=async()=>{l.value=!0;try{const d=(await o.adapter.list(t.path)).files.filter(i=>i.type==="dir");bn(o.treeViewData,{path:t.path,type:"dir",folders:d})}catch(a){console.error("Failed to fetch subfolders:",a)}finally{l.value=!1}};return(a,d)=>(e.openBlock(),e.createElementBlock("div",Am,[l.value?(e.openBlock(),e.createBlock(e.unref(tt),{key:0,class:"vuefinder__folder-loader-indicator--loading"})):(e.openBlock(),e.createElementBlock("div",Im,[r.value?(e.openBlock(),e.createBlock(e.unref(et),{key:0,class:"vuefinder__folder-loader-indicator--minus"})):e.createCommentVNode("",!0),r.value?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(Ze),{key:1,class:"vuefinder__folder-loader-indicator--plus"}))]))]))}}),Om={key:0},Lm={class:"vuefinder__treesubfolderlist__no-folders"},Rm=["onClick"],Pm=["title","onDblclick","onClick"],zm={class:"vuefinder__treesubfolderlist__item-icon"},Hm={class:"vuefinder__treesubfolderlist__subfolder"},Um=e.defineComponent({__name:"TreeSubfolderList",props:{storage:{},path:{}},setup(n){const t=e.inject("ServiceContainer"),o=t.fs,r=Ie(t,["vuefinder__drag-over"]),l=e.ref({}),{t:s}=t.i18n,a=O.useStore(o.path),d=n,i=e.ref(null);e.onMounted(()=>{d.path===d.storage+"://"&&i.value&&Ye.OverlayScrollbars(i.value,{scrollbars:{theme:"vf-scrollbars-theme"}})});const m=e.computed(()=>t.treeViewData.find(c=>c.path===d.path)?.folders||[]);return(c,u)=>{const p=e.resolveComponent("TreeSubfolderList",!0);return e.openBlock(),e.createElementBlock("ul",{ref_key:"parentSubfolderList",ref:i,class:"vuefinder__treesubfolderlist__container"},[m.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("li",Om,[e.createElementVNode("div",Lm,e.toDisplayString(e.unref(s)("No folders")),1)])),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.value,h=>(e.openBlock(),e.createElementBlock("li",{key:h.path,class:"vuefinder__treesubfolderlist__item"},[e.createElementVNode("div",e.mergeProps(e.toHandlers(e.unref(r).events({...h,type:"dir"}),!0),{class:"vuefinder__treesubfolderlist__item-content"}),[e.createElementVNode("div",{class:"vuefinder__treesubfolderlist__item-toggle",onClick:V=>l.value[h.path]=!l.value[h.path]},[e.createVNode(En,{storage:n.storage,path:h.path,modelValue:l.value[h.path],"onUpdate:modelValue":V=>l.value[h.path]=V},null,8,["storage","path","modelValue","onUpdate:modelValue"])],8,Rm),e.createElementVNode("div",{class:"vuefinder__treesubfolderlist__item-link",title:h.path,onDblclick:V=>l.value[h.path]=!l.value[h.path],onClick:V=>e.unref(t).adapter.open(h.path)},[e.createElementVNode("div",zm,[e.unref(a)?.path===h.path?(e.openBlock(),e.createBlock(e.unref(wt),{key:0,class:"vuefinder__item-icon__folder--open"})):(e.openBlock(),e.createBlock(e.unref(_e),{key:1,class:"vuefinder__item-icon__folder"}))]),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__treesubfolderlist__item-text",{"vuefinder__treesubfolderlist__item-text--active":e.unref(a)?.path===h.path}])},e.toDisplayString(h.basename),3)],40,Pm)],16),e.createElementVNode("div",Hm,[e.withDirectives(e.createVNode(p,{storage:d.storage,path:h.path},null,8,["storage","path"]),[[e.vShow,l.value[h.path]]])])]))),128))],512)}}}),jm=e.defineComponent({__name:"TreeStorageItem",props:{storage:{}},setup(n){const t=e.inject("ServiceContainer"),o=t.fs,r=e.ref(!1),l=n,s=Ie(t,["vuefinder__drag-over"]),a=O.useStore(o.path),d=e.computed(()=>l.storage===a.value?.storage),i={storage:l.storage,path:l.storage+"://",type:"dir",basename:l.storage,extension:"",file_size:null,last_modified:null,mime_type:null,visibility:"public"};function m(c){c===a.value?.storage?r.value=!r.value:t.adapter.open(c+"://")}return(c,u)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",{onClick:u[2]||(u[2]=p=>m(n.storage)),class:"vuefinder__treestorageitem__header"},[e.createElementVNode("div",e.mergeProps(e.toHandlers(e.unref(s).events(i),!0),{class:["vuefinder__treestorageitem__info",d.value?"vuefinder__treestorageitem__info--active":""]}),[e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__treestorageitem__icon",d.value?"vuefinder__treestorageitem__icon--active":""])},[e.createVNode(e.unref(gt))],2),e.createElementVNode("div",null,e.toDisplayString(n.storage),1)],16),e.createElementVNode("div",{class:"vuefinder__treestorageitem__loader",onClick:u[1]||(u[1]=e.withModifiers(p=>r.value=!r.value,["stop"]))},[e.createVNode(En,{storage:n.storage,path:n.storage+"://",modelValue:r.value,"onUpdate:modelValue":u[0]||(u[0]=p=>r.value=p)},null,8,["storage","path","modelValue"])])]),e.withDirectives(e.createVNode(Um,{storage:n.storage,path:n.storage+"://",class:"vuefinder__treestorageitem__subfolder"},null,8,["storage","path"]),[[e.vShow,r.value]])],64))}}),Km={class:"vuefinder__folder-indicator"},Wm={class:"vuefinder__folder-indicator--icon"},Gm=e.defineComponent({__name:"FolderIndicator",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(n){const t=e.useModel(n,"modelValue");return(o,r)=>(e.openBlock(),e.createElementBlock("div",Km,[e.createElementVNode("div",Wm,[t.value?(e.openBlock(),e.createBlock(e.unref(et),{key:0,class:"vuefinder__folder-indicator--minus"})):e.createCommentVNode("",!0),t.value?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(Ze),{key:1,class:"vuefinder__folder-indicator--plus"}))])]))}}),qm={class:"vuefinder__treeview__header"},Ym={class:"vuefinder__treeview__pinned-label"},Qm={class:"vuefinder__treeview__pin-text text-nowrap"},Xm={key:0,class:"vuefinder__treeview__pinned-list"},Jm=["onClick"],Zm=["title"],ef=["onClick"],tf={key:0},nf={class:"vuefinder__treeview__no-pinned"},of=e.defineComponent({__name:"TreeView",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,{getStore:r,setStore:l}=t.storage,s=t.fs,a=t.config,d=O.useStore(a.state),i=O.useStore(s.sortedFiles),m=O.useStore(s.storages),c=O.useStore(s.path),u=Ie(t,["vuefinder__drag-over"]),p=e.ref(190),h=e.ref(r("pinned-folders-opened",!0));e.watch(h,f=>l("pinned-folders-opened",f));const V=f=>{a.set("pinnedFolders",a.get("pinnedFolders").filter(y=>y.path!==f.path))},_=f=>{const y=f.clientX,g=f.target.parentElement;if(!g)return;const k=g.getBoundingClientRect().width;g.classList.remove("transition-[width]"),g.classList.add("transition-none");const C=D=>{p.value=k+D.clientX-y,p.value<50&&(p.value=0,a.set("showTreeView",!1)),p.value>50&&a.set("showTreeView",!0)},x=()=>{const D=g.getBoundingClientRect();p.value=D.width,g.classList.add("transition-[width]"),g.classList.remove("transition-none"),window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",x)};window.addEventListener("mousemove",C),window.addEventListener("mouseup",x)},v=e.ref(null);return e.onMounted(()=>{v.value&&Ye.OverlayScrollbars(v.value,{overflow:{x:"hidden"},scrollbars:{theme:"vf-scrollbars-theme"}})}),e.watch(i,f=>{const y=f.filter(g=>g.type==="dir");bn(t.treeViewData,{path:c.value?.path||"",folders:y.map(g=>({storage:g.storage,path:g.path,basename:g.basename,type:"dir"}))})}),(f,y)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",{onClick:y[0]||(y[0]=g=>e.unref(a).toggle("showTreeView")),class:e.normalizeClass(["vuefinder__treeview__overlay",e.unref(d).showTreeView?"vuefinder__treeview__backdrop":"hidden"])},null,2),e.createElementVNode("div",{style:e.normalizeStyle(e.unref(d).showTreeView?"min-width:100px;max-width:75%; width: "+p.value+"px":"width: 0"),class:"vuefinder__treeview__container"},[e.createElementVNode("div",{ref_key:"treeViewScrollElement",ref:v,class:"vuefinder__treeview__scroll"},[e.createElementVNode("div",qm,[e.createElementVNode("div",{onClick:y[2]||(y[2]=g=>h.value=!h.value),class:"vuefinder__treeview__pinned-toggle"},[e.createElementVNode("div",Ym,[e.createVNode(e.unref(ht),{class:"vuefinder__treeview__pin-icon"}),e.createElementVNode("div",Qm,e.toDisplayString(e.unref(o)("Pinned Folders")),1)]),e.createVNode(Gm,{modelValue:h.value,"onUpdate:modelValue":y[1]||(y[1]=g=>h.value=g)},null,8,["modelValue"])]),h.value?(e.openBlock(),e.createElementBlock("ul",Xm,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(d).pinnedFolders,g=>(e.openBlock(),e.createElementBlock("li",{key:g.path,class:"vuefinder__treeview__pinned-item"},[e.createElementVNode("div",e.mergeProps(e.toHandlers(e.unref(u).events(g),!0),{class:"vuefinder__treeview__pinned-folder",onClick:k=>e.unref(t).adapter.open(g.path)}),[e.unref(c)?.path!==g.path?(e.openBlock(),e.createBlock(e.unref(_e),{key:0,class:"vuefinder__treeview__folder-icon vuefinder__item-icon__folder"})):e.createCommentVNode("",!0),e.unref(c)?.path===g.path?(e.openBlock(),e.createBlock(e.unref(wt),{key:1,class:"vuefinder__item-icon__folder--open vuefinder__treeview__open-folder-icon"})):e.createCommentVNode("",!0),e.createElementVNode("div",{title:g.path,class:e.normalizeClass(["vuefinder__treeview__folder-name",{"vuefinder__treeview__folder-name--active":e.unref(c)?.path===g.path}])},e.toDisplayString(g.basename),11,Zm)],16,Jm),e.createElementVNode("div",{class:"vuefinder__treeview__remove-folder",onClick:k=>V(g)},[e.createVNode(e.unref(Mm),{class:"vuefinder__treeview__remove-icon"})],8,ef)]))),128)),e.unref(d).pinnedFolders.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("li",tf,[e.createElementVNode("div",nf,e.toDisplayString(e.unref(o)("No folders pinned")),1)]))])):e.createCommentVNode("",!0)]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(m),g=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__treeview__storage",key:g},[e.createVNode(jm,{storage:g},null,8,["storage"])]))),128))],512),e.createElementVNode("div",{onMousedown:_,class:"vuefinder__treeview__resize-handle"},null,32)],4)],64))}}),te={newfolder:"newfolder",selectAll:"selectAll",pinFolder:"pinFolder",unpinFolder:"unpinFolder",delete:"delete",refresh:"refresh",preview:"preview",open:"open",openDir:"openDir",download:"download",download_archive:"download_archive",archive:"archive",unarchive:"unarchive",rename:"rename",move:"move",copy:"copy",paste:"paste"};function rf(n){return n.items.length>1&&n.items.some(t=>t.path===n.target?.path)?"many":n.target?"one":"none"}function ee(n){const t=Object.assign({needsSearchQuery:!1},n);return(o,r)=>!(t.needsSearchQuery!==!!r.searchQuery||t.target!==void 0&&t.target!==rf(r)||t.targetType!==void 0&&t.targetType!==r.target?.type||t.mimeType!==void 0&&t.mimeType!==r.target?.mime_type||t.feature!==void 0&&!o.features.includes(t.feature))}function De(...n){return(t,o)=>n.some(r=>r(t,o))}function Te(...n){return(t,o)=>n.every(r=>r(t,o))}const Vn=[{id:te.openDir,title:({t:n})=>n("Open containing folder"),action:(n,t)=>{const o=t[0];o&&n.adapter.open(o.dir)},show:ee({target:"one",needsSearchQuery:!0})},{id:te.refresh,title:({t:n})=>n("Refresh"),action:n=>{const t=n.fs;n.adapter.invalidateListQuery(t.path.get().path),n.adapter.open(t.path.get().path)},show:De(ee({target:"none"}),ee({target:"many"}))},{id:te.selectAll,title:({t:n})=>n("Select All"),action:n=>{n.fs.selectAll(n.selectionMode||"multiple")},show:(n,t)=>n.selectionMode==="multiple"&&ee({target:"none"})(n,t)},{id:te.newfolder,title:({t:n})=>n("New Folder"),action:n=>n.modal.open(St),show:ee({target:"none",feature:H.NEW_FOLDER})},{id:te.open,title:({t:n})=>n("Open"),action:(n,t)=>{t[0]&&n.adapter.open(t[0].path)},show:ee({target:"one",targetType:"dir"})},{id:te.pinFolder,title:({t:n})=>n("Pin Folder"),action:(n,t)=>{const o=n.config,r=o.get("pinnedFolders"),l=r.concat(t.filter(s=>r.findIndex(a=>a.path===s.path)===-1));o.set("pinnedFolders",l)},show:Te(ee({target:"one",targetType:"dir"}),(n,t)=>n.config.get("pinnedFolders").findIndex(l=>l.path===t.target?.path)===-1)},{id:te.unpinFolder,title:({t:n})=>n("Unpin Folder"),action:(n,t)=>{const o=n.config,r=o.get("pinnedFolders");o.set("pinnedFolders",r.filter(l=>!t.find(s=>s.path===l.path)))},show:Te(ee({target:"one",targetType:"dir"}),(n,t)=>n.config.get("pinnedFolders").findIndex(l=>l.path===t.target?.path)!==-1)},{id:te.preview,title:({t:n})=>n("Preview"),action:(n,t)=>n.modal.open(Je,{storage:t[0]?.storage,item:t[0]}),show:Te(ee({target:"one",feature:H.PREVIEW}),(n,t)=>t.target?.type!=="dir")},{id:te.download,link:(n,t)=>{if(t[0])return n.adapter.getDownloadUrl(t[0])},title:({t:n})=>n("Download"),action:()=>{},show:Te(ee({target:"one",feature:H.DOWNLOAD}),(n,t)=>t.target?.type!=="dir")},{id:te.rename,title:({t:n})=>n("Rename"),action:(n,t)=>n.modal.open(Xe,{items:t}),show:ee({target:"one",feature:H.RENAME})},{id:te.move,title:({t:n})=>n("Move"),action:(n,t)=>{const o=n.fs,r={storage:o.path.get().storage||"",path:o.path.get().path||"",type:"dir"};n.modal.open(Ce,{items:{from:t,to:r}})},show:De(ee({target:"one",feature:H.MOVE}),ee({target:"many",feature:H.MOVE}))},{id:te.copy,title:({t:n})=>n("Copy"),action:(n,t)=>{t.length>0&&n.fs.setClipboard("copy",new Set(t.map(o=>o.path)))},show:De(ee({target:"one",feature:H.COPY}),ee({target:"many",feature:H.COPY}))},{id:te.paste,title:({t:n})=>n("Paste"),action:(n,t)=>{const o=n.fs.getClipboard();if(o?.items?.size>0){const l=n.fs.path.get();let s=l.path,a=l.storage;t.length===1&&t[0].type==="dir"&&(s=t[0].path,a=t[0].storage);const d={storage:a||"",path:s||"",type:"dir"};n.modal.open(o.type==="cut"?Ce:kt,{items:{from:Array.from(o.items),to:d}})}},show:(n,t)=>n.fs.getClipboard()?.items?.size>0},{id:te.archive,title:({t:n})=>n("Archive"),action:(n,t)=>n.modal.open(Dt,{items:t}),show:De(ee({target:"many",feature:H.ARCHIVE}),Te(ee({target:"one",feature:H.ARCHIVE}),(n,t)=>t.target?.mime_type!=="application/zip"))},{id:te.unarchive,title:({t:n})=>n("Unarchive"),action:(n,t)=>n.modal.open($t,{items:t}),show:ee({target:"one",feature:H.UNARCHIVE,mimeType:"application/zip"})},{id:te.delete,title:({t:n})=>n("Delete"),action:(n,t)=>{n.modal.open(Qe,{items:t})},show:De(ee({feature:H.DELETE,target:"one"}),ee({feature:H.DELETE,target:"many"}))}],lf=["data-theme"],af={key:0,class:"vuefinder__external-drop-overlay vuefinder__external-drop-overlay--relative"},sf={class:"vuefinder__external-drop-message"},cf={class:"vuefinder__main__content"},Nn=e.defineComponent({__name:"VueFinder",props:{id:{default:"vf"},config:{},adapter:{},features:{type:[Boolean,Array],default:!0},debug:{type:Boolean,default:!1},theme:{default:"light"},locale:{},contextMenuItems:{default:()=>Vn},selectionMode:{default:"multiple"},selectionFilterType:{default:"both"},selectionFilterMimeIncludes:{default:()=>[]},onError:{},onSelect:{},onPathChange:{},onUploadComplete:{},onDeleteComplete:{},onReady:{},onFileDclick:{},onFolderDclick:{},customUploader:{}},emits:["select","path-change","upload-complete","delete-complete","error","ready","file-dclick","folder-dclick"],setup(n,{emit:t}){const o=t,r=n,l=Wn(r,e.inject("VueFinderOptions")||{});e.provide("ServiceContainer",l);const s=l.config,a=l.fs,d=O.useStore(s.state);wi(l);const{isDraggingExternal:i,handleDragEnter:m,handleDragOver:c,handleDragLeave:u,handleDrop:p}=yi();function h(_){a.setPath(_.dirname),s.get("persist")&&s.set("path",_.dirname),a.setReadOnly(_.read_only??!1),l.modal.close(),a.setFiles(_.files),a.clearSelection(),a.setSelectedCount(0),a.setStorages(_.storages)}l.adapter.onBeforeOpen=()=>{a.setLoading(!0)},l.adapter.onAfterOpen=_=>{h(_),a.setLoading(!1)},l.emitter.on("vf-upload-complete",_=>{o("upload-complete",_)}),l.emitter.on("vf-delete-complete",_=>{o("delete-complete",_)}),l.emitter.on("vf-file-dclick",_=>{o("file-dclick",_)}),l.emitter.on("vf-folder-dclick",_=>{o("folder-dclick",_)}),e.onMounted(()=>{e.watch(()=>s.get("path"),v=>{l.adapter.open(v)});const _=s.get("persist")?s.get("path"):s.get("initialPath")??"";a.setPath(_),l.adapter.open(_),a.path.listen(v=>{o("path-change",v.path)}),a.selectedItems.listen(v=>{o("select",v)}),o("ready")});const V=async _=>{const v=await p(_);v.length>0&&(l.modal.open(Bt),setTimeout(()=>{l.emitter.emit("vf-external-files-dropped",v.map(f=>f.file))},100))};return(_,v)=>(e.openBlock(),e.createElementBlock("div",{ref:"root",tabindex:"0",class:e.normalizeClass(["vuefinder vuefinder__main vuefinder__themer",{"vuefinder--dragging-external":e.unref(i)}]),"data-theme":e.unref(l).theme.current,onDragenter:v[2]||(v[2]=(...f)=>e.unref(m)&&e.unref(m)(...f)),onDragover:v[3]||(v[3]=(...f)=>e.unref(c)&&e.unref(c)(...f)),onDragleave:v[4]||(v[4]=(...f)=>e.unref(u)&&e.unref(u)(...f)),onDrop:V},[e.createElementVNode("div",{class:e.normalizeClass(e.unref(d).value&&e.unref(d).value.theme||"light"),style:{height:"100%",width:"100%"}},[e.createElementVNode("div",{class:e.normalizeClass([e.unref(d)?.fullScreen?"vuefinder__main__fixed":"vuefinder__main__relative","vuefinder__main__container"]),onMousedown:v[0]||(v[0]=f=>e.unref(l).emitter.emit("vf-contextmenu-hide")),onTouchstart:v[1]||(v[1]=f=>e.unref(l).emitter.emit("vf-contextmenu-hide"))},[e.unref(i)?(e.openBlock(),e.createElementBlock("div",af,[e.createElementVNode("div",sf,e.toDisplayString(e.unref(l).i18n.t("Drag and drop the files/folders to here.")),1)])):e.createCommentVNode("",!0),e.createVNode(Mc),e.createVNode(Id),e.createVNode(Cu),e.createElementVNode("div",cf,[e.createVNode(of),e.createVNode(mm,{"on-file-dclick":r.onFileDclick,"on-folder-dclick":r.onFolderDclick},{icon:e.withCtx(f=>[e.renderSlot(_.$slots,"icon",e.normalizeProps(e.guardReactiveProps(f)))]),_:3},8,["on-file-dclick","on-folder-dclick"])]),e.createVNode(Dm,null,{actions:e.withCtx(f=>[e.renderSlot(_.$slots,"status-bar",e.normalizeProps(e.guardReactiveProps(f)))]),_:3})],34),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.createVNode(e.Transition,{name:"fade"},{default:e.withCtx(()=>[e.unref(l).modal.visible?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(l).modal.type),{key:0})):e.createCommentVNode("",!0)]),_:1})])),e.createVNode(vm)],2)],42,lf))}}),xn={install(n,t={}){t.i18n=t.i18n??{};let[o]=Object.keys(t.i18n);t.locale=t.locale??o??"en",n.provide("VueFinderOptions",t),n.component("VueFinder",Nn)}};exports.ContextMenuIds=te;exports.VueFinder=Nn;exports.VueFinderPlugin=xn;exports.contextMenuItems=Vn;exports.default=xn;
