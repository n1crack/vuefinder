"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),x=require("@nanostores/vue"),ot=require("mitt"),rt=require("@nanostores/persistent"),X=require("nanostores"),lt=require("vue-advanced-cropper"),Te=require("vanilla-lazyload"),at=require("@uppy/core"),st=require("@uppy/xhr-upload"),it=require("@viselect/vanilla"),be=require("overlayscrollbars"),pe=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");class ct{config;constructor(t){this.config=Object.assign({baseUrl:"",headers:{},params:{},body:{},xsrfHeaderName:"X-CSRF-Token",fetchParams:{}},t)}customFetch=async(...t)=>{let[n,l]=t;this.config.fetchRequestInterceptor&&(l=this.config.fetchRequestInterceptor(l));let r=await fetch(n,l);return this.config.fetchResponseInterceptor&&(r=await this.config.fetchResponseInterceptor(r)),r};transformRequestParams(t){const n=this.config,l={};pe!=null&&pe!==""&&n.xsrfHeaderName&&(l[n.xsrfHeaderName]=pe);const r=Object.assign({},n.headers,l,t.headers),d=Object.assign({},n.params,t.params),c=n.baseUrl+t.url,m=t.method;let s;if(m!=="get")if(t.body instanceof FormData){const i=t.body;n.body!=null&&Object.entries(this.config.body).forEach(([a,f])=>{i.append(a,String(f))}),s=i}else{const i=Object.assign({},t.body??{});n.body!=null&&Object.assign(i,this.config.body),s=i}const u={url:c,method:m,headers:r,params:d,body:s};if(n.transformRequest!=null){const i=n.transformRequest({url:c,method:m,headers:r,params:d,body:s??null});i.url!=null&&(u.url=i.url),i.method!=null&&(u.method=i.method),i.params!=null&&(u.params=i.params),i.headers!=null&&(u.headers=i.headers),i.body!=null&&(u.body=i.body)}return u}getDownloadUrl(t,n){if(n.url!=null)return n.url;const l=this.transformRequestParams({url:"",method:"get",params:{q:"download",storage:t,path:n.path}});return l.url+"?"+new URLSearchParams(l.params).toString()}getPreviewUrl(t,n){if(n.url!=null)return n.url;const l=this.transformRequestParams({url:"",method:"get",params:{q:"preview",storage:t,path:n.path}});return l.url+"?"+new URLSearchParams(l.params).toString()}async send(t){const n=this.transformRequestParams(t),l=t.responseType||"json",r={method:t.method,headers:n.headers,signal:t.abortSignal},d=n.url+"?"+new URLSearchParams(n.params);if(n.method!=="get"&&n.body!=null){let m;n.body instanceof FormData?m=t.body:(m=JSON.stringify(n.body),r.headers["Content-Type"]="application/json"),r.body=m}this.config.fetchParams&&Object.assign(r,this.config.fetchParams);const c=await this.customFetch(d,r);if(c.ok)return await c[l]();throw await c.json()}}function dt(o){const t={baseUrl:"",headers:{},params:{},body:{},xsrfHeaderName:"X-CSRF-Token",fetchParams:{}};return typeof o=="string"?Object.assign(t,{baseUrl:o}):Object.assign(t,o),new ct(t)}function ut(o){let t=localStorage.getItem(o+"_storage");const n=e.reactive(JSON.parse(t??"{}"));e.watch(n,l);function l(){Object.keys(n).length?localStorage.setItem(o+"_storage",JSON.stringify(n)):localStorage.removeItem(o+"_storage")}function r(s,u){n[s]=u}function d(s){delete n[s]}function c(){Object.keys(n).forEach(s=>d(s))}return{getStore:(s,u=null)=>s in n?n[s]:u,setStore:r,removeStore:d,clearStore:c}}async function mt(o,t){const n=t[o];return typeof n=="function"?(await n()).default:n}function ft(o,t,n,l){const{getStore:r,setStore:d}=o,c=e.ref({}),m=e.ref(r("locale",t)),s=(a,f=t)=>{mt(a,l).then(p=>{c.value=p,d("locale",a),m.value=a,d("translations",p),Object.values(l).length>1&&(n.emit("vf-toast-push",{label:"The language is set to "+a}),n.emit("vf-language-saved"))}).catch(()=>{f?(n.emit("vf-toast-push",{label:"The selected locale is not yet supported!",type:"error"}),s(f,null)):n.emit("vf-toast-push",{label:"Locale cannot be loaded!",type:"error"})})};e.watch(m,a=>{s(a)}),!r("locale")&&!Object.keys(l).length?s(t):c.value=r("translations");const u=(a,...f)=>f.length?u(a=a.replace("%s",String(f.shift())),...f):a;function i(a,...f){return c.value&&Object.prototype.hasOwnProperty.call(c.value,a)?u(c.value[a]||a,...f):u(a,...f)}return e.reactive({t:i,locale:m})}const R={EDIT:"edit",NEW_FILE:"newfile",NEW_FOLDER:"newfolder",PREVIEW:"preview",ARCHIVE:"archive",UNARCHIVE:"unarchive",SEARCH:"search",RENAME:"rename",UPLOAD:"upload",DELETE:"delete",FULL_SCREEN:"fullscreen",DOWNLOAD:"download",LANGUAGE:"language"},vt=Object.values(R),_t="4.0.0-dev";function Me(o,t,n,l,r){return t=Math,n=t.log,l=1024,r=n(o)/n(l)|0,(o/t.pow(l,r)).toFixed(0)+" "+(r?"KMGTPEZY"[--r]+"iB":"B")}function Ae(o,t,n,l,r){return t=Math,n=t.log,l=1e3,r=n(o)/n(l)|0,(o/t.pow(l,r)).toFixed(0)+" "+(r?"KMGTPEZY"[--r]+"B":"B")}function pt(o){if(typeof o=="number")return o;const t={k:1,m:2,g:3,t:4},l=/(\d+(?:\.\d+)?)\s?(k|m|g|t)?b?/i.exec(o);if(!l)return 0;const r=parseFloat(l[1]||"0"),d=(l[2]||"").toLowerCase(),c=t[d]??0;return Math.round(r*Math.pow(1024,c))}const re={SYSTEM:"system",LIGHT:"light",DARK:"dark"};function ht(o,t){const n=e.ref(re.SYSTEM),l=e.ref(re.LIGHT);n.value=o.getStore("theme",t??re.SYSTEM);const r=window.matchMedia("(prefers-color-scheme: dark)"),d=c=>{n.value===re.DARK||n.value===re.SYSTEM&&c.matches?l.value=re.DARK:l.value=re.LIGHT};return d(r),r.addEventListener("change",d),{value:n,actualValue:l,set(c){n.value=c,c!==re.SYSTEM?o.setStore("theme",c):o.removeStore("theme"),d(r)}}}function gt(){const o=e.shallowRef(null),t=e.ref(!1),n=e.ref();return{visible:t,type:o,data:n,open:(d,c=null)=>{document.querySelector("body").style.overflow="hidden",t.value=!0,o.value=d,n.value=c},close:()=>{document.querySelector("body").style.overflow="",t.value=!1,o.value=null}}}const he={view:"grid",fullScreen:!1,showTreeView:!1,compactListView:!0,metricUnits:!1,showThumbnails:!0,persist:!1,path:"",loadingIndicator:"circular",maxFileSize:null,pinnedFolders:[],customIcon:void 0},kt=o=>{const t=`vuefinder_config_${o}`,n=rt.persistentAtom(t,he,{encode:JSON.stringify,decode:JSON.parse}),l=(u={})=>{const i=n.get(),a={...he,...u,...i};n.set(a)},r=u=>n.get()[u],d=()=>n.get(),c=(u,i)=>{const a=n.get();typeof u=="object"&&u!==null?n.set({...a,...u}):n.set({...a,[u]:i})};return{state:n,init:l,get:r,set:c,toggle:u=>{const i=n.get();c(u,!i[u])},all:d,reset:()=>{n.set({...he})}}};function wt(o,t){if(typeof o=="string"&&typeof t=="string")return o.toLowerCase().localeCompare(t.toLowerCase());const n=Number(o)||0,l=Number(t)||0;return n===l?0:n<l?-1:1}const bt=()=>{const o=X.atom(""),t=X.atom([]),n=X.atom([]),l=X.atom({active:!1,column:"",order:""}),r=X.atom(new Set),d=X.atom({type:"copy",path:"",items:new Set}),c=X.atom(null),m=X.atom(0),s=X.atom(!1),u=X.computed([o],y=>{const N=(y||"local://").trim(),j=N.indexOf("://"),W=j>=0?N.slice(0,j):"",le=(j>=0?N.slice(j+3):N).split("/").filter(Boolean);let te="";const ae=le.map(oe=>(te=te?`${te}/${oe}`:oe,{basename:oe,name:oe,path:W?`${W}://${te}`:te,type:"dir"}));return{storage:W,breadcrumb:ae,path:N}}),i=X.computed([n,l],(y,N)=>{const{active:j,column:W,order:ie}=N;if(!j||!W)return y;const le=ie==="asc"?1:-1;return y.slice().sort((te,ae)=>wt(te[W],ae[W])*le)}),a=X.computed([n,r],(y,N)=>N.size===0?[]:y.filter(j=>N.has(j.path))),f=y=>{o.set(y)},p=y=>{n.set(y??[])},k=y=>{t.set(y??[])},b=(y,N)=>{l.set({active:!0,column:y,order:N})},v=y=>{const N=l.get();N.active&&N.column===y?l.set({active:N.order==="asc",column:y,order:"desc"}):l.set({active:!0,column:y,order:"asc"})},h=()=>{l.set({active:!1,column:"",order:""})},g=y=>{const N=new Set(r.get());N.add(y),r.set(N),m.set(N.size)},w=y=>{const N=new Set(r.get());N.delete(y),r.set(N),m.set(N.size)},$=y=>r.get().has(y),P=y=>{const N=new Set(r.get());N.has(y)?N.delete(y):N.add(y),r.set(N),m.set(N.size)},O=()=>{const y=new Set(n.get().map(N=>N.path));r.set(y),m.set(y.size)},H=()=>{r.set(new Set),m.set(0)},L=y=>{const N=new Set(y??[]);r.set(N),m.set(N.size)},z=y=>{m.set(y)},U=y=>{s.set(!!y)},T=()=>s.get(),K=(y,N)=>{const j=n.get().filter(W=>N.has(W.path));d.set({type:y,path:u.get().path,items:new Set(j)})},_=y=>X.computed([d],N=>N.type==="cut"&&Array.from(N.items).some(j=>j.path===y)),E=y=>X.computed([d],N=>N.type==="copy"&&Array.from(N.items).some(j=>j.path===y));return{files:n,storages:t,currentPath:o,sort:l,selectedKeys:r,selectedCount:m,loading:s,draggedItem:c,clipboardItems:d,path:u,sortedFiles:i,selectedItems:a,setPath:f,setFiles:p,setStorages:k,setSort:b,toggleSort:v,clearSort:h,select:g,deselect:w,toggleSelect:P,selectAll:O,isSelected:$,clearSelection:H,setSelection:L,setSelectedCount:z,setLoading:U,isLoading:T,setClipboard:K,createIsCut:_,createIsCopied:E,isCut:y=>{const N=_(y);return x.useStore(N).value??!1},isCopied:y=>{const N=E(y);return x.useStore(N).value??!1},clearClipboard:()=>{d.set({type:"copy",path:"",items:new Set})},getClipboard:()=>d.get(),setDraggedItem:y=>{c.set(y)},getDraggedItem:()=>c.get(),clearDraggedItem:()=>{c.set(null)}}},xe={query:"",searchMode:!1},yt=()=>{const o=X.atom(xe),t=X.computed(o,u=>u.query.length>0);return{state:o,hasQuery:t,setQuery:u=>{const i=o.get();o.set({...i,query:u??""})},enterSearchMode:()=>{const u=o.get();o.set({...u,searchMode:!0})},exitSearchMode:()=>{o.set({query:"",searchMode:!1})},get:u=>o.get()[u],set:(u,i)=>{const a=o.get();typeof u=="object"&&u!==null?o.set({...a,...u}):o.set({...a,[u]:i})},all:()=>o.get(),reset:()=>{o.set({...xe})}}},Et=(o,t)=>{const n=ut(o.id),l=ot(),r=ht(n,o.theme),d=t.i18n,c=o.locale??t.locale,m=kt(o.id),s=bt(),u=yt(),i=a=>Array.isArray(a)?a:vt;return e.reactive({version:_t,config:m,fs:s,search:u,root:e.useTemplateRef("root"),debug:o.debug,emitter:l,storage:n,i18n:ft(n,c,l,d),modal:gt(),requester:dt(o.request),features:i(o.features),treeViewData:[],theme:r,filesize:m.get("metricUnits")?Ae:Me,contextMenuItems:o.contextMenuItems,customIcon:o.icon})},Vt={class:"vuefinder__modal-layout__container"},St={class:"vuefinder__modal-layout__content"},Nt={class:"vuefinder__modal-layout__footer"},ee=e.defineComponent({__name:"ModalLayout",setup(o){const t=e.ref(null),n=e.inject("ServiceContainer");return e.onMounted(()=>{const l=document.querySelector(".v-f-modal input");l&&l.focus(),e.nextTick(()=>{if(document.querySelector(".v-f-modal input")&&window.innerWidth<768&&t.value){const r=t.value.getBoundingClientRect().bottom+16;window.scrollTo({top:r,left:0,behavior:"smooth"})}})}),(l,r)=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder vuefinder__modal-layout","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",onKeyup:r[1]||(r[1]=e.withKeys(d=>e.unref(n).modal.close(),["esc"])),tabindex:"0"},[r[2]||(r[2]=e.createElementVNode("div",{class:"vuefinder__modal-layout__overlay"},null,-1)),e.createElementVNode("div",Vt,[e.createElementVNode("div",{class:"vuefinder__modal-layout__wrapper",onMousedown:r[0]||(r[0]=e.withModifiers(d=>e.unref(n).modal.close(),["self"]))},[e.createElementVNode("div",{ref_key:"modalBody",ref:t,class:"vuefinder__modal-layout__body"},[e.createElementVNode("div",St,[e.renderSlot(l.$slots,"default")]),e.createElementVNode("div",Nt,[e.renderSlot(l.$slots,"buttons")])],512)],32)])],32))}}),Bt={class:"vuefinder__modal-header"},Ct={class:"vuefinder__modal-header__icon-container"},xt={class:"vuefinder__modal-header__title",id:"modal-title"},ne=e.defineComponent({__name:"ModalHeader",props:{title:{},icon:{}},setup(o){return(t,n)=>(e.openBlock(),e.createElementBlock("div",Bt,[e.createElementVNode("div",Ct,[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.icon),{class:"vuefinder__modal-header__icon"}))]),e.createElementVNode("h3",xt,e.toDisplayString(o.title),1)]))}}),$t={props:{on:{type:String,required:!0}},setup(o,{emit:t,slots:n}){const l=e.inject("ServiceContainer"),r=e.ref(!1),{t:d}=l.i18n;let c=null;const m=()=>{clearTimeout(c),r.value=!0,c=setTimeout(()=>{r.value=!1},2e3)};return e.onMounted(()=>{l.emitter.on(o.on,m)}),e.onUnmounted(()=>{clearTimeout(c)}),{shown:r,t:d}}},Dt=(o,t)=>{const n=o.__vccOpts||o;for(const[l,r]of t)n[l]=r;return n},Tt={key:1};function Mt(o,t,n,l,r,d){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__action-message",{"vuefinder__action-message--hidden":!l.shown}])},[o.$slots.default?e.renderSlot(o.$slots,"default",{key:0}):(e.openBlock(),e.createElementBlock("span",Tt,e.toDisplayString(l.t("Saved.")),1))],2)}const se=Dt($t,[["render",Mt]]),At={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",viewBox:"0 0 24 24"};function Ft(o,t){return e.openBlock(),e.createElementBlock("svg",At,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87q.11.06.22.127c.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a8 8 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a7 7 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a7 7 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a7 7 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124q.108-.066.22-.128c.332-.183.582-.495.644-.869z"},null,-1),e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0"},null,-1)])])}const It={render:Ft},Lt={class:"vuefinder__about-modal__content"},Rt={class:"vuefinder__about-modal__main"},zt={class:"vuefinder__about-modal__tabs","aria-label":"Tabs"},Ht=["onClick","aria-current"],Pt={key:0,class:"vuefinder__about-modal__tab-content"},qt={class:"vuefinder__about-modal__description"},Ut={href:"https://vuefinder.ozdemir.be",class:"vuefinder__about-modal__link",target:"_blank"},jt={href:"https://github.com/n1crack/vuefinder",class:"vuefinder__about-modal__link",target:"_blank"},Ot={key:1,class:"vuefinder__about-modal__tab-content"},Kt={class:"vuefinder__about-modal__description"},Gt={class:"vuefinder__about-modal__settings"},Yt={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},Wt={class:"vuefinder__about-modal__setting-input"},Qt=["checked"],Xt={class:"vuefinder__about-modal__setting-label"},Jt={for:"metric_unit",class:"vuefinder__about-modal__label"},Zt={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},en={class:"vuefinder__about-modal__setting-input"},tn=["checked"],nn={class:"vuefinder__about-modal__setting-label"},on={for:"large_icons",class:"vuefinder__about-modal__label"},rn={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},ln={class:"vuefinder__about-modal__setting-input"},an=["checked"],sn={class:"vuefinder__about-modal__setting-label"},cn={for:"persist_path",class:"vuefinder__about-modal__label"},dn={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},un={class:"vuefinder__about-modal__setting-input"},mn=["checked"],fn={class:"vuefinder__about-modal__setting-label"},vn={for:"show_thumbnails",class:"vuefinder__about-modal__label"},_n={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},pn={class:"vuefinder__about-modal__setting-input"},hn={for:"theme",class:"vuefinder__about-modal__label"},gn={class:"vuefinder__about-modal__setting-label"},kn=["label"],wn=["value"],bn={key:0,class:"vuefinder__about-modal__setting"},yn={class:"vuefinder__about-modal__setting-input"},En={for:"language",class:"vuefinder__about-modal__label"},Vn={class:"vuefinder__about-modal__setting-label"},Sn=["label"],Nn=["value"],Bn={key:2,class:"vuefinder__about-modal__tab-content"},Cn={class:"vuefinder__about-modal__shortcuts"},xn={class:"vuefinder__about-modal__shortcut"},$n={class:"vuefinder__about-modal__shortcut"},Dn={class:"vuefinder__about-modal__shortcut"},Tn={class:"vuefinder__about-modal__shortcut"},Mn={class:"vuefinder__about-modal__shortcut"},An={class:"vuefinder__about-modal__shortcut"},Fn={class:"vuefinder__about-modal__shortcut"},In={class:"vuefinder__about-modal__shortcut"},Ln={class:"vuefinder__about-modal__shortcut"},Rn={class:"vuefinder__about-modal__shortcut"},zn={key:3,class:"vuefinder__about-modal__tab-content"},Hn={class:"vuefinder__about-modal__description"},ye=e.defineComponent({__name:"ModalAbout",setup(o){const t=e.inject("ServiceContainer"),n=t.config,{clearStore:l}=t.storage,{t:r}=t.i18n,d={ABOUT:"about",SETTINGS:"settings",SHORTCUTS:"shortcuts",RESET:"reset"},c=e.computed(()=>[{name:r("About"),key:d.ABOUT,current:!1},{name:r("Settings"),key:d.SETTINGS,current:!1},{name:r("Shortcuts"),key:d.SHORTCUTS,current:!1},{name:r("Reset"),key:d.RESET,current:!1}]),m=e.ref("about"),s=async()=>{n.reset(),l(),location.reload()},u=g=>{t.theme.set(g),t.emitter.emit("vf-theme-saved")},i=()=>{n.toggle("metricUnits"),t.filesize=n.get("metricUnits")?Ae:Me,t.emitter.emit("vf-metric-units-saved")},a=()=>{n.toggle("compactListView"),t.emitter.emit("vf-compact-view-saved")},f=()=>{n.toggle("showThumbnails"),t.emitter.emit("vf-show-thumbnails-saved")},p=()=>{n.toggle("persist"),t.emitter.emit("vf-persist-path-saved")},{i18n:k}=e.inject("VueFinderOptions"),v=Object.fromEntries(Object.entries({ar:"Arabic (العربيّة)",en:"English",fr:"French (Français)",de:"German (Deutsch)",fa:"Persian (فارسی)",he:"Hebrew (עִברִית)",hi:"Hindi (हिंदी)",pl:"Polish (Polski)",ru:"Russian (Pусский)",sv:"Swedish (Svenska)",tr:"Turkish (Türkçe)",nl:"Dutch (Nederlands)",zhCN:"Simplified Chinese (简体中文)",zhTW:"Traditional Chinese (繁體中文)"}).filter(([g])=>Object.keys(k).includes(g))),h=e.computed(()=>({system:r("System"),light:r("Light"),dark:r("Dark")}));return(g,w)=>(e.openBlock(),e.createBlock(ee,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:w[3]||(w[3]=$=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(r)("Close")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",Lt,[e.createVNode(ne,{icon:e.unref(It),title:"Vuefinder "+e.unref(t).version},null,8,["icon","title"]),e.createElementVNode("div",Rt,[e.createElementVNode("div",null,[e.createElementVNode("div",null,[e.createElementVNode("nav",zt,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,$=>(e.openBlock(),e.createElementBlock("button",{key:$.name,onClick:P=>m.value=$.key,class:e.normalizeClass([$.key===m.value?"vuefinder__about-modal__tab--active":"vuefinder__about-modal__tab--inactive","vuefinder__about-modal__tab"]),"aria-current":$.current?"page":void 0},e.toDisplayString($.name),11,Ht))),128))])])]),m.value===d.ABOUT?(e.openBlock(),e.createElementBlock("div",Pt,[e.createElementVNode("div",qt,e.toDisplayString(e.unref(r)("Vuefinder is a simple, lightweight, and fast file manager library for Vue.js applications")),1),e.createElementVNode("a",Ut,e.toDisplayString(e.unref(r)("Project home")),1),e.createElementVNode("a",jt,e.toDisplayString(e.unref(r)("Follow on GitHub")),1)])):e.createCommentVNode("",!0),m.value===d.SETTINGS?(e.openBlock(),e.createElementBlock("div",Ot,[e.createElementVNode("div",Kt,e.toDisplayString(e.unref(r)("Customize your experience with the following settings")),1),e.createElementVNode("div",Gt,[e.createElementVNode("fieldset",null,[e.createElementVNode("div",Yt,[e.createElementVNode("div",Wt,[e.createElementVNode("input",{id:"metric_unit",name:"metric_unit",type:"checkbox",checked:e.unref(n).get("metricUnits"),onChange:i,class:"vuefinder__about-modal__checkbox"},null,40,Qt)]),e.createElementVNode("div",Xt,[e.createElementVNode("label",Jt,[e.createTextVNode(e.toDisplayString(e.unref(r)("Use Metric Units"))+" ",1),e.createVNode(se,{class:"ms-3",on:"vf-metric-units-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",Zt,[e.createElementVNode("div",en,[e.createElementVNode("input",{id:"large_icons",name:"large_icons",type:"checkbox",checked:e.unref(n).get("compactListView"),onChange:a,class:"vuefinder__about-modal__checkbox"},null,40,tn)]),e.createElementVNode("div",nn,[e.createElementVNode("label",on,[e.createTextVNode(e.toDisplayString(e.unref(r)("Compact list view"))+" ",1),e.createVNode(se,{class:"ms-3",on:"vf-compact-view-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",rn,[e.createElementVNode("div",ln,[e.createElementVNode("input",{id:"persist_path",name:"persist_path",type:"checkbox",checked:e.unref(n).get("persist"),onChange:p,class:"vuefinder__about-modal__checkbox"},null,40,an)]),e.createElementVNode("div",sn,[e.createElementVNode("label",cn,[e.createTextVNode(e.toDisplayString(e.unref(r)("Persist path on reload"))+" ",1),e.createVNode(se,{class:"ms-3",on:"vf-persist-path-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",dn,[e.createElementVNode("div",un,[e.createElementVNode("input",{id:"show_thumbnails",name:"show_thumbnails",type:"checkbox",checked:e.unref(n).get("showThumbnails"),onChange:f,class:"vuefinder__about-modal__checkbox"},null,40,mn)]),e.createElementVNode("div",fn,[e.createElementVNode("label",vn,[e.createTextVNode(e.toDisplayString(e.unref(r)("Show thumbnails"))+" ",1),e.createVNode(se,{class:"ms-3",on:"vf-show-thumbnails-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",_n,[e.createElementVNode("div",pn,[e.createElementVNode("label",hn,e.toDisplayString(e.unref(r)("Theme")),1)]),e.createElementVNode("div",gn,[e.withDirectives(e.createElementVNode("select",{id:"theme","onUpdate:modelValue":w[0]||(w[0]=$=>e.unref(t).theme.value=$),onChange:w[1]||(w[1]=$=>u($.target?.value||"")),class:"vuefinder__about-modal__select"},[e.createElementVNode("optgroup",{label:e.unref(r)("Theme")},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h.value,($,P)=>(e.openBlock(),e.createElementBlock("option",{value:P},e.toDisplayString($),9,wn))),256))],8,kn)],544),[[e.vModelSelect,e.unref(t).theme.value]]),e.createVNode(se,{class:"ms-3",on:"vf-theme-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])]),e.unref(t).features.includes(e.unref(R).LANGUAGE)&&Object.keys(e.unref(v)).length>1?(e.openBlock(),e.createElementBlock("div",bn,[e.createElementVNode("div",yn,[e.createElementVNode("label",En,e.toDisplayString(e.unref(r)("Language")),1)]),e.createElementVNode("div",Vn,[e.withDirectives(e.createElementVNode("select",{id:"language","onUpdate:modelValue":w[2]||(w[2]=$=>e.unref(t).i18n.locale=$),class:"vuefinder__about-modal__select"},[e.createElementVNode("optgroup",{label:e.unref(r)("Language")},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(v),($,P)=>(e.openBlock(),e.createElementBlock("option",{value:P},e.toDisplayString($),9,Nn))),256))],8,Sn)],512),[[e.vModelSelect,e.unref(t).i18n.locale]]),e.createVNode(se,{class:"ms-3",on:"vf-language-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)("Saved.")),1)]),_:1})])])):e.createCommentVNode("",!0)])])])):e.createCommentVNode("",!0),m.value===d.SHORTCUTS?(e.openBlock(),e.createElementBlock("div",Bn,[e.createElementVNode("div",Cn,[e.createElementVNode("div",xn,[e.createElementVNode("div",null,e.toDisplayString(e.unref(r)("Rename")),1),w[4]||(w[4]=e.createElementVNode("kbd",null,"F2",-1))]),e.createElementVNode("div",$n,[e.createElementVNode("div",null,e.toDisplayString(e.unref(r)("Refresh")),1),w[5]||(w[5]=e.createElementVNode("kbd",null,"F5",-1))]),e.createElementVNode("div",Dn,[e.createTextVNode(e.toDisplayString(e.unref(r)("Delete"))+" ",1),w[6]||(w[6]=e.createElementVNode("kbd",null,"Del",-1))]),e.createElementVNode("div",Tn,[e.createTextVNode(e.toDisplayString(e.unref(r)("Escape"))+" ",1),w[7]||(w[7]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Esc")],-1))]),e.createElementVNode("div",Mn,[e.createTextVNode(e.toDisplayString(e.unref(r)("Select All"))+" ",1),w[8]||(w[8]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"A")],-1))]),e.createElementVNode("div",An,[e.createTextVNode(e.toDisplayString(e.unref(r)("Search"))+" ",1),w[9]||(w[9]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"F")],-1))]),e.createElementVNode("div",Fn,[e.createTextVNode(e.toDisplayString(e.unref(r)("Toggle Sidebar"))+" ",1),w[10]||(w[10]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"E")],-1))]),e.createElementVNode("div",In,[e.createTextVNode(e.toDisplayString(e.unref(r)("Open Settings"))+" ",1),w[11]||(w[11]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,",")],-1))]),e.createElementVNode("div",Ln,[e.createTextVNode(e.toDisplayString(e.unref(r)("Toggle Full Screen"))+" ",1),w[12]||(w[12]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"Enter")],-1))]),e.createElementVNode("div",Rn,[e.createTextVNode(e.toDisplayString(e.unref(r)("Preview"))+" ",1),w[13]||(w[13]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Space")],-1))])])])):e.createCommentVNode("",!0),m.value===d.RESET?(e.openBlock(),e.createElementBlock("div",zn,[e.createElementVNode("div",Hn,e.toDisplayString(e.unref(r)("Reset all settings to default")),1),e.createElementVNode("button",{onClick:s,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(r)("Reset Settings")),1)])):e.createCommentVNode("",!0)])])]),_:1}))}}),Pn={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function qn(o,t){return e.openBlock(),e.createElementBlock("svg",Pn,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21q.512.078 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48 48 0 0 0-3.478-.397m-12 .562q.51-.089 1.022-.165m0 0a48 48 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a52 52 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a49 49 0 0 0-7.5 0"},null,-1)])])}const Fe={render:qn},Un={class:"vuefinder__delete-modal__content"},jn={class:"vuefinder__delete-modal__form"},On={class:"vuefinder__delete-modal__description"},Kn={class:"vuefinder__delete-modal__files vf-scrollbar"},Gn={class:"vuefinder__delete-modal__file"},Yn={key:0,class:"vuefinder__delete-modal__icon vuefinder__delete-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Wn={key:1,class:"vuefinder__delete-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Qn={class:"vuefinder__delete-modal__file-name"},Xn={class:"vuefinder__delete-modal__warning"},me=e.defineComponent({__name:"ModalDelete",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,l=t.fs,r=x.useStore(l.path),d=e.ref(t.modal.data.items),c=e.ref(""),m=()=>{d.value.length&&t.emitter.emit("vf-fetch",{params:{q:"delete",m:"post",storage:r.value.storage,path:r.value.path},body:{items:d.value.map(({path:s,type:u})=>({path:s,type:u}))},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("Files deleted.")})},onError:s=>{c.value=n(s.message)}})};return(s,u)=>(e.openBlock(),e.createBlock(ee,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:m,class:"vf-btn vf-btn-danger"},e.toDisplayString(e.unref(n)("Yes, Delete!")),1),e.createElementVNode("button",{type:"button",onClick:u[1]||(u[1]=i=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1),e.createElementVNode("div",Xn,e.toDisplayString(e.unref(n)("This action cannot be undone.")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(ne,{icon:e.unref(Fe),title:e.unref(n)("Delete files")},null,8,["icon","title"]),e.createElementVNode("div",Un,[e.createElementVNode("div",jn,[e.createElementVNode("p",On,e.toDisplayString(e.unref(n)("Are you sure you want to delete these files?")),1),e.createElementVNode("div",Kn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.value,i=>(e.openBlock(),e.createElementBlock("p",Gn,[i.type==="dir"?(e.openBlock(),e.createElementBlock("svg",Yn,[...u[2]||(u[2]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",Wn,[...u[3]||(u[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),e.createElementVNode("span",Qn,e.toDisplayString(i.basename),1)]))),256))]),c.value.length?(e.openBlock(),e.createBlock(e.unref(c),{key:0,onHidden:u[0]||(u[0]=i=>c.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),Jn={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function Zn(o,t){return e.openBlock(),e.createElementBlock("svg",Jn,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"},null,-1)])])}const Ie={render:Zn},eo={class:"vuefinder__rename-modal__content"},to={class:"vuefinder__rename-modal__item"},no={class:"vuefinder__rename-modal__item-info"},oo={key:0,class:"vuefinder__rename-modal__icon vuefinder__rename-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},ro={key:1,class:"vuefinder__rename-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},lo={class:"vuefinder__rename-modal__item-name"},fe=e.defineComponent({__name:"ModalRename",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,l=t.fs,r=x.useStore(l.path),d=e.ref(t.modal.data.items[0]),c=e.ref(t.modal.data.items[0].basename),m=e.ref(""),s=()=>{c.value!=""&&t.emitter.emit("vf-fetch",{params:{q:"rename",m:"post",storage:r.value.storage,path:r.value.path},body:{item:d.value.path,name:c.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("%s is renamed.",c.value)})},onError:u=>{m.value=n(u.message)}})};return(u,i)=>(e.openBlock(),e.createBlock(ee,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:s,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(n)("Rename")),1),e.createElementVNode("button",{type:"button",onClick:i[2]||(i[2]=a=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(ne,{icon:e.unref(Ie),title:e.unref(n)("Rename")},null,8,["icon","title"]),e.createElementVNode("div",eo,[e.createElementVNode("div",to,[e.createElementVNode("p",no,[d.value.type==="dir"?(e.openBlock(),e.createElementBlock("svg",oo,[...i[3]||(i[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",ro,[...i[4]||(i[4]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),e.createElementVNode("span",lo,e.toDisplayString(d.value.basename),1)]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":i[0]||(i[0]=a=>c.value=a),onKeyup:e.withKeys(s,["enter"]),class:"vuefinder__rename-modal__input",placeholder:"Name",type:"text"},null,544),[[e.vModelText,c.value]]),m.value.length?(e.openBlock(),e.createBlock(e.unref(m),{key:0,onHidden:i[1]||(i[1]=a=>m.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(m.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),ao=["title"],Le=e.defineComponent({__name:"Message",props:{error:{type:Boolean}},emits:["hidden"],setup(o,{emit:t}){const n=t,l=e.inject("ServiceContainer"),{t:r}=l.i18n,d=e.ref(!1),c=e.ref(null),m=e.ref(c.value?.innerHTML);e.watch(m,()=>d.value=!1);const s=()=>{n("hidden"),d.value=!0};return(u,i)=>(e.openBlock(),e.createElementBlock("div",null,[d.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"strMessage",ref:c,class:e.normalizeClass(["vuefinder__message",o.error?"vuefinder__message--error":"vuefinder__message--success"])},[e.renderSlot(u.$slots,"default"),e.createElementVNode("div",{class:"vuefinder__message__close",onClick:s,title:e.unref(r)("Close")},[...i[0]||(i[0]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"vuefinder__message__icon"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,ao)],2))]))}}),so={class:"vuefinder__text-preview"},io={class:"vuefinder__text-preview__header"},co=["title"],uo={class:"vuefinder__text-preview__actions"},mo={key:0,class:"vuefinder__text-preview__content"},fo={key:1},vo=e.defineComponent({__name:"Text",emits:["success"],setup(o,{emit:t}){const n=t,l=e.ref(""),r=e.ref(""),d=e.ref(null),c=e.ref(!1),m=e.ref(""),s=e.ref(!1),u=e.inject("ServiceContainer"),{t:i}=u.i18n;e.onMounted(()=>{u.requester.send({url:"",method:"get",params:{q:"preview",storage:u.modal.data.storage,path:u.modal.data.item.path},responseType:"text"}).then(p=>{l.value=p,n("success")})});const a=()=>{c.value=!c.value,r.value=l.value},f=()=>{m.value="",s.value=!1,u.requester.send({url:"",method:"post",params:{q:"save",storage:u.modal.data.storage,path:u.modal.data.item.path},body:{content:r.value},responseType:"text"}).then(p=>{m.value=i("Updated."),l.value=p,n("success"),c.value=!c.value}).catch(p=>{m.value=i(p.message),s.value=!0})};return(p,k)=>(e.openBlock(),e.createElementBlock("div",so,[e.createElementVNode("div",io,[e.createElementVNode("div",{class:"vuefinder__text-preview__title",id:"modal-title",title:e.unref(u).modal.data.item.path},e.toDisplayString(e.unref(u).modal.data.item.basename),9,co),e.createElementVNode("div",uo,[c.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:f,class:"vuefinder__text-preview__save-button"},e.toDisplayString(e.unref(i)("Save")),1)):e.createCommentVNode("",!0),e.unref(u).features.includes(e.unref(R).EDIT)?(e.openBlock(),e.createElementBlock("button",{key:1,class:"vuefinder__text-preview__edit-button",onClick:k[0]||(k[0]=b=>a())},e.toDisplayString(c.value?e.unref(i)("Cancel"):e.unref(i)("Edit")),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("div",null,[c.value?(e.openBlock(),e.createElementBlock("div",fo,[e.withDirectives(e.createElementVNode("textarea",{ref_key:"editInput",ref:d,"onUpdate:modelValue":k[1]||(k[1]=b=>r.value=b),class:"vuefinder__text-preview__textarea",name:"text",cols:"30",rows:"10"},null,512),[[e.vModelText,r.value]])])):(e.openBlock(),e.createElementBlock("pre",mo,e.toDisplayString(l.value),1)),m.value.length?(e.openBlock(),e.createBlock(Le,{key:2,onHidden:k[2]||(k[2]=b=>m.value=""),error:s.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(m.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)])]))}}),_o={class:"vuefinder__image-preview"},po={class:"vuefinder__image-preview__header"},ho=["title"],go={class:"vuefinder__image-preview__actions"},ko={class:"vuefinder__image-preview__image-container h-[50vh] w-full"},wo=["src"],bo=e.defineComponent({name:"ImagePreview",__name:"Image",emits:["success"],setup(o,{emit:t}){const n=t,l=e.inject("ServiceContainer"),{t:r}=l.i18n,d=e.ref(!1),c=e.ref(""),m=e.ref(!1),s=e.ref(l.requester.getPreviewUrl(l.modal.data.storage,l.modal.data.item)),u=e.ref(s.value),i=e.useTemplateRef("cropperRef"),a=async()=>{d.value=!d.value},f=async()=>{const k=i.value?.getResult({size:{width:795,height:341},fillColor:"#ffffff"})?.canvas;k&&k.toBlob(b=>{if(!b)return;c.value="",m.value=!1;const v=new FormData;v.set("file",b),l.requester.send({url:"",method:"post",params:{q:"upload",storage:l.modal.data.storage,path:l.modal.data.item.path},body:v}).then(()=>{c.value=r("Updated."),fetch(s.value,{cache:"reload",mode:"no-cors"});const h=l.root.querySelector('[data-src="'+s.value+'"]');h&&Te.resetStatus(h),l.emitter.emit("vf-refresh-thumbnails"),a(),n("success")}).catch(h=>{const g=h?.message??"Error";c.value=r(g),m.value=!0})})};return e.onMounted(()=>{n("success")}),(p,k)=>(e.openBlock(),e.createElementBlock("div",_o,[e.createElementVNode("div",po,[e.createElementVNode("h3",{class:"vuefinder__image-preview__title",id:"modal-title",title:e.unref(l).modal.data.item.path},e.toDisplayString(e.unref(l).modal.data.item.basename),9,ho),e.createElementVNode("div",go,[d.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:f,class:"vuefinder__image-preview__crop-button"},e.toDisplayString(e.unref(r)("Crop")),1)):e.createCommentVNode("",!0),e.unref(l).features.includes(e.unref(R).EDIT)?(e.openBlock(),e.createElementBlock("button",{key:1,class:"vuefinder__image-preview__edit-button",onClick:k[0]||(k[0]=b=>a())},e.toDisplayString(d.value?e.unref(r)("Cancel"):e.unref(r)("Edit")),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("div",ko,[d.value?(e.openBlock(),e.createBlock(e.unref(lt.Cropper),{key:1,ref_key:"cropperRef",ref:i,class:"w-full h-full",crossorigin:"anonymous",src:u.value,"stencil-props":{aspectRatio:795/341},"auto-zoom":!0,priority:"image",transitions:!0},null,8,["src"])):(e.openBlock(),e.createElementBlock("img",{key:0,style:{width:"100%",height:"100%"},src:e.unref(l).requester.getPreviewUrl(e.unref(l).modal.data.storage,e.unref(l).modal.data.item),class:"vuefinder__image-preview__image w-full h-full"},null,8,wo))]),c.value.length?(e.openBlock(),e.createBlock(e.unref(c),{key:0,onHidden:k[1]||(k[1]=b=>c.value=""),error:m.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)]))}}),yo={class:"vuefinder__default-preview"},Eo={class:"vuefinder__default-preview__header"},Vo=["title"],So=e.defineComponent({__name:"Default",emits:["success"],setup(o,{emit:t}){const n=e.inject("ServiceContainer"),l=t;return e.onMounted(()=>{l("success")}),(r,d)=>(e.openBlock(),e.createElementBlock("div",yo,[e.createElementVNode("div",Eo,[e.createElementVNode("h3",{class:"vuefinder__default-preview__title",id:"modal-title",title:e.unref(n).modal.data.item.path},e.toDisplayString(e.unref(n).modal.data.item.basename),9,Vo)]),d[0]||(d[0]=e.createElementVNode("div",null,null,-1))]))}}),No={class:"vuefinder__video-preview"},Bo=["title"],Co={class:"vuefinder__video-preview__video",preload:"metadata",controls:""},xo=["src"],$o=e.defineComponent({__name:"Video",emits:["success"],setup(o,{emit:t}){const n=e.inject("ServiceContainer"),l=t,r=()=>n.requester.getPreviewUrl(n.modal.data.storage,n.modal.data.item);return e.onMounted(()=>{l("success")}),(d,c)=>(e.openBlock(),e.createElementBlock("div",No,[e.createElementVNode("h3",{class:"vuefinder__video-preview__title",id:"modal-title",title:e.unref(n).modal.data.item.path},e.toDisplayString(e.unref(n).modal.data.item.basename),9,Bo),e.createElementVNode("div",null,[e.createElementVNode("video",Co,[e.createElementVNode("source",{src:r(),type:"video/mp4"},null,8,xo),c[0]||(c[0]=e.createTextVNode(" Your browser does not support the video tag. ",-1))])])]))}}),Do={class:"vuefinder__audio-preview"},To=["title"],Mo={class:"vuefinder__audio-preview__audio",controls:""},Ao=["src"],Fo=e.defineComponent({__name:"Audio",emits:["success"],setup(o,{emit:t}){const n=t,l=e.inject("ServiceContainer"),r=()=>l.requester.getPreviewUrl(l.modal.data.storage,l.modal.data.item);return e.onMounted(()=>{n("success")}),(d,c)=>(e.openBlock(),e.createElementBlock("div",Do,[e.createElementVNode("h3",{class:"vuefinder__audio-preview__title",id:"modal-title",title:e.unref(l).modal.data.item.path},e.toDisplayString(e.unref(l).modal.data.item.basename),9,To),e.createElementVNode("div",null,[e.createElementVNode("audio",Mo,[e.createElementVNode("source",{src:r(),type:"audio/mpeg"},null,8,Ao),c[0]||(c[0]=e.createTextVNode(" Your browser does not support the audio element. ",-1))])])]))}}),Io={class:"vuefinder__pdf-preview"},Lo=["title"],Ro=["data"],zo=["src"],Ho=e.defineComponent({__name:"Pdf",emits:["success"],setup(o,{emit:t}){const n=e.inject("ServiceContainer"),l=t,r=()=>n.requester.getPreviewUrl(n.modal.data.storage,n.modal.data.item);return e.onMounted(()=>{l("success")}),(d,c)=>(e.openBlock(),e.createElementBlock("div",Io,[e.createElementVNode("h3",{class:"vuefinder__pdf-preview__title",id:"modal-title",title:e.unref(n).modal.data.item.path},e.toDisplayString(e.unref(n).modal.data.item.basename),9,Lo),e.createElementVNode("div",null,[e.createElementVNode("object",{class:"vuefinder__pdf-preview__object",data:r(),type:"application/pdf",width:"100%",height:"100%"},[e.createElementVNode("iframe",{class:"vuefinder__pdf-preview__iframe",src:r(),width:"100%",height:"100%"}," Your browser does not support PDFs ",8,zo)],8,Ro)])]))}});function Po(o,t=null){return new Date(o*1e3).toLocaleString(t??navigator.language??"en-US")}const qo={class:"vuefinder__preview-modal__content"},Uo={key:0},jo={class:"vuefinder__preview-modal__loading"},Oo={key:0,class:"vuefinder__preview-modal__loading-indicator"},Ko={class:"vuefinder__preview-modal__details"},Go={class:"font-bold"},Yo={class:"font-bold pl-2"},Wo={key:0,class:"vuefinder__preview-modal__note"},Qo=["download","href"],Ee=e.defineComponent({__name:"ModalPreview",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,l=e.ref(!1),r=c=>(t.modal.data.item.mime_type??"").startsWith(c),d=t.features.includes(R.PREVIEW);return d||(l.value=!0),(c,m)=>(e.openBlock(),e.createBlock(ee,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:m[6]||(m[6]=s=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Close")),1),e.unref(t).features.includes(e.unref(R).DOWNLOAD)?(e.openBlock(),e.createElementBlock("a",{key:0,target:"_blank",class:"vf-btn vf-btn-primary",download:e.unref(t).requester.getDownloadUrl(e.unref(t).modal.data.storage,e.unref(t).modal.data.item),href:e.unref(t).requester.getDownloadUrl(e.unref(t).modal.data.storage,e.unref(t).modal.data.item)},e.toDisplayString(e.unref(n)("Download")),9,Qo)):e.createCommentVNode("",!0)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createElementVNode("div",qo,[e.unref(d)?(e.openBlock(),e.createElementBlock("div",Uo,[r("text")?(e.openBlock(),e.createBlock(vo,{key:0,onSuccess:m[0]||(m[0]=s=>l.value=!0)})):r("image")?(e.openBlock(),e.createBlock(bo,{key:1,onSuccess:m[1]||(m[1]=s=>l.value=!0)})):r("video")?(e.openBlock(),e.createBlock($o,{key:2,onSuccess:m[2]||(m[2]=s=>l.value=!0)})):r("audio")?(e.openBlock(),e.createBlock(Fo,{key:3,onSuccess:m[3]||(m[3]=s=>l.value=!0)})):r("application/pdf")?(e.openBlock(),e.createBlock(Ho,{key:4,onSuccess:m[4]||(m[4]=s=>l.value=!0)})):(e.openBlock(),e.createBlock(So,{key:5,onSuccess:m[5]||(m[5]=s=>l.value=!0)}))])):e.createCommentVNode("",!0),e.createElementVNode("div",jo,[l.value===!1?(e.openBlock(),e.createElementBlock("div",Oo,[m[7]||(m[7]=e.createElementVNode("svg",{class:"vuefinder__preview-modal__spinner",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e.createElementVNode("circle",{class:"vuefinder__preview-modal__spinner-circle",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e.createElementVNode("path",{class:"vuefinder__preview-modal__spinner-path",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e.createElementVNode("span",null,e.toDisplayString(e.unref(n)("Loading")),1)])):e.createCommentVNode("",!0)])])]),e.createElementVNode("div",Ko,[e.createElementVNode("div",null,[e.createElementVNode("span",Go,e.toDisplayString(e.unref(n)("File Size"))+": ",1),e.createTextVNode(e.toDisplayString(e.unref(t).filesize(e.unref(t).modal.data.item.file_size)),1)]),e.createElementVNode("div",null,[e.createElementVNode("span",Yo,e.toDisplayString(e.unref(n)("Last Modified"))+": ",1),e.createTextVNode(" "+e.toDisplayString(e.unref(Po)(e.unref(t).modal.data.item.last_modified)),1)])]),e.unref(t).features.includes(e.unref(R).DOWNLOAD)?(e.openBlock(),e.createElementBlock("div",Wo,[e.createElementVNode("span",null,e.toDisplayString(e.unref(n)(`Download doesn't work? You can try right-click "Download" button, select "Save link as...".`)),1)])):e.createCommentVNode("",!0)]),_:1}))}}),Xo={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",viewBox:"0 0 24 24"};function Jo(o,t){return e.openBlock(),e.createElementBlock("svg",Xo,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3"},null,-1)])])}const Zo={render:Jo},er={class:"vuefinder__move-modal__content"},tr={class:"vuefinder__move-modal__description"},nr={class:"vuefinder__move-modal__files vf-scrollbar"},or={key:0,class:"vuefinder__move-modal__icon vuefinder__move-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},rr={key:1,class:"vuefinder__move-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},lr={class:"vuefinder__move-modal__file-name"},ar={class:"vuefinder__move-modal__target-title"},sr={class:"vuefinder__move-modal__target-directory"},ir={class:"vuefinder__move-modal__target-path"},cr={class:"vuefinder__move-modal__selected-items"},Re=e.defineComponent({__name:"ModalTransfer",props:{q:{},title:{},body:{},successBtn:{},successText:{}},setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,l=t.fs,r=x.useStore(l.path),d=o,c=e.ref(t.modal.data.items.from),m=t.modal.data.items.to,s=e.ref(""),u=()=>{c.value.length&&t.emitter.emit("vf-fetch",{params:{q:d.q,m:"post",storage:r.value.storage,path:r.value.path},body:{items:c.value.map(({path:i,type:a})=>({path:i,type:a})),item:m.path},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:d.successText})},onError:i=>{s.value=n(i.message)}})};return(i,a)=>(e.openBlock(),e.createBlock(ee,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:u,class:"vf-btn vf-btn-primary"},e.toDisplayString(d.successBtn),1),e.createElementVNode("button",{type:"button",onClick:a[1]||(a[1]=f=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1),e.createElementVNode("div",cr,e.toDisplayString(e.unref(n)("%s item(s) selected.",c.value.length)),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(ne,{icon:e.unref(Zo),title:d.title},null,8,["icon","title"]),e.createElementVNode("div",er,[e.createElementVNode("p",tr,e.toDisplayString(d.body),1),e.createElementVNode("div",nr,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,f=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__move-modal__file",key:f.path},[e.createElementVNode("div",null,[f.type==="dir"?(e.openBlock(),e.createElementBlock("svg",or,[...a[2]||(a[2]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",rr,[...a[3]||(a[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])]))]),e.createElementVNode("div",lr,e.toDisplayString(f.path),1)]))),128))]),e.createElementVNode("h4",ar,e.toDisplayString(e.unref(n)("Target Directory")),1),e.createElementVNode("p",sr,[a[4]||(a[4]=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"vuefinder__move-modal__icon vuefinder__move-modal__icon--dir",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1)),e.createElementVNode("span",ir,e.toDisplayString(e.unref(m).path),1)]),s.value.length?(e.openBlock(),e.createBlock(e.unref(s),{key:0,onHidden:a[0]||(a[0]=f=>s.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(s.value),1)]),_:1})):e.createCommentVNode("",!0)])])]),_:1}))}}),Ve=e.defineComponent({__name:"ModalMove",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n;return(l,r)=>(e.openBlock(),e.createBlock(Re,{q:"move",title:e.unref(n)("Move files"),body:e.unref(n)("Are you sure you want to move these files"),"success-btn":e.unref(n)("Yes, Move!"),"success-text":e.unref(n)("Files moved.")},null,8,["title","body","success-btn","success-text"]))}}),ze=e.defineComponent({__name:"ModalCopy",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n;return(l,r)=>(e.openBlock(),e.createBlock(Re,{q:"copy",title:e.unref(n)("Copy files"),body:e.unref(n)("Are you sure you want to copy these files"),"success-btn":e.unref(n)("Yes, Copy!"),"success-text":e.unref(n)("Files copied.")},null,8,["title","body","success-btn","success-text"]))}}),Z={ESCAPE:"Escape",F2:"F2",F5:"F5",DELETE:"Delete",ENTER:"Enter",BACKSLASH:"Backslash",KEY_A:"KeyA",KEY_E:"KeyE",KEY_F:"KeyF",SPACE:"Space",KEY_C:"KeyC",KEY_X:"KeyX",KEY_V:"KeyV"};function dr(o){const t=o.search,n=o.fs,l=o.config,r=x.useStore(t.state),d=x.useStore(n.selectedItems),c=m=>{if(m.code===Z.ESCAPE&&(o.modal.close(),o.root.focus()),!o.modal.visible&&!r.value?.searchMode){if(m.code===Z.F2&&o.features.includes(R.RENAME)&&d.value.length===1&&o.modal.open(fe,{items:d.value}),m.code===Z.F5&&o.emitter.emit("vf-fetch",{params:{q:"index",storage:n.path.get().storage,path:n.path.get().path}}),m.code===Z.DELETE&&d.value.length===0&&o.modal.open(me,{items:d.value}),m.ctrlKey&&m.code===Z.BACKSLASH&&o.modal.open(ye),m.ctrlKey&&m.code===Z.KEY_F&&o.features.includes(R.SEARCH)&&(t.enterSearchMode(),m.preventDefault()),m.ctrlKey&&m.code===Z.KEY_E&&(l.toggle("showTreeView"),m.preventDefault()),m.ctrlKey&&m.code===Z.ENTER&&(l.toggle("fullScreen"),o.root.focus()),m.ctrlKey&&m.code===Z.KEY_A&&(n.selectAll(),m.preventDefault()),m.code===Z.SPACE&&d.value.length===1&&d.value[0]?.type!=="dir"&&o.modal.open(Ee,{storage:n.path.get().storage,item:d.value[0]}),m.metaKey&&m.code===Z.KEY_C){if(d.value.length===0){o.emitter.emit("vf-toast-push",{type:"error",label:o.i18n.t("No items selected")});return}n.setClipboard("copy",new Set(d.value.map(s=>s.path))),o.emitter.emit("vf-toast-push",{label:d.value.length===1?o.i18n.t("Item copied to clipboard"):o.i18n.t("%s items copied to clipboard",d.value.length)}),m.preventDefault()}if(m.metaKey&&m.code===Z.KEY_X){if(d.value.length===0){o.emitter.emit("vf-toast-push",{type:"error",label:o.i18n.t("No items selected")});return}n.setClipboard("cut",new Set(d.value.map(s=>s.path))),o.emitter.emit("vf-toast-push",{label:d.value.length===1?o.i18n.t("Item cut to clipboard"):o.i18n.t("%s items cut to clipboard",d.value.length)}),m.preventDefault()}if(m.metaKey&&m.code===Z.KEY_V){if(n.getClipboard().items.size===0){o.emitter.emit("vf-toast-push",{type:"error",label:o.i18n.t("No items in clipboard")});return}if(n.getClipboard().path===n.path.get().path){o.emitter.emit("vf-toast-push",{type:"error",label:o.i18n.t("Cannot paste items to the same directory")});return}if(n.getClipboard().type==="cut"){o.modal.open(Ve,{items:{from:Array.from(n.getClipboard().items),to:n.path.get()}}),n.clearClipboard();return}if(n.getClipboard().type==="copy"){o.modal.open(ze,{items:{from:Array.from(n.getClipboard().items),to:n.path.get()}});return}m.preventDefault()}}};e.onMounted(()=>{o.root.addEventListener("keydown",c)}),e.onBeforeUnmount(()=>{o.root.removeEventListener("keydown",c)})}const ur={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function mr(o,t){return e.openBlock(),e.createElementBlock("svg",ur,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M12 10.5v6m3-3H9m4.06-7.19-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44z"},null,-1)])])}const He={render:mr},fr={class:"vuefinder__new-folder-modal__content"},vr={class:"vuefinder__new-folder-modal__form"},_r={class:"vuefinder__new-folder-modal__description"},pr=["placeholder"],Se=e.defineComponent({__name:"ModalNewFolder",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,l=t.fs,r=x.useStore(l.path),d=e.ref(""),c=e.ref(""),m=()=>{d.value!==""&&t.emitter.emit("vf-fetch",{params:{q:"newfolder",m:"post",storage:r.value.storage,path:r.value.path},body:{name:d.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("%s is created.",d.value)})},onError:s=>{c.value=n(s.message)}})};return(s,u)=>(e.openBlock(),e.createBlock(ee,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:m,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(n)("Create")),1),e.createElementVNode("button",{type:"button",onClick:u[2]||(u[2]=i=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(ne,{icon:e.unref(He),title:e.unref(n)("New Folder")},null,8,["icon","title"]),e.createElementVNode("div",fr,[e.createElementVNode("div",vr,[e.createElementVNode("p",_r,e.toDisplayString(e.unref(n)("Create a new folder")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":u[0]||(u[0]=i=>d.value=i),onKeyup:e.withKeys(m,["enter"]),class:"vuefinder__new-folder-modal__input",placeholder:e.unref(n)("Folder Name"),type:"text"},null,40,pr),[[e.vModelText,d.value]]),c.value.length?(e.openBlock(),e.createBlock(e.unref(c),{key:0,onHidden:u[1]||(u[1]=i=>c.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),hr={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function gr(o,t){return e.openBlock(),e.createElementBlock("svg",hr,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9"},null,-1)])])}const Pe={render:gr},kr={class:"vuefinder__new-file-modal__content"},wr={class:"vuefinder__new-file-modal__form"},br={class:"vuefinder__new-file-modal__description"},yr=["placeholder"],qe=e.defineComponent({__name:"ModalNewFile",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,l=t.fs,r=x.useStore(l.path),d=e.ref(""),c=e.ref(""),m=()=>{d.value!==""&&t.emitter.emit("vf-fetch",{params:{q:"newfile",m:"post",storage:r.value.storage,path:r.value.path},body:{name:d.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("%s is created.",d.value)})},onError:s=>{c.value=n(s.message)}})};return(s,u)=>(e.openBlock(),e.createBlock(ee,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:m,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(n)("Create")),1),e.createElementVNode("button",{type:"button",onClick:u[2]||(u[2]=i=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(ne,{icon:e.unref(Pe),title:e.unref(n)("New File")},null,8,["icon","title"]),e.createElementVNode("div",kr,[e.createElementVNode("div",wr,[e.createElementVNode("p",br,e.toDisplayString(e.unref(n)("Create a new file")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":u[0]||(u[0]=i=>d.value=i),onKeyup:e.withKeys(m,["enter"]),class:"vuefinder__new-file-modal__input",placeholder:e.unref(n)("File Name"),type:"text"},null,40,yr),[[e.vModelText,d.value]]),c.value.length?(e.openBlock(),e.createBlock(e.unref(c),{key:0,onHidden:u[1]||(u[1]=i=>c.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),Y={PENDING:0,CANCELED:1,UPLOADING:2,ERROR:3,DONE:10};function Er(){const o=e.inject("ServiceContainer"),{t}=o.i18n,n=o.fs,l=x.useStore(n.path),r=o.config,d=e.ref({QUEUE_ENTRY_STATUS:Y}),c=e.ref(null),m=e.ref(null),s=e.ref(null),u=e.ref(null),i=e.ref(null),a=e.ref(null),f=e.ref([]),p=e.ref(""),k=e.ref(!1),b=e.ref(!1);let v;const h=T=>f.value.findIndex(K=>K.id===T),g=(T,K)=>v.addFile({name:K||T.name,type:T.type,data:T,source:"Local"}),w=T=>T.status===Y.DONE?"text-green-600":T.status===Y.ERROR||T.status===Y.CANCELED?"text-red-600":"",$=T=>T.status===Y.DONE?"✓":T.status===Y.ERROR||T.status===Y.CANCELED?"!":"...",P=()=>u.value?.click(),O=()=>o.modal.close(),H=()=>{if(k.value||!f.value.filter(T=>T.status!==Y.DONE).length){k.value||(p.value=t("Please select file to upload first."));return}p.value="",v.retryAll(),v.upload()},L=()=>{v.cancelAll(),f.value.forEach(T=>{T.status!==Y.DONE&&(T.status=Y.CANCELED,T.statusName=t("Canceled"))}),k.value=!1},z=T=>{k.value||(v.removeFile(T.id),f.value.splice(h(T.id),1))},U=T=>{if(!k.value)if(v.cancelAll(),T){const K=f.value.filter(_=>_.status!==Y.DONE);f.value=[],K.forEach(_=>g(_.originalFile,_.name))}else f.value=[]};return e.onMounted(()=>{v=new at({debug:o.debug,restrictions:{maxFileSize:pt(r.maxFileSize??"10mb")},locale:o.i18n.t("uppy"),onBeforeFileAdded:(_,E)=>{if(E[_.id]!=null){const A=h(_.id);f.value[A]?.status===Y.PENDING&&(p.value=v.i18n("noDuplicates",{fileName:_.name})),f.value=f.value.filter(F=>F.id!==_.id)}return f.value.push({id:_.id,name:_.name,size:o.filesize(_.size),status:Y.PENDING,statusName:t("Pending upload"),percent:null,originalFile:_.data}),!0}}),v.use(st,{endpoint:"WILL_BE_REPLACED_BEFORE_UPLOAD",limit:5,timeout:0}),v.on("restriction-failed",(_,E)=>{const S=f.value[h(_.id)];S&&z(S),p.value=E.message}),v.on("upload",()=>{const _=o.requester.transformRequestParams({url:"",method:"post",params:{q:"upload",storage:l.value.storage,path:l.value.path}});v.setMeta({..._.body});const E=v.getPlugin("XHRUpload");E&&(E.opts.method=_.method,E.opts.endpoint=_.url+"?"+new URLSearchParams(_.params),E.opts.headers=_.headers),delete _.headers["Content-Type"],k.value=!0,f.value.forEach(S=>{S.status!==Y.DONE&&(S.percent=null,S.status=Y.UPLOADING,S.statusName=t("Pending upload"))})}),v.on("upload-progress",(_,E)=>{const S=E.bytesTotal??1,A=Math.floor(E.bytesUploaded/S*100),F=h(_.id);F!==-1&&f.value[F]&&(f.value[F].percent=`${A}%`)}),v.on("upload-success",_=>{const E=f.value[h(_.id)];E&&(E.status=Y.DONE,E.statusName=t("Done"))}),v.on("upload-error",(_,E)=>{const S=f.value[h(_.id)];S&&(S.percent=null,S.status=Y.ERROR,S.statusName=E?.isNetworkError?t("Network Error, Unable establish connection to the server or interrupted."):E?.message||t("Unknown Error"))}),v.on("error",_=>{p.value=_.message,k.value=!1,o.emitter.emit("vf-fetch",{params:{q:"index"},noCloseModal:!0})}),v.on("complete",()=>{k.value=!1,o.emitter.emit("vf-fetch",{params:{q:"index",path:l.value.path,storage:l.value.storage},noCloseModal:!0})}),u.value?.addEventListener("click",()=>m.value?.click()),i.value?.addEventListener("click",()=>s.value?.click()),a.value?.addEventListener("dragover",_=>{_.preventDefault(),b.value=!0}),a.value?.addEventListener("dragleave",_=>{_.preventDefault(),b.value=!1});const T=(_,E)=>{E.isFile&&E.file(S=>_(E,S)),E.isDirectory&&E.createReader().readEntries(S=>S.forEach(A=>T(_,A)))};a.value?.addEventListener("drop",_=>{_.preventDefault(),b.value=!1;const E=/^[/\\](.+)/,S=_.dataTransfer?.items;S&&Array.from(S).forEach(A=>{A.kind==="file"&&T((F,q)=>{const M=E.exec(F.fullPath);g(q,M?M[1]:q.name)},A.webkitGetAsEntry())})});const K=_=>{const E=_.target,S=E.files;if(S){for(const A of S)g(A);E.value=""}};m.value?.addEventListener("change",K),s.value?.addEventListener("change",K)}),{container:c,internalFileInput:m,internalFolderInput:s,pickFiles:u,pickFolders:i,dropArea:a,queue:f,message:p,uploading:k,hasFilesInDropArea:b,definitions:d,openFileSelector:P,upload:H,cancel:L,remove:z,clear:U,close:O,getClassNameForEntry:w,getIconForEntry:$}}function we(o,t=14){const n=`((?=([\\w\\W]{0,${t}}))([\\w\\W]{${t+1},})([\\w\\W]{8,}))`;return o.replace(new RegExp(n),"$2..$4")}const Vr={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function Sr(o,t){return e.openBlock(),e.createElementBlock("svg",Vr,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"},null,-1)])])}const Ue={render:Sr},Nr={class:"vuefinder__upload-modal__content"},Br={key:0,class:"pointer-events-none"},Cr={key:1,class:"pointer-events-none"},xr=["disabled"],$r=["disabled"],Dr={class:"vuefinder__upload-modal__file-list vf-scrollbar"},Tr=["textContent"],Mr={class:"vuefinder__upload-modal__file-info"},Ar={class:"vuefinder__upload-modal__file-name hidden md:block"},Fr={class:"vuefinder__upload-modal__file-name md:hidden"},Ir={key:0,class:"ml-auto"},Lr=["title","disabled","onClick"],Rr={key:0,class:"py-2"},zr=["disabled"],je=e.defineComponent({__name:"ModalUpload",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,{container:l,internalFileInput:r,internalFolderInput:d,pickFiles:c,pickFolders:m,dropArea:s,queue:u,message:i,uploading:a,hasFilesInDropArea:f,definitions:p,openFileSelector:k,upload:b,cancel:v,remove:h,clear:g,close:w,getClassNameForEntry:$,getIconForEntry:P}=Er();return(O,H)=>(e.openBlock(),e.createBlock(ee,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",class:"vf-btn vf-btn-primary",disabled:e.unref(a),onClick:H[4]||(H[4]=e.withModifiers((...L)=>e.unref(b)&&e.unref(b)(...L),["prevent"]))},e.toDisplayString(e.unref(n)("Upload")),9,zr),e.unref(a)?(e.openBlock(),e.createElementBlock("button",{key:0,type:"button",class:"vf-btn vf-btn-secondary",onClick:H[5]||(H[5]=e.withModifiers((...L)=>e.unref(v)&&e.unref(v)(...L),["prevent"]))},e.toDisplayString(e.unref(n)("Cancel")),1)):(e.openBlock(),e.createElementBlock("button",{key:1,type:"button",class:"vf-btn vf-btn-secondary",onClick:H[6]||(H[6]=e.withModifiers((...L)=>e.unref(w)&&e.unref(w)(...L),["prevent"]))},e.toDisplayString(e.unref(n)("Close")),1))]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(ne,{icon:e.unref(Ue),title:e.unref(n)("Upload Files")},null,8,["icon","title"]),e.createElementVNode("div",Nr,[e.createElementVNode("div",{class:"vuefinder__upload-modal__drop-area",ref_key:"dropArea",ref:s,onClick:H[0]||(H[0]=(...L)=>e.unref(k)&&e.unref(k)(...L))},[e.unref(f)?(e.openBlock(),e.createElementBlock("div",Br,e.toDisplayString(e.unref(n)("Release to drop these files.")),1)):(e.openBlock(),e.createElementBlock("div",Cr,e.toDisplayString(e.unref(n)("Drag and drop the files/folders to here or click here.")),1))],512),e.createElementVNode("div",{ref_key:"container",ref:l,class:"vuefinder__upload-modal__buttons"},[e.createElementVNode("button",{ref_key:"pickFiles",ref:c,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Select Files")),513),e.createElementVNode("button",{ref_key:"pickFolders",ref:m,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Select Folders")),513),e.createElementVNode("button",{type:"button",class:"vf-btn vf-btn-secondary",disabled:e.unref(a),onClick:H[1]||(H[1]=L=>e.unref(g)(!1))},e.toDisplayString(e.unref(n)("Clear all")),9,xr),e.createElementVNode("button",{type:"button",class:"vf-btn vf-btn-secondary",disabled:e.unref(a),onClick:H[2]||(H[2]=L=>e.unref(g)(!0))},e.toDisplayString(e.unref(n)("Clear only successful")),9,$r)],512),e.createElementVNode("div",Dr,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(u),L=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__upload-modal__file-entry",key:L.id},[e.createElementVNode("span",{class:e.normalizeClass(["vuefinder__upload-modal__file-icon",e.unref($)(L)])},[e.createElementVNode("span",{class:"vuefinder__upload-modal__file-icon-text",textContent:e.toDisplayString(e.unref(P)(L))},null,8,Tr)],2),e.createElementVNode("div",Mr,[e.createElementVNode("div",Ar,e.toDisplayString(e.unref(we)(L.name,40))+" ("+e.toDisplayString(L.size)+") ",1),e.createElementVNode("div",Fr,e.toDisplayString(e.unref(we)(L.name,16))+" ("+e.toDisplayString(L.size)+") ",1),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__upload-modal__file-status",e.unref($)(L)])},[e.createTextVNode(e.toDisplayString(L.statusName)+" ",1),L.status===e.unref(p).QUEUE_ENTRY_STATUS.UPLOADING?(e.openBlock(),e.createElementBlock("b",Ir,e.toDisplayString(L.percent),1)):e.createCommentVNode("",!0)],2)]),e.createElementVNode("button",{type:"button",class:e.normalizeClass(["vuefinder__upload-modal__file-remove",e.unref(a)?"disabled":""]),title:e.unref(n)("Delete"),disabled:e.unref(a),onClick:z=>e.unref(h)(L)},[...H[7]||(H[7]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"vuefinder__upload-modal__file-remove-icon"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])],10,Lr)]))),128)),e.unref(u).length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",Rr,e.toDisplayString(e.unref(n)("No files selected!")),1))]),e.unref(i).length?(e.openBlock(),e.createBlock(Le,{key:0,onHidden:H[3]||(H[3]=L=>i.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(i)),1)]),_:1})):e.createCommentVNode("",!0)])]),e.createElementVNode("input",{ref_key:"internalFileInput",ref:r,type:"file",multiple:"",class:"hidden"},null,512),e.createElementVNode("input",{ref_key:"internalFolderInput",ref:d,type:"file",multiple:"",webkitdirectory:"",class:"hidden"},null,512)]),_:1}))}}),Hr={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function Pr(o,t){return e.openBlock(),e.createElementBlock("svg",Hr,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5m6 4.125 2.25 2.25m0 0 2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125"},null,-1)])])}const Oe={render:Pr},qr={class:"vuefinder__unarchive-modal__content"},Ur={class:"vuefinder__unarchive-modal__items"},jr={key:0,class:"vuefinder__unarchive-modal__icon vuefinder__unarchive-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Or={key:1,class:"vuefinder__unarchive-modal__icon vuefinder__unarchive-modal__icon--file",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Kr={class:"vuefinder__unarchive-modal__item-name"},Gr={class:"vuefinder__unarchive-modal__info"},Ne=e.defineComponent({__name:"ModalUnarchive",setup(o){const t=e.inject("ServiceContainer"),n=t.fs,l=x.useStore(n.path),{t:r}=t.i18n,d=e.ref(t.modal.data.items[0]),c=e.ref(""),m=e.ref([]),s=()=>{t.emitter.emit("vf-fetch",{params:{q:"unarchive",m:"post",storage:l.value.storage,path:l.value.path},body:{item:d.value.path},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:r("The file unarchived.")})},onError:u=>{c.value=r(u.message)}})};return(u,i)=>(e.openBlock(),e.createBlock(ee,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:s,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(r)("Unarchive")),1),e.createElementVNode("button",{type:"button",onClick:i[1]||(i[1]=a=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(r)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(ne,{icon:e.unref(Oe),title:e.unref(r)("Unarchive")},null,8,["icon","title"]),e.createElementVNode("div",qr,[e.createElementVNode("div",Ur,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.value,a=>(e.openBlock(),e.createElementBlock("p",{class:"vuefinder__unarchive-modal__item",key:a.path},[a.type==="dir"?(e.openBlock(),e.createElementBlock("svg",jr,[...i[2]||(i[2]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",Or,[...i[3]||(i[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),e.createElementVNode("span",Kr,e.toDisplayString(a.basename),1)]))),128)),e.createElementVNode("p",Gr,e.toDisplayString(e.unref(r)("The archive will be unarchived at"))+" ("+e.toDisplayString(e.unref(l).path)+")",1),c.value.length?(e.openBlock(),e.createBlock(e.unref(c),{key:0,onHidden:i[0]||(i[0]=a=>c.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),Yr={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function Wr(o,t){return e.openBlock(),e.createElementBlock("svg",Yr,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125"},null,-1)])])}const Ke={render:Wr},Qr={class:"vuefinder__archive-modal__content"},Xr={class:"vuefinder__archive-modal__form"},Jr={class:"vuefinder__archive-modal__files vf-scrollbar"},Zr={class:"vuefinder__archive-modal__file"},el={key:0,class:"vuefinder__archive-modal__icon vuefinder__archive-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},tl={key:1,class:"vuefinder__archive-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},nl={class:"vuefinder__archive-modal__file-name"},ol=["placeholder"],Be=e.defineComponent({__name:"ModalArchive",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,l=t.fs,r=x.useStore(l.path),d=e.ref(""),c=e.ref(""),m=e.ref(t.modal.data.items),s=()=>{m.value.length&&t.emitter.emit("vf-fetch",{params:{q:"archive",m:"post",storage:r.value.storage,path:r.value.path},body:{items:m.value.map(({path:u,type:i})=>({path:u,type:i})),name:d.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("The file(s) archived.")})},onError:u=>{c.value=n(u.message)}})};return(u,i)=>(e.openBlock(),e.createBlock(ee,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:s,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(n)("Archive")),1),e.createElementVNode("button",{type:"button",onClick:i[2]||(i[2]=a=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(n)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(ne,{icon:e.unref(Ke),title:e.unref(n)("Archive the files")},null,8,["icon","title"]),e.createElementVNode("div",Qr,[e.createElementVNode("div",Xr,[e.createElementVNode("div",Jr,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.value,a=>(e.openBlock(),e.createElementBlock("p",Zr,[a.type==="dir"?(e.openBlock(),e.createElementBlock("svg",el,[...i[3]||(i[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",tl,[...i[4]||(i[4]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),e.createElementVNode("span",nl,e.toDisplayString(a.basename),1)]))),256))]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":i[0]||(i[0]=a=>d.value=a),onKeyup:e.withKeys(s,["enter"]),class:"vuefinder__archive-modal__input",placeholder:e.unref(n)("Archive name. (.zip file will be created)"),type:"text"},null,40,ol),[[e.vModelText,d.value]]),c.value.length?(e.openBlock(),e.createBlock(e.unref(c),{key:0,onHidden:i[1]||(i[1]=a=>c.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),rl={class:"vuefinder__menubar__container"},ll=["onClick","onMouseenter"],al={class:"vuefinder__menubar__label"},sl=["onMouseenter"],il=["onClick"],cl={key:0,class:"vuefinder__menubar__dropdown__label"},dl={key:1,class:"vuefinder__menubar__dropdown__shortcut"},ul={key:2,class:"vuefinder__menubar__dropdown__checkmark"},ml=e.defineComponent({__name:"MenuBar",setup(o){const t=e.inject("ServiceContainer");t||console.error("MenuBar: ServiceContainer not found");const{t:n}=t?.i18n||{t:v=>v},l=t?.fs,r=t?.config,d=t?.search,c=x.useStore(r?.state||{}),m=x.useStore(d?.state||{}),s=x.useStore(l?.selectedItems||[]),u=e.ref(null),i=e.ref([{id:"file",label:n("File"),items:[{id:"new-folder",label:n("New Folder"),shortcut:"Ctrl+Shift+N",action:()=>t?.modal?.open(Se,{items:s.value}),enabled:()=>t?.features?.includes(R.NEW_FOLDER)||!1},{id:"new-file",label:n("New File"),shortcut:"Ctrl+Shift+F",action:()=>t?.modal?.open(qe,{items:s.value}),enabled:()=>t?.features?.includes(R.NEW_FILE)||!1},{type:"separator"},{id:"upload",label:n("Upload"),shortcut:"Ctrl+U",action:()=>t?.modal?.open(je,{items:s.value}),enabled:()=>t?.features?.includes(R.UPLOAD)||!1},{type:"separator"},{id:"preview",label:n("Preview"),shortcut:"Space",action:()=>{s.value.length===1&&s.value[0]?.type!=="dir"&&t?.modal?.open(Ee,{storage:l?.path?.get()?.storage,item:s.value[0]})},enabled:()=>s.value.length===1&&s.value[0]?.type!=="dir"},{type:"separator"},{id:"exit",label:n("Exit"),shortcut:"Alt+F4",action:()=>window.close(),enabled:()=>!0}]},{id:"edit",label:n("Edit"),items:[{id:"select-all",label:n("Select All"),shortcut:"Ctrl+A",action:()=>l?.selectAll(),enabled:()=>!0},{id:"deselect",label:n("Deselect All"),shortcut:"Ctrl+D",action:()=>l?.clearSelection(),enabled:()=>s.value.length>0},{type:"separator"},{id:"cut",label:n("Cut"),shortcut:"Ctrl+X",action:()=>{s.value.length>0&&l?.setClipboard("cut",new Set(s.value.map(v=>v.path)))},enabled:()=>s.value.length>0},{id:"copy",label:n("Copy"),shortcut:"Ctrl+C",action:()=>{s.value.length>0&&l?.setClipboard("copy",new Set(s.value.map(v=>v.path)))},enabled:()=>s.value.length>0},{id:"paste",label:n("Paste"),shortcut:"Ctrl+V",action:()=>{const v=l?.getClipboard();v?.items?.size>0&&t?.modal?.open(v.type==="cut"?Ve:ze,{items:Array.from(v.items),targetPath:l?.path?.get()?.path})},enabled:()=>l?.getClipboard()?.items?.size>0},{type:"separator"},{id:"rename",label:n("Rename"),shortcut:"F2",action:()=>{s.value.length===1&&t?.modal?.open(fe,{items:s.value})},enabled:()=>s.value.length===1&&t?.features?.includes(R.RENAME)},{id:"delete",label:n("Delete"),shortcut:"Delete",action:()=>{s.value.length>0&&t?.modal?.open(me,{items:s.value})},enabled:()=>s.value.length>0&&t?.features?.includes(R.DELETE)}]},{id:"view",label:n("View"),items:[{id:"refresh",label:n("Refresh"),shortcut:"F5",action:()=>{t?.emitter?.emit("vf-fetch",{params:{q:"index",storage:l?.path?.get()?.storage,path:l?.path?.get()?.path}})},enabled:()=>!0},{type:"separator"},{id:"grid-view",label:n("Grid View"),shortcut:"Ctrl+1",action:()=>r?.set("view","grid"),enabled:()=>!m.value?.query?.length,checked:()=>c.value?.view==="grid"},{id:"list-view",label:n("List View"),shortcut:"Ctrl+2",action:()=>r?.set("view","list"),enabled:()=>!m.value?.query?.length,checked:()=>c.value?.view==="list"},{type:"separator"},{id:"tree-view",label:n("Tree View"),shortcut:"Ctrl+E",action:()=>r?.toggle("showTreeView"),enabled:()=>!0,checked:()=>c.value?.showTreeView},{id:"thumbnails",label:n("Show Thumbnails"),shortcut:"Ctrl+T",action:()=>r?.toggle("showThumbnails"),enabled:()=>!0,checked:()=>c.value?.showThumbnails},{type:"separator"},{id:"fullscreen",label:n("Full Screen"),shortcut:"F11",action:()=>r?.toggle("fullScreen"),enabled:()=>t?.features?.includes(R.FULL_SCREEN),checked:()=>c.value?.fullScreen}]},{id:"tools",label:n("Tools"),items:[{id:"search",label:n("Search"),shortcut:"Ctrl+F",action:()=>d?.enterSearchMode(),enabled:()=>t?.features?.includes(R.SEARCH)},{type:"separator"},{id:"archive",label:n("Archive"),shortcut:"Ctrl+Shift+A",action:()=>{s.value.length>0&&t?.modal?.open(Be,{items:s.value})},enabled:()=>s.value.length>0&&t?.features?.includes(R.ARCHIVE)},{id:"unarchive",label:n("Unarchive"),shortcut:"Ctrl+Shift+U",action:()=>{s.value.length===1&&s.value[0]?.mime_type==="application/zip"&&t?.modal?.open(Ne,{items:s.value})},enabled:()=>s.value.length===1&&s.value[0]?.mime_type==="application/zip"&&t?.features?.includes(R.UNARCHIVE)}]},{id:"help",label:n("Help"),items:[{id:"about",label:n("About VueFinder"),shortcut:"Ctrl+\\",action:()=>t?.modal?.open(ye),enabled:()=>!0}]}]);e.computed(()=>s.value.length>0),e.computed(()=>s.value.length===1);const a=v=>{u.value=u.value===v?null:v},f=()=>{u.value=null},p=v=>{v(),f()},k=v=>{if(v.altKey&&!v.ctrlKey&&!v.metaKey){const h=v.key.toLowerCase(),g={f:"file",e:"edit",v:"view",t:"tools",h:"help"};g[h]&&(v.preventDefault(),a(g[h]))}v.key==="Escape"&&f()},b=v=>{v.target.closest(".vuefinder__menubar")||f()};return e.onMounted(()=>{document.addEventListener("keydown",k),document.addEventListener("click",b)}),e.onUnmounted(()=>{document.removeEventListener("keydown",k),document.removeEventListener("click",b)}),(v,h)=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__menubar",onClick:h[2]||(h[2]=e.withModifiers(()=>{},["stop"]))},[e.createElementVNode("div",rl,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,g=>(e.openBlock(),e.createElementBlock("div",{key:g.id,class:e.normalizeClass(["vuefinder__menubar__item",{"vuefinder__menubar__item--active":u.value===g.id}]),onClick:w=>a(g.id),onMouseenter:w=>u.value=g.id,onMouseleave:h[1]||(h[1]=w=>u.value=null)},[e.createElementVNode("span",al,e.toDisplayString(g.label),1),u.value===g.id?(e.openBlock(),e.createElementBlock("div",{key:0,class:"vuefinder__menubar__dropdown",onMouseenter:w=>u.value=g.id,onMouseleave:h[0]||(h[0]=w=>u.value=null)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(g.items,w=>(e.openBlock(),e.createElementBlock("div",{key:w.id||w.type,class:e.normalizeClass(["vuefinder__menubar__dropdown__item",{"vuefinder__menubar__dropdown__item--separator":w.type==="separator","vuefinder__menubar__dropdown__item--disabled":w.enabled&&!w.enabled(),"vuefinder__menubar__dropdown__item--checked":w.checked&&w.checked()}]),onClick:$=>w.type!=="separator"&&w.enabled&&w.enabled()?p(w.action):null},[w.type!=="separator"?(e.openBlock(),e.createElementBlock("span",cl,e.toDisplayString(w.label),1)):e.createCommentVNode("",!0),w.shortcut?(e.openBlock(),e.createElementBlock("span",dl,e.toDisplayString(w.shortcut),1)):e.createCommentVNode("",!0),w.checked&&w.checked()?(e.openBlock(),e.createElementBlock("span",ul," ✓ ")):e.createCommentVNode("",!0)],10,il))),128))],40,sl)):e.createCommentVNode("",!0)],42,ll))),128))])]))}}),fl={xmlns:"http://www.w3.org/2000/svg",fill:"none",class:"animate-spin p-0.5 h-5 w-5 text-white ml-auto",viewBox:"0 0 24 24"};function vl(o,t){return e.openBlock(),e.createElementBlock("svg",fl,[...t[0]||(t[0]=[e.createElementVNode("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",class:"opacity-25 stroke-blue-900 dark:stroke-blue-100"},null,-1),e.createElementVNode("path",{fill:"currentColor",d:"M4 12a8 8 0 0 1 8-8V0C5.373 0 0 5.373 0 12zm2 5.291A7.96 7.96 0 0 1 4 12H0c0 3.042 1.135 5.824 3 7.938z",class:"opacity-75"},null,-1)])])}const Ce={render:vl},_l={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function pl(o,t){return e.openBlock(),e.createElementBlock("svg",_l,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"},null,-1)])])}const hl={render:pl},gl={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function kl(o,t){return e.openBlock(),e.createElementBlock("svg",gl,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"},null,-1)])])}const wl={render:kl},bl={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function yl(o,t){return e.openBlock(),e.createElementBlock("svg",bl,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25zm0 9.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18zM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25zm0 9.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18z"},null,-1)])])}const El={render:yl},Vl={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function Sl(o,t){return e.openBlock(),e.createElementBlock("svg",Vl,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75"},null,-1)])])}const Nl={render:Sl},Bl={class:"vuefinder__toolbar"},Cl={key:0,class:"vuefinder__toolbar__actions"},xl=["title"],$l=["title"],Dl=["title"],Tl=["title"],Ml=["title"],Al=["title"],Fl=["title"],Il={key:1,class:"vuefinder__toolbar__search-results"},Ll={class:"pl-2"},Rl={class:"dark:bg-gray-700 bg-gray-200 text-xs px-2 py-1 rounded"},zl={class:"vuefinder__toolbar__controls"},Hl=["title"],Pl=["title"],ql=e.defineComponent({__name:"Toolbar",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,l=t.fs,r=t.config,d=t.search,c=x.useStore(r.state),m=x.useStore(d.state),s=x.useStore(l.selectedItems);e.watch(()=>c.value.fullScreen,()=>{if(c.value.fullScreen){const i=document.querySelector("body");i&&(i.style.overflow="hidden")}else{const i=document.querySelector("body");i&&(i.style.overflow="")}t.emitter.emit("vf-fullscreen-toggle")});const u=()=>{r.set("view",c.value.view==="list"?"grid":"list")};return(i,a)=>(e.openBlock(),e.createElementBlock("div",Bl,[e.unref(m).query.length?(e.openBlock(),e.createElementBlock("div",Il,[e.createElementVNode("div",Ll,[e.createTextVNode(e.toDisplayString(e.unref(n)("Search results for"))+" ",1),e.createElementVNode("span",Rl,e.toDisplayString(e.unref(m).query),1)]),e.unref(r).get("loadingIndicator")==="circular"&&e.unref(l).isLoading()?(e.openBlock(),e.createBlock(e.unref(Ce),{key:0})):e.createCommentVNode("",!0)])):(e.openBlock(),e.createElementBlock("div",Cl,[e.unref(t).features.includes(e.unref(R).NEW_FOLDER)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"mx-1.5",title:e.unref(n)("New Folder"),onClick:a[0]||(a[0]=f=>e.unref(t).modal.open(Se,{items:e.unref(s)}))},[e.createVNode(e.unref(He))],8,xl)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(R).NEW_FILE)?(e.openBlock(),e.createElementBlock("div",{key:1,class:"mx-1.5",title:e.unref(n)("New File"),onClick:a[1]||(a[1]=f=>e.unref(t).modal.open(qe,{items:e.unref(s)}))},[e.createVNode(e.unref(Pe))],8,$l)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(R).RENAME)?(e.openBlock(),e.createElementBlock("div",{key:2,class:"mx-1.5",title:e.unref(n)("Rename"),onClick:a[2]||(a[2]=f=>e.unref(s).length!==1||e.unref(t).modal.open(fe,{items:e.unref(s)}))},[e.createVNode(e.unref(Ie),{class:e.normalizeClass(e.unref(s).length===1?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,Dl)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(R).DELETE)?(e.openBlock(),e.createElementBlock("div",{key:3,class:"mx-1.5",title:e.unref(n)("Delete"),onClick:a[3]||(a[3]=f=>!e.unref(s).length||e.unref(t).modal.open(me,{items:e.unref(s)}))},[e.createVNode(e.unref(Fe),{class:e.normalizeClass(e.unref(s).length?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,Tl)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(R).UPLOAD)?(e.openBlock(),e.createElementBlock("div",{key:4,class:"mx-1.5",title:e.unref(n)("Upload"),onClick:a[4]||(a[4]=f=>e.unref(t).modal.open(je,{items:e.unref(s)}))},[e.createVNode(e.unref(Ue))],8,Ml)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(R).UNARCHIVE)&&e.unref(s).length===1&&e.unref(s)[0].mime_type==="application/zip"?(e.openBlock(),e.createElementBlock("div",{key:5,class:"mx-1.5",title:e.unref(n)("Unarchive"),onClick:a[5]||(a[5]=f=>!e.unref(s).length||e.unref(t).modal.open(Ne,{items:e.unref(s)}))},[e.createVNode(e.unref(Oe),{class:e.normalizeClass(e.unref(s).length?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,Al)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(R).ARCHIVE)?(e.openBlock(),e.createElementBlock("div",{key:6,class:"mx-1.5",title:e.unref(n)("Archive"),onClick:a[6]||(a[6]=f=>!e.unref(s).length||e.unref(t).modal.open(Be,{items:e.unref(s)}))},[e.createVNode(e.unref(Ke),{class:e.normalizeClass(e.unref(s).length?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,Fl)):e.createCommentVNode("",!0)])),e.createElementVNode("div",zl,[e.unref(t).features.includes(e.unref(R).FULL_SCREEN)?(e.openBlock(),e.createElementBlock("div",{key:0,onClick:a[7]||(a[7]=f=>e.unref(r).toggle("fullScreen")),class:"mx-1.5",title:e.unref(n)("Toggle Full Screen")},[e.unref(c).fullScreen?(e.openBlock(),e.createBlock(e.unref(wl),{key:0})):(e.openBlock(),e.createBlock(e.unref(hl),{key:1}))],8,Hl)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"mx-1.5",title:e.unref(n)("Change View"),onClick:a[8]||(a[8]=f=>e.unref(m).query.length||u())},[e.unref(c).view==="grid"?(e.openBlock(),e.createBlock(e.unref(El),{key:0,class:e.normalizeClass(["vf-toolbar-icon",e.unref(m).query.length?"vf-toolbar-icon-disabled":""])},null,8,["class"])):e.createCommentVNode("",!0),e.unref(c).view==="list"?(e.openBlock(),e.createBlock(e.unref(Nl),{key:1,class:e.normalizeClass(["vf-toolbar-icon",e.unref(m).query.length?"vf-toolbar-icon-disabled":""])},null,8,["class"])):e.createCommentVNode("",!0)],8,Pl)])]))}}),Ul=(o,t=0,n=!1)=>{let l;return(...r)=>{n&&!l&&o(...r),clearTimeout(l),l=setTimeout(()=>{o(...r)},t)}},$e=(o,t,n)=>{const l=e.ref(o);return e.customRef((r,d)=>({get(){return r(),l.value},set:Ul(c=>{l.value=c,d()},t,!1)}))},jl={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer",viewBox:"-40 -40 580 580"};function Ol(o,t){return e.openBlock(),e.createElementBlock("svg",jl,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M463.5 224h8.5c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2S461.9 48.1 455 55l-41.6 41.6c-87.6-86.5-228.7-86.2-315.8 1-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2S334.3 224 344 224z"},null,-1)])])}const Kl={render:Ol},Gl={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-0.5 rounded",viewBox:"0 0 20 20"};function Yl(o,t){return e.openBlock(),e.createElementBlock("svg",Gl,[...t[0]||(t[0]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 9.707a1 1 0 0 1 0-1.414l4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1-1.414 1.414L11 7.414V15a1 1 0 1 1-2 0V7.414L6.707 9.707a1 1 0 0 1-1.414 0",class:"pointer-events-none","clip-rule":"evenodd"},null,-1)])])}const Wl={render:Yl},Ql={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer",viewBox:"0 0 24 24"};function Xl(o,t){return e.openBlock(),e.createElementBlock("svg",Ql,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1)])])}const Jl={render:Xl},Zl={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-gray-800 cursor-pointer",viewBox:"0 0 20 20"};function ea(o,t){return e.openBlock(),e.createElementBlock("svg",Zl,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M10.707 2.293a1 1 0 0 0-1.414 0l-7 7a1 1 0 0 0 1.414 1.414L4 10.414V17a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-6.586l.293.293a1 1 0 0 0 1.414-1.414z",class:"pointer-events-none"},null,-1)])])}const ta={render:ea},na={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 m-auto stroke-gray-400 fill-gray-100 dark:stroke-gray-400 dark:fill-gray-400/20",viewBox:"0 0 20 20"};function oa(o,t){return e.openBlock(),e.createElementBlock("svg",na,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607"},null,-1)])])}const ra={render:oa},la={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"w-6 h-6 cursor-pointer",viewBox:"0 0 24 24"};function aa(o,t){return e.openBlock(),e.createElementBlock("svg",la,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1)])])}const sa={render:aa},ia={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",viewBox:"0 0 24 24"};function ca(o,t){return e.openBlock(),e.createElementBlock("svg",ia,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-6l-2-2H5a2 2 0 0 0-2 2"},null,-1)])])}const ve={render:ca},da={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"h-6 w-6 p-1 rounded text-slate-700 dark:text-neutral-300 cursor-pointer",viewBox:"0 0 24 24"};function ua(o,t){return e.openBlock(),e.createElementBlock("svg",da,[...t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M9 6h11M12 12h8M15 18h5M5 6v.01M8 12v.01M11 18v.01"},null,-1)])])}const ma={render:ua},fa={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};function va(o,t){return e.openBlock(),e.createElementBlock("svg",fa,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M8 256a56 56 0 1 1 112 0 56 56 0 1 1-112 0m160 0a56 56 0 1 1 112 0 56 56 0 1 1-112 0m216-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112"},null,-1)])])}const _a={render:va};function pa(o){const[t,n]=ha(o);if(!n||n==="/")return t+"://";const l=n.replace(/\/+$/,""),r=l.lastIndexOf("/");return r===0?t+"://":t+":/"+l.slice(0,r)}function ha(o){const t=o.indexOf(":/");return t===-1?[void 0,o]:[o.slice(0,t),o.slice(t+2)||"/"]}function de(o,t=[]){const n="vfDragEnterCounter",l=o.fs,r=x.useStore(l.selectedItems);function d(i,a){i.preventDefault(),l.getDraggedItem()===a.path||!a||a.type!=="dir"||r.value.some(p=>p.path===a.path||pa(p.path)===a.path)?i.dataTransfer&&(i.dataTransfer.dropEffect="none",i.dataTransfer.effectAllowed="none"):(i.dataTransfer&&(i.dataTransfer.dropEffect="copy",i.dataTransfer.effectAllowed="all"),i.currentTarget.classList.add(...t))}function c(i){i.preventDefault();const a=i.currentTarget,f=Number(a.dataset[n]||0);a.dataset[n]=String(f+1)}function m(i){i.preventDefault();const a=i.currentTarget,p=Number(a.dataset[n]||0)-1;p<=0?(delete a.dataset[n],a.classList.remove(...t)):a.dataset[n]=String(p)}function s(i,a){if(!a)return;i.preventDefault();const f=i.currentTarget;delete f.dataset[n],f.classList.remove(...t);const p=i.dataTransfer?.getData("items")||"[]",b=JSON.parse(p).map(v=>l.sortedFiles.get().find(h=>h.path===v));l.clearDraggedItem(),o.modal.open(Ve,{items:{from:b,to:a}})}function u(i){return{dragover:a=>d(a,i),dragenter:c,dragleave:m,drop:a=>s(a,i)}}return{events:u}}const ga={class:"vuefinder__breadcrumb__container"},ka=["title"],wa=["title"],ba=["title"],ya=["title"],Ea={class:"vuefinder__breadcrumb__list"},Va={key:0,class:"vuefinder__breadcrumb__hidden-list"},Sa={class:"relative"},Na=["title","onClick"],Ba={class:"vuefinder__breadcrumb__search-mode"},Ca=["placeholder"],xa=["onClick"],$a={class:"vuefinder__breadcrumb__hidden-item-content"},Da={class:"vuefinder__breadcrumb__hidden-item-text"},Ta=e.defineComponent({__name:"Breadcrumb",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,l=t.search,r=t.fs,d=t.config,c=x.useStore(d.state),m=x.useStore(l.state),s=x.useStore(r.path),u=x.useStore(r.loading),i=e.computed(()=>m.value?.searchMode??!1),a=e.ref(null),f=$e(0,100),p=e.ref(5),k=e.ref(!1),b=e.computed(()=>s.value?.breadcrumb??[]);function v(M,B){return M.length>B?[M.slice(-B),M.slice(0,-B)]:[M,[]]}const h=e.computed(()=>v(b.value,p.value)[0]),g=e.computed(()=>v(b.value,p.value)[1]);e.watch(f,()=>{if(!a.value)return;const M=a.value.children;let B=0,I=0;const y=5,N=1;p.value=y,e.nextTick(()=>{for(let j=M.length-1;j>=0;j--){const W=M[j];if(B+W.offsetWidth>f.value-40)break;B+=parseInt(W.offsetWidth.toString(),10),I++}I<N&&(I=N),I>y&&(I=y),p.value=I})});const w=()=>{a.value&&(f.value=a.value.offsetWidth)},$=e.ref(null);e.onMounted(()=>{$.value=new ResizeObserver(w),a.value&&$.value.observe(a.value)}),e.onUnmounted(()=>{$.value&&$.value.disconnect()});const P=de(t,["bg-blue-200","dark:bg-slate-600"]);function O(M=null){M??=b.value.length-2;const B={basename:s.value?.storage??"local",extension:"",path:(s.value?.storage??"local")+"://",storage:s.value?.storage??"local",type:"dir",file_size:null,last_modified:null,mime_type:null,visibility:""};return b.value[M]??B}const H=()=>{A(),t.emitter.emit("vf-fetch",{params:{q:"index",storage:s.value?.storage,path:s.value?.path}})},L=()=>{l.exitSearchMode(),h.value.length>0&&!i.value&&t.emitter.emit("vf-fetch",{params:{q:"index",storage:s.value?.storage??"local",path:b.value[b.value.length-2]?.path??(s.value?.storage??"local")+"://"}})},z=M=>{t.emitter.emit("vf-fetch",{params:{q:"index",storage:s.value?.storage,path:M.path}}),k.value=!1},U=()=>{k.value&&(k.value=!1)},T={mounted(M,B){M.clickOutsideEvent=function(I){M===I.target||M.contains(I.target)||B.value()},document.body.addEventListener("click",M.clickOutsideEvent)},beforeUnmount(M){document.body.removeEventListener("click",M.clickOutsideEvent)}},K=()=>{d.toggle("showTreeView")},_=e.ref(null),E=$e("",400);e.watch(E,M=>{t.emitter.emit("vf-toast-clear"),l.setQuery(M)}),e.watch(i,M=>{M&&e.nextTick(()=>{_.value&&_.value.focus()})}),t.emitter.on("vf-search-exit",()=>{l.exitSearchMode()});const S=()=>{E.value===""&&l.exitSearchMode()},A=()=>{E.value="",l.exitSearchMode()},F=e.ref({x:0,y:0}),q=(M,B=null)=>{if(M.currentTarget instanceof HTMLElement){const{x:I,y,height:N}=M.currentTarget.getBoundingClientRect();F.value={x:I,y:y+N}}k.value=B??!k.value};return(M,B)=>(e.openBlock(),e.createElementBlock("div",ga,[e.createElementVNode("span",{title:e.unref(n)("Toggle Tree View")},[e.createVNode(e.unref(ma),{onClick:K,class:e.normalizeClass(["vuefinder__breadcrumb__toggle-tree",e.unref(c).showTreeView?"vuefinder__breadcrumb__toggle-tree--active":""])},null,8,["class"])],8,ka),e.createElementVNode("span",{title:e.unref(n)("Go up a directory")},[e.createVNode(e.unref(Wl),e.mergeProps(e.toHandlers(b.value.length&&!i.value?e.unref(P).events(O()):{}),{onClick:L,class:b.value.length&&!i.value?"vuefinder__breadcrumb__go-up--active":"vuefinder__breadcrumb__go-up--inactive"}),null,16,["class"])],8,wa),e.unref(r).isLoading()?(e.openBlock(),e.createElementBlock("span",{key:1,title:e.unref(n)("Cancel")},[e.createVNode(e.unref(Jl),{onClick:B[0]||(B[0]=I=>e.unref(t).emitter.emit("vf-fetch-abort"))})],8,ya)):(e.openBlock(),e.createElementBlock("span",{key:0,title:e.unref(n)("Refresh")},[e.createVNode(e.unref(Kl),{onClick:H})],8,ba)),e.withDirectives(e.createElementVNode("div",{class:"group vuefinder__breadcrumb__search-container",onClick:B[3]||(B[3]=(...I)=>e.unref(l).enterSearchMode&&e.unref(l).enterSearchMode(...I))},[e.createElementVNode("div",null,[e.createVNode(e.unref(ta),e.mergeProps(e.toHandlers(e.unref(P).events(O(-1))),{onClick:B[1]||(B[1]=e.withModifiers(I=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",storage:e.unref(s).value?.storage??"local"}}),["stop"]))}),null,16)]),e.createElementVNode("div",Ea,[g.value.length?e.withDirectives((e.openBlock(),e.createElementBlock("div",Va,[B[5]||(B[5]=e.createElementVNode("div",{class:"vuefinder__breadcrumb__separator"},"/",-1)),e.createElementVNode("div",Sa,[e.createElementVNode("span",{onDragenter:B[2]||(B[2]=I=>q(I,!0)),onClick:e.withModifiers(q,["stop"]),class:"vuefinder__breadcrumb__hidden-toggle"},[e.createVNode(e.unref(_a),{class:"vuefinder__breadcrumb__hidden-toggle-icon"})],32)])])),[[T,U]]):e.createCommentVNode("",!0)]),e.createElementVNode("div",{ref_key:"breadcrumbContainer",ref:a,class:"vuefinder__breadcrumb__visible-list pointer-events-none"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h.value,(I,y)=>(e.openBlock(),e.createElementBlock("div",{key:y},[B[6]||(B[6]=e.createElementVNode("span",{class:"vuefinder__breadcrumb__separator"},"/",-1)),e.createElementVNode("span",e.mergeProps(e.toHandlers(e.unref(P).events(I),!0),{class:"vuefinder__breadcrumb__item pointer-events-auto",title:I.basename,onClick:e.withModifiers(N=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",storage:e.unref(s)?.storage,path:I.path}}),["stop"])}),e.toDisplayString(I.name),17,Na)]))),128))],512),e.unref(d).get("loadingIndicator")==="circular"&&e.unref(u)?(e.openBlock(),e.createBlock(e.unref(Ce),{key:0})):e.createCommentVNode("",!0)],512),[[e.vShow,!i.value]]),e.withDirectives(e.createElementVNode("div",Ba,[e.createElementVNode("div",null,[e.createVNode(e.unref(ra))]),e.withDirectives(e.createElementVNode("input",{ref_key:"searchInput",ref:_,onKeydown:e.withKeys(A,["esc"]),onBlur:S,"onUpdate:modelValue":B[4]||(B[4]=I=>e.isRef(E)?E.value=I:null),placeholder:e.unref(n)("Search anything.."),class:"vuefinder__breadcrumb__search-input",type:"text"},null,40,Ca),[[e.vModelText,e.unref(E)]]),e.createVNode(e.unref(sa),{onClick:A})],512),[[e.vShow,i.value]]),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.withDirectives(e.createElementVNode("div",{style:e.normalizeStyle({position:"absolute",top:F.value.y+"px",left:F.value.x+"px"}),class:"vuefinder vuefinder__breadcrumb__hidden-dropdown"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(g.value,(I,y)=>(e.openBlock(),e.createElementBlock("div",e.mergeProps({key:y},e.toHandlers(e.unref(P).events(I),!0),{onClick:N=>z(I),class:"vuefinder__breadcrumb__hidden-item"}),[e.createElementVNode("div",$a,[e.createElementVNode("span",null,[e.createVNode(e.unref(ve),{class:"vuefinder__breadcrumb__hidden-item-icon"})]),B[7]||(B[7]=e.createTextVNode()),e.createElementVNode("span",Da,e.toDisplayString(I.name),1)])],16,xa))),128))],4),[[e.vShow,k.value]])]))]))}});function Ma(o,t){const{scrollContainer:n,itemWidth:l=100,rowHeight:r,overscan:d=2,containerPadding:c=48,lockItemsPerRow:m}=t,s=o,u=()=>typeof r=="number"?r:r.value,i=e.ref(0),a=e.ref(6),f=e.ref(600);let p=null;const k=e.computed(()=>Math.ceil(s.value.length/a.value)),b=e.computed(()=>k.value*u()),v=e.computed(()=>{const z=u(),U=Math.max(0,Math.floor(i.value/z)-d),T=Math.min(k.value,Math.ceil((i.value+f.value)/z)+d);return{start:U,end:T}}),h=e.computed(()=>{const{start:z,end:U}=v.value;return Array.from({length:U-z},(T,K)=>z+K)}),g=()=>f.value,w=()=>m.value,$=()=>{if(w()){a.value=1;return}if(n.value){const z=n.value.clientWidth-c;a.value=Math.max(Math.floor(z/l),2)}},P=z=>{const U=z.target;i.value=U.scrollTop};e.watch(()=>s.value.length,()=>{$()});const O=(z,U)=>{const T=U*a.value;return z.slice(T,T+a.value)},H=(z,U,T,K,_)=>{const E=[];for(let S=U;S<=T;S++)for(let A=K;A<=_;A++){const F=S*a.value+A;F<z.length&&z[F]&&E.push(z[F])}return E},L=z=>({row:Math.floor(z/a.value),col:z%a.value});return e.onMounted(async()=>{await e.nextTick(),n.value&&(f.value=n.value.clientHeight||600),$(),window.addEventListener("resize",()=>{n.value&&(f.value=n.value.clientHeight||600),$()}),n.value&&"ResizeObserver"in window&&(p=new ResizeObserver(z=>{const U=z[0];U&&(f.value=Math.round(U.contentRect.height)),$()}),p.observe(n.value))}),e.onUnmounted(()=>{window.removeEventListener("resize",$),p&&(p.disconnect(),p=null)}),{scrollTop:i,itemsPerRow:a,totalRows:k,totalHeight:b,visibleRange:v,visibleRows:h,updateItemsPerRow:$,handleScroll:P,getRowItems:O,getItemsInRange:H,getItemPosition:L,getContainerHeight:g}}function Aa(o){const{getItemPosition:t,getItemsInRange:n,getKey:l,selectionObject:r,rowHeight:d,itemWidth:c}=o,m=Math.floor(Math.random()*2**32).toString(),u=e.inject("ServiceContainer").fs,i=x.useStore(u.selectedKeys),a=x.useStore(u.sortedFiles);x.useStore(u.selectedCount);const f=e.ref(new Set),p=e.ref(!1),k=e.ref(!1),b=e.ref(null),v=_=>_.map(E=>E.getAttribute("data-key")).filter(E=>!!E),h=_=>{_.selection.getSelection().forEach(E=>{_.selection.deselect(E,!0)})},g=_=>{i.value&&i.value.forEach(E=>{const S=document.querySelector(`[data-key="${E}"]`);S&&_.selection.select(S,!0)})},w=_=>{if(_.size===0)return null;const S=Array.from(_).map(B=>{const I=a.value?.findIndex(y=>l(y)===B)??-1;return t(I>=0?I:0)}),A=Math.min(...S.map(B=>B.row)),F=Math.max(...S.map(B=>B.row)),q=Math.min(...S.map(B=>B.col)),M=Math.max(...S.map(B=>B.col));return{minRow:A,maxRow:F,minCol:q,maxCol:M}},$=_=>{p.value=!1,!_.event?.metaKey&&!_.event?.ctrlKey&&(k.value=!0),_.selection.resolveSelectables(),h(_),g(_)},P=({event:_,selection:E})=>{const S=_;S&&"type"in S&&S.type==="touchend"&&S.preventDefault();const A=_;if(!A?.ctrlKey&&!A?.metaKey&&(u.clearSelection(),E.clearSelection(!0,!0)),f.value.clear(),A&&r.value){const F=r.value.getSelectables()[0]?.closest(".scroller-"+m);if(F){const q=F.getBoundingClientRect(),M=A.clientY-q.top+F.scrollTop,B=A.clientX-q.left,I=Math.floor(M/d.value),y=Math.floor(B/c);b.value={row:I,col:y}}}},O=_=>{const E=_.selection,S=v(_.store.changed.added),A=v(_.store.changed.removed);k.value=!1,p.value=!0,S.forEach(F=>{i.value&&!i.value.has(F)&&f.value.add(F),u.select(F)}),A.forEach(F=>{document.querySelector(`[data-key="${F}"]`)&&a.value?.find(M=>l(M)===F)&&f.value.delete(F),u.deselect(F)}),E.resolveSelectables(),g(_)},H=()=>{f.value.clear()},L=_=>{if(_.event&&b.value&&f.value.size>0){const S=Array.from(f.value).map(A=>{const F=a.value?.findIndex(q=>l(q)===A)??-1;return F>=0?t(F):null}).filter(A=>A!==null);if(S.length>0){const A=[...S,b.value],F={minRow:Math.min(...A.map(q=>q.row)),maxRow:Math.max(...A.map(q=>q.row)),minCol:Math.min(...A.map(q=>q.col)),maxCol:Math.max(...A.map(q=>q.col))};n(a.value||[],F.minRow,F.maxRow,F.minCol,F.maxCol).forEach(q=>{const M=l(q);document.querySelector(`[data-key="${M}"]`)||u.select(M)})}}},z=_=>{L(_),h(_),g(_),u.setSelectedCount(i.value?.size||0),p.value=!1,b.value=null},U=()=>{r.value=new it({selectables:[".file-item-"+m],boundaries:[".scroller-"+m],selectionContainerClass:"selection-area-container",behaviour:{overlap:"invert",intersect:"touch",startThreshold:0,triggers:[0],scrolling:{speedDivider:10,manualSpeed:750,startScrollMargins:{x:0,y:10}}},features:{touch:!0,range:!0,deselectOnBlur:!0,singleTap:{allow:!1,intersect:"native"}}}),r.value.on("beforestart",$),r.value.on("start",P),r.value.on("move",O),r.value.on("stop",z)},T=()=>{r.value&&(r.value.destroy(),r.value=null)},K=_=>{k.value&&(r.value?.clearSelection(),H(),k.value=!1);const E=_;!f.value.size&&!k.value&&!E?.ctrlKey&&!E?.metaKey&&(u.clearSelection(),r.value?.clearSelection())};return e.onMounted(()=>{const _=E=>{!E.buttons&&p.value&&(p.value=!1)};document.addEventListener("dragleave",_),e.onUnmounted(()=>{document.removeEventListener("dragleave",_)})}),{isDragging:p,selectionStarted:k,explorerId:m,extractIds:v,cleanupSelection:h,refreshSelection:g,getSelectionRange:w,selectSelectionRange:L,initializeSelectionArea:U,destroySelectionArea:T,handleContentClick:K}}const Fa={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 20 20"};function Ia(o,t){return e.openBlock(),e.createElementBlock("svg",Fa,[...t[0]||(t[0]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 0 1 1.414 0L10 10.586l3.293-3.293a1 1 0 1 1 1.414 1.414l-4 4a1 1 0 0 1-1.414 0l-4-4a1 1 0 0 1 0-1.414","clip-rule":"evenodd"},null,-1)])])}const La={render:Ia},Ra={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 20 20"};function za(o,t){return e.openBlock(),e.createElementBlock("svg",Ra,[...t[0]||(t[0]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M14.707 12.707a1 1 0 0 1-1.414 0L10 9.414l-3.293 3.293a1 1 0 0 1-1.414-1.414l4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1 0 1.414","clip-rule":"evenodd"},null,-1)])])}const Ha={render:za},ue=e.defineComponent({__name:"SortIcon",props:{direction:{}},setup(o){return(t,n)=>(e.openBlock(),e.createElementBlock("div",null,[o.direction==="asc"?(e.openBlock(),e.createBlock(e.unref(La),{key:0})):e.createCommentVNode("",!0),o.direction==="desc"?(e.openBlock(),e.createBlock(e.unref(Ha),{key:1})):e.createCommentVNode("",!0)]))}}),Pa={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"absolute h-6 w-6 md:h-12 md:w-12 m-auto stroke-neutral-500 fill-white dark:fill-gray-700 dark:stroke-gray-600 z-10",viewBox:"0 0 24 24"};function qa(o,t){return e.openBlock(),e.createElementBlock("svg",Pa,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 0 0 2-2V9.414a1 1 0 0 0-.293-.707l-5.414-5.414A1 1 0 0 0 12.586 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2"},null,-1)])])}const Ua={render:qa},ja={class:"vuefinder__drag-item__container"},Oa={class:"vuefinder__drag-item__count"},Ka=e.defineComponent({__name:"DragItem",props:{count:{}},setup(o){const t=o;return(n,l)=>(e.openBlock(),e.createElementBlock("div",ja,[e.createVNode(e.unref(Ua)),e.createElementVNode("div",Oa,e.toDisplayString(t.count),1)]))}}),Ga={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"text-neutral-500",viewBox:"0 0 24 24"};function Ya(o,t){return e.openBlock(),e.createElementBlock("svg",Ga,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 0 0 2-2V9.414a1 1 0 0 0-.293-.707l-5.414-5.414A1 1 0 0 0 12.586 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2"},null,-1)])])}const Wa={render:Ya},Qa={key:3,class:"vuefinder__item-icon__extension"},De=e.defineComponent({__name:"ItemIcon",props:{item:{},ext:{type:Boolean},small:{type:Boolean}},setup(o){const t=o,n=e.inject("ServiceContainer"),l=x.useStore(n.config.state),r=n.customIcon?.(n,l,t.item);return(d,c)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__item-icon",o.small?"vuefinder__item-icon--small":"vuefinder__item-icon--large"])},[e.unref(r)?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(r).is),e.normalizeProps(e.mergeProps({key:0},e.unref(r).props||{})),null,16)):o.item.type==="dir"?(e.openBlock(),e.createBlock(e.unref(ve),{key:1})):(e.openBlock(),e.createBlock(e.unref(Wa),{key:2})),!e.unref(r)&&o.ext&&o.item.type!=="dir"&&o.item.extension?(e.openBlock(),e.createElementBlock("div",Qa,e.toDisplayString(o.item.extension.substring(0,3)),1)):e.createCommentVNode("",!0)],2))}}),Xa={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"h-5 w-5",viewBox:"0 0 24 24"};function Ja(o,t){return e.openBlock(),e.createElementBlock("svg",Xa,[...t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"m15 4.5-4 4L7 10l-1.5 1.5 7 7L14 17l1.5-4 4-4M9 15l-4.5 4.5M14.5 4 20 9.5"},null,-1)])])}const Ge={render:Ja},Za=["data-key","data-row","data-col","draggable"],es={key:0},ts={class:"vuefinder__explorer__item-grid-content"},ns=["data-src","alt"],os={class:"vuefinder__explorer__item-title"},rs={key:1,class:"vuefinder__explorer__item-list-content"},ls={class:"vuefinder__explorer__item-list-name"},as={class:"vuefinder__explorer__item-list-icon"},ss={class:"vuefinder__explorer__item-name"},is={key:0,class:"vuefinder__explorer__item-path"},cs={key:1,class:"vuefinder__explorer__item-size"},ds={key:0},us={key:2,class:"vuefinder__explorer__item-date"},ms=e.defineComponent({__name:"FileItem",props:{item:{},view:{},compact:{type:Boolean},showThumbnails:{type:Boolean},isSelected:{type:Boolean},isDragging:{type:Boolean},rowIndex:{},colIndex:{},showPath:{type:Boolean},explorerId:{}},emits:["click","dblclick","contextmenu","dragstart","dragend"],setup(o,{emit:t}){const n=o,l=t,r=e.inject("ServiceContainer"),d=r.fs,c=r.config,m=e.computed(()=>["file-item-"+n.explorerId,n.view==="grid"?"vf-explorer-item-grid":"vf-explorer-item-list",n.isSelected?"vf-explorer-selected":""]),s=e.computed(()=>({opacity:n.isDragging||d.isCut(n.item.path)?.5:""}));let u=null;const i=e.ref(null);let a=!1;const f=()=>{u&&clearTimeout(u),p.value=!0},p=e.ref(!0),k=b=>{if(p.value=!1,u&&(b.preventDefault(),clearTimeout(u)),!a)a=!0,l("click",b),i.value=setTimeout(()=>{a=!1},300);else return a=!1,l("dblclick",b),u&&clearTimeout(u),!1;if(b.currentTarget&&b.currentTarget instanceof HTMLElement){const v=b.currentTarget.getBoundingClientRect();b.preventDefault(),u=setTimeout(()=>{let w=v.y+v.height;w+146>window.innerHeight-10&&(w=v.y-146),w<10&&(w=10);const $=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!0,view:window,button:2,buttons:0,clientX:v.x,clientY:w});b.target?.dispatchEvent($)},300)}};return(b,v)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(m.value),style:e.normalizeStyle(s.value),"data-key":o.item.path,"data-row":o.rowIndex,"data-col":o.colIndex,draggable:p.value,onTouchstart:v[1]||(v[1]=h=>k(h)),onTouchend:v[2]||(v[2]=h=>f()),onClick:v[3]||(v[3]=h=>l("click",h)),onDblclick:v[4]||(v[4]=h=>l("dblclick",h)),onContextmenu:v[5]||(v[5]=e.withModifiers(h=>l("contextmenu",h),["prevent","stop"])),onDragstart:v[6]||(v[6]=h=>l("dragstart",h)),onDragend:v[7]||(v[7]=h=>l("dragend",h))},[o.view==="grid"?(e.openBlock(),e.createElementBlock("div",es,[e.createElementVNode("div",ts,[(o.item.mime_type??"").startsWith("image")&&o.showThumbnails?(e.openBlock(),e.createElementBlock("img",{key:0,onTouchstart:v[0]||(v[0]=h=>h.preventDefault()),src:"data:image/png;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",class:"vuefinder__explorer__item-thumbnail lazy","data-src":e.unref(r).requester.getPreviewUrl(o.item.storage,o.item),alt:o.item.basename},null,40,ns)):(e.openBlock(),e.createBlock(De,{key:1,item:o.item,ext:!0},null,8,["item"]))]),e.createElementVNode("span",os,e.toDisplayString(e.unref(we)(o.item.basename)),1)])):(e.openBlock(),e.createElementBlock("div",rs,[e.createElementVNode("div",ls,[e.createElementVNode("div",as,[e.createVNode(De,{item:o.item,small:o.compact},null,8,["item","small"])]),e.createElementVNode("span",ss,e.toDisplayString(o.item.basename),1)]),o.showPath?(e.openBlock(),e.createElementBlock("div",is,e.toDisplayString(o.item.path),1)):e.createCommentVNode("",!0),o.showPath?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",cs,[o.item.file_size?(e.openBlock(),e.createElementBlock("div",ds,e.toDisplayString(e.unref(r).filesize(o.item.file_size)),1)):e.createCommentVNode("",!0)])),!o.showPath&&o.item.last_modified?(e.openBlock(),e.createElementBlock("div",us,e.toDisplayString(new Date(o.item.last_modified*1e3).toLocaleString()),1)):e.createCommentVNode("",!0)])),e.unref(c).get("pinnedFolders").find(h=>h.path===o.item.path)?(e.openBlock(),e.createBlock(e.unref(Ge),{key:2,class:"vuefinder__item--pinned"})):e.createCommentVNode("",!0)],46,Za))}}),fs=["data-row"],ge=e.defineComponent({__name:"FileRow",props:{rowIndex:{},rowHeight:{},view:{},itemsPerRow:{},items:{},compact:{type:Boolean},showThumbnails:{type:Boolean},showPath:{type:Boolean},isDraggingItem:{type:Function},isSelected:{type:Function},dragNDropEvents:{type:Function},explorerId:{}},emits:["click","dblclick","contextmenu","dragstart","dragend"],setup(o,{emit:t}){const n=o,l=t,r=e.computed(()=>[n.view==="grid"?"vf-explorer-item-grid-row":"vf-explorer-item-list-row","pointer-events-none"]),d=e.computed(()=>({position:"absolute",top:0,left:0,width:"100%",height:`${n.rowHeight}px`,transform:`translateY(${n.rowIndex*n.rowHeight}px)`})),c=e.computed(()=>n.view==="grid"?{gridTemplateColumns:`repeat(${n.itemsPerRow||1}, 1fr)`}:{gridTemplateColumns:"1fr"});return(m,s)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(r.value),"data-row":o.rowIndex,style:e.normalizeStyle(d.value)},[e.createElementVNode("div",{class:e.normalizeClass(["grid justify-self-start",{"w-full":o.view==="list"}]),style:e.normalizeStyle(c.value)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.items,(u,i)=>(e.openBlock(),e.createBlock(ms,e.mergeProps({key:u.path,item:u,view:o.view,compact:o.compact,"show-thumbnails":o.showThumbnails,"show-path":o.showPath,"is-selected":o.isSelected(u.path),"is-dragging":o.isDraggingItem(u.path),"row-index":o.rowIndex,"col-index":i},e.toHandlers(o.dragNDropEvents(u)),{onClick:s[0]||(s[0]=a=>l("click",a)),onDblclick:s[1]||(s[1]=a=>l("dblclick",a)),onContextmenu:s[2]||(s[2]=a=>l("contextmenu",a)),onDragstart:s[3]||(s[3]=a=>l("dragstart",a)),onDragend:s[4]||(s[4]=a=>l("dragend",a)),explorerId:o.explorerId}),null,16,["item","view","compact","show-thumbnails","show-path","is-selected","is-dragging","row-index","col-index","explorerId"]))),128))],6)],14,fs))}}),vs=["onClick"],_s=e.defineComponent({__name:"Toast",setup(o){const t=e.inject("ServiceContainer"),{getStore:n}=t.storage,l=e.ref(n("full-screen",!1)),r=e.ref([]),d=s=>s==="error"?"text-red-400 border-red-400 dark:text-red-300 dark:border-red-300":"text-lime-600 border-lime-600 dark:text-lime-300 dark:border-lime-1300",c=s=>{r.value.splice(s,1)},m=s=>{let u=r.value.findIndex(i=>i.id===s);u!==-1&&c(u)};return t.emitter.on("vf-toast-clear",()=>{r.value=[]}),t.emitter.on("vf-toast-push",s=>{let u=new Date().getTime().toString(36).concat(performance.now().toString(),Math.random().toString()).replace(/\./g,"");s.id=u,r.value.push(s),setTimeout(()=>{m(u)},5e3)}),(s,u)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__toast",l.value.value?"vuefinder__toast--fixed":"vuefinder__toast--absolute"])},[e.createVNode(e.TransitionGroup,{name:"vuefinder__toast-item","enter-active-class":"vuefinder__toast-item--enter-active","leave-active-class":"vuefinder__toast-item--leave-active","leave-to-class":"vuefinder__toast-item--leave-to"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,(i,a)=>(e.openBlock(),e.createElementBlock("div",{key:a,onClick:f=>c(a),class:e.normalizeClass(["vuefinder__toast__message",d(i.type)])},e.toDisplayString(i.label),11,vs))),128))]),_:1})],2))}}),ps={class:"vuefinder__explorer__container"},hs={ref:"customScrollBar",class:"vuefinder__explorer__scrollbar"},gs={key:0,class:"vuefinder__explorer__header"},ks={key:0,class:"vuefinder__linear-loader"},ws=e.defineComponent({__name:"Explorer",setup(o){const t=e.inject("ServiceContainer"),n=de(t,["bg-blue-200","dark:bg-slate-600"]),l=e.useTemplateRef("dragImage"),r=e.shallowRef(null),d=e.useTemplateRef("scrollContainer"),c=e.useTemplateRef("scrollContent"),m=t.search,s=t.fs,u=t.config,i=x.useStore(u.state),a=x.useStore(m.state),f=x.useStore(s.sort),p=x.useStore(s.sortedFiles),k=x.useStore(s.selectedKeys),b=x.useStore(s.loading),v=V=>k.value?.has(V)??!1;let h=null;const g=e.ref(null),w=e.useTemplateRef("customScrollBar"),$=e.useTemplateRef("customScrollBarContainer"),P=e.computed(()=>{const V=i.value.view,C=i.value.compactListView;return V==="grid"&&!(a.value.searchMode&&a.value.query.length)?88:C?24:50}),{t:O}=t.i18n,{itemsPerRow:H,totalHeight:L,visibleRows:z,handleScroll:U,getRowItems:T,getItemsInRange:K,getItemPosition:_,updateItemsPerRow:E}=Ma(e.computed(()=>p.value??[]),{scrollContainer:d,itemWidth:104,rowHeight:P,overscan:2,containerPadding:0,lockItemsPerRow:e.computed(()=>i.value.view==="list"||!!a.value.query.length)}),{explorerId:S,isDragging:A,initializeSelectionArea:F,destroySelectionArea:q,handleContentClick:M}=Aa({getItemPosition:_,getItemsInRange:K,getKey:V=>V.path,selectionObject:r,rowHeight:P,itemWidth:104}),B=e.ref(null),I=V=>{if(!V||!B.value)return!1;const C=k.value?.has(B.value)??!1;return A.value&&(C?k.value?.has(V)??!1:V===B.value)};e.watch(()=>u.get("view"),V=>{V==="list"?H.value=1:E()},{immediate:!0}),e.watch(H,V=>{u.get("view")==="list"&&V!==1&&(H.value=1)});const y=V=>p.value?.[V];e.onMounted(()=>{if(F(),r.value&&r.value.on("beforestart",({event:V})=>{const C=V?.target===c.value;if(!V?.metaKey&&!V?.ctrlKey&&!V?.altKey&&!C)return!1}),d.value&&(h=new Te({elements_selector:".lazy",container:d.value})),e.watch(()=>a.value.query,V=>{const C=s.path.get().storage,D=s.path.get().path;!C||!D||(V?t.emitter.emit("vf-fetch",{params:{q:"search",storage:C,path:D,filter:V},onSuccess:G=>{G.files.length||t.emitter.emit("vf-toast-push",{label:O("No search result found.")})}}):t.emitter.emit("vf-fetch",{params:{q:"index",storage:C,path:D}}))}),$.value){const V=be.OverlayScrollbars($.value,{scrollbars:{theme:"vf-scrollbars-theme"}},{initialized:C=>{g.value=C},scroll:C=>{const{scrollOffsetElement:D}=C.elements();d.value&&d.value.scrollTo({top:D.scrollTop,left:0})}});g.value=V}d.value&&d.value.addEventListener("scroll",()=>{const V=g.value;if(!V)return;const{scrollOffsetElement:C}=V.elements();C.scrollTo({top:d.value.scrollTop,left:0})})}),e.onMounted(()=>{t.emitter.on("vf-refresh-thumbnails",()=>{h&&h.update()})}),e.onUpdated(()=>{if(h&&h.update(),g.value&&w.value&&d.value){const C=d.value.scrollHeight>d.value.clientHeight,D=w.value;D.style.display=C?"block":"none",D.style.height=`${L.value}px`}}),e.onUnmounted(()=>{q(),h&&(h.destroy(),h=null),g.value&&(g.value.destroy(),g.value=null)});const N=V=>{const C=V.target?.closest(".file-item-"+S),D=V;if(C){const G=String(C.getAttribute("data-key"));!D?.ctrlKey&&!D?.metaKey&&(V.type!=="touchstart"||!s.isSelected(G))&&(s.clearSelection(),r.value?.clearSelection(!0,!0)),r.value?.resolveSelectables(),V.type==="touchstart"&&s.isSelected(G)?s.select(G):s.toggleSelect(G)}s.setSelectedCount(k.value?.size||0)},j=V=>{const C=t.contextMenuItems.find(D=>D.show(t,{searchQuery:"",items:[V],target:V}));C&&C.action(t,[V])},W=V=>{const C=V.target?.closest(".file-item-"+S),D=C?String(C.getAttribute("data-key")):null;if(!D)return;const G=p.value?.find(_e=>_e.path===D);G&&j(G)},ie=()=>{const V=k.value;return p.value?.filter(C=>V?.has(C.path))||[]},le=V=>{V.preventDefault();const C=V.target?.closest(".file-item-"+S);if(C){const D=String(C.getAttribute("data-key")),G=p.value?.find(_e=>_e.path===D);k.value?.has(D)||(s.clearSelection(),s.select(D)),t.emitter.emit("vf-contextmenu-show",{event:V,items:ie(),target:G})}},te=V=>{V.preventDefault(),t.emitter.emit("vf-contextmenu-show",{event:V,items:ie()})},ae=V=>{if(V.altKey||V.ctrlKey||V.metaKey)return V.preventDefault(),!1;A.value=!0;const C=V.target?.closest(".file-item-"+S);if(B.value=C?String(C.dataset.key):null,V.dataTransfer&&B.value){V.dataTransfer.setDragImage(l.value,0,15),V.dataTransfer.effectAllowed="all",V.dataTransfer.dropEffect="copy";const D=k.value?.has(B.value)?Array.from(k.value):[B.value];V.dataTransfer.setData("items",JSON.stringify(D)),s.setDraggedItem(B.value)}},oe=()=>{B.value=null};return(V,C)=>(e.openBlock(),e.createElementBlock("div",ps,[e.createElementVNode("div",{ref:"customScrollBarContainer",class:e.normalizeClass(["vuefinder__explorer__scrollbar-container",[{"grid-view":e.unref(i).view==="grid"},{"search-active":e.unref(a).hasQuery}]])},[e.createElementVNode("div",hs,null,512)],2),e.unref(i).view==="list"||e.unref(a).hasQuery?(e.openBlock(),e.createElementBlock("div",gs,[e.createElementVNode("div",{onClick:C[0]||(C[0]=D=>e.unref(s).toggleSort("basename")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--name vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(O)("Name"))+" ",1),e.withDirectives(e.createVNode(ue,{direction:e.unref(f).order},null,8,["direction"]),[[e.vShow,e.unref(f).active&&e.unref(f).column==="basename"]])]),e.unref(a).hasQuery?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,onClick:C[1]||(C[1]=D=>e.unref(s).toggleSort("file_size")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--size vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(O)("Size"))+" ",1),e.withDirectives(e.createVNode(ue,{direction:e.unref(f).order},null,8,["direction"]),[[e.vShow,e.unref(f).active&&e.unref(f).column==="file_size"]])])),e.unref(a).hasQuery?(e.openBlock(),e.createElementBlock("div",{key:1,onClick:C[2]||(C[2]=D=>e.unref(s).toggleSort("path")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--path vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(O)("Filepath"))+" ",1),e.withDirectives(e.createVNode(ue,{direction:e.unref(f).order},null,8,["direction"]),[[e.vShow,e.unref(f).active&&e.unref(f).column==="path"]])])):e.createCommentVNode("",!0),e.unref(a).hasQuery?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:2,onClick:C[3]||(C[3]=D=>e.unref(s).toggleSort("last_modified")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--date vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(O)("Date"))+" ",1),e.withDirectives(e.createVNode(ue,{direction:e.unref(f).order},null,8,["direction"]),[[e.vShow,e.unref(f).active&&e.unref(f).column==="last_modified"]])]))])):e.createCommentVNode("",!0),e.createElementVNode("div",{ref_key:"scrollContainer",ref:d,class:e.normalizeClass(["vuefinder__explorer__selector-area","scroller-"+e.unref(S)]),onScroll:C[5]||(C[5]=(...D)=>e.unref(U)&&e.unref(U)(...D))},[e.unref(u).get("loadingIndicator")==="linear"&&e.unref(b)?(e.openBlock(),e.createElementBlock("div",ks)):e.createCommentVNode("",!0),e.createElementVNode("div",{ref_key:"scrollContent",ref:c,class:"scrollContent min-h-full",style:e.normalizeStyle({height:`${e.unref(L)}px`,position:"relative",width:"100%"}),onContextmenu:e.withModifiers(te,["self","prevent"]),onClick:C[4]||(C[4]=e.withModifiers((...D)=>e.unref(M)&&e.unref(M)(...D),["self"]))},[e.createElementVNode("div",{ref_key:"dragImage",ref:l,class:"vuefinder__explorer__drag-item"},[e.createVNode(Ka,{count:B.value&&e.unref(k)?.has(B.value)?e.unref(k)?.size:1},null,8,["count"])],512),e.unref(a).query.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(e.unref(z),D=>(e.openBlock(),e.createBlock(ge,{key:D,"row-index":D,"row-height":P.value,view:"list",items:y(D)?[y(D)]:[],compact:e.unref(i).compactListView,"show-path":!0,"is-dragging-item":I,"is-selected":v,"drag-n-drop-events":G=>e.unref(n).events(G),explorerId:e.unref(S),onClick:N,onDblclick:W,onContextmenu:le,onDragstart:ae,onDragend:oe},null,8,["row-index","row-height","items","compact","drag-n-drop-events","explorerId"]))),128)):e.unref(i).view==="grid"?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(e.unref(z),D=>(e.openBlock(),e.createBlock(ge,{key:D,"row-index":D,"row-height":P.value,view:"grid","items-per-row":e.unref(H),items:e.unref(T)(e.unref(p),D),"show-thumbnails":e.unref(i).showThumbnails,"is-dragging-item":I,"is-selected":v,"drag-n-drop-events":G=>e.unref(n).events(G),explorerId:e.unref(S),onClick:N,onDblclick:W,onContextmenu:le,onDragstart:ae,onDragend:oe},null,8,["row-index","row-height","items-per-row","items","show-thumbnails","drag-n-drop-events","explorerId"]))),128)):(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:2},e.renderList(e.unref(z),D=>(e.openBlock(),e.createBlock(ge,{key:D,"row-index":D,"row-height":P.value,view:"list",items:y(D)?[y(D)]:[],compact:e.unref(i).compactListView,"is-dragging-item":I,"is-selected":v,"drag-n-drop-events":G=>e.unref(n).events(G),explorerId:e.unref(S),onClick:N,onDblclick:W,onContextmenu:le,onDragstart:ae,onDragend:oe},null,8,["row-index","row-height","items","compact","drag-n-drop-events","explorerId"]))),128))],36)],34),e.createVNode(_s)]))}}),bs=["href","download"],ys=["onClick"],Es=e.defineComponent({__name:"ContextMenu",setup(o){const t=e.inject("ServiceContainer"),n=t.search,l=x.useStore(n.state),r=e.ref(null),d=e.ref([]),c=e.reactive({active:!1,items:[],positions:{left:"0px",top:"0px"}});t.emitter.on("vf-context-selected",i=>{d.value=i});const m=i=>i.link(t,d.value),s=i=>{t.emitter.emit("vf-contextmenu-hide"),i.action(t,d.value)};t.emitter.on("vf-contextmenu-show",({event:i,items:a,target:f=null})=>{if(c.items=t.contextMenuItems.filter(p=>p.show(t,{searchQuery:l.query,items:a,target:f})),l.query)if(f)t.emitter.emit("vf-context-selected",[f]);else return;else!f&&!l.query?t.emitter.emit("vf-context-selected",[]):a.length>1&&a.some(p=>p.path===f.path)?t.emitter.emit("vf-context-selected",a):t.emitter.emit("vf-context-selected",[f]);u(i)}),t.emitter.on("vf-contextmenu-hide",()=>{c.active=!1});const u=i=>{const a=t.root,f=t.root.getBoundingClientRect(),p=a.getBoundingClientRect();let k=i.clientX-f.left,b=i.clientY-f.top;c.active=!0,e.nextTick(()=>{const v=r.value?.getBoundingClientRect();let h=v?.height??0,g=v?.width??0;k=p.right-i.pageX+window.scrollX<g?k-g:k,b=p.bottom-i.pageY+window.scrollY<h?b-h:b,c.positions={left:String(k)+"px",top:String(b)+"px"}})};return(i,a)=>e.withDirectives((e.openBlock(),e.createElementBlock("ul",{ref_key:"contextmenu",ref:r,class:e.normalizeClass([c.active?"vuefinder__context-menu--active":"vuefinder__context-menu--inactive","vuefinder__context-menu"]),style:e.normalizeStyle(c.positions)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.items,f=>(e.openBlock(),e.createElementBlock("li",{class:"vuefinder__context-menu__item",key:f.title},[f.link?(e.openBlock(),e.createElementBlock("a",{key:0,class:"vuefinder__context-menu__link",target:"_blank",href:m(f),download:m(f),onClick:a[0]||(a[0]=p=>e.unref(t).emitter.emit("vf-contextmenu-hide"))},[e.createElementVNode("span",null,e.toDisplayString(f.title(e.unref(t).i18n)),1)],8,bs)):(e.openBlock(),e.createElementBlock("div",{key:1,class:"vuefinder__context-menu__action",onClick:p=>s(f)},[e.createElementVNode("span",null,e.toDisplayString(f.title(e.unref(t).i18n)),1)],8,ys))]))),128))],6)),[[e.vShow,c.active]])}}),Vs={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"h-5 w-5",viewBox:"0 0 24 24"};function Ss(o,t){return e.openBlock(),e.createElementBlock("svg",Vs,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"},null,-1)])])}const Ye={render:Ss},Ns={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"2",class:"h-5 w-5 stroke-slate-500 cursor-pointer",viewBox:"0 0 24 24"};function Bs(o,t){return e.openBlock(),e.createElementBlock("svg",Ns,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0"},null,-1)])])}const Cs={render:Bs},xs={class:"vuefinder__status-bar__wrapper"},$s={class:"vuefinder__status-bar__storage"},Ds=["title"],Ts={class:"vuefinder__status-bar__storage-icon"},Ms=["value"],As=["value"],Fs={class:"vuefinder__status-bar__info"},Is={key:0},Ls={class:"vuefinder__status-bar__selected-count"},Rs={class:"vuefinder__status-bar__actions"},zs=["title"],Hs=e.defineComponent({__name:"Statusbar",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,l=t.fs,r=t.search,d=x.useStore(r.state),c=x.useStore(l.sortedFiles),m=x.useStore(l.path),s=x.useStore(l.selectedCount),u=x.useStore(l.storages),i=x.useStore(l.selectedItems),a=x.useStore(l.path),f=p=>{const k=p.target.value;t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",storage:k}})};return(p,k)=>(e.openBlock(),e.createElementBlock("div",xs,[e.createElementVNode("div",$s,[e.createElementVNode("div",{class:"vuefinder__status-bar__storage-container",title:e.unref(n)("Storage")},[e.createElementVNode("div",Ts,[e.createVNode(e.unref(Ye))]),e.createElementVNode("select",{name:"vuefinder-media-selector",value:e.unref(m)?.storage,onChange:f,class:"vuefinder__status-bar__storage-select",tabindex:"-1"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(u),b=>(e.openBlock(),e.createElementBlock("option",{value:b,key:b},e.toDisplayString(b),9,As))),128))],40,Ms)],8,Ds),e.createElementVNode("div",Fs,[e.unref(d).hasQuery?(e.openBlock(),e.createElementBlock("span",Is,e.toDisplayString(e.unref(c).value.length)+" items found. ",1)):e.createCommentVNode("",!0),e.createElementVNode("span",Ls,e.toDisplayString(e.unref(s)>0?`${e.unref(s)} item(s) selected.`:""),1)])]),e.createElementVNode("div",Rs,[e.renderSlot(p.$slots,"actions",{path:e.unref(a).path,count:e.unref(s)||0,selected:e.unref(i)||[]}),e.createElementVNode("span",{class:"vuefinder__status-bar__about",title:e.unref(n)("About"),onClick:k[0]||(k[0]=b=>e.unref(t).modal.open(ye))},[e.createVNode(e.unref(Cs))],8,zs)])]))}}),Ps={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"text-neutral-500 fill-sky-500 stroke-gray-100/50 dark:stroke-slate-700/50 dark:fill-slate-500",viewBox:"0 0 24 24"};function qs(o,t){return e.openBlock(),e.createElementBlock("svg",Ps,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 9.776q.168-.026.344-.026h15.812q.176 0 .344.026m-16.5 0a2.25 2.25 0 0 0-1.883 2.542l.857 6a2.25 2.25 0 0 0 2.227 1.932H19.05a2.25 2.25 0 0 0 2.227-1.932l.857-6a2.25 2.25 0 0 0-1.883-2.542m-16.5 0V6A2.25 2.25 0 0 1 6 3.75h3.879a1.5 1.5 0 0 1 1.06.44l2.122 2.12a1.5 1.5 0 0 0 1.06.44H18A2.25 2.25 0 0 1 20.25 9v.776"},null,-1)])])}const We={render:qs},Us={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 24 24"};function js(o,t){return e.openBlock(),e.createElementBlock("svg",Us,[...t[0]||(t[0]=[e.createElementVNode("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2m3.6 5.2a1 1 0 0 0-1.4.2L12 10.333 9.8 7.4a1 1 0 1 0-1.6 1.2l2.55 3.4-2.55 3.4a1 1 0 1 0 1.6 1.2l2.2-2.933 2.2 2.933a1 1 0 0 0 1.6-1.2L13.25 12l2.55-3.4a1 1 0 0 0-.2-1.4"},null,-1)])])}const Os={render:js},Ks={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"};function Gs(o,t){return e.openBlock(),e.createElementBlock("svg",Ks,[...t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M15 12H9M12 9v6"},null,-1)])])}const Qe={render:Gs},Ys={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"};function Ws(o,t){return e.openBlock(),e.createElementBlock("svg",Ys,[...t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M9 12h6"},null,-1)])])}const Xe={render:Ws};function Je(o,t){const n=o.findIndex(l=>l.path===t.path);n>-1?o[n]=t:o.push(t)}const Qs={class:"vuefinder__folder-loader-indicator"},Xs={key:1,class:"vuefinder__folder-loader-indicator--icon"},Ze=e.defineComponent({__name:"FolderLoaderIndicator",props:e.mergeModels({storage:{},path:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(o){const t=o,n=e.inject("ServiceContainer"),{t:l}=n.i18n,r=e.useModel(o,"modelValue"),d=e.ref(!1);e.watch(()=>r.value,()=>c()?.folders.length||m());function c(){return n.treeViewData.find(s=>s.path===t.path)}const m=()=>{d.value=!0,n.requester.send({url:"",method:"get",params:{q:"subfolders",storage:t.storage,path:t.path}}).then(s=>{Je(n.treeViewData,{path:t.path,type:"dir",...s})}).catch(s=>{}).finally(()=>{d.value=!1})};return(s,u)=>(e.openBlock(),e.createElementBlock("div",Qs,[d.value?(e.openBlock(),e.createBlock(e.unref(Ce),{key:0,class:"vuefinder__folder-loader-indicator--loading"})):(e.openBlock(),e.createElementBlock("div",Xs,[r.value&&c()?.folders.length?(e.openBlock(),e.createBlock(e.unref(Xe),{key:0,class:"vuefinder__folder-loader-indicator--minus"})):e.createCommentVNode("",!0),r.value?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(Qe),{key:1,class:"vuefinder__folder-loader-indicator--plus"}))]))]))}}),Js=["onClick"],Zs=["title","onDblclick","onClick"],ei={class:"vuefinder__treesubfolderlist__item-icon"},ti={class:"vuefinder__treesubfolderlist__subfolder"},ni=e.defineComponent({__name:"TreeSubfolderList",props:{storage:{},path:{}},setup(o){const t=e.inject("ServiceContainer"),n=t.fs,l=de(t,["bg-blue-200","dark:bg-slate-600"]),r=e.ref({}),d=x.useStore(n.path),c=o,m=e.ref(null);e.onMounted(()=>{c.path===c.storage+"://"&&m.value&&be.OverlayScrollbars(m.value,{scrollbars:{theme:"vf-theme-dark dark:vf-theme-light"}})});const s=e.computed(()=>t.treeViewData.find(u=>u.path===c.path)?.folders||[]);return(u,i)=>{const a=e.resolveComponent("TreeSubfolderList",!0);return e.openBlock(),e.createElementBlock("ul",{ref_key:"parentSubfolderList",ref:m,class:"vuefinder__treesubfolderlist__container"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,f=>(e.openBlock(),e.createElementBlock("li",{key:f.path,class:"vuefinder__treesubfolderlist__item"},[e.createElementVNode("div",e.mergeProps(e.toHandlers(e.unref(l).events({...f,type:"dir"}),!0),{class:"vuefinder__treesubfolderlist__item-content"}),[e.createElementVNode("div",{class:"vuefinder__treesubfolderlist__item-toggle",onClick:p=>r.value[f.path]=!r.value[f.path]},[e.createVNode(Ze,{storage:o.storage,path:f.path,modelValue:r.value[f.path],"onUpdate:modelValue":p=>r.value[f.path]=p},null,8,["storage","path","modelValue","onUpdate:modelValue"])],8,Js),e.createElementVNode("div",{class:"vuefinder__treesubfolderlist__item-link",title:f.path,onDblclick:p=>r.value[f.path]=!r.value[f.path],onClick:p=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",storage:c.storage,path:f.path}})},[e.createElementVNode("div",ei,[e.unref(d)?.path===f.path?(e.openBlock(),e.createBlock(e.unref(We),{key:0})):(e.openBlock(),e.createBlock(e.unref(ve),{key:1}))]),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__treesubfolderlist__item-text",{"vuefinder__treesubfolderlist__item-text--active":e.unref(d)?.path===f.path}])},e.toDisplayString(f.basename),3)],40,Zs)],16),e.createElementVNode("div",ti,[e.withDirectives(e.createVNode(a,{storage:c.storage,path:f.path},null,8,["storage","path"]),[[e.vShow,r.value[f.path]]])])]))),128))],512)}}}),oi=e.defineComponent({__name:"TreeStorageItem",props:{storage:{}},setup(o){const t=e.inject("ServiceContainer"),n=t.fs,l=e.ref(!1),r=o,d=de(t,["bg-blue-200","dark:bg-slate-600"]),c=x.useStore(n.path),m=e.computed(()=>r.storage===c.value?.storage),s={storage:r.storage,path:r.storage+"://",type:"dir",basename:r.storage,extension:"",file_size:null,last_modified:null,mime_type:null,visibility:"public"};function u(i){i===c.value?.storage?l.value=!l.value:(t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",storage:i}}))}return(i,a)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",{onClick:a[2]||(a[2]=f=>u(o.storage)),class:"vuefinder__treestorageitem__header"},[e.createElementVNode("div",e.mergeProps(e.toHandlers(e.unref(d).events(s),!0),{class:["vuefinder__treestorageitem__info",m.value?"vuefinder__treestorageitem__info--active":""]}),[e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__treestorageitem__icon",m.value?"vuefinder__treestorageitem__icon--active":""])},[e.createVNode(e.unref(Ye))],2),e.createElementVNode("div",null,e.toDisplayString(o.storage),1)],16),e.createElementVNode("div",{class:"vuefinder__treestorageitem__loader",onClick:a[1]||(a[1]=e.withModifiers(f=>l.value=!l.value,["stop"]))},[e.createVNode(Ze,{storage:o.storage,path:o.storage+"://",modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=f=>l.value=f)},null,8,["storage","path","modelValue"])])]),e.withDirectives(e.createVNode(ni,{storage:o.storage,path:o.storage+"://",class:"vuefinder__treestorageitem__subfolder"},null,8,["storage","path"]),[[e.vShow,l.value]])],64))}}),ri={class:"vuefinder__folder-indicator"},li={class:"vuefinder__folder-indicator--icon"},ai=e.defineComponent({__name:"FolderIndicator",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(o){const t=e.useModel(o,"modelValue");return(n,l)=>(e.openBlock(),e.createElementBlock("div",ri,[e.createElementVNode("div",li,[t.value?(e.openBlock(),e.createBlock(e.unref(Xe),{key:0,class:"vuefinder__folder-indicator--minus"})):e.createCommentVNode("",!0),t.value?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(Qe),{key:1,class:"vuefinder__folder-indicator--plus"}))])]))}}),si={class:"vuefinder__treeview__header"},ii={class:"vuefinder__treeview__pinned-label"},ci={class:"vuefinder__treeview__pin-text text-nowrap"},di={key:0,class:"vuefinder__treeview__pinned-list"},ui=["onClick"],mi=["title"],fi=["onClick"],vi={key:0},_i={class:"vuefinder__treeview__no-pinned"},pi=e.defineComponent({__name:"TreeView",setup(o){const t=e.inject("ServiceContainer"),{t:n}=t.i18n,{getStore:l,setStore:r}=t.storage,d=t.fs,c=t.config,m=x.useStore(c.state),s=x.useStore(d.sortedFiles),u=x.useStore(d.path),i=de(t,["bg-blue-200","dark:bg-slate-600"]),a=e.ref(190),f=e.ref(l("pinned-folders-opened",!0));e.watch(f,v=>r("pinned-folders-opened",v));const p=v=>{c.set("pinnedFolders",c.get("pinnedFolders").filter(h=>h.path!==v.path))},k=v=>{const h=v.clientX,g=v.target.parentElement;if(!g)return;const w=g.getBoundingClientRect().width;g.classList.remove("transition-[width]"),g.classList.add("transition-none");const $=O=>{a.value=w+O.clientX-h,a.value<50&&(a.value=0,c.set("showTreeView",!1)),a.value>50&&c.set("showTreeView",!0)},P=()=>{const O=g.getBoundingClientRect();a.value=O.width,g.classList.add("transition-[width]"),g.classList.remove("transition-none"),window.removeEventListener("mousemove",$),window.removeEventListener("mouseup",P)};window.addEventListener("mousemove",$),window.addEventListener("mouseup",P)},b=e.ref(null);return e.onMounted(()=>{b.value&&be.OverlayScrollbars(b.value,{overflow:{x:"hidden"},scrollbars:{theme:"vf-theme-dark dark:vf-theme-light"}})}),e.watch(s,v=>{const h=v.filter(g=>g.type==="dir");Je(t.treeViewData,{path:u.value?.path||"",folders:h.map(g=>({storage:g.storage,path:g.path,basename:g.basename,type:"dir"}))})}),(v,h)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",{onClick:h[0]||(h[0]=g=>e.unref(c).toggle("showTreeView")),class:e.normalizeClass(["vuefinder__treeview__overlay",e.unref(m).showTreeView?"vuefinder__treeview__backdrop":"hidden"])},null,2),e.createElementVNode("div",{style:e.normalizeStyle(e.unref(m).showTreeView?"min-width:100px;max-width:75%; width: "+a.value+"px":"width: 0"),class:"vuefinder__treeview__container"},[e.createElementVNode("div",{ref_key:"treeViewScrollElement",ref:b,class:"vuefinder__treeview__scroll"},[e.createElementVNode("div",si,[e.createElementVNode("div",{onClick:h[2]||(h[2]=g=>f.value=!f.value),class:"vuefinder__treeview__pinned-toggle"},[e.createElementVNode("div",ii,[e.createVNode(e.unref(Ge),{class:"vuefinder__treeview__pin-icon"}),e.createElementVNode("div",ci,e.toDisplayString(e.unref(n)("Pinned Folders")),1)]),e.createVNode(ai,{modelValue:f.value,"onUpdate:modelValue":h[1]||(h[1]=g=>f.value=g)},null,8,["modelValue"])]),f.value?(e.openBlock(),e.createElementBlock("ul",di,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(m).pinnedFolders,g=>(e.openBlock(),e.createElementBlock("li",{key:g.path,class:"vuefinder__treeview__pinned-item"},[e.createElementVNode("div",e.mergeProps(e.toHandlers(e.unref(i).events(g),!0),{class:"vuefinder__treeview__pinned-folder",onClick:w=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",storage:g.storage,path:g.path}})}),[e.unref(u)?.path!==g.path?(e.openBlock(),e.createBlock(e.unref(ve),{key:0,class:"vuefinder__treeview__folder-icon"})):e.createCommentVNode("",!0),e.unref(u)?.path===g.path?(e.openBlock(),e.createBlock(e.unref(We),{key:1,class:"vuefinder__treeview__open-folder-icon"})):e.createCommentVNode("",!0),e.createElementVNode("div",{title:g.path,class:e.normalizeClass(["vuefinder__treeview__folder-name",{"vuefinder__treeview__folder-name--active":e.unref(u)?.path===g.path}])},e.toDisplayString(g.basename),11,mi)],16,ui),e.createElementVNode("div",{class:"vuefinder__treeview__remove-folder",onClick:w=>p(g)},[e.createVNode(e.unref(Os),{class:"vuefinder__treeview__remove-icon"})],8,fi)]))),128)),e.unref(m).pinnedFolders.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("li",vi,[e.createElementVNode("div",_i,e.toDisplayString(e.unref(n)("No folders pinned")),1)]))])):e.createCommentVNode("",!0)]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(d).storages.get(),g=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__treeview__storage",key:g},[e.createVNode(oi,{storage:g},null,8,["storage"])]))),128))],512),e.createElementVNode("div",{onMousedown:k,class:"vuefinder__treeview__resize-handle"},null,32)],4)],64))}}),J={newfolder:"newfolder",selectAll:"selectAll",pinFolder:"pinFolder",unpinFolder:"unpinFolder",delete:"delete",refresh:"refresh",preview:"preview",open:"open",openDir:"openDir",download:"download",download_archive:"download_archive",archive:"archive",unarchive:"unarchive",rename:"rename",move:"move"};function hi(o){return o.items.length>1&&o.items.some(t=>t.path===o.target?.path)?"many":o.target?"one":"none"}function Q(o){const t=Object.assign({needsSearchQuery:!1},o);return(n,l)=>!(t.needsSearchQuery!==!!l.searchQuery||t.target!==void 0&&t.target!==hi(l)||t.targetType!==void 0&&t.targetType!==l.target?.type||t.mimeType!==void 0&&t.mimeType!==l.target?.mime_type||t.feature!==void 0&&!n.features.includes(t.feature))}function ke(...o){return(t,n)=>o.some(l=>l(t,n))}function ce(...o){return(t,n)=>o.every(l=>l(t,n))}const et=[{id:J.openDir,title:({t:o})=>o("Open containing folder"),action:(o,t)=>{o.emitter.emit("vf-search-exit"),o.emitter.emit("vf-fetch",{params:{q:"index",storage:t[0]?.storage,path:t[0]?.path}})},show:Q({target:"one",needsSearchQuery:!0})},{id:J.refresh,title:({t:o})=>o("Refresh"),action:o=>{const t=o.fs;o.emitter.emit("vf-fetch",{params:{q:"index",storage:t.path.get().storage,path:t.path.get().path}})},show:ke(Q({target:"none"}),Q({target:"many"}))},{id:J.selectAll,title:({t:o})=>o("Select All"),action:o=>{o.fs.selectAll()},show:Q({target:"none"})},{id:J.newfolder,title:({t:o})=>o("New Folder"),action:o=>o.modal.open(Se),show:Q({target:"none",feature:R.NEW_FOLDER})},{id:J.open,title:({t:o})=>o("Open"),action:(o,t)=>{o.emitter.emit("vf-search-exit"),t[0]&&o.emitter.emit("vf-fetch",{params:{q:"index",storage:t[0].storage,path:t[0].path}})},show:Q({target:"one",targetType:"dir"})},{id:J.pinFolder,title:({t:o})=>o("Pin Folder"),action:(o,t)=>{const n=o.config,l=n.get("pinnedFolders"),r=l.concat(t.filter(d=>l.findIndex(c=>c.path===d.path)===-1));n.set("pinnedFolders",r)},show:ce(Q({target:"one",targetType:"dir"}),(o,t)=>o.config.get("pinnedFolders").findIndex(r=>r.path===t.target?.path)===-1)},{id:J.unpinFolder,title:({t:o})=>o("Unpin Folder"),action:(o,t)=>{const n=o.config,l=n.get("pinnedFolders");n.set("pinnedFolders",l.filter(r=>!t.find(d=>d.path===r.path)))},show:ce(Q({target:"one",targetType:"dir"}),(o,t)=>o.config.get("pinnedFolders").findIndex(r=>r.path===t.target?.path)!==-1)},{id:J.preview,title:({t:o})=>o("Preview"),action:(o,t)=>o.modal.open(Ee,{storage:t[0]?.storage,item:t[0]}),show:ce(Q({target:"one",feature:R.PREVIEW}),(o,t)=>t.target?.type!=="dir")},{id:J.download,link:(o,t)=>o.requester.getDownloadUrl(t[0]?.storage,t[0]),title:({t:o})=>o("Download"),action:()=>{},show:ce(Q({target:"one",feature:R.DOWNLOAD}),(o,t)=>t.target?.type!=="dir")},{id:J.rename,title:({t:o})=>o("Rename"),action:(o,t)=>o.modal.open(fe,{items:t}),show:Q({target:"one",feature:R.RENAME})},{id:J.archive,title:({t:o})=>o("Archive"),action:(o,t)=>o.modal.open(Be,{items:t}),show:ke(Q({target:"many",feature:R.ARCHIVE}),ce(Q({target:"one",feature:R.ARCHIVE}),(o,t)=>t.target?.mime_type!=="application/zip"))},{id:J.unarchive,title:({t:o})=>o("Unarchive"),action:(o,t)=>o.modal.open(Ne,{items:t}),show:Q({target:"one",feature:R.UNARCHIVE,mimeType:"application/zip"})},{id:J.delete,title:({t:o})=>o("Delete"),action:(o,t)=>{o.modal.open(me,{items:t})},show:ke(Q({feature:R.DELETE,target:"one"}),Q({feature:R.DELETE,target:"many"}))}],gi={class:"vuefinder",ref:"root",tabindex:"0"},ki={class:"vuefinder__main__content"},tt=e.defineComponent({__name:"VueFinder",props:{id:{default:"vf"},request:{},persist:{type:Boolean,default:!1},path:{default:""},features:{type:[Boolean,Array],default:!0},debug:{type:Boolean,default:!1},theme:{default:"system"},locale:{default:void 0},maxHeight:{default:"600px"},maxFileSize:{default:"10mb"},fullScreen:{type:Boolean,default:!1},showTreeView:{type:Boolean,default:!1},pinnedFolders:{default:()=>[]},showThumbnails:{type:Boolean,default:!0},loadingIndicator:{default:"linear"},contextMenuItems:{default:()=>et},onError:{},onSelect:{},icon:{}},emits:["select","path-update"],setup(o,{emit:t}){const n=t,l=o,r=Et(l,e.inject("VueFinderOptions"));e.provide("ServiceContainer",r);const d=r.config,c=r.fs,m=x.useStore(d.state);dr(r);let s=null;r.emitter.on("vf-fetch-abort",()=>{s&&s.abort(),c.setLoading(!1)}),r.emitter.on("vf-fetch",({params:i,body:a=null,onSuccess:f=null,onError:p=null,noCloseModal:k=!1})=>{["index","search"].includes(i.q)&&(s&&s.abort(),c.setLoading(!0)),s=new AbortController;const b=s.signal;r.requester.send({url:"",method:i.m||"get",params:i,body:a,abortSignal:b}).then(v=>{c.setPath(v.dirname),d.get("persist")&&d.set("path",v.dirname),k||r.modal.close(),c.setFiles(v.files),c.clearSelection(),c.setSelectedCount(0),c.setStorages(v.storages),f&&f(v)}).catch(v=>{console.error(v),p?p(v):v&&typeof v=="object"&&"message"in v&&r.emitter.emit("vf-toast-push",{label:v.message,type:"error"})}).finally(()=>{["index","search"].includes(i.q)&&c.setLoading(!1)})});function u(i){let a={};i&&i.includes("://")&&(a={storage:i.split("://")[0],path:i}),r.emitter.emit("vf-fetch",{params:{q:"index",storage:c.path.get().storage,...a},onError:l.onError??(f=>{f&&typeof f=="object"&&"message"in f&&r.emitter.emit("vf-toast-push",{label:f.message,type:"error"})})})}return e.onMounted(()=>{e.watch(()=>l.path,a=>{u(a)});const i=d.get("persist")?d.get("path"):l.path;c.setPath(i),u(i),c.path.listen(a=>{n("path-update",a)}),c.selectedItems.listen(a=>{n("select",a)})}),(i,a)=>(e.openBlock(),e.createElementBlock("div",gi,[e.createElementVNode("div",{class:e.normalizeClass(e.unref(r).theme.actualValue)},[e.createElementVNode("div",{class:e.normalizeClass([e.unref(m).fullScreen?"vuefinder__main__fixed":"vuefinder__main__relative","vuefinder__main__container"]),style:e.normalizeStyle(e.unref(m).fullScreen?"":"max-height: "+o.maxHeight),onMousedown:a[0]||(a[0]=f=>e.unref(r).emitter.emit("vf-contextmenu-hide")),onTouchstart:a[1]||(a[1]=f=>e.unref(r).emitter.emit("vf-contextmenu-hide"))},[e.createVNode(ml),e.createVNode(ql),e.createVNode(Ta),e.createElementVNode("div",ki,[e.createVNode(pi),e.createVNode(ws)]),e.createVNode(Hs,null,{actions:e.withCtx(f=>[e.renderSlot(i.$slots,"status-bar",e.normalizeProps(e.guardReactiveProps(f)))]),_:3})],38),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.createVNode(e.Transition,{name:"fade"},{default:e.withCtx(()=>[e.unref(r).modal.visible?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(r).modal.type),{key:0})):e.createCommentVNode("",!0)]),_:1})])),e.createVNode(Es)],2)],512))}}),nt={install(o,t={}){t.i18n=t.i18n??{};let[n]=Object.keys(t.i18n);t.locale=t.locale??n??"en",o.provide("VueFinderOptions",t),o.component("VueFinder",tt)}};exports.ContextMenuIds=J;exports.VueFinder=tt;exports.VueFinderPlugin=nt;exports.contextMenuItems=et;exports.default=nt;
