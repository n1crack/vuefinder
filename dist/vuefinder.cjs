"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),rs=require("mitt"),Qt=require("pinia"),ss=require("cropperjs"),ls=require("@uppy/core"),as=require("@uppy/xhr-upload"),is=require("vanilla-lazyload"),vn=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");class cs{config;constructor(t){this.config=Object.assign({baseUrl:"",headers:{},params:{},body:{},xsrfHeaderName:"X-CSRF-Token",fetchParams:{}},t)}customFetch=async(...t)=>{let[o,r]=t;this.config.fetchRequestInterceptor&&(r=this.config.fetchRequestInterceptor(r));let s=await fetch(o,r);return this.config.fetchResponseInterceptor&&(s=await this.config.fetchResponseInterceptor(s)),s};transformRequestParams(t){const o=this.config,r={};vn!=null&&vn!==""&&o.xsrfHeaderName&&(r[o.xsrfHeaderName]=vn);const s=Object.assign({},o.headers,r,t.headers),l=Object.assign({},o.params,t.params),a=o.baseUrl+t.url,u=t.method;let c;if(u!=="get")if(t.body instanceof FormData){const d=t.body;o.body!=null&&Object.entries(this.config.body).forEach(([f,p])=>{d.append(f,String(p))}),c=d}else{const d=Object.assign({},t.body??{});o.body!=null&&Object.assign(d,this.config.body),c=d}const i={url:a,method:u,headers:s,params:l,body:c};if(o.transformRequest!=null){const d=o.transformRequest({url:a,method:u,headers:s,params:l,body:c??null});d.url!=null&&(i.url=d.url),d.method!=null&&(i.method=d.method),d.params!=null&&(i.params=d.params),d.headers!=null&&(i.headers=d.headers),d.body!=null&&(i.body=d.body)}return i}getDownloadUrl(t,o){if(o.url!=null)return o.url;const r=this.transformRequestParams({url:"",method:"get",params:{q:"download",storage:t,path:o.path}});return r.url+"?"+new URLSearchParams(r.params).toString()}getPreviewUrl(t,o){if(o.url!=null)return o.url;const r=this.transformRequestParams({url:"",method:"get",params:{q:"preview",storage:t,path:o.path}});return r.url+"?"+new URLSearchParams(r.params).toString()}async send(t){const o=this.transformRequestParams(t),r=t.responseType||"json",s={method:t.method,headers:o.headers,signal:t.abortSignal},l=o.url+"?"+new URLSearchParams(o.params);if(o.method!=="get"&&o.body!=null){let u;o.body instanceof FormData?u=t.body:(u=JSON.stringify(o.body),s.headers["Content-Type"]="application/json"),s.body=u}this.config.fetchParams&&Object.assign(s,this.config.fetchParams);const a=await this.customFetch(l,s);if(a.ok)return await a[r]();throw await a.json()}}function ds(n){const t={baseUrl:"",headers:{},params:{},body:{},xsrfHeaderName:"X-CSRF-Token",fetchParams:{}};return typeof n=="string"?Object.assign(t,{baseUrl:n}):Object.assign(t,n),new cs(t)}function us(n){let t=localStorage.getItem(n+"_storage");const o=e.reactive(JSON.parse(t??"{}"));e.watch(o,r);function r(){Object.keys(o).length?localStorage.setItem(n+"_storage",JSON.stringify(o)):localStorage.removeItem(n+"_storage")}function s(c,i){o[c]=i}function l(c){delete o[c]}function a(){Object.keys(o).forEach(c=>l(c))}return{getStore:(c,i=null)=>c in o?o[c]:i,setStore:s,removeStore:l,clearStore:a}}async function fs(n,t){const o=t[n];return typeof o=="function"?(await o()).default:o}function ms(n,t,o,r){const{getStore:s,setStore:l}=n,a=e.ref({}),u=e.ref(s("locale",t)),c=(f,p=t)=>{fs(f,r).then(_=>{a.value=_,l("locale",f),u.value=f,l("translations",_),Object.values(r).length>1&&(o.emit("vf-toast-push",{label:"The language is set to "+f}),o.emit("vf-language-saved"))}).catch(()=>{p?(o.emit("vf-toast-push",{label:"The selected locale is not yet supported!",type:"error"}),c(p,null)):o.emit("vf-toast-push",{label:"Locale cannot be loaded!",type:"error"})})};e.watch(u,f=>{c(f)}),!s("locale")&&!Object.keys(r).length?c(t):a.value=s("translations");const i=(f,...p)=>p.length?i(f=f.replace("%s",String(p.shift())),...p):f;function d(f,...p){return a.value&&Object.prototype.hasOwnProperty.call(a.value,f)?i(a.value[f]||f,...p):i(f,...p)}return e.reactive({t:d,locale:u})}const Z={EDIT:"edit",NEW_FILE:"newfile",NEW_FOLDER:"newfolder",PREVIEW:"preview",ARCHIVE:"archive",UNARCHIVE:"unarchive",SEARCH:"search",RENAME:"rename",UPLOAD:"upload",DELETE:"delete",FULL_SCREEN:"fullscreen",DOWNLOAD:"download",LANGUAGE:"language"},vs=Object.values(Z),ps="3.0.0-dev";function Ro(n,t,o,r,s){return t=Math,o=t.log,r=1024,s=o(n)/o(r)|0,(n/t.pow(r,s)).toFixed(0)+" "+(s?"KMGTPEZY"[--s]+"iB":"B")}function Ho(n,t,o,r,s){return t=Math,o=t.log,r=1e3,s=o(n)/o(r)|0,(n/t.pow(r,s)).toFixed(0)+" "+(s?"KMGTPEZY"[--s]+"B":"B")}function _s(n){if(typeof n=="number")return n;const t={k:1,m:2,g:3,t:4},r=/(\d+(?:\.\d+)?)\s?(k|m|g|t)?b?/i.exec(n);if(!r)return 0;const s=parseFloat(r[1]||"0"),l=(r[2]||"").toLowerCase(),a=t[l]??0;return Math.round(s*Math.pow(1024,a))}const Ue={SYSTEM:"system",LIGHT:"light",DARK:"dark"};function hs(n,t){const o=e.ref(Ue.SYSTEM),r=e.ref(Ue.LIGHT);o.value=n.getStore("theme",t??Ue.SYSTEM);const s=window.matchMedia("(prefers-color-scheme: dark)"),l=a=>{o.value===Ue.DARK||o.value===Ue.SYSTEM&&a.matches?r.value=Ue.DARK:r.value=Ue.LIGHT};return l(s),s.addEventListener("change",l),{value:o,actualValue:r,set(a){o.value=a,a!==Ue.SYSTEM?n.setStore("theme",a):n.removeStore("theme"),l(s)}}}function gs(){const n=e.shallowRef(null),t=e.ref(!1),o=e.ref();return{visible:t,type:n,data:o,open:(l,a=null)=>{document.querySelector("body").style.overflow="hidden",t.value=!0,n.value=l,o.value=a},close:()=>{document.querySelector("body").style.overflow="",t.value=!1,n.value=null}}}const ao={view:"grid",fullScreen:!1,showTreeView:!1,compactListView:!0,metricUnits:!1,showThumbnails:!0,persist:!1,path:"",loadingIndicator:"circular",maxFileSize:null,pinnedFolders:[],customIcon:void 0,selectButton:!1},ys=n=>Qt.defineStore("config_"+n,()=>{const t=e.reactive(Object.assign({},ao));function o(c={}){Object.assign(t,c)}function r(c){return t[c]}function s(){return t}function l(c,i){typeof c=="object"&&c!==null?Object.assign(t,c):t[c]=i}function a(c){l(c,!t[c])}function u(){o(Object.assign({},ao))}return{...e.toRefs(t),init:o,get:r,set:l,toggle:a,all:s,reset:u}},{persist:!0});function ws(n,t){if(typeof n=="string"&&typeof t=="string")return n.toLowerCase().localeCompare(t.toLowerCase());const o=Number(n)||0,r=Number(t)||0;return o===r?0:o<r?-1:1}const ks=n=>Qt.defineStore("files_"+n,()=>{const t=e.ref(""),o=e.ref([]),r=e.ref([]),s=e.ref({active:!1,column:"",order:""}),l=e.ref(new Set),a=e.ref({type:"copy",path:"",items:new Set}),u=e.ref(null),c=e.computed(()=>{const D=(t.value||"local://").trim(),O=D.indexOf("://"),K=O>=0?D.slice(0,O):"",R=(O>=0?D.slice(O+3):D).split("/").filter(Boolean);let B="";const h=R.map(b=>(B=B?`${B}/${b}`:b,{basename:b,name:b,path:K?`${K}://${B}`:B,type:"dir"}));return{storage:K,breadcrumb:h,path:D}}),i=e.computed(()=>{const{active:D,column:O,order:K}=s.value;if(!D||!O)return r.value;const k=K==="asc"?1:-1;return r.value.slice().sort((R,B)=>ws(R[O],B[O])*k)}),d=D=>{t.value=D};function f(D){r.value=D??[]}function p(D){o.value=D??[]}function _(D,O){s.value.active=!0,s.value.column=D,s.value.order=O}function v(D){s.value.active&&s.value.column===D?(s.value.active=s.value.order==="asc",s.value.column=D,s.value.order="desc"):(s.value.active=!0,s.value.column=D,s.value.order="asc")}function m(){s.value={active:!1,column:"",order:""}}const g=e.computed(()=>{if(l.value.size===0)return[];const D=l.value;return r.value.filter(O=>D.has(O.path))}),x=e.ref(0),H=e.ref(!1);function N(D){l.value.add(D)}function E(D){l.value.delete(D)}function P(D){l.value.has(D)?l.value.delete(D):l.value.add(D)}function L(){l.value=new Set(r.value.map(D=>D.path)),U(l.value.size)}function T(){l.value.clear(),U(0)}function I(D){l.value=new Set(D??[])}function U(D){x.value=D}function S(D){H.value=!!D}function w(){return H.value}function y(D,O){const K=r.value.filter(k=>O.has(k.path));a.value={type:D,path:c.value.path,items:new Set(K)}}function V(D){return a.value.type==="cut"&&Array.from(a.value.items).some(O=>O.path===D)}function $(D){return a.value.type==="copy"&&Array.from(a.value.items).some(O=>O.path===D)}function M(){a.value={type:"copy",path:"",items:new Set}}function j(){return a.value}function F(D){u.value=D}function A(){return u.value}function z(){u.value=null}return{files:r,storages:o,path:c,sort:s,selectedKeys:l,sortedFiles:i,selectedItems:g,selectedCount:x,loading:H,setPath:d,setFiles:f,setStorages:p,setSort:_,setSelectedCount:U,setLoading:S,isLoading:w,toggleSort:v,clearSort:m,select:N,deselect:E,toggleSelect:P,selectAll:L,clearSelection:T,setSelection:I,setClipboard:y,isCut:V,isCopied:$,clearClipboard:M,getClipboard:j,setDraggedItem:F,getDraggedItem:A,clearDraggedItem:z}}),bs=n=>Qt.defineStore("search_"+n,()=>{const t=e.ref(""),o=e.ref(!1),r=e.computed(()=>t.value.length>0);function s(u){t.value=u??""}function l(){o.value=!0}function a(){o.value=!1,t.value=""}return{query:t,searchMode:o,hasQuery:r,setQuery:s,enterSearchMode:l,exitSearchMode:a}}),Es=(n,t)=>{const o=us(n.id),r=rs(),s=hs(o,n.theme),l=t.i18n,a=n.locale??t.locale,u=ys(n.id)(),c=ks(n.id)(),i=bs(n.id)(),d=f=>Array.isArray(f)?f:vs;return e.reactive({id:n.id,config:u,fs:c,search:i,version:ps,root:e.useTemplateRef("root"),debug:n.debug,emitter:r,storage:o,i18n:ms(o,a,r,l),modal:gs(),requester:ds(n.request),features:d(n.features),treeViewData:[],theme:s,filesize:u.metricUnits?Ho:Ro,contextMenuItems:n.contextMenuItems,customIcon:n.icon,selectButton:n.selectButton})},Ss={class:"vuefinder__modal-layout__container"},xs={class:"vuefinder__modal-layout__content"},Vs={class:"vuefinder__modal-layout__footer"},Ae=e.defineComponent({__name:"ModalLayout",setup(n){const t=e.ref(null),o=e.inject("ServiceContainer");return e.onMounted(()=>{const r=document.querySelector(".v-f-modal input");r&&r.focus(),e.nextTick(()=>{if(document.querySelector(".v-f-modal input")&&window.innerWidth<768&&t.value){const s=t.value.getBoundingClientRect().bottom+16;window.scrollTo({top:s,left:0,behavior:"smooth"})}})}),(r,s)=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__modal-layout","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",onKeyup:s[1]||(s[1]=e.withKeys(l=>e.unref(o).modal.close(),["esc"])),tabindex:"0"},[s[2]||(s[2]=e.createElementVNode("div",{class:"vuefinder__modal-layout__overlay"},null,-1)),e.createElementVNode("div",Ss,[e.createElementVNode("div",{class:"vuefinder__modal-layout__wrapper",onMousedown:s[0]||(s[0]=e.withModifiers(l=>e.unref(o).modal.close(),["self"]))},[e.createElementVNode("div",{ref_key:"modalBody",ref:t,class:"vuefinder__modal-layout__body"},[e.createElementVNode("div",xs,[e.renderSlot(r.$slots,"default")]),e.createElementVNode("div",Vs,[e.renderSlot(r.$slots,"buttons")])],512)],32)])],32))}}),Ns={class:"vuefinder__modal-header"},Cs={class:"vuefinder__modal-header__icon-container"},Bs={class:"vuefinder__modal-header__title",id:"modal-title"},ze=e.defineComponent({__name:"ModalHeader",props:{title:{},icon:{}},setup(n){return(t,o)=>(e.openBlock(),e.createElementBlock("div",Ns,[e.createElementVNode("div",Cs,[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.icon),{class:"vuefinder__modal-header__icon"}))]),e.createElementVNode("h3",Bs,e.toDisplayString(n.title),1)]))}}),$s={props:{on:{type:String,required:!0}},setup(n,{emit:t,slots:o}){const r=e.inject("ServiceContainer"),s=e.ref(!1),{t:l}=r.i18n;let a=null;const u=()=>{clearTimeout(a),s.value=!0,a=setTimeout(()=>{s.value=!1},2e3)};return e.onMounted(()=>{r.emitter.on(n.on,u)}),e.onUnmounted(()=>{clearTimeout(a)}),{shown:s,t:l}}},Ds=(n,t)=>{const o=n.__vccOpts||n;for(const[r,s]of t)o[r]=s;return o},Ts={key:1};function Ms(n,t,o,r,s,l){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__action-message",{"vuefinder__action-message--hidden":!r.shown}])},[n.$slots.default?e.renderSlot(n.$slots,"default",{key:0}):(e.openBlock(),e.createElementBlock("span",Ts,e.toDisplayString(r.t("Saved.")),1))],2)}const Je=Ds($s,[["render",Ms]]),As={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",viewBox:"0 0 24 24"};function Is(n,t){return e.openBlock(),e.createElementBlock("svg",As,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87q.11.06.22.127c.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a8 8 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a7 7 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a7 7 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a7 7 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124q.108-.066.22-.128c.332-.183.582-.495.644-.869z"},null,-1),e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0"},null,-1)])])}const Ls={render:Is},Fs={class:"vuefinder__about-modal__content"},Os={class:"vuefinder__about-modal__main"},Rs={class:"vuefinder__about-modal__tabs","aria-label":"Tabs"},Hs=["onClick","aria-current"],zs={key:0,class:"vuefinder__about-modal__tab-content"},Ps={class:"vuefinder__about-modal__description"},Us={href:"https://vuefinder.ozdemir.be",class:"vuefinder__about-modal__link",target:"_blank"},js={href:"https://github.com/n1crack/vuefinder",class:"vuefinder__about-modal__link",target:"_blank"},qs={key:1,class:"vuefinder__about-modal__tab-content"},Ks={class:"vuefinder__about-modal__description"},Gs={class:"vuefinder__about-modal__settings"},Ys={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},Ws={class:"vuefinder__about-modal__setting-input"},Xs={class:"vuefinder__about-modal__setting-label"},Qs={for:"metric_unit",class:"vuefinder__about-modal__label"},Js={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},Zs={class:"vuefinder__about-modal__setting-input"},el={class:"vuefinder__about-modal__setting-label"},tl={for:"large_icons",class:"vuefinder__about-modal__label"},nl={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},ol={class:"vuefinder__about-modal__setting-input"},rl={class:"vuefinder__about-modal__setting-label"},sl={for:"persist_path",class:"vuefinder__about-modal__label"},ll={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},al={class:"vuefinder__about-modal__setting-input"},il={class:"vuefinder__about-modal__setting-label"},cl={for:"show_thumbnails",class:"vuefinder__about-modal__label"},dl={class:"vuefinder__about-modal__setting vuefinder__about-modal__setting--flex"},ul={class:"vuefinder__about-modal__setting-input"},fl={for:"theme",class:"vuefinder__about-modal__label"},ml={class:"vuefinder__about-modal__setting-label"},vl=["label"],pl=["value"],_l={key:0,class:"vuefinder__about-modal__setting"},hl={class:"vuefinder__about-modal__setting-input"},gl={for:"language",class:"vuefinder__about-modal__label"},yl={class:"vuefinder__about-modal__setting-label"},wl=["label"],kl=["value"],bl={key:2,class:"vuefinder__about-modal__tab-content"},El={class:"vuefinder__about-modal__shortcuts"},Sl={class:"vuefinder__about-modal__shortcut"},xl={class:"vuefinder__about-modal__shortcut"},Vl={class:"vuefinder__about-modal__shortcut"},Nl={class:"vuefinder__about-modal__shortcut"},Cl={class:"vuefinder__about-modal__shortcut"},Bl={class:"vuefinder__about-modal__shortcut"},$l={class:"vuefinder__about-modal__shortcut"},Dl={class:"vuefinder__about-modal__shortcut"},Tl={class:"vuefinder__about-modal__shortcut"},Ml={class:"vuefinder__about-modal__shortcut"},Al={key:3,class:"vuefinder__about-modal__tab-content"},Il={class:"vuefinder__about-modal__description"},zo=e.defineComponent({__name:"ModalAbout",setup(n){const t=e.inject("ServiceContainer"),o=t.config,{clearStore:r}=t.storage,{t:s}=t.i18n,l={ABOUT:"about",SETTINGS:"settings",SHORTCUTS:"shortcuts",RESET:"reset"},a=e.computed(()=>[{name:s("About"),key:l.ABOUT,current:!1},{name:s("Settings"),key:l.SETTINGS,current:!1},{name:s("Shortcuts"),key:l.SHORTCUTS,current:!1},{name:s("Reset"),key:l.RESET,current:!1}]),u=e.ref("about"),c=async()=>{o.reset(),r(),location.reload()},i=H=>{t.theme.set(H),t.emitter.emit("vf-theme-saved")},d=()=>{o.toggle("metricUnits"),t.filesize=o.metricUnits?Ho:Ro,t.emitter.emit("vf-metric-units-saved")},f=()=>{o.toggle("compactListView"),t.emitter.emit("vf-compact-view-saved")},p=()=>{o.toggle("showThumbnails"),t.emitter.emit("vf-show-thumbnails-saved")},_=()=>{o.toggle("persist"),t.emitter.emit("vf-persist-path-saved")},{i18n:v}=e.inject("VueFinderOptions"),g=Object.fromEntries(Object.entries({ar:"Arabic (العربيّة)",en:"English",fr:"French (Français)",de:"German (Deutsch)",fa:"Persian (فارسی)",he:"Hebrew (עִברִית)",hi:"Hindi (हिंदी)",pl:"Polish (Polski)",ru:"Russian (Pусский)",sv:"Swedish (Svenska)",tr:"Turkish (Türkçe)",nl:"Dutch (Nederlands)",zhCN:"Simplified Chinese (简体中文)",zhTW:"Traditional Chinese (繁體中文)"}).filter(([H])=>Object.keys(v).includes(H))),x=e.computed(()=>({system:s("System"),light:s("Light"),dark:s("Dark")}));return(H,N)=>(e.openBlock(),e.createBlock(Ae,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:N[7]||(N[7]=E=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(s)("Close")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",Fs,[e.createVNode(ze,{icon:e.unref(Ls),title:"Vuefinder "+e.unref(t).version},null,8,["icon","title"]),e.createElementVNode("div",Os,[e.createElementVNode("div",null,[e.createElementVNode("div",null,[e.createElementVNode("nav",Rs,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,E=>(e.openBlock(),e.createElementBlock("button",{key:E.name,onClick:P=>u.value=E.key,class:e.normalizeClass([E.key===u.value?"vuefinder__about-modal__tab--active":"vuefinder__about-modal__tab--inactive","vuefinder__about-modal__tab"]),"aria-current":E.current?"page":void 0},e.toDisplayString(E.name),11,Hs))),128))])])]),u.value===l.ABOUT?(e.openBlock(),e.createElementBlock("div",zs,[e.createElementVNode("div",Ps,e.toDisplayString(e.unref(s)("Vuefinder is a simple, lightweight, and fast file manager library for Vue.js applications")),1),e.createElementVNode("a",Us,e.toDisplayString(e.unref(s)("Project home")),1),e.createElementVNode("a",js,e.toDisplayString(e.unref(s)("Follow on GitHub")),1)])):e.createCommentVNode("",!0),u.value===l.SETTINGS?(e.openBlock(),e.createElementBlock("div",qs,[e.createElementVNode("div",Ks,e.toDisplayString(e.unref(s)("Customize your experience with the following settings")),1),e.createElementVNode("div",Gs,[e.createElementVNode("fieldset",null,[e.createElementVNode("div",Ys,[e.createElementVNode("div",Ws,[e.withDirectives(e.createElementVNode("input",{id:"metric_unit",name:"metric_unit",type:"checkbox","onUpdate:modelValue":N[0]||(N[0]=E=>e.unref(o).metricUnits=E),onClick:d,class:"vuefinder__about-modal__checkbox"},null,512),[[e.vModelCheckbox,e.unref(o).metricUnits]])]),e.createElementVNode("div",Xs,[e.createElementVNode("label",Qs,[e.createTextVNode(e.toDisplayString(e.unref(s)("Use Metric Units"))+" ",1),e.createVNode(Je,{class:"ms-3",on:"vf-metric-units-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(s)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",Js,[e.createElementVNode("div",Zs,[e.withDirectives(e.createElementVNode("input",{id:"large_icons",name:"large_icons",type:"checkbox","onUpdate:modelValue":N[1]||(N[1]=E=>e.unref(o).compactListView=E),onClick:f,class:"vuefinder__about-modal__checkbox"},null,512),[[e.vModelCheckbox,e.unref(o).compactListView]])]),e.createElementVNode("div",el,[e.createElementVNode("label",tl,[e.createTextVNode(e.toDisplayString(e.unref(s)("Compact list view"))+" ",1),e.createVNode(Je,{class:"ms-3",on:"vf-compact-view-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(s)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",nl,[e.createElementVNode("div",ol,[e.withDirectives(e.createElementVNode("input",{id:"persist_path",name:"persist_path",type:"checkbox","onUpdate:modelValue":N[2]||(N[2]=E=>e.unref(o).persist=E),onClick:_,class:"vuefinder__about-modal__checkbox"},null,512),[[e.vModelCheckbox,e.unref(o).persist]])]),e.createElementVNode("div",rl,[e.createElementVNode("label",sl,[e.createTextVNode(e.toDisplayString(e.unref(s)("Persist path on reload"))+" ",1),e.createVNode(Je,{class:"ms-3",on:"vf-persist-path-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(s)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",ll,[e.createElementVNode("div",al,[e.withDirectives(e.createElementVNode("input",{id:"show_thumbnails",name:"show_thumbnails",type:"checkbox","onUpdate:modelValue":N[3]||(N[3]=E=>e.unref(o).showThumbnails=E),onClick:p,class:"vuefinder__about-modal__checkbox"},null,512),[[e.vModelCheckbox,e.unref(o).showThumbnails]])]),e.createElementVNode("div",il,[e.createElementVNode("label",cl,[e.createTextVNode(e.toDisplayString(e.unref(s)("Show thumbnails"))+" ",1),e.createVNode(Je,{class:"ms-3",on:"vf-show-thumbnails-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(s)("Saved.")),1)]),_:1})])])]),e.createElementVNode("div",dl,[e.createElementVNode("div",ul,[e.createElementVNode("label",fl,e.toDisplayString(e.unref(s)("Theme")),1)]),e.createElementVNode("div",ml,[e.withDirectives(e.createElementVNode("select",{id:"theme","onUpdate:modelValue":N[4]||(N[4]=E=>e.unref(t).theme.value=E),onChange:N[5]||(N[5]=E=>i(E.target?.value||"")),class:"vuefinder__about-modal__select"},[e.createElementVNode("optgroup",{label:e.unref(s)("Theme")},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(x.value,(E,P)=>(e.openBlock(),e.createElementBlock("option",{value:P},e.toDisplayString(E),9,pl))),256))],8,vl)],544),[[e.vModelSelect,e.unref(t).theme.value]]),e.createVNode(Je,{class:"ms-3",on:"vf-theme-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(s)("Saved.")),1)]),_:1})])]),e.unref(t).features.includes(e.unref(Z).LANGUAGE)&&Object.keys(e.unref(g)).length>1?(e.openBlock(),e.createElementBlock("div",_l,[e.createElementVNode("div",hl,[e.createElementVNode("label",gl,e.toDisplayString(e.unref(s)("Language")),1)]),e.createElementVNode("div",yl,[e.withDirectives(e.createElementVNode("select",{id:"language","onUpdate:modelValue":N[6]||(N[6]=E=>e.unref(t).i18n.locale=E),class:"vuefinder__about-modal__select"},[e.createElementVNode("optgroup",{label:e.unref(s)("Language")},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(g),(E,P)=>(e.openBlock(),e.createElementBlock("option",{value:P},e.toDisplayString(E),9,kl))),256))],8,wl)],512),[[e.vModelSelect,e.unref(t).i18n.locale]]),e.createVNode(Je,{class:"ms-3",on:"vf-language-saved"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(s)("Saved.")),1)]),_:1})])])):e.createCommentVNode("",!0)])])])):e.createCommentVNode("",!0),u.value===l.SHORTCUTS?(e.openBlock(),e.createElementBlock("div",bl,[e.createElementVNode("div",El,[e.createElementVNode("div",Sl,[e.createElementVNode("div",null,e.toDisplayString(e.unref(s)("Rename")),1),N[8]||(N[8]=e.createElementVNode("kbd",null,"F2",-1))]),e.createElementVNode("div",xl,[e.createElementVNode("div",null,e.toDisplayString(e.unref(s)("Refresh")),1),N[9]||(N[9]=e.createElementVNode("kbd",null,"F5",-1))]),e.createElementVNode("div",Vl,[e.createTextVNode(e.toDisplayString(e.unref(s)("Delete"))+" ",1),N[10]||(N[10]=e.createElementVNode("kbd",null,"Del",-1))]),e.createElementVNode("div",Nl,[e.createTextVNode(e.toDisplayString(e.unref(s)("Escape"))+" ",1),N[11]||(N[11]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Esc")],-1))]),e.createElementVNode("div",Cl,[e.createTextVNode(e.toDisplayString(e.unref(s)("Select All"))+" ",1),N[12]||(N[12]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"A")],-1))]),e.createElementVNode("div",Bl,[e.createTextVNode(e.toDisplayString(e.unref(s)("Search"))+" ",1),N[13]||(N[13]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"F")],-1))]),e.createElementVNode("div",$l,[e.createTextVNode(e.toDisplayString(e.unref(s)("Toggle Sidebar"))+" ",1),N[14]||(N[14]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"E")],-1))]),e.createElementVNode("div",Dl,[e.createTextVNode(e.toDisplayString(e.unref(s)("Open Settings"))+" ",1),N[15]||(N[15]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,",")],-1))]),e.createElementVNode("div",Tl,[e.createTextVNode(e.toDisplayString(e.unref(s)("Toggle Full Screen"))+" ",1),N[16]||(N[16]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Ctrl"),e.createTextVNode(" + "),e.createElementVNode("kbd",null,"Enter")],-1))]),e.createElementVNode("div",Ml,[e.createTextVNode(e.toDisplayString(e.unref(s)("Preview"))+" ",1),N[17]||(N[17]=e.createElementVNode("div",null,[e.createElementVNode("kbd",null,"Space")],-1))])])])):e.createCommentVNode("",!0),u.value===l.RESET?(e.openBlock(),e.createElementBlock("div",Al,[e.createElementVNode("div",Il,e.toDisplayString(e.unref(s)("Reset all settings to default")),1),e.createElementVNode("button",{onClick:c,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(s)("Reset Settings")),1)])):e.createCommentVNode("",!0)])])]),_:1}))}}),Ll=["title"],Ie=e.defineComponent({__name:"Message",props:{error:{type:Boolean}},emits:["hidden"],setup(n,{emit:t}){const o=t,r=e.inject("ServiceContainer"),{t:s}=r.i18n,l=e.ref(!1),a=e.ref(null),u=e.ref(a.value?.innerHTML);e.watch(u,()=>l.value=!1);const c=()=>{o("hidden"),l.value=!0};return(i,d)=>(e.openBlock(),e.createElementBlock("div",null,[l.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"strMessage",ref:a,class:e.normalizeClass(["vuefinder__message",n.error?"vuefinder__message--error":"vuefinder__message--success"])},[e.renderSlot(i.$slots,"default"),e.createElementVNode("div",{class:"vuefinder__message__close",onClick:c,title:e.unref(s)("Close")},[...d[0]||(d[0]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"vuefinder__message__icon"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Ll)],2))]))}}),Fl={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function Ol(n,t){return e.openBlock(),e.createElementBlock("svg",Fl,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21q.512.078 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48 48 0 0 0-3.478-.397m-12 .562q.51-.089 1.022-.165m0 0a48 48 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a52 52 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a49 49 0 0 0-7.5 0"},null,-1)])])}const Po={render:Ol},Rl={class:"vuefinder__delete-modal__content"},Hl={class:"vuefinder__delete-modal__form"},zl={class:"vuefinder__delete-modal__description"},Pl={class:"vuefinder__delete-modal__files vf-scrollbar"},Ul={class:"vuefinder__delete-modal__file"},jl={key:0,class:"vuefinder__delete-modal__icon vuefinder__delete-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},ql={key:1,class:"vuefinder__delete-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Kl={class:"vuefinder__delete-modal__file-name"},Gl={class:"vuefinder__delete-modal__warning"},On=e.defineComponent({__name:"ModalDelete",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,s=e.ref(t.modal.data.items),l=e.ref(""),a=()=>{s.value.length&&t.emitter.emit("vf-fetch",{params:{q:"delete",m:"post",storage:r.path.storage,path:r.path.path},body:{items:s.value.map(({path:u,type:c})=>({path:u,type:c}))},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:o("Files deleted.")})},onError:u=>{l.value=o(u.message)}})};return(u,c)=>(e.openBlock(),e.createBlock(Ae,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:a,class:"vf-btn vf-btn-danger"},e.toDisplayString(e.unref(o)("Yes, Delete!")),1),e.createElementVNode("button",{type:"button",onClick:c[1]||(c[1]=i=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1),e.createElementVNode("div",Gl,e.toDisplayString(e.unref(o)("This action cannot be undone.")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(ze,{icon:e.unref(Po),title:e.unref(o)("Delete files")},null,8,["icon","title"]),e.createElementVNode("div",Rl,[e.createElementVNode("div",Hl,[e.createElementVNode("p",zl,e.toDisplayString(e.unref(o)("Are you sure you want to delete these files?")),1),e.createElementVNode("div",Pl,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,i=>(e.openBlock(),e.createElementBlock("p",Ul,[i.type==="dir"?(e.openBlock(),e.createElementBlock("svg",jl,[...c[2]||(c[2]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",ql,[...c[3]||(c[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),e.createElementVNode("span",Kl,e.toDisplayString(i.basename),1)]))),256))]),l.value.length?(e.openBlock(),e.createBlock(Ie,{key:0,onHidden:c[0]||(c[0]=i=>l.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(l.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),Yl={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function Wl(n,t){return e.openBlock(),e.createElementBlock("svg",Yl,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"},null,-1)])])}const Uo={render:Wl},Xl={class:"vuefinder__rename-modal__content"},Ql={class:"vuefinder__rename-modal__item"},Jl={class:"vuefinder__rename-modal__item-info"},Zl={key:0,class:"vuefinder__rename-modal__icon vuefinder__rename-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},ea={key:1,class:"vuefinder__rename-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},ta={class:"vuefinder__rename-modal__item-name"},Rn=e.defineComponent({__name:"ModalRename",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,s=e.ref(t.modal.data.items[0]),l=e.ref(t.modal.data.items[0].basename),a=e.ref(""),u=()=>{l.value!=""&&t.emitter.emit("vf-fetch",{params:{q:"rename",m:"post",storage:r.path.storage,path:r.path.path},body:{item:s.value.path,name:l.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:o("%s is renamed.",l.value)})},onError:c=>{a.value=o(c.message)}})};return(c,i)=>(e.openBlock(),e.createBlock(Ae,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:u,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Rename")),1),e.createElementVNode("button",{type:"button",onClick:i[2]||(i[2]=d=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(ze,{icon:e.unref(Uo),title:e.unref(o)("Rename")},null,8,["icon","title"]),e.createElementVNode("div",Xl,[e.createElementVNode("div",Ql,[e.createElementVNode("p",Jl,[s.value.type==="dir"?(e.openBlock(),e.createElementBlock("svg",Zl,[...i[3]||(i[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",ea,[...i[4]||(i[4]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),e.createElementVNode("span",ta,e.toDisplayString(s.value.basename),1)]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":i[0]||(i[0]=d=>l.value=d),onKeyup:e.withKeys(u,["enter"]),class:"vuefinder__rename-modal__input",placeholder:"Name",type:"text"},null,544),[[e.vModelText,l.value]]),a.value.length?(e.openBlock(),e.createBlock(Ie,{key:0,onHidden:i[1]||(i[1]=d=>a.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),na={class:"vuefinder__text-preview"},oa={class:"vuefinder__text-preview__header"},ra=["title"],sa={class:"vuefinder__text-preview__actions"},la={key:0,class:"vuefinder__text-preview__content"},aa={key:1},ia=e.defineComponent({__name:"Text",emits:["success"],setup(n,{emit:t}){const o=t,r=e.ref(""),s=e.ref(""),l=e.ref(null),a=e.ref(!1),u=e.ref(""),c=e.ref(!1),i=e.inject("ServiceContainer"),{t:d}=i.i18n;e.onMounted(()=>{i.requester.send({url:"",method:"get",params:{q:"preview",storage:i.modal.data.storage,path:i.modal.data.item.path},responseType:"text"}).then(_=>{r.value=_,o("success")})});const f=()=>{a.value=!a.value,s.value=r.value},p=()=>{u.value="",c.value=!1,i.requester.send({url:"",method:"post",params:{q:"save",storage:i.modal.data.storage,path:i.modal.data.item.path},body:{content:s.value},responseType:"text"}).then(_=>{u.value=d("Updated."),r.value=_,o("success"),a.value=!a.value}).catch(_=>{u.value=d(_.message),c.value=!0})};return(_,v)=>(e.openBlock(),e.createElementBlock("div",na,[e.createElementVNode("div",oa,[e.createElementVNode("div",{class:"vuefinder__text-preview__title",id:"modal-title",title:e.unref(i).modal.data.item.path},e.toDisplayString(e.unref(i).modal.data.item.basename),9,ra),e.createElementVNode("div",sa,[a.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:p,class:"vuefinder__text-preview__save-button"},e.toDisplayString(e.unref(d)("Save")),1)):e.createCommentVNode("",!0),e.unref(i).features.includes(e.unref(Z).EDIT)?(e.openBlock(),e.createElementBlock("button",{key:1,class:"vuefinder__text-preview__edit-button",onClick:v[0]||(v[0]=m=>f())},e.toDisplayString(a.value?e.unref(d)("Cancel"):e.unref(d)("Edit")),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("div",null,[a.value?(e.openBlock(),e.createElementBlock("div",aa,[e.withDirectives(e.createElementVNode("textarea",{ref_key:"editInput",ref:l,"onUpdate:modelValue":v[1]||(v[1]=m=>s.value=m),class:"vuefinder__text-preview__textarea",name:"text",cols:"30",rows:"10"},null,512),[[e.vModelText,s.value]])])):(e.openBlock(),e.createElementBlock("pre",la,e.toDisplayString(r.value),1)),u.value.length?(e.openBlock(),e.createBlock(Ie,{key:2,onHidden:v[2]||(v[2]=m=>u.value=""),error:c.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(u.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)])]))}}),ca={class:"vuefinder__image-preview"},da={class:"vuefinder__image-preview__header"},ua=["title"],fa={class:"vuefinder__image-preview__actions"},ma={class:"vuefinder__image-preview__image-container"},va=["src"],pa=e.defineComponent({__name:"Image",emits:["success"],setup(n,{emit:t}){const o=t,r=e.inject("ServiceContainer"),{t:s}=r.i18n,l=e.ref(null),a=e.ref(null),u=e.ref(!1),c=e.ref(""),i=e.ref(!1),d=()=>{u.value=!u.value,u.value&&l.value?a.value=new ss(l.value,{crop(p){}}):a.value&&a.value.destroy()},f=()=>{a.value&&a.value.getCroppedCanvas({width:795,height:341}).toBlob(p=>{c.value="",i.value=!1;const _=new FormData;_.set("file",p),r.requester.send({url:"",method:"post",params:{q:"upload",storage:r.modal.data.storage,path:r.modal.data.item.path},body:_}).then(v=>{c.value=s("Updated."),l.value&&(l.value.src=r.requester.getPreviewUrl(r.modal.data.storage,r.modal.data.item)),d(),o("success")}).catch(v=>{c.value=s(v.message),i.value=!0})})};return e.onMounted(()=>{o("success")}),(p,_)=>(e.openBlock(),e.createElementBlock("div",ca,[e.createElementVNode("div",da,[e.createElementVNode("h3",{class:"vuefinder__image-preview__title",id:"modal-title",title:e.unref(r).modal.data.item.path},e.toDisplayString(e.unref(r).modal.data.item.basename),9,ua),e.createElementVNode("div",fa,[u.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:f,class:"vuefinder__image-preview__crop-button"},e.toDisplayString(e.unref(s)("Crop")),1)):e.createCommentVNode("",!0),e.unref(r).features.includes(e.unref(Z).EDIT)?(e.openBlock(),e.createElementBlock("button",{key:1,class:"vuefinder__image-preview__edit-button",onClick:_[0]||(_[0]=v=>d())},e.toDisplayString(u.value?e.unref(s)("Cancel"):e.unref(s)("Edit")),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("div",ma,[e.createElementVNode("img",{ref_key:"image",ref:l,class:"vuefinder__image-preview__image",src:e.unref(r).requester.getPreviewUrl(e.unref(r).modal.data.storage,e.unref(r).modal.data.item),alt:""},null,8,va)]),c.value.length?(e.openBlock(),e.createBlock(Ie,{key:0,onHidden:_[1]||(_[1]=v=>c.value=""),error:i.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.value),1)]),_:1},8,["error"])):e.createCommentVNode("",!0)]))}}),_a={class:"vuefinder__default-preview"},ha={class:"vuefinder__default-preview__header"},ga=["title"],ya=e.defineComponent({__name:"Default",emits:["success"],setup(n,{emit:t}){const o=e.inject("ServiceContainer"),r=t;return e.onMounted(()=>{r("success")}),(s,l)=>(e.openBlock(),e.createElementBlock("div",_a,[e.createElementVNode("div",ha,[e.createElementVNode("h3",{class:"vuefinder__default-preview__title",id:"modal-title",title:e.unref(o).modal.data.item.path},e.toDisplayString(e.unref(o).modal.data.item.basename),9,ga)]),l[0]||(l[0]=e.createElementVNode("div",null,null,-1))]))}}),wa={class:"vuefinder__video-preview"},ka=["title"],ba={class:"vuefinder__video-preview__video",preload:"metadata",controls:""},Ea=["src"],Sa=e.defineComponent({__name:"Video",emits:["success"],setup(n,{emit:t}){const o=e.inject("ServiceContainer"),r=t,s=()=>o.requester.getPreviewUrl(o.modal.data.storage,o.modal.data.item);return e.onMounted(()=>{r("success")}),(l,a)=>(e.openBlock(),e.createElementBlock("div",wa,[e.createElementVNode("h3",{class:"vuefinder__video-preview__title",id:"modal-title",title:e.unref(o).modal.data.item.path},e.toDisplayString(e.unref(o).modal.data.item.basename),9,ka),e.createElementVNode("div",null,[e.createElementVNode("video",ba,[e.createElementVNode("source",{src:s(),type:"video/mp4"},null,8,Ea),a[0]||(a[0]=e.createTextVNode(" Your browser does not support the video tag. ",-1))])])]))}}),xa={class:"vuefinder__audio-preview"},Va=["title"],Na={class:"vuefinder__audio-preview__audio",controls:""},Ca=["src"],Ba=e.defineComponent({__name:"Audio",emits:["success"],setup(n,{emit:t}){const o=t,r=e.inject("ServiceContainer"),s=()=>r.requester.getPreviewUrl(r.modal.data.storage,r.modal.data.item);return e.onMounted(()=>{o("success")}),(l,a)=>(e.openBlock(),e.createElementBlock("div",xa,[e.createElementVNode("h3",{class:"vuefinder__audio-preview__title",id:"modal-title",title:e.unref(r).modal.data.item.path},e.toDisplayString(e.unref(r).modal.data.item.basename),9,Va),e.createElementVNode("div",null,[e.createElementVNode("audio",Na,[e.createElementVNode("source",{src:s(),type:"audio/mpeg"},null,8,Ca),a[0]||(a[0]=e.createTextVNode(" Your browser does not support the audio element. ",-1))])])]))}}),$a={class:"vuefinder__pdf-preview"},Da=["title"],Ta=["data"],Ma=["src"],Aa=e.defineComponent({__name:"Pdf",emits:["success"],setup(n,{emit:t}){const o=e.inject("ServiceContainer"),r=t,s=()=>o.requester.getPreviewUrl(o.modal.data.storage,o.modal.data.item);return e.onMounted(()=>{r("success")}),(l,a)=>(e.openBlock(),e.createElementBlock("div",$a,[e.createElementVNode("h3",{class:"vuefinder__pdf-preview__title",id:"modal-title",title:e.unref(o).modal.data.item.path},e.toDisplayString(e.unref(o).modal.data.item.basename),9,Da),e.createElementVNode("div",null,[e.createElementVNode("object",{class:"vuefinder__pdf-preview__object",data:s(),type:"application/pdf",width:"100%",height:"100%"},[e.createElementVNode("iframe",{class:"vuefinder__pdf-preview__iframe",src:s(),width:"100%",height:"100%"}," Your browser does not support PDFs ",8,Ma)],8,Ta)])]))}});function Ia(n,t=null){return new Date(n*1e3).toLocaleString(t??navigator.language??"en-US")}const La={class:"vuefinder__preview-modal__content"},Fa={key:0},Oa={class:"vuefinder__preview-modal__loading"},Ra={key:0,class:"vuefinder__preview-modal__loading-indicator"},Ha={class:"vuefinder__preview-modal__details"},za={class:"font-bold"},Pa={class:"font-bold pl-2"},Ua={key:0,class:"vuefinder__preview-modal__note"},ja=["download","href"],jo=e.defineComponent({__name:"ModalPreview",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=e.ref(!1),s=a=>(t.modal.data.item.mime_type??"").startsWith(a),l=t.features.includes(Z.PREVIEW);return l||(r.value=!0),(a,u)=>(e.openBlock(),e.createBlock(Ae,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:u[6]||(u[6]=c=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Close")),1),e.unref(t).features.includes(e.unref(Z).DOWNLOAD)?(e.openBlock(),e.createElementBlock("a",{key:0,target:"_blank",class:"vf-btn vf-btn-primary",download:e.unref(t).requester.getDownloadUrl(e.unref(t).modal.data.storage,e.unref(t).modal.data.item),href:e.unref(t).requester.getDownloadUrl(e.unref(t).modal.data.storage,e.unref(t).modal.data.item)},e.toDisplayString(e.unref(o)("Download")),9,ja)):e.createCommentVNode("",!0)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createElementVNode("div",La,[e.unref(l)?(e.openBlock(),e.createElementBlock("div",Fa,[s("text")?(e.openBlock(),e.createBlock(ia,{key:0,onSuccess:u[0]||(u[0]=c=>r.value=!0)})):s("image")?(e.openBlock(),e.createBlock(pa,{key:1,onSuccess:u[1]||(u[1]=c=>r.value=!0)})):s("video")?(e.openBlock(),e.createBlock(Sa,{key:2,onSuccess:u[2]||(u[2]=c=>r.value=!0)})):s("audio")?(e.openBlock(),e.createBlock(Ba,{key:3,onSuccess:u[3]||(u[3]=c=>r.value=!0)})):s("application/pdf")?(e.openBlock(),e.createBlock(Aa,{key:4,onSuccess:u[4]||(u[4]=c=>r.value=!0)})):(e.openBlock(),e.createBlock(ya,{key:5,onSuccess:u[5]||(u[5]=c=>r.value=!0)}))])):e.createCommentVNode("",!0),e.createElementVNode("div",Oa,[r.value===!1?(e.openBlock(),e.createElementBlock("div",Ra,[u[7]||(u[7]=e.createElementVNode("svg",{class:"vuefinder__preview-modal__spinner",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e.createElementVNode("circle",{class:"vuefinder__preview-modal__spinner-circle",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e.createElementVNode("path",{class:"vuefinder__preview-modal__spinner-path",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e.createElementVNode("span",null,e.toDisplayString(e.unref(o)("Loading")),1)])):e.createCommentVNode("",!0)])])]),e.createElementVNode("div",Ha,[e.createElementVNode("div",null,[e.createElementVNode("span",za,e.toDisplayString(e.unref(o)("File Size"))+": ",1),e.createTextVNode(e.toDisplayString(e.unref(t).filesize(e.unref(t).modal.data.item.file_size)),1)]),e.createElementVNode("div",null,[e.createElementVNode("span",Pa,e.toDisplayString(e.unref(o)("Last Modified"))+": ",1),e.createTextVNode(" "+e.toDisplayString(e.unref(Ia)(e.unref(t).modal.data.item.last_modified)),1)])]),e.unref(t).features.includes(e.unref(Z).DOWNLOAD)?(e.openBlock(),e.createElementBlock("div",Ua,[e.createElementVNode("span",null,e.toDisplayString(e.unref(o)(`Download doesn't work? You can try right-click "Download" button, select "Save link as...".`)),1)])):e.createCommentVNode("",!0)]),_:1}))}}),qa={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",viewBox:"0 0 24 24"};function Ka(n,t){return e.openBlock(),e.createElementBlock("svg",qa,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3"},null,-1)])])}const Ga={render:Ka},Ya={class:"vuefinder__move-modal__content"},Wa={class:"vuefinder__move-modal__description"},Xa={class:"vuefinder__move-modal__files vf-scrollbar"},Qa={key:0,class:"vuefinder__move-modal__icon vuefinder__move-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Ja={key:1,class:"vuefinder__move-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Za={class:"vuefinder__move-modal__file-name"},ei={class:"vuefinder__move-modal__target-title"},ti={class:"vuefinder__move-modal__target-directory"},ni={class:"vuefinder__move-modal__target-path"},oi={class:"vuefinder__move-modal__selected-items"},ri=e.defineComponent({__name:"ModalTransfer",props:{q:{},title:{},body:{},successBtn:{},successText:{}},setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,s=n,l=e.ref(t.modal.data.items.from),a=t.modal.data.items.to,u=e.ref(""),c=()=>{l.value.length&&t.emitter.emit("vf-fetch",{params:{q:s.q,m:"post",storage:r.path.storage,path:r.path.path},body:{items:l.value.map(({path:i,type:d})=>({path:i,type:d})),item:a.path},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:s.successText})},onError:i=>{u.value=o(i.message)}})};return(i,d)=>(e.openBlock(),e.createBlock(Ae,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:c,class:"vf-btn vf-btn-primary"},e.toDisplayString(s.successBtn),1),e.createElementVNode("button",{type:"button",onClick:d[1]||(d[1]=f=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1),e.createElementVNode("div",oi,e.toDisplayString(e.unref(o)("%s item(s) selected.",l.value.length)),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(ze,{icon:e.unref(Ga),title:s.title},null,8,["icon","title"]),e.createElementVNode("div",Ya,[e.createElementVNode("p",Wa,e.toDisplayString(s.body),1),e.createElementVNode("div",Xa,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,f=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__move-modal__file",key:f.path},[e.createElementVNode("div",null,[f.type==="dir"?(e.openBlock(),e.createElementBlock("svg",Qa,[...d[2]||(d[2]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",Ja,[...d[3]||(d[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])]))]),e.createElementVNode("div",Za,e.toDisplayString(f.path),1)]))),128))]),e.createElementVNode("h4",ei,e.toDisplayString(e.unref(o)("Target Directory")),1),e.createElementVNode("p",ti,[d[4]||(d[4]=e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"vuefinder__move-modal__icon vuefinder__move-modal__icon--dir",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1)),e.createElementVNode("span",ni,e.toDisplayString(e.unref(a).path),1)]),u.value.length?(e.openBlock(),e.createBlock(Ie,{key:0,onHidden:d[0]||(d[0]=f=>u.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(u.value),1)]),_:1})):e.createCommentVNode("",!0)])])]),_:1}))}}),bn=e.defineComponent({__name:"ModalMove",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n;return(r,s)=>(e.openBlock(),e.createBlock(ri,{title:e.unref(o)("Move files"),body:e.unref(o)("Are you sure you want to move these files"),"success-btn":e.unref(o)("Yes, Move!"),"success-text":e.unref(o)("Files moved.")},null,8,["title","body","success-btn","success-text"]))}}),ye={ESCAPE:"Escape",F2:"F2",F5:"F5",DELETE:"Delete",ENTER:"Enter",BACKSLASH:"Backslash",KEY_A:"KeyA",KEY_E:"KeyE",KEY_F:"KeyF",SPACE:"Space",KEY_C:"KeyC",KEY_X:"KeyX",KEY_V:"KeyV"};function si(n){const{searchMode:t,enterSearchMode:o}=n.search,r=n.fs,s=n.config,l=a=>{if(a.code===ye.ESCAPE&&(n.modal.close(),n.root.focus()),!n.modal.visible&&!t.value){if(a.code===ye.F2&&n.features.includes(Z.RENAME)&&r.selectedItems.length===1&&n.modal.open(Rn,{items:r.selectedItems}),a.code===ye.F5&&n.emitter.emit("vf-fetch",{params:{q:"index",storage:r.path.storage,path:r.path.path}}),a.code===ye.DELETE&&r.selectedItems.length===0&&n.modal.open(On,{items:r.selectedItems}),a.ctrlKey&&a.code===ye.BACKSLASH&&n.modal.open(zo),a.ctrlKey&&a.code===ye.KEY_F&&n.features.includes(Z.SEARCH)&&(o(),a.preventDefault()),a.ctrlKey&&a.code===ye.KEY_E&&(s.toggle("showTreeView"),a.preventDefault()),a.ctrlKey&&a.code===ye.ENTER&&(s.toggle("fullScreen"),n.root.focus()),a.ctrlKey&&a.code===ye.KEY_A&&(r.selectAll(),a.preventDefault()),a.code===ye.SPACE&&r.selectedItems.length===1&&r.selectedItems[0]?.type!=="dir"&&n.modal.open(jo,{storage:r.path.storage,item:r.selectedItems[0]}),a.metaKey&&a.code===ye.KEY_C){if(r.selectedItems.length===0){n.emitter.emit("vf-toast-push",{type:"error",label:n.i18n.t("No items selected")});return}r.setClipboard("copy",new Set(r.selectedItems.map(u=>u.path))),n.emitter.emit("vf-toast-push",{label:r.selectedItems.length===1?n.i18n.t("Item copied to clipboard"):n.i18n.t("%s items copied to clipboard",r.selectedItems.length)}),a.preventDefault()}if(a.metaKey&&a.code===ye.KEY_X){if(r.selectedItems.length===0){n.emitter.emit("vf-toast-push",{type:"error",label:n.i18n.t("No items selected")});return}r.setClipboard("cut",new Set(r.selectedItems.map(u=>u.path))),n.emitter.emit("vf-toast-push",{label:r.selectedItems.length===1?n.i18n.t("Item cut to clipboard"):n.i18n.t("%s items cut to clipboard",r.selectedItems.length)}),a.preventDefault()}if(a.metaKey&&a.code===ye.KEY_V){if(r.getClipboard().items.size===0){n.emitter.emit("vf-toast-push",{type:"error",label:n.i18n.t("No items in clipboard")});return}if(r.getClipboard().path===r.path.path){n.emitter.emit("vf-toast-push",{type:"error",label:n.i18n.t("Cannot paste items to the same directory")});return}if(r.getClipboard().type==="cut"){n.modal.open(bn,{items:{from:r.getClipboard().items,to:r.path}}),r.clearClipboard();return}if(r.getClipboard().type==="copy"){n.modal.open(bn,{items:{from:r.getClipboard().items,to:r.path}});return}a.preventDefault()}}};e.onMounted(()=>{n.root.addEventListener("keydown",l)}),e.onBeforeUnmount(()=>{n.root.removeEventListener("keydown",l)})}const li={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function ai(n,t){return e.openBlock(),e.createElementBlock("svg",li,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M12 10.5v6m3-3H9m4.06-7.19-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44z"},null,-1)])])}const qo={render:ai},ii={class:"vuefinder__new-folder-modal__content"},ci={class:"vuefinder__new-folder-modal__form"},di={class:"vuefinder__new-folder-modal__description"},ui=["placeholder"],Ko=e.defineComponent({__name:"ModalNewFolder",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,s=e.ref(""),l=e.ref(""),a=()=>{s.value!==""&&t.emitter.emit("vf-fetch",{params:{q:"newfolder",m:"post",storage:r.path.storage,path:r.path.path},body:{name:s.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:o("%s is created.",s.value)})},onError:u=>{l.value=o(u.message)}})};return(u,c)=>(e.openBlock(),e.createBlock(Ae,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:a,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Create")),1),e.createElementVNode("button",{type:"button",onClick:c[2]||(c[2]=i=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(ze,{icon:e.unref(qo),title:e.unref(o)("New Folder")},null,8,["icon","title"]),e.createElementVNode("div",ii,[e.createElementVNode("div",ci,[e.createElementVNode("p",di,e.toDisplayString(e.unref(o)("Create a new folder")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c[0]||(c[0]=i=>s.value=i),onKeyup:e.withKeys(a,["enter"]),class:"vuefinder__new-folder-modal__input",placeholder:e.unref(o)("Folder Name"),type:"text"},null,40,ui),[[e.vModelText,s.value]]),l.value.length?(e.openBlock(),e.createBlock(Ie,{key:0,onHidden:c[1]||(c[1]=i=>l.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(l.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),fi={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function mi(n,t){return e.openBlock(),e.createElementBlock("svg",fi,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9"},null,-1)])])}const Go={render:mi},vi={class:"vuefinder__new-file-modal__content"},pi={class:"vuefinder__new-file-modal__form"},_i={class:"vuefinder__new-file-modal__description"},hi=["placeholder"],gi=e.defineComponent({__name:"ModalNewFile",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,s=e.ref(""),l=e.ref(""),a=()=>{s.value!==""&&t.emitter.emit("vf-fetch",{params:{q:"newfile",m:"post",storage:r.path.storage,path:r.path.path},body:{name:s.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:o("%s is created.",s.value)})},onError:u=>{l.value=o(u.message)}})};return(u,c)=>(e.openBlock(),e.createBlock(Ae,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:a,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Create")),1),e.createElementVNode("button",{type:"button",onClick:c[2]||(c[2]=i=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(ze,{icon:e.unref(Go),title:e.unref(o)("New File")},null,8,["icon","title"]),e.createElementVNode("div",vi,[e.createElementVNode("div",pi,[e.createElementVNode("p",_i,e.toDisplayString(e.unref(o)("Create a new file")),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c[0]||(c[0]=i=>s.value=i),onKeyup:e.withKeys(a,["enter"]),class:"vuefinder__new-file-modal__input",placeholder:e.unref(o)("File Name"),type:"text"},null,40,hi),[[e.vModelText,s.value]]),l.value.length?(e.openBlock(),e.createBlock(Ie,{key:0,onHidden:c[1]||(c[1]=i=>l.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(l.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),ue={PENDING:0,CANCELED:1,UPLOADING:2,ERROR:3,DONE:10};function yi(){const n=e.inject("ServiceContainer"),{t}=n.i18n,o=n.fs,r=n.config,s=e.ref({QUEUE_ENTRY_STATUS:ue}),l=e.ref(null),a=e.ref(null),u=e.ref(null),c=e.ref(null),i=e.ref(null),d=e.ref(null),f=e.ref([]),p=e.ref(""),_=e.ref(!1),v=e.ref(!1);let m;const g=S=>f.value.findIndex(w=>w.id===S),x=(S,w)=>m.addFile({name:w||S.name,type:S.type,data:S,source:"Local"}),H=S=>S.status===ue.DONE?"text-green-600":S.status===ue.ERROR||S.status===ue.CANCELED?"text-red-600":"",N=S=>S.status===ue.DONE?"✓":S.status===ue.ERROR||S.status===ue.CANCELED?"!":"...",E=()=>c.value?.click(),P=()=>n.modal.close(),L=()=>{if(_.value||!f.value.filter(S=>S.status!==ue.DONE).length){_.value||(p.value=t("Please select file to upload first."));return}p.value="",m.retryAll(),m.upload()},T=()=>{m.cancelAll(),f.value.forEach(S=>{S.status!==ue.DONE&&(S.status=ue.CANCELED,S.statusName=t("Canceled"))}),_.value=!1},I=S=>{_.value||(m.removeFile(S.id),f.value.splice(g(S.id),1))},U=S=>{if(!_.value)if(m.cancelAll(),S){const w=f.value.filter(y=>y.status!==ue.DONE);f.value=[],w.forEach(y=>x(y.originalFile,y.name))}else f.value=[]};return e.onMounted(()=>{m=new ls({debug:n.debug,restrictions:{maxFileSize:_s(r.maxFileSize??"10mb")},locale:n.i18n.t("uppy"),onBeforeFileAdded:(y,V)=>{if(V[y.id]!=null){const M=g(y.id);f.value[M]?.status===ue.PENDING&&(p.value=m.i18n("noDuplicates",{fileName:y.name})),f.value=f.value.filter(j=>j.id!==y.id)}return f.value.push({id:y.id,name:y.name,size:n.filesize(y.size),status:ue.PENDING,statusName:t("Pending upload"),percent:null,originalFile:y.data}),!0}}),m.use(as,{endpoint:"WILL_BE_REPLACED_BEFORE_UPLOAD",limit:5,timeout:0}),m.on("restriction-failed",(y,V)=>{const $=f.value[g(y.id)];$&&I($),p.value=V.message}),m.on("upload",()=>{const y=n.requester.transformRequestParams({url:"",method:"post",params:{q:"upload",storage:o.path.storage,path:o.path.path}});m.setMeta({...y.body});const V=m.getPlugin("XHRUpload");V&&(V.opts.method=y.method,V.opts.endpoint=y.url+"?"+new URLSearchParams(y.params),V.opts.headers=y.headers),delete y.headers["Content-Type"],_.value=!0,f.value.forEach($=>{$.status!==ue.DONE&&($.percent=null,$.status=ue.UPLOADING,$.statusName=t("Pending upload"))})}),m.on("upload-progress",(y,V)=>{const $=V.bytesTotal??1,M=Math.floor(V.bytesUploaded/$*100),j=g(y.id);j!==-1&&f.value[j]&&(f.value[j].percent=`${M}%`)}),m.on("upload-success",y=>{const V=f.value[g(y.id)];V&&(V.status=ue.DONE,V.statusName=t("Done"))}),m.on("upload-error",(y,V)=>{const $=f.value[g(y.id)];$&&($.percent=null,$.status=ue.ERROR,$.statusName=V?.isNetworkError?t("Network Error, Unable establish connection to the server or interrupted."):V?.message||t("Unknown Error"))}),m.on("error",y=>{p.value=y.message,_.value=!1,n.emitter.emit("vf-fetch",{params:{q:"index"},noCloseModal:!0})}),m.on("complete",()=>{_.value=!1,n.emitter.emit("vf-fetch",{params:{q:"index"},noCloseModal:!0})}),c.value?.addEventListener("click",()=>a.value?.click()),i.value?.addEventListener("click",()=>u.value?.click()),d.value?.addEventListener("dragover",y=>{y.preventDefault(),v.value=!0}),d.value?.addEventListener("dragleave",y=>{y.preventDefault(),v.value=!1});const S=(y,V)=>{V.isFile&&V.file($=>y(V,$)),V.isDirectory&&V.createReader().readEntries($=>$.forEach(M=>S(y,M)))};d.value?.addEventListener("drop",y=>{y.preventDefault(),v.value=!1;const V=/^[/\\](.+)/,$=y.dataTransfer?.items;$&&Array.from($).forEach(M=>{M.kind==="file"&&S((j,F)=>{const A=V.exec(j.fullPath);x(F,A?A[1]:F.name)},M.webkitGetAsEntry())})});const w=y=>{const V=y.target,$=V.files;if($){for(const M of $)x(M);V.value=""}};a.value?.addEventListener("change",w),u.value?.addEventListener("change",w)}),{container:l,internalFileInput:a,internalFolderInput:u,pickFiles:c,pickFolders:i,dropArea:d,queue:f,message:p,uploading:_,hasFilesInDropArea:v,definitions:s,openFileSelector:E,upload:L,cancel:T,remove:I,clear:U,close:P,getClassNameForEntry:H,getIconForEntry:N}}function En(n,t=14){const o=`((?=([\\w\\W]{0,${t}}))([\\w\\W]{${t+1},})([\\w\\W]{8,}))`;return n.replace(new RegExp(o),"$2..$4")}const wi={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function ki(n,t){return e.openBlock(),e.createElementBlock("svg",wi,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"},null,-1)])])}const Yo={render:ki},bi={class:"vuefinder__upload-modal__content"},Ei={key:0,class:"pointer-events-none"},Si={key:1,class:"pointer-events-none"},xi=["disabled"],Vi=["disabled"],Ni={class:"vuefinder__upload-modal__file-list vf-scrollbar"},Ci=["textContent"],Bi={class:"vuefinder__upload-modal__file-info"},$i={class:"vuefinder__upload-modal__file-name hidden md:block"},Di={class:"vuefinder__upload-modal__file-name md:hidden"},Ti={key:0,class:"ml-auto"},Mi=["title","disabled","onClick"],Ai={key:0,class:"py-2"},Ii=["disabled"],Li=e.defineComponent({__name:"ModalUpload",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,{container:r,internalFileInput:s,internalFolderInput:l,pickFiles:a,pickFolders:u,dropArea:c,queue:i,message:d,uploading:f,hasFilesInDropArea:p,definitions:_,openFileSelector:v,upload:m,cancel:g,remove:x,clear:H,close:N,getClassNameForEntry:E,getIconForEntry:P}=yi();return(L,T)=>(e.openBlock(),e.createBlock(Ae,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",class:"vf-btn vf-btn-primary",disabled:e.unref(f),onClick:T[4]||(T[4]=e.withModifiers((...I)=>e.unref(m)&&e.unref(m)(...I),["prevent"]))},e.toDisplayString(e.unref(o)("Upload")),9,Ii),e.unref(f)?(e.openBlock(),e.createElementBlock("button",{key:0,type:"button",class:"vf-btn vf-btn-secondary",onClick:T[5]||(T[5]=e.withModifiers((...I)=>e.unref(g)&&e.unref(g)(...I),["prevent"]))},e.toDisplayString(e.unref(o)("Cancel")),1)):(e.openBlock(),e.createElementBlock("button",{key:1,type:"button",class:"vf-btn vf-btn-secondary",onClick:T[6]||(T[6]=e.withModifiers((...I)=>e.unref(N)&&e.unref(N)(...I),["prevent"]))},e.toDisplayString(e.unref(o)("Close")),1))]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(ze,{icon:e.unref(Yo),title:e.unref(o)("Upload Files")},null,8,["icon","title"]),e.createElementVNode("div",bi,[e.createElementVNode("div",{class:"vuefinder__upload-modal__drop-area",ref_key:"dropArea",ref:c,onClick:T[0]||(T[0]=(...I)=>e.unref(v)&&e.unref(v)(...I))},[e.unref(p)?(e.openBlock(),e.createElementBlock("div",Ei,e.toDisplayString(e.unref(o)("Release to drop these files.")),1)):(e.openBlock(),e.createElementBlock("div",Si,e.toDisplayString(e.unref(o)("Drag and drop the files/folders to here or click here.")),1))],512),e.createElementVNode("div",{ref_key:"container",ref:r,class:"vuefinder__upload-modal__buttons"},[e.createElementVNode("button",{ref_key:"pickFiles",ref:a,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Select Files")),513),e.createElementVNode("button",{ref_key:"pickFolders",ref:u,type:"button",class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Select Folders")),513),e.createElementVNode("button",{type:"button",class:"vf-btn vf-btn-secondary",disabled:e.unref(f),onClick:T[1]||(T[1]=I=>e.unref(H)(!1))},e.toDisplayString(e.unref(o)("Clear all")),9,xi),e.createElementVNode("button",{type:"button",class:"vf-btn vf-btn-secondary",disabled:e.unref(f),onClick:T[2]||(T[2]=I=>e.unref(H)(!0))},e.toDisplayString(e.unref(o)("Clear only successful")),9,Vi)],512),e.createElementVNode("div",Ni,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(i),I=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__upload-modal__file-entry",key:I.id},[e.createElementVNode("span",{class:e.normalizeClass(["vuefinder__upload-modal__file-icon",e.unref(E)(I)])},[e.createElementVNode("span",{class:"vuefinder__upload-modal__file-icon-text",textContent:e.toDisplayString(e.unref(P)(I))},null,8,Ci)],2),e.createElementVNode("div",Bi,[e.createElementVNode("div",$i,e.toDisplayString(e.unref(En)(I.name,40))+" ("+e.toDisplayString(I.size)+") ",1),e.createElementVNode("div",Di,e.toDisplayString(e.unref(En)(I.name,16))+" ("+e.toDisplayString(I.size)+") ",1),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__upload-modal__file-status",e.unref(E)(I)])},[e.createTextVNode(e.toDisplayString(I.statusName)+" ",1),I.status===e.unref(_).QUEUE_ENTRY_STATUS.UPLOADING?(e.openBlock(),e.createElementBlock("b",Ti,e.toDisplayString(I.percent),1)):e.createCommentVNode("",!0)],2)]),e.createElementVNode("button",{type:"button",class:e.normalizeClass(["vuefinder__upload-modal__file-remove",e.unref(f)?"disabled":""]),title:e.unref(o)("Delete"),disabled:e.unref(f),onClick:U=>e.unref(x)(I)},[...T[7]||(T[7]=[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"vuefinder__upload-modal__file-remove-icon"},[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])],10,Mi)]))),128)),e.unref(i).length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",Ai,e.toDisplayString(e.unref(o)("No files selected!")),1))]),e.unref(d).length?(e.openBlock(),e.createBlock(Ie,{key:0,onHidden:T[3]||(T[3]=I=>d.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(d)),1)]),_:1})):e.createCommentVNode("",!0)])]),e.createElementVNode("input",{ref_key:"internalFileInput",ref:s,type:"file",multiple:"",class:"hidden"},null,512),e.createElementVNode("input",{ref_key:"internalFolderInput",ref:l,type:"file",multiple:"",webkitdirectory:"",class:"hidden"},null,512)]),_:1}))}}),Fi={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function Oi(n,t){return e.openBlock(),e.createElementBlock("svg",Fi,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5m6 4.125 2.25 2.25m0 0 2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125"},null,-1)])])}const Wo={render:Oi},Ri={class:"vuefinder__unarchive-modal__content"},Hi={class:"vuefinder__unarchive-modal__items"},zi={key:0,class:"vuefinder__unarchive-modal__icon vuefinder__unarchive-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Pi={key:1,class:"vuefinder__unarchive-modal__icon vuefinder__unarchive-modal__icon--file",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Ui={class:"vuefinder__unarchive-modal__item-name"},ji={class:"vuefinder__unarchive-modal__info"},Xo=e.defineComponent({__name:"ModalUnarchive",setup(n){const t=e.inject("ServiceContainer"),o=t.fs,{t:r}=t.i18n,s=e.ref(t.modal.data.items[0]),l=e.ref(""),a=e.ref([]),u=()=>{t.emitter.emit("vf-fetch",{params:{q:"unarchive",m:"post",storage:o.path.storage,path:o.path.path},body:{item:s.value.path},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:r("The file unarchived.")})},onError:c=>{l.value=r(c.message)}})};return(c,i)=>(e.openBlock(),e.createBlock(Ae,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:u,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(r)("Unarchive")),1),e.createElementVNode("button",{type:"button",onClick:i[1]||(i[1]=d=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(r)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(ze,{icon:e.unref(Wo),title:e.unref(r)("Unarchive")},null,8,["icon","title"]),e.createElementVNode("div",Ri,[e.createElementVNode("div",Hi,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,d=>(e.openBlock(),e.createElementBlock("p",{class:"vuefinder__unarchive-modal__item",key:d.path},[d.type==="dir"?(e.openBlock(),e.createElementBlock("svg",zi,[...i[2]||(i[2]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",Pi,[...i[3]||(i[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),e.createElementVNode("span",Ui,e.toDisplayString(d.basename),1)]))),128)),e.createElementVNode("p",ji,e.toDisplayString(e.unref(r)("The archive will be unarchived at"))+" ("+e.toDisplayString(e.unref(o).path.path)+")",1),l.value.length?(e.openBlock(),e.createBlock(Ie,{key:0,onHidden:i[0]||(i[0]=d=>l.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(l.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),qi={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function Ki(n,t){return e.openBlock(),e.createElementBlock("svg",qi,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125"},null,-1)])])}const Qo={render:Ki},Gi={class:"vuefinder__archive-modal__content"},Yi={class:"vuefinder__archive-modal__form"},Wi={class:"vuefinder__archive-modal__files vf-scrollbar"},Xi={class:"vuefinder__archive-modal__file"},Qi={key:0,class:"vuefinder__archive-modal__icon vuefinder__archive-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Ji={key:1,class:"vuefinder__archive-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Zi={class:"vuefinder__archive-modal__file-name"},ec=["placeholder"],Jo=e.defineComponent({__name:"ModalArchive",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,s=e.ref(""),l=e.ref(""),a=e.ref(t.modal.data.items),u=()=>{a.value.length&&t.emitter.emit("vf-fetch",{params:{q:"archive",m:"post",storage:r.path.storage,path:r.path.path},body:{items:a.value.map(({path:c,type:i})=>({path:c,type:i})),name:s.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:o("The file(s) archived.")})},onError:c=>{l.value=o(c.message)}})};return(c,i)=>(e.openBlock(),e.createBlock(Ae,null,{buttons:e.withCtx(()=>[e.createElementVNode("button",{type:"button",onClick:u,class:"vf-btn vf-btn-primary"},e.toDisplayString(e.unref(o)("Archive")),1),e.createElementVNode("button",{type:"button",onClick:i[2]||(i[2]=d=>e.unref(t).modal.close()),class:"vf-btn vf-btn-secondary"},e.toDisplayString(e.unref(o)("Cancel")),1)]),default:e.withCtx(()=>[e.createElementVNode("div",null,[e.createVNode(ze,{icon:e.unref(Qo),title:e.unref(o)("Archive the files")},null,8,["icon","title"]),e.createElementVNode("div",Gi,[e.createElementVNode("div",Yi,[e.createElementVNode("div",Wi,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,d=>(e.openBlock(),e.createElementBlock("p",Xi,[d.type==="dir"?(e.openBlock(),e.createElementBlock("svg",Qi,[...i[3]||(i[3]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):(e.openBlock(),e.createElementBlock("svg",Ji,[...i[4]||(i[4]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),e.createElementVNode("span",Zi,e.toDisplayString(d.basename),1)]))),256))]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":i[0]||(i[0]=d=>s.value=d),onKeyup:e.withKeys(u,["enter"]),class:"vuefinder__archive-modal__input",placeholder:e.unref(o)("Archive name. (.zip file will be created)"),type:"text"},null,40,ec),[[e.vModelText,s.value]]),l.value.length?(e.openBlock(),e.createBlock(Ie,{key:0,onHidden:i[1]||(i[1]=d=>l.value=""),error:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(l.value),1)]),_:1})):e.createCommentVNode("",!0)])])])]),_:1}))}}),tc={xmlns:"http://www.w3.org/2000/svg",fill:"none",class:"animate-spin p-0.5 h-5 w-5 text-white ml-auto",viewBox:"0 0 24 24"};function nc(n,t){return e.openBlock(),e.createElementBlock("svg",tc,[...t[0]||(t[0]=[e.createElementVNode("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",class:"opacity-25 stroke-blue-900 dark:stroke-blue-100"},null,-1),e.createElementVNode("path",{fill:"currentColor",d:"M4 12a8 8 0 0 1 8-8V0C5.373 0 0 5.373 0 12zm2 5.291A7.96 7.96 0 0 1 4 12H0c0 3.042 1.135 5.824 3 7.938z",class:"opacity-75"},null,-1)])])}const Hn={render:nc},oc={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function rc(n,t){return e.openBlock(),e.createElementBlock("svg",oc,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"},null,-1)])])}const sc={render:rc},lc={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"};function ac(n,t){return e.openBlock(),e.createElementBlock("svg",lc,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"},null,-1)])])}const ic={render:ac},cc={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function dc(n,t){return e.openBlock(),e.createElementBlock("svg",cc,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25zm0 9.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18zM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25zm0 9.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18z"},null,-1)])])}const uc={render:dc},fc={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"};function mc(n,t){return e.openBlock(),e.createElementBlock("svg",fc,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75"},null,-1)])])}const vc={render:mc},pc={class:"vuefinder__toolbar"},_c={key:0,class:"vuefinder__toolbar__actions"},hc=["title"],gc=["title"],yc=["title"],wc=["title"],kc=["title"],bc=["title"],Ec=["title"],Sc={key:1,class:"vuefinder__toolbar__search-results"},xc={class:"pl-2"},Vc={class:"dark:bg-gray-700 bg-gray-200 text-xs px-2 py-1 rounded"},Nc={class:"vuefinder__toolbar__controls"},Cc=["title"],Bc=["title"],$c=e.defineComponent({__name:"Toolbar",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,s=t.config,{query:l}=t.search;e.watch(()=>s.fullScreen,()=>{if(s.fullScreen){const u=document.querySelector("body");u&&(u.style.overflow="hidden")}else{const u=document.querySelector("body");u&&(u.style.overflow="")}t.emitter.emit("vf-fullscreen-toggle")});const a=()=>{s.set("view",s.view==="list"?"grid":"list")};return(u,c)=>(e.openBlock(),e.createElementBlock("div",pc,[e.unref(l).length?(e.openBlock(),e.createElementBlock("div",Sc,[e.createElementVNode("div",xc,[e.createTextVNode(e.toDisplayString(e.unref(o)("Search results for"))+" ",1),e.createElementVNode("span",Vc,e.toDisplayString(e.unref(l)),1)]),e.unref(s).loadingIndicator==="circular"&&e.unref(r).isLoading()?(e.openBlock(),e.createBlock(e.unref(Hn),{key:0})):e.createCommentVNode("",!0)])):(e.openBlock(),e.createElementBlock("div",_c,[e.unref(t).features.includes(e.unref(Z).NEW_FOLDER)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"mx-1.5",title:e.unref(o)("New Folder"),onClick:c[0]||(c[0]=i=>e.unref(t).modal.open(Ko,{items:e.unref(r).selectedItems}))},[e.createVNode(e.unref(qo))],8,hc)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(Z).NEW_FILE)?(e.openBlock(),e.createElementBlock("div",{key:1,class:"mx-1.5",title:e.unref(o)("New File"),onClick:c[1]||(c[1]=i=>e.unref(t).modal.open(gi,{items:e.unref(r).selectedItems}))},[e.createVNode(e.unref(Go))],8,gc)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(Z).RENAME)?(e.openBlock(),e.createElementBlock("div",{key:2,class:"mx-1.5",title:e.unref(o)("Rename"),onClick:c[2]||(c[2]=i=>e.unref(r).selectedItems.length!==1||e.unref(t).modal.open(Rn,{items:e.unref(r).selectedItems}))},[e.createVNode(e.unref(Uo),{class:e.normalizeClass(e.unref(r).selectedItems.length===1?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,yc)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(Z).DELETE)?(e.openBlock(),e.createElementBlock("div",{key:3,class:"mx-1.5",title:e.unref(o)("Delete"),onClick:c[3]||(c[3]=i=>!e.unref(r).selectedItems.length||e.unref(t).modal.open(On,{items:e.unref(r).selectedItems}))},[e.createVNode(e.unref(Po),{class:e.normalizeClass(e.unref(r).selectedItems.length?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,wc)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(Z).UPLOAD)?(e.openBlock(),e.createElementBlock("div",{key:4,class:"mx-1.5",title:e.unref(o)("Upload"),onClick:c[4]||(c[4]=i=>e.unref(t).modal.open(Li,{items:e.unref(r).selectedItems}))},[e.createVNode(e.unref(Yo))],8,kc)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(Z).UNARCHIVE)&&e.unref(r).selectedItems.length===1&&e.unref(r).selectedItems[0].mime_type==="application/zip"?(e.openBlock(),e.createElementBlock("div",{key:5,class:"mx-1.5",title:e.unref(o)("Unarchive"),onClick:c[5]||(c[5]=i=>!e.unref(r).selectedItems.length||e.unref(t).modal.open(Xo,{items:e.unref(r).selectedItems}))},[e.createVNode(e.unref(Wo),{class:e.normalizeClass(e.unref(r).selectedItems.length?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,bc)):e.createCommentVNode("",!0),e.unref(t).features.includes(e.unref(Z).ARCHIVE)?(e.openBlock(),e.createElementBlock("div",{key:6,class:"mx-1.5",title:e.unref(o)("Archive"),onClick:c[6]||(c[6]=i=>!e.unref(r).selectedItems.length||e.unref(t).modal.open(Jo,{items:e.unref(r).selectedItems}))},[e.createVNode(e.unref(Qo),{class:e.normalizeClass(e.unref(r).selectedItems.length?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,Ec)):e.createCommentVNode("",!0)])),e.createElementVNode("div",Nc,[e.unref(t).features.includes(e.unref(Z).FULL_SCREEN)?(e.openBlock(),e.createElementBlock("div",{key:0,onClick:c[7]||(c[7]=i=>e.unref(s).toggle("fullScreen")),class:"mx-1.5",title:e.unref(o)("Toggle Full Screen")},[e.unref(s).fullScreen?(e.openBlock(),e.createBlock(e.unref(ic),{key:0})):(e.openBlock(),e.createBlock(e.unref(sc),{key:1}))],8,Cc)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"mx-1.5",title:e.unref(o)("Change View"),onClick:c[8]||(c[8]=i=>e.unref(l).length||a())},[e.unref(s).view==="grid"?(e.openBlock(),e.createBlock(e.unref(uc),{key:0,class:e.normalizeClass(["vf-toolbar-icon",e.unref(l).length?"vf-toolbar-icon-disabled":""])},null,8,["class"])):e.createCommentVNode("",!0),e.unref(s).view==="list"?(e.openBlock(),e.createBlock(e.unref(vc),{key:1,class:e.normalizeClass(["vf-toolbar-icon",e.unref(l).length?"vf-toolbar-icon-disabled":""])},null,8,["class"])):e.createCommentVNode("",!0)],8,Bc)])]))}}),Dc=(n,t=0,o=!1)=>{let r;return(...s)=>{o&&!r&&n(...s),clearTimeout(r),r=setTimeout(()=>{n(...s)},t)}},io=(n,t,o)=>{const r=e.ref(n);return e.customRef((s,l)=>({get(){return s(),r.value},set:Dc(a=>{r.value=a,l()},t,!1)}))},Tc={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer",viewBox:"-40 -40 580 580"};function Mc(n,t){return e.openBlock(),e.createElementBlock("svg",Tc,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M463.5 224h8.5c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2S461.9 48.1 455 55l-41.6 41.6c-87.6-86.5-228.7-86.2-315.8 1-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2S334.3 224 344 224z"},null,-1)])])}const Ac={render:Mc},Ic={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-0.5 rounded",viewBox:"0 0 20 20"};function Lc(n,t){return e.openBlock(),e.createElementBlock("svg",Ic,[...t[0]||(t[0]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 9.707a1 1 0 0 1 0-1.414l4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1-1.414 1.414L11 7.414V15a1 1 0 1 1-2 0V7.414L6.707 9.707a1 1 0 0 1-1.414 0",class:"pointer-events-none","clip-rule":"evenodd"},null,-1)])])}const Fc={render:Lc},Oc={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer",viewBox:"0 0 24 24"};function Rc(n,t){return e.openBlock(),e.createElementBlock("svg",Oc,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1)])])}const Hc={render:Rc},zc={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-gray-800 cursor-pointer",viewBox:"0 0 20 20"};function Pc(n,t){return e.openBlock(),e.createElementBlock("svg",zc,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M10.707 2.293a1 1 0 0 0-1.414 0l-7 7a1 1 0 0 0 1.414 1.414L4 10.414V17a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-6.586l.293.293a1 1 0 0 0 1.414-1.414z",class:"pointer-events-none"},null,-1)])])}const Uc={render:Pc},jc={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 m-auto stroke-gray-400 fill-gray-100 dark:stroke-gray-400 dark:fill-gray-400/20",viewBox:"0 0 20 20"};function qc(n,t){return e.openBlock(),e.createElementBlock("svg",jc,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607"},null,-1)])])}const Kc={render:qc},Gc={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"w-6 h-6 cursor-pointer",viewBox:"0 0 24 24"};function Yc(n,t){return e.openBlock(),e.createElementBlock("svg",Gc,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1)])])}const Wc={render:Yc},Xc={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",viewBox:"0 0 24 24"};function Qc(n,t){return e.openBlock(),e.createElementBlock("svg",Xc,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-6l-2-2H5a2 2 0 0 0-2 2"},null,-1)])])}const Jt={render:Qc},Jc={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"h-6 w-6 p-1 rounded text-slate-700 dark:text-neutral-300 cursor-pointer",viewBox:"0 0 24 24"};function Zc(n,t){return e.openBlock(),e.createElementBlock("svg",Jc,[...t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M9 6h11M12 12h8M15 18h5M5 6v.01M8 12v.01M11 18v.01"},null,-1)])])}const ed={render:Zc},td={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 rounded text-slate-700 hover:bg-neutral-100 dark:fill-neutral-300 dark:hover:bg-gray-800 cursor-pointer",viewBox:"0 0 448 512"};function nd(n,t){return e.openBlock(),e.createElementBlock("svg",td,[...t[0]||(t[0]=[e.createElementVNode("path",{d:"M8 256a56 56 0 1 1 112 0 56 56 0 1 1-112 0m160 0a56 56 0 1 1 112 0 56 56 0 1 1-112 0m216-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112"},null,-1)])])}const od={render:nd};function rd(n){const[t,o]=sd(n);if(!o||o==="/")return t+"://";const r=o.replace(/\/+$/,""),s=r.lastIndexOf("/");return s===0?t+"://":t+":/"+r.slice(0,s)}function sd(n){const t=n.indexOf(":/");return t===-1?[void 0,n]:[n.slice(0,t),n.slice(t+2)||"/"]}function kt(n,t=[]){const o="vfDragEnterCounter",r=n.fs;function s(i,d){i.preventDefault(),r.getDraggedItem()===d.path||!d||d.type!=="dir"||r.selectedItems.some(p=>p.path===d.path||rd(p.path)===d.path)?i.dataTransfer&&(i.dataTransfer.dropEffect="none",i.dataTransfer.effectAllowed="none"):(i.dataTransfer&&(i.dataTransfer.dropEffect="copy",i.dataTransfer.effectAllowed="all"),i.currentTarget.classList.add(...t))}function l(i){i.preventDefault();const d=i.currentTarget,f=Number(d.dataset[o]||0);d.dataset[o]=String(f+1)}function a(i){i.preventDefault();const d=i.currentTarget,p=Number(d.dataset[o]||0)-1;p<=0?(delete d.dataset[o],d.classList.remove(...t)):d.dataset[o]=String(p)}function u(i,d){if(!d)return;i.preventDefault();const f=i.currentTarget;delete f.dataset[o],f.classList.remove(...t);const p=i.dataTransfer?.getData("items")||"[]",v=JSON.parse(p).map(m=>r.sortedFiles.find(g=>g.path===m));r.clearDraggedItem(),n.modal.open(bn,{items:{from:v,to:d}})}function c(i){return{dragover:d=>s(d,i),dragenter:l,dragleave:a,drop:d=>u(d,i)}}return{events:c}}const ld={class:"vuefinder__breadcrumb__container"},ad=["title"],id=["title"],cd=["title"],dd=["title"],ud={class:"vuefinder__breadcrumb__list"},fd={key:0,class:"vuefinder__breadcrumb__hidden-list"},md={class:"relative"},vd=["title","onClick"],pd={class:"vuefinder__breadcrumb__search-mode"},_d=["placeholder"],hd=["onClick"],gd={class:"vuefinder__breadcrumb__hidden-item-content"},yd={class:"vuefinder__breadcrumb__hidden-item-text"},wd=e.defineComponent({__name:"Breadcrumb",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,{searchMode:r,enterSearchMode:s,exitSearchMode:l,setQuery:a}=t.search,u=t.fs,c=t.config,i=e.ref(null),d=io(0,100),f=e.ref(5),p=e.ref(!1),_=e.computed(()=>u.path.breadcrumb);function v(F,A){return F.length>A?[F.slice(-A),F.slice(0,-A)]:[F,[]]}const m=e.computed(()=>v(_.value,f.value)[0]),g=e.computed(()=>v(_.value,f.value)[1]);e.watch(d,()=>{if(!i.value)return;const F=i.value.children;let A=0,z=0;const D=5,O=1;f.value=D,e.nextTick(()=>{for(let K=F.length-1;K>=0;K--){const k=F[K];if(A+k.offsetWidth>d.value-40)break;A+=parseInt(k.offsetWidth.toString(),10),z++}z<O&&(z=O),z>D&&(z=D),f.value=z})});const x=()=>{i.value&&(d.value=i.value.offsetWidth)},H=e.ref(null);e.onMounted(()=>{H.value=new ResizeObserver(x),i.value&&H.value.observe(i.value)}),e.onUnmounted(()=>{H.value&&H.value.disconnect()});const N=kt(t,["bg-blue-200","dark:bg-slate-600"]);function E(F=null){F??=_.value.length-2;const A={basename:u.path.storage,extension:"",path:u.path.storage+"://",storage:u.path.storage,type:"dir",file_size:null,last_modified:null,mime_type:null,visibility:""};return _.value[F]??A}const P=()=>{l(),t.emitter.emit("vf-fetch",{params:{q:"index",storage:u.path.storage,path:u.path.path}})},L=()=>{l(),m.value.length>0&&!r.value&&t.emitter.emit("vf-fetch",{params:{q:"index",storage:u.path.storage,path:_.value[_.value.length-2]?.path??u.path.storage+"://"}})},T=F=>{t.emitter.emit("vf-fetch",{params:{q:"index",storage:u.path.storage,path:F.path}}),p.value=!1},I=()=>{p.value&&(p.value=!1)},U={mounted(F,A){F.clickOutsideEvent=function(z){F===z.target||F.contains(z.target)||A.value()},document.body.addEventListener("click",F.clickOutsideEvent)},beforeUnmount(F){document.body.removeEventListener("click",F.clickOutsideEvent)}},S=()=>{c.toggle("showTreeView")},w=e.ref(null),y=()=>{t.features.includes(Z.SEARCH)&&(s(),e.nextTick(()=>{w.value&&w.value.focus()}))},V=io("",400);e.watch(V,F=>{t.emitter.emit("vf-toast-clear"),a(F)}),e.watch(()=>r.value,F=>{F&&e.nextTick(()=>{w.value&&w.value.focus()})}),t.emitter.on("vf-search-exit",()=>{l()});const $=()=>{V.value===""&&l()},M=e.ref({x:0,y:0}),j=F=>{if(F.currentTarget instanceof HTMLElement){const{x:A,y:z,height:D}=F.currentTarget.getBoundingClientRect();M.value={x:A,y:z+D}}p.value=!p.value};return(F,A)=>(e.openBlock(),e.createElementBlock("div",ld,[e.createElementVNode("span",{title:e.unref(o)("Toggle Tree View")},[e.createVNode(e.unref(ed),{onClick:S,class:e.normalizeClass(["vuefinder__breadcrumb__toggle-tree",e.unref(c).showTreeView?"vuefinder__breadcrumb__toggle-tree--active":""])},null,8,["class"])],8,ad),e.createElementVNode("span",{title:e.unref(o)("Go up a directory")},[e.createVNode(e.unref(Fc),e.mergeProps(e.toHandlers(_.value.length&&!e.unref(r)?e.unref(N).events(E()):{}),{onClick:L,class:_.value.length&&!e.unref(r)?"vuefinder__breadcrumb__go-up--active":"vuefinder__breadcrumb__go-up--inactive"}),null,16,["class"])],8,id),e.unref(u).isLoading()?(e.openBlock(),e.createElementBlock("span",{key:1,title:e.unref(o)("Cancel")},[e.createVNode(e.unref(Hc),{onClick:A[0]||(A[0]=z=>e.unref(t).emitter.emit("vf-fetch-abort"))})],8,dd)):(e.openBlock(),e.createElementBlock("span",{key:0,title:e.unref(o)("Refresh")},[e.createVNode(e.unref(Ac),{onClick:P})],8,cd)),e.withDirectives(e.createElementVNode("div",{onClick:e.withModifiers(y,["self"]),class:"group vuefinder__breadcrumb__search-container"},[e.createElementVNode("div",null,[e.createVNode(e.unref(Uc),e.mergeProps(e.toHandlers(e.unref(N).events(E(-1))),{onClick:A[1]||(A[1]=z=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",storage:e.unref(u).path.storage}}))}),null,16)]),e.createElementVNode("div",ud,[g.value.length?e.withDirectives((e.openBlock(),e.createElementBlock("div",fd,[A[6]||(A[6]=e.createElementVNode("div",{class:"vuefinder__breadcrumb__separator"},"/",-1)),e.createElementVNode("div",md,[e.createElementVNode("span",{onDragenter:A[2]||(A[2]=z=>p.value=!0),onClick:j,class:"vuefinder__breadcrumb__hidden-toggle"},[e.createVNode(e.unref(od),{class:"vuefinder__breadcrumb__hidden-toggle-icon"})],32)])])),[[U,I]]):e.createCommentVNode("",!0)]),e.createElementVNode("div",{ref_key:"breadcrumbContainer",ref:i,class:"vuefinder__breadcrumb__visible-list",onClick:A[3]||(A[3]=e.withModifiers((...z)=>e.unref(s)&&e.unref(s)(...z),["self"]))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.value,(z,D)=>(e.openBlock(),e.createElementBlock("div",{key:D},[A[7]||(A[7]=e.createElementVNode("span",{class:"vuefinder__breadcrumb__separator"},"/",-1)),e.createElementVNode("span",e.mergeProps(e.toHandlers(e.unref(N).events(z),!0),{class:"vuefinder__breadcrumb__item",title:z.basename,onClick:O=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",storage:e.unref(u).path.storage,path:z.path}})}),e.toDisplayString(z.name),17,vd)]))),128))],512),e.unref(c).loadingIndicator==="circular"&&e.unref(u).isLoading()?(e.openBlock(),e.createBlock(e.unref(Hn),{key:0})):e.createCommentVNode("",!0)],512),[[e.vShow,!e.unref(r)]]),e.withDirectives(e.createElementVNode("div",pd,[e.createElementVNode("div",null,[e.createVNode(e.unref(Kc))]),e.withDirectives(e.createElementVNode("input",{ref_key:"searchInput",ref:w,onKeydown:A[4]||(A[4]=e.withKeys((...z)=>e.unref(l)&&e.unref(l)(...z),["esc"])),onBlur:$,"onUpdate:modelValue":A[5]||(A[5]=z=>e.isRef(V)?V.value=z:null),placeholder:e.unref(o)("Search anything.."),class:"vuefinder__breadcrumb__search-input",type:"text"},null,40,_d),[[e.vModelText,e.unref(V)]]),e.createVNode(e.unref(Wc),{onClick:e.unref(l)},null,8,["onClick"])],512),[[e.vShow,e.unref(r)]]),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.withDirectives(e.createElementVNode("div",{style:e.normalizeStyle({position:"absolute",top:M.value.y+"px",left:M.value.x+"px"}),class:"vuefinder vuefinder__breadcrumb__hidden-dropdown"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(g.value,(z,D)=>(e.openBlock(),e.createElementBlock("div",e.mergeProps({key:D},e.toHandlers(e.unref(N).events(z),!0),{onClick:O=>T(z),class:"vuefinder__breadcrumb__hidden-item"}),[e.createElementVNode("div",gd,[e.createElementVNode("span",null,[e.createVNode(e.unref(Jt),{class:"vuefinder__breadcrumb__hidden-item-icon"})]),A[8]||(A[8]=e.createTextVNode()),e.createElementVNode("span",yd,e.toDisplayString(z.name),1)])],16,hd))),128))],4),[[e.vShow,p.value]])]))]))}});/*! @viselect/vanilla v3.9.0 MIT | https://github.com/Simonwep/selection/tree/master/packages/vanilla */let kd=class{constructor(){this._listeners=new Map,this.on=this.addEventListener,this.off=this.removeEventListener,this.emit=this.dispatchEvent}addEventListener(t,o){const r=this._listeners.get(t)??new Set;return this._listeners.set(t,r),r.add(o),this}removeEventListener(t,o){var r;return(r=this._listeners.get(t))==null||r.delete(o),this}dispatchEvent(t,...o){let r=!0;for(const s of this._listeners.get(t)??[])r=s(...o)!==!1&&r;return r}unbindAllListeners(){this._listeners.clear()}};const co=(n,t="px")=>typeof n=="number"?n+t:n,je=({style:n},t,o)=>{if(typeof t=="object")for(const[r,s]of Object.entries(t))s!==void 0&&(n[r]=co(s));else o!==void 0&&(n[t]=co(o))},uo=(n=0,t=0,o=0,r=0)=>{const s={x:n,y:t,width:o,height:r,top:t,left:n,right:n+o,bottom:t+r};return{...s,toJSON:()=>JSON.stringify(s)}},bd=n=>{let t,o=-1,r=!1;return{next:(...s)=>{t=s,r||(r=!0,o=requestAnimationFrame(()=>{n(...t),r=!1}))},cancel:()=>{cancelAnimationFrame(o),r=!1}}},fo=(n,t,o="touch")=>{switch(o){case"center":{const r=t.left+t.width/2,s=t.top+t.height/2;return r>=n.left&&r<=n.right&&s>=n.top&&s<=n.bottom}case"cover":return t.left>=n.left&&t.top>=n.top&&t.right<=n.right&&t.bottom<=n.bottom;case"touch":return n.right>=t.left&&n.left<=t.right&&n.bottom>=t.top&&n.top<=t.bottom}},Ed=()=>matchMedia("(hover: none), (pointer: coarse)").matches,Sd=()=>"safari"in window,Sn=n=>Array.isArray(n)?n:[n],Zo=n=>(t,o,r,s={})=>{(t instanceof HTMLCollection||t instanceof NodeList)&&(t=Array.from(t)),o=Sn(o),t=Sn(t);for(const l of t)if(l)for(const a of o)l[n](a,r,{capture:!1,...s})},qe=Zo("addEventListener"),xe=Zo("removeEventListener"),Lt=n=>{var t;const{clientX:o,clientY:r,target:s}=((t=n.touches)==null?void 0:t[0])??n;return{x:o,y:r,target:s}},Ze=(n,t=document)=>Sn(n).map(o=>typeof o=="string"?Array.from(t.querySelectorAll(o)):o instanceof Element?o:null).flat().filter(Boolean),xd=(n,t)=>t.some(o=>typeof o=="number"?n.button===o:typeof o=="object"?o.button!==n.button?!1:o.modifiers.every(r=>{switch(r){case"alt":return n.altKey;case"ctrl":return n.ctrlKey||n.metaKey;case"shift":return n.shiftKey}}):!1),{abs:We,max:mo,min:vo,ceil:po}=Math,_o=(n=[])=>({stored:n,selected:[],touched:[],changed:{added:[],removed:[]}}),er=class extends kd{constructor(t){var o,r,s,l,a;super(),this._selection=_o(),this._targetBoundaryScrolled=!0,this._selectables=[],this._areaLocation={y1:0,x2:0,y2:0,x1:0},this._areaRect=uo(),this._singleClick=!0,this._scrollAvailable=!0,this._scrollingActive=!1,this._scrollSpeed={x:0,y:0},this._scrollDelta={x:0,y:0},this._lastMousePosition={x:0,y:0},this.enable=this._toggleStartEvents,this.disable=this._toggleStartEvents.bind(this,!1),this._options={selectionAreaClass:"selection-area",selectionContainerClass:void 0,selectables:[],document:window.document,startAreas:["html"],boundaries:["html"],container:"body",...t,behaviour:{overlap:"invert",intersect:"touch",triggers:[0],...t.behaviour,startThreshold:(o=t.behaviour)!=null&&o.startThreshold?typeof t.behaviour.startThreshold=="number"?t.behaviour.startThreshold:{x:10,y:10,...t.behaviour.startThreshold}:{x:10,y:10},scrolling:{speedDivider:10,manualSpeed:750,...(r=t.behaviour)==null?void 0:r.scrolling,startScrollMargins:{x:0,y:0,...(l=(s=t.behaviour)==null?void 0:s.scrolling)==null?void 0:l.startScrollMargins}}},features:{range:!0,touch:!0,deselectOnBlur:!1,...t.features,singleTap:{allow:!0,intersect:"native",...(a=t.features)==null?void 0:a.singleTap}}};for(const d of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))typeof this[d]=="function"&&(this[d]=this[d].bind(this));const{document:u,selectionAreaClass:c,selectionContainerClass:i}=this._options;this._area=u.createElement("div"),this._clippingElement=u.createElement("div"),this._clippingElement.appendChild(this._area),this._area.classList.add(c),i&&this._clippingElement.classList.add(i),je(this._area,{willChange:"top, left, bottom, right, width, height",top:0,left:0,position:"fixed"}),je(this._clippingElement,{overflow:"hidden",position:"fixed",transform:"translate3d(0, 0, 0)",pointerEvents:"none",zIndex:"1"}),this._frame=bd(d=>{this._recalculateSelectionAreaRect(),this._updateElementSelection(),this._emitEvent("move",d),this._redrawSelectionArea()}),this.enable()}_toggleStartEvents(t=!0){const{document:o,features:r}=this._options,s=t?qe:xe;s(o,"mousedown",this._onTapStart),r.touch&&s(o,"touchstart",this._onTapStart,{passive:!1})}_onTapStart(t,o=!1){const{x:r,y:s,target:l}=Lt(t),{document:a,startAreas:u,boundaries:c,features:i,behaviour:d}=this._options,f=l.getBoundingClientRect();if(t instanceof MouseEvent&&!xd(t,d.triggers))return;const p=Ze(u,a),_=Ze(c,a);this._targetElement=_.find(x=>fo(x.getBoundingClientRect(),f));const v=t.composedPath(),m=p.find(x=>v.includes(x));if(this._targetBoundary=_.find(x=>v.includes(x)),!this._targetElement||!m||!this._targetBoundary||!o&&this._emitEvent("beforestart",t)===!1)return;this._areaLocation={x1:r,y1:s,x2:0,y2:0};const g=a.scrollingElement??a.body;this._scrollDelta={x:g.scrollLeft,y:g.scrollTop},this._singleClick=!0,this.clearSelection(!1,!0),qe(a,["touchmove","mousemove"],this._delayedTapMove,{passive:!1}),qe(a,["mouseup","touchcancel","touchend"],this._onTapStop),qe(a,"scroll",this._onScroll),i.deselectOnBlur&&(this._targetBoundaryScrolled=!1,qe(this._targetBoundary,"scroll",this._onStartAreaScroll))}_onSingleTap(t){const{singleTap:{intersect:o},range:r}=this._options.features,s=Lt(t);let l;if(o==="native")l=s.target;else if(o==="touch"){this.resolveSelectables();const{x:u,y:c}=s;l=this._selectables.find(i=>{const{right:d,left:f,top:p,bottom:_}=i.getBoundingClientRect();return u<d&&u>f&&c<_&&c>p})}if(!l)return;for(this.resolveSelectables();!this._selectables.includes(l);)if(l.parentElement)l=l.parentElement;else{this._targetBoundaryScrolled||this.clearSelection();return}const{stored:a}=this._selection;if(this._emitEvent("start",t),t.shiftKey&&r&&this._latestElement){const u=this._latestElement,[c,i]=u.compareDocumentPosition(l)&4?[l,u]:[u,l],d=[...this._selectables.filter(f=>f.compareDocumentPosition(c)&4&&f.compareDocumentPosition(i)&2),c,i];this.select(d),this._latestElement=u}else a.includes(l)&&(a.length===1||t.ctrlKey||a.every(u=>this._selection.stored.includes(u)))?this.deselect(l):(this.select(l),this._latestElement=l)}_delayedTapMove(t){const{container:o,document:r,behaviour:{startThreshold:s}}=this._options,{x1:l,y1:a}=this._areaLocation,{x:u,y:c}=Lt(t);if(typeof s=="number"&&We(u+c-(l+a))>=s||typeof s=="object"&&We(u-l)>=s.x||We(c-a)>=s.y){if(xe(r,["mousemove","touchmove"],this._delayedTapMove,{passive:!1}),this._emitEvent("beforedrag",t)===!1){xe(r,["mouseup","touchcancel","touchend"],this._onTapStop);return}qe(r,["mousemove","touchmove"],this._onTapMove,{passive:!1}),je(this._area,"display","block"),Ze(o,r)[0].appendChild(this._clippingElement),this.resolveSelectables(),this._singleClick=!1,this._targetRect=this._targetElement.getBoundingClientRect(),this._scrollAvailable=this._targetElement.scrollHeight!==this._targetElement.clientHeight||this._targetElement.scrollWidth!==this._targetElement.clientWidth,this._scrollAvailable&&(qe(this._targetElement,"wheel",this._wheelScroll,{passive:!1}),qe(this._options.document,"keydown",this._keyboardScroll,{passive:!1}),this._selectables=this._selectables.filter(i=>this._targetElement.contains(i))),this._setupSelectionArea(),this._emitEvent("start",t),this._onTapMove(t)}this._handleMoveEvent(t)}_setupSelectionArea(){const{_clippingElement:t,_targetElement:o,_area:r}=this,s=this._targetRect=o.getBoundingClientRect();this._scrollAvailable?(je(t,{top:s.top,left:s.left,width:s.width,height:s.height}),je(r,{marginTop:-s.top,marginLeft:-s.left})):(je(t,{top:0,left:0,width:"100%",height:"100%"}),je(r,{marginTop:0,marginLeft:0}))}_onTapMove(t){const{_scrollSpeed:o,_areaLocation:r,_options:s,_frame:l}=this,{speedDivider:a}=s.behaviour.scrolling,u=this._targetElement,{x:c,y:i}=Lt(t);if(r.x2=c,r.y2=i,this._lastMousePosition.x=c,this._lastMousePosition.y=i,this._scrollAvailable&&!this._scrollingActive&&(o.y||o.x)){this._scrollingActive=!0;const d=()=>{if(!o.x&&!o.y){this._scrollingActive=!1;return}const{scrollTop:f,scrollLeft:p}=u;o.y&&(u.scrollTop+=po(o.y/a),r.y1-=u.scrollTop-f),o.x&&(u.scrollLeft+=po(o.x/a),r.x1-=u.scrollLeft-p),l.next(t),requestAnimationFrame(d)};requestAnimationFrame(d)}else l.next(t);this._handleMoveEvent(t)}_handleMoveEvent(t){const{features:o}=this._options;(o.touch&&Ed()||this._scrollAvailable&&Sd())&&t.preventDefault()}_onScroll(){const{_scrollDelta:t,_options:{document:o}}=this,{scrollTop:r,scrollLeft:s}=o.scrollingElement??o.body;this._areaLocation.x1+=t.x-s,this._areaLocation.y1+=t.y-r,t.x=s,t.y=r,this._setupSelectionArea(),this._frame.next(null)}_onStartAreaScroll(){this._targetBoundaryScrolled=!0,xe(this._targetElement,"scroll",this._onStartAreaScroll)}_wheelScroll(t){const{manualSpeed:o}=this._options.behaviour.scrolling,r=t.deltaY?t.deltaY>0?1:-1:0,s=t.deltaX?t.deltaX>0?1:-1:0;this._scrollSpeed.y+=r*o,this._scrollSpeed.x+=s*o,this._onTapMove(t),t.preventDefault()}_keyboardScroll(t){const{manualSpeed:o}=this._options.behaviour.scrolling,r=t.key==="ArrowLeft"?-1:t.key==="ArrowRight"?1:0,s=t.key==="ArrowUp"?-1:t.key==="ArrowDown"?1:0;this._scrollSpeed.x+=Math.sign(r)*o,this._scrollSpeed.y+=Math.sign(s)*o,t.preventDefault(),this._onTapMove({clientX:this._lastMousePosition.x,clientY:this._lastMousePosition.y,preventDefault:()=>{}})}_recalculateSelectionAreaRect(){const{_scrollSpeed:t,_areaLocation:o,_targetElement:r,_options:s}=this,{scrollTop:l,scrollHeight:a,clientHeight:u,scrollLeft:c,scrollWidth:i,clientWidth:d}=r,f=this._targetRect,{x1:p,y1:_}=o;let{x2:v,y2:m}=o;const{behaviour:{scrolling:{startScrollMargins:g}}}=s;v<f.left+g.x?(t.x=c?-We(f.left-v+g.x):0,v=v<f.left?f.left:v):v>f.right-g.x?(t.x=i-c-d?We(f.left+f.width-v-g.x):0,v=v>f.right?f.right:v):t.x=0,m<f.top+g.y?(t.y=l?-We(f.top-m+g.y):0,m=m<f.top?f.top:m):m>f.bottom-g.y?(t.y=a-l-u?We(f.top+f.height-m-g.y):0,m=m>f.bottom?f.bottom:m):t.y=0;const x=vo(p,v),H=vo(_,m),N=mo(p,v),E=mo(_,m);this._areaRect=uo(x,H,N-x,E-H)}_redrawSelectionArea(){const{x:t,y:o,width:r,height:s}=this._areaRect,{style:l}=this._area;l.left=`${t}px`,l.top=`${o}px`,l.width=`${r}px`,l.height=`${s}px`}_onTapStop(t,o){var r;const{document:s,features:l}=this._options,{_singleClick:a}=this;xe(this._targetElement,"scroll",this._onStartAreaScroll),xe(s,["mousemove","touchmove"],this._delayedTapMove),xe(s,["touchmove","mousemove"],this._onTapMove),xe(s,["mouseup","touchcancel","touchend"],this._onTapStop),xe(s,"scroll",this._onScroll),this._keepSelection(),t&&a&&l.singleTap.allow?this._onSingleTap(t):!a&&!o&&(this._updateElementSelection(),this._emitEvent("stop",t)),this._scrollSpeed.x=0,this._scrollSpeed.y=0,xe(this._targetElement,"wheel",this._wheelScroll,{passive:!0}),xe(this._options.document,"keydown",this._keyboardScroll,{passive:!0}),this._clippingElement.remove(),(r=this._frame)==null||r.cancel(),je(this._area,"display","none")}_updateElementSelection(){const{_selectables:t,_options:o,_selection:r,_areaRect:s}=this,{stored:l,selected:a,touched:u}=r,{intersect:c,overlap:i}=o.behaviour,d=i==="invert",f=[],p=[],_=[];for(let m=0;m<t.length;m++){const g=t[m];if(fo(s,g.getBoundingClientRect(),c)){if(a.includes(g))l.includes(g)&&!u.includes(g)&&u.push(g);else if(d&&l.includes(g)){_.push(g);continue}else p.push(g);f.push(g)}}d&&p.push(...l.filter(m=>!a.includes(m)));const v=i==="keep";for(let m=0;m<a.length;m++){const g=a[m];!f.includes(g)&&!(v&&l.includes(g))&&_.push(g)}r.selected=f,r.changed={added:p,removed:_},this._latestElement=void 0}_emitEvent(t,o){return this.emit(t,{event:o,store:this._selection,selection:this})}_keepSelection(){const{_options:t,_selection:o}=this,{selected:r,changed:s,touched:l,stored:a}=o,u=r.filter(c=>!a.includes(c));switch(t.behaviour.overlap){case"drop":{o.stored=[...u,...a.filter(c=>!l.includes(c))];break}case"invert":{o.stored=[...u,...a.filter(c=>!s.removed.includes(c))];break}case"keep":{o.stored=[...a,...r.filter(c=>!a.includes(c))];break}}}trigger(t,o=!0){this._onTapStart(t,o)}resolveSelectables(){this._selectables=Ze(this._options.selectables,this._options.document)}clearSelection(t=!0,o=!1){const{selected:r,stored:s,changed:l}=this._selection;l.added=[],l.removed.push(...r,...t?s:[]),o||(this._emitEvent("move",null),this._emitEvent("stop",null)),this._selection=_o(t?[]:s)}getSelection(){return this._selection.stored}getSelectionArea(){return this._area}getSelectables(){return this._selectables}setAreaLocation(t){Object.assign(this._areaLocation,t),this._redrawSelectionArea()}getAreaLocation(){return this._areaLocation}cancel(t=!1){this._onTapStop(null,!t)}destroy(){this.cancel(),this.disable(),this._clippingElement.remove(),super.unbindAllListeners()}select(t,o=!1){const{changed:r,selected:s,stored:l}=this._selection,a=Ze(t,this._options.document).filter(u=>!s.includes(u)&&!l.includes(u));return l.push(...a),s.push(...a),r.added.push(...a),r.removed=[],this._latestElement=void 0,o||(this._emitEvent("move",null),this._emitEvent("stop",null)),a}deselect(t,o=!1){const{selected:r,stored:s,changed:l}=this._selection,a=Ze(t,this._options.document).filter(u=>r.includes(u)||s.includes(u));this._selection.stored=s.filter(u=>!a.includes(u)),this._selection.selected=r.filter(u=>!a.includes(u)),this._selection.changed.added=[],this._selection.changed.removed.push(...a.filter(u=>!l.removed.includes(u))),this._latestElement=void 0,o||(this._emitEvent("move",null),this._emitEvent("stop",null))}};er.version="3.9.0";let Vd=er;function Nd(n,t){const{scrollContainer:o,itemWidth:r=100,rowHeight:s,overscan:l=2,containerPadding:a=48}=t,u=()=>typeof s=="number"?s:s.value,c=e.ref(0),i=e.ref(6),d=e.ref(600);let f=null;const p=e.computed(()=>Math.ceil(n.value.length/i.value)),_=e.computed(()=>p.value*u()),v=e.computed(()=>{const L=u(),T=Math.max(0,Math.floor(c.value/L)-l),I=Math.min(p.value,Math.ceil((c.value+d.value)/L)+l);return{start:T,end:I}}),m=e.computed(()=>{const{start:L,end:T}=v.value;return Array.from({length:T-L},(I,U)=>L+U)}),g=()=>d.value,x=()=>{if(o.value){const L=o.value.clientWidth-a;i.value=Math.max(Math.floor(L/r),2)}},H=L=>{const T=L.target;c.value=T.scrollTop};e.watch(()=>n.value.length,()=>{x()});const N=(L,T)=>{const I=T*i.value;return L.slice(I,I+i.value)},E=(L,T,I,U,S)=>{const w=[];for(let y=T;y<=I;y++)for(let V=U;V<=S;V++){const $=y*i.value+V;$<L.length&&L[$]&&w.push(L[$])}return w},P=L=>({row:Math.floor(L/i.value),col:L%i.value});return e.onMounted(async()=>{await e.nextTick(),o.value&&(d.value=o.value.clientHeight||600),x(),window.addEventListener("resize",()=>{o.value&&(d.value=o.value.clientHeight||600),x()}),o.value&&"ResizeObserver"in window&&(f=new ResizeObserver(L=>{const T=L[0];T&&(d.value=Math.round(T.contentRect.height)),x()}),f.observe(o.value))}),e.onUnmounted(()=>{window.removeEventListener("resize",x),f&&(f.disconnect(),f=null)}),{scrollTop:c,itemsPerRow:i,totalRows:p,totalHeight:_,visibleRange:v,visibleRows:m,updateItemsPerRow:x,handleScroll:H,getRowItems:N,getItemsInRange:E,getItemPosition:P,getContainerHeight:g}}function Cd(n){const{getItemPosition:t,getItemsInRange:o,getKey:r,selectionObject:s,rowHeight:l,itemWidth:a}=n,u=Math.floor(Math.random()*2**32).toString(),i=e.inject("ServiceContainer").fs,d=e.ref(new Set),f=e.ref(!1),p=e.ref(!1),_=e.ref(null),v=w=>w.map(y=>y.getAttribute("data-key")).filter(y=>!!y),m=w=>{w.selection.getSelection().forEach(y=>{w.selection.deselect(y,!0)})},g=w=>{i.selectedKeys.forEach(y=>{const V=document.querySelector(`[data-key="${y}"]`);V&&w.selection.select(V,!0)})},x=w=>{if(w.size===0)return null;const V=Array.from(w).map(A=>{const z=i.sortedFiles.findIndex(D=>r(D)===A);return t(z>=0?z:0)}),$=Math.min(...V.map(A=>A.row)),M=Math.max(...V.map(A=>A.row)),j=Math.min(...V.map(A=>A.col)),F=Math.max(...V.map(A=>A.col));return{minRow:$,maxRow:M,minCol:j,maxCol:F}},H=w=>{f.value=!1,!w.event?.metaKey&&!w.event?.ctrlKey&&(p.value=!0),w.selection.resolveSelectables(),m(w),g(w)},N=({event:w,selection:y})=>{const V=w;V&&"type"in V&&V.type==="touchend"&&V.preventDefault();const $=w;if(!$?.ctrlKey&&!$?.metaKey&&(i.selectedKeys.clear(),y.clearSelection(!0,!0)),d.value.clear(),$&&s.value){const M=s.value.getSelectables()[0]?.closest(".scroller-"+u);if(M){const j=M.getBoundingClientRect(),F=$.clientY-j.top+M.scrollTop,A=$.clientX-j.left,z=Math.floor(F/l.value),D=Math.floor(A/a);_.value={row:z,col:D}}}},E=w=>{const y=w.selection,V=v(w.store.changed.added),$=v(w.store.changed.removed);p.value=!1,f.value=!0,V.forEach(M=>{i.selectedKeys.has(M)||d.value.add(M),i.selectedKeys.add(M)}),$.forEach(M=>{document.querySelector(`[data-key="${M}"]`)&&i.sortedFiles.find(F=>r(F)===M)&&d.value.delete(M),i.selectedKeys.delete(M)}),y.resolveSelectables(),g(w)},P=()=>{d.value.clear()},L=w=>{if(w.event&&_.value&&d.value.size>0){const V=Array.from(d.value).map($=>{const M=i.sortedFiles.findIndex(j=>r(j)===$);return M>=0?t(M):null}).filter($=>$!==null);if(V.length>0){const $=[...V,_.value],M={minRow:Math.min(...$.map(j=>j.row)),maxRow:Math.max(...$.map(j=>j.row)),minCol:Math.min(...$.map(j=>j.col)),maxCol:Math.max(...$.map(j=>j.col))};o(i.sortedFiles,M.minRow,M.maxRow,M.minCol,M.maxCol).forEach(j=>{const F=r(j);document.querySelector(`[data-key="${F}"]`)||i.select(F)})}}},T=w=>{L(w),m(w),g(w),i.setSelectedCount(i.selectedKeys.size),f.value=!1,_.value=null},I=()=>{s.value=new Vd({selectables:[".file-item-"+u],boundaries:[".scroller-"+u],selectionContainerClass:"selection-area-container",behaviour:{overlap:"invert",intersect:"touch",startThreshold:0,triggers:[0],scrolling:{speedDivider:10,manualSpeed:750,startScrollMargins:{x:0,y:10}}},features:{touch:!0,range:!0,deselectOnBlur:!0,singleTap:{allow:!1,intersect:"native"}}}),s.value.on("beforestart",H),s.value.on("start",N),s.value.on("move",E),s.value.on("stop",T)},U=()=>{s.value&&(s.value.destroy(),s.value=null)},S=w=>{p.value&&(s.value?.clearSelection(),P(),p.value=!1);const y=w;!d.value.size&&!p.value&&!y?.ctrlKey&&!y?.metaKey&&(i.clearSelection(),s.value?.clearSelection())};return e.onMounted(()=>{const w=y=>{!y.buttons&&f.value&&(f.value=!1)};document.addEventListener("dragleave",w),e.onUnmounted(()=>{document.removeEventListener("dragleave",w)})}),{isDragging:f,selectionStarted:p,explorerId:u,extractIds:v,cleanupSelection:m,refreshSelection:g,getSelectionRange:x,selectSelectionRange:L,initializeSelectionArea:I,destroySelectionArea:U,handleContentClick:S}}const Bd={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 20 20"};function $d(n,t){return e.openBlock(),e.createElementBlock("svg",Bd,[...t[0]||(t[0]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 0 1 1.414 0L10 10.586l3.293-3.293a1 1 0 1 1 1.414 1.414l-4 4a1 1 0 0 1-1.414 0l-4-4a1 1 0 0 1 0-1.414","clip-rule":"evenodd"},null,-1)])])}const Dd={render:$d},Td={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 20 20"};function Md(n,t){return e.openBlock(),e.createElementBlock("svg",Td,[...t[0]||(t[0]=[e.createElementVNode("path",{"fill-rule":"evenodd",d:"M14.707 12.707a1 1 0 0 1-1.414 0L10 9.414l-3.293 3.293a1 1 0 0 1-1.414-1.414l4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1 0 1.414","clip-rule":"evenodd"},null,-1)])])}const Ad={render:Md},Ft=e.defineComponent({__name:"SortIcon",props:{direction:{}},setup(n){return(t,o)=>(e.openBlock(),e.createElementBlock("div",null,[n.direction==="asc"?(e.openBlock(),e.createBlock(e.unref(Dd),{key:0})):e.createCommentVNode("",!0),n.direction==="desc"?(e.openBlock(),e.createBlock(e.unref(Ad),{key:1})):e.createCommentVNode("",!0)]))}}),Id={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"absolute h-6 w-6 md:h-12 md:w-12 m-auto stroke-neutral-500 fill-white dark:fill-gray-700 dark:stroke-gray-600 z-10",viewBox:"0 0 24 24"};function Ld(n,t){return e.openBlock(),e.createElementBlock("svg",Id,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 0 0 2-2V9.414a1 1 0 0 0-.293-.707l-5.414-5.414A1 1 0 0 0 12.586 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2"},null,-1)])])}const Fd={render:Ld},Od={class:"vuefinder__drag-item__container"},Rd={class:"vuefinder__drag-item__count"},Hd=e.defineComponent({__name:"DragItem",props:{count:{}},setup(n){const t=n;return(o,r)=>(e.openBlock(),e.createElementBlock("div",Od,[e.createVNode(e.unref(Fd)),e.createElementVNode("div",Rd,e.toDisplayString(t.count),1)]))}}),zd={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"text-neutral-500",viewBox:"0 0 24 24"};function Pd(n,t){return e.openBlock(),e.createElementBlock("svg",zd,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 0 0 2-2V9.414a1 1 0 0 0-.293-.707l-5.414-5.414A1 1 0 0 0 12.586 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2"},null,-1)])])}const Ud={render:Pd},jd={key:3,class:"vuefinder__item-icon__extension"},ho=e.defineComponent({__name:"ItemIcon",props:{item:{},ext:{type:Boolean},small:{type:Boolean}},setup(n){const t=n,o=e.inject("ServiceContainer"),r=o.customIcon?.(o,t.item);return(s,l)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__item-icon",n.small?"vuefinder__item-icon--small":"vuefinder__item-icon--large"])},[e.unref(r)?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(r).is),e.normalizeProps(e.mergeProps({key:0},e.unref(r).props||{})),null,16)):n.item.type==="dir"?(e.openBlock(),e.createBlock(e.unref(Jt),{key:1})):(e.openBlock(),e.createBlock(e.unref(Ud),{key:2})),!e.unref(r)&&n.ext&&n.item.type!=="dir"&&n.item.extension?(e.openBlock(),e.createElementBlock("div",jd,e.toDisplayString(n.item.extension.substring(0,3)),1)):e.createCommentVNode("",!0)],2))}}),qd={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"h-5 w-5",viewBox:"0 0 24 24"};function Kd(n,t){return e.openBlock(),e.createElementBlock("svg",qd,[...t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"m15 4.5-4 4L7 10l-1.5 1.5 7 7L14 17l1.5-4 4-4M9 15l-4.5 4.5M14.5 4 20 9.5"},null,-1)])])}const tr={render:Kd},Gd=["data-key","data-row","data-col","draggable"],Yd={key:0},Wd={class:"vuefinder__explorer__item-grid-content"},Xd=["data-src","alt"],Qd={class:"vuefinder__explorer__item-title"},Jd={key:1,class:"vuefinder__explorer__item-list-content"},Zd={class:"vuefinder__explorer__item-list-name"},eu={class:"vuefinder__explorer__item-list-icon"},tu={class:"vuefinder__explorer__item-name"},nu={key:0,class:"vuefinder__explorer__item-path"},ou={class:"vuefinder__explorer__item-size"},ru={key:0},su={key:1,class:"vuefinder__explorer__item-date"},lu=e.defineComponent({__name:"FileItem",props:{item:{},view:{},compact:{type:Boolean},showThumbnails:{type:Boolean},isSelected:{type:Boolean},isDragging:{type:Boolean},rowIndex:{},colIndex:{},showPath:{type:Boolean},explorerId:{}},emits:["click","dblclick","contextmenu","dragstart","dragend"],setup(n,{emit:t}){const o=n,r=t,s=e.inject("ServiceContainer"),l=s.fs,a=s.config,u=e.computed(()=>["file-item-"+o.explorerId,o.view==="grid"?"vf-explorer-item-grid":"vf-explorer-item-list",o.isSelected?"vf-explorer-selected":""]),c=e.computed(()=>({opacity:o.isDragging||l.isCut(o.item.path)?.5:""}));let i=null;const d=e.ref(null);let f=!1;const p=()=>{i&&clearTimeout(i),_.value=!0},_=e.ref(!0),v=m=>{if(_.value=!1,i&&(m.preventDefault(),clearTimeout(i)),!f)f=!0,r("click",m),d.value=setTimeout(()=>f=!1,300);else return f=!1,r("dblclick",m),clearTimeout(i),!1;if(m.currentTarget&&m.currentTarget instanceof HTMLElement){const g=m.currentTarget.getBoundingClientRect();m.preventDefault(),i=setTimeout(()=>{let N=g.y+g.height;N+146>window.innerHeight-10&&(N=g.y-146),N<10&&(N=10);const E=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!0,view:window,button:2,buttons:0,clientX:g.x,clientY:N});m.target?.dispatchEvent(E)},300)}};return(m,g)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(u.value),style:e.normalizeStyle(c.value),"data-key":n.item.path,"data-row":n.rowIndex,"data-col":n.colIndex,draggable:_.value,onTouchstart:g[1]||(g[1]=x=>v(x)),onTouchend:g[2]||(g[2]=x=>p()),onClick:g[3]||(g[3]=x=>r("click",x)),onDblclick:g[4]||(g[4]=x=>r("dblclick",x)),onContextmenu:g[5]||(g[5]=e.withModifiers(x=>r("contextmenu",x),["prevent","stop"])),onDragstart:g[6]||(g[6]=x=>r("dragstart",x)),onDragend:g[7]||(g[7]=x=>r("dragend",x))},[n.view==="grid"?(e.openBlock(),e.createElementBlock("div",Yd,[e.createElementVNode("div",Wd,[(n.item.mime_type??"").startsWith("image")&&n.showThumbnails?(e.openBlock(),e.createElementBlock("img",{key:0,onTouchstart:g[0]||(g[0]=x=>x.preventDefault()),src:"data:image/png;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",class:"vuefinder__explorer__item-thumbnail lazy","data-src":e.unref(s).requester.getPreviewUrl(n.item.storage,n.item),alt:n.item.basename},null,40,Xd)):(e.openBlock(),e.createBlock(ho,{key:1,item:n.item,ext:!0},null,8,["item"]))]),e.createElementVNode("span",Qd,e.toDisplayString(e.unref(En)(n.item.basename)),1)])):(e.openBlock(),e.createElementBlock("div",Jd,[e.createElementVNode("div",Zd,[e.createElementVNode("div",eu,[e.createVNode(ho,{item:n.item,small:n.compact},null,8,["item","small"])]),e.createElementVNode("span",tu,e.toDisplayString(n.item.basename),1)]),n.showPath?(e.openBlock(),e.createElementBlock("div",nu,e.toDisplayString(n.item.path),1)):e.createCommentVNode("",!0),e.createElementVNode("div",ou,[n.item.file_size?(e.openBlock(),e.createElementBlock("div",ru,e.toDisplayString(e.unref(s).filesize(n.item.file_size)),1)):e.createCommentVNode("",!0)]),!n.showPath&&n.item.last_modified?(e.openBlock(),e.createElementBlock("div",su,e.toDisplayString(new Date(n.item.last_modified*1e3).toLocaleString()),1)):e.createCommentVNode("",!0)])),e.unref(a).pinnedFolders.find(x=>x.path===n.item.path)?(e.openBlock(),e.createBlock(e.unref(tr),{key:2,class:"vuefinder__item--pinned"})):e.createCommentVNode("",!0)],46,Gd))}}),au=["data-row"],pn=e.defineComponent({__name:"FileRow",props:{rowIndex:{},rowHeight:{},view:{},itemsPerRow:{},items:{},compact:{type:Boolean},showThumbnails:{type:Boolean},showPath:{type:Boolean},isDraggingItem:{type:Function},isSelected:{type:Function},dragNDropEvents:{type:Function},explorerId:{}},emits:["click","dblclick","contextmenu","dragstart","dragend"],setup(n,{emit:t}){const o=n,r=t,s=e.computed(()=>[o.view==="grid"?"vf-explorer-item-grid-row":"vf-explorer-item-list-row","pointer-events-none"]),l=e.computed(()=>({position:"absolute",top:0,left:0,width:"100%",height:`${o.rowHeight}px`,transform:`translateY(${o.rowIndex*o.rowHeight}px)`})),a=e.computed(()=>o.view==="grid"?{gridTemplateColumns:`repeat(${o.itemsPerRow||1}, 1fr)`}:{gridTemplateColumns:"1fr"});return(u,c)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(s.value),"data-row":n.rowIndex,style:e.normalizeStyle(l.value)},[e.createElementVNode("div",{class:e.normalizeClass(["grid justify-self-start",{"w-full":n.view==="list"}]),style:e.normalizeStyle(a.value)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.items,(i,d)=>(e.openBlock(),e.createBlock(lu,e.mergeProps({key:i.path,item:i,view:n.view,compact:n.compact,"show-thumbnails":n.showThumbnails,"show-path":n.showPath,"is-selected":n.isSelected(i.path),"is-dragging":n.isDraggingItem(i.path),"row-index":n.rowIndex,"col-index":d},e.toHandlers(n.dragNDropEvents(i)),{onClick:c[0]||(c[0]=f=>r("click",f)),onDblclick:c[1]||(c[1]=f=>r("dblclick",f)),onContextmenu:c[2]||(c[2]=f=>r("contextmenu",f)),onDragstart:c[3]||(c[3]=f=>r("dragstart",f)),onDragend:c[4]||(c[4]=f=>r("dragend",f)),explorerId:n.explorerId}),null,16,["item","view","compact","show-thumbnails","show-path","is-selected","is-dragging","row-index","col-index","explorerId"]))),128))],6)],14,au))}}),iu=["onClick"],cu=e.defineComponent({__name:"Toast",setup(n){const t=e.inject("ServiceContainer"),{getStore:o}=t.storage,r=e.ref(o("full-screen",!1)),s=e.ref([]),l=c=>c==="error"?"text-red-400 border-red-400 dark:text-red-300 dark:border-red-300":"text-lime-600 border-lime-600 dark:text-lime-300 dark:border-lime-1300",a=c=>{s.value.splice(c,1)},u=c=>{let i=s.value.findIndex(d=>d.id===c);i!==-1&&a(i)};return t.emitter.on("vf-toast-clear",()=>{s.value=[]}),t.emitter.on("vf-toast-push",c=>{let i=new Date().getTime().toString(36).concat(performance.now().toString(),Math.random().toString()).replace(/\./g,"");c.id=i,s.value.push(c),setTimeout(()=>{u(i)},5e3)}),(c,i)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vuefinder__toast",r.value.value?"vuefinder__toast--fixed":"vuefinder__toast--absolute"])},[e.createVNode(e.TransitionGroup,{name:"vuefinder__toast-item","enter-active-class":"vuefinder__toast-item--enter-active","leave-active-class":"vuefinder__toast-item--leave-active","leave-to-class":"vuefinder__toast-item--leave-to"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,(d,f)=>(e.openBlock(),e.createElementBlock("div",{key:f,onClick:p=>a(f),class:e.normalizeClass(["vuefinder__toast__message",l(d.type)])},e.toDisplayString(d.label),11,iu))),128))]),_:1})],2))}});/*!
 * OverlayScrollbars
 * Version: 2.12.0
 *
 * Copyright (c) Rene Haas | KingSora.
 * https://github.com/KingSora
 *
 * Released under the MIT license.
 */const we=(n,t)=>{const{o,i:r,u:s}=n;let l=o,a;const u=(d,f)=>{const p=l,_=d,v=f||(r?!r(p,_):p!==_);return(v||s)&&(l=_,a=p),[l,v,a]};return[t?d=>u(t(l,a),d):u,d=>[l,!!d,a]]},du=typeof window<"u"&&typeof HTMLElement<"u"&&!!window.document,ge=du?window:{},nr=Math.max,uu=Math.min,xn=Math.round,Ut=Math.abs,go=Math.sign,or=ge.cancelAnimationFrame,zn=ge.requestAnimationFrame,Pn=ge.setTimeout,rr=ge.clearTimeout,Zt=n=>typeof ge[n]<"u"?ge[n]:void 0,fu=Zt("MutationObserver"),yo=Zt("IntersectionObserver"),et=Zt("ResizeObserver"),_t=Zt("ScrollTimeline"),Un=n=>n===void 0,en=n=>n===null,He=n=>typeof n=="number",bt=n=>typeof n=="string",tn=n=>typeof n=="boolean",Be=n=>typeof n=="function",Ne=n=>Array.isArray(n),jt=n=>typeof n=="object"&&!Ne(n)&&!en(n),jn=n=>{const t=!!n&&n.length,o=He(t)&&t>-1&&t%1==0;return Ne(n)||!Be(n)&&o?t>0&&jt(n)?t-1 in n:!0:!1},qt=n=>!!n&&n.constructor===Object,Kt=n=>n instanceof HTMLElement,nn=n=>n instanceof Element;function J(n,t){if(jn(n))for(let o=0;o<n.length&&t(n[o],o,n)!==!1;o++);else n&&J(Object.keys(n),(o=>t(n[o],o,n)));return n}const sr=(n,t)=>n.indexOf(t)>=0,ht=(n,t)=>n.concat(t),se=(n,t,o)=>(!bt(t)&&jn(t)?Array.prototype.push.apply(n,t):n.push(t),n),Ge=n=>Array.from(n||[]),qn=n=>Ne(n)?n:!bt(n)&&jn(n)?Ge(n):[n],Gt=n=>!!n&&!n.length,Vn=n=>Ge(new Set(n)),be=(n,t,o)=>{J(n,s=>s?s.apply(void 0,t||[]):!0),o||(n.length=0)},lr="paddingTop",ar="paddingRight",ir="paddingLeft",cr="paddingBottom",dr="marginLeft",ur="marginRight",fr="marginBottom",Kn="overflowX",Gn="overflowY",on="width",rn="height",Re="visible",Ve="hidden",lt="scroll",mu=n=>{const t=String(n||"");return t?t[0].toUpperCase()+t.slice(1):""},sn=(n,t,o,r)=>{if(n&&t){let s=!0;return J(o,(l=>{const a=n[l],u=t[l];a!==u&&(s=!1)})),s}return!1},mr=(n,t)=>sn(n,t,["w","h"]),Ht=(n,t)=>sn(n,t,["x","y"]),vu=(n,t)=>sn(n,t,["t","r","b","l"]),G=(n,...t)=>n.bind(0,...t),tt=n=>{let t;const o=n?Pn:zn,r=n?rr:or;return[s=>{r(t),t=o((()=>s()),Be(n)?n():n)},()=>r(t)]},wo=n=>{const t=Be(n)?n():n;if(He(t)){const o=t?Pn:zn,r=t?rr:or;return s=>{const l=o((()=>s()),t);return()=>{r(l)}}}return t&&t._},Yt=(n,t)=>{const{p:o,v:r,S:s,m:l}=t||{};let a,u,c,i;const d=function(m){u&&u(),a&&a(),i=u=a=c=void 0,n.apply(this,m)},f=v=>l&&c?l(c,v):v,p=()=>{u&&c&&d(f(c)||c)},_=function(){const m=Ge(arguments),g=wo(o);if(g){const x=wo(r),N=f(m)||m,E=d.bind(0,N);u&&u(),s&&!i?(E(),i=!0,u=g((()=>i=void 0))):(u=g(E),x&&!a&&(a=x(p))),c=N}else d(m)};return _.O=p,_},vr=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),Ce=n=>n?Object.keys(n):[],X=(n,t,o,r,s,l,a)=>{const u=[t,o,r,s,l,a];return(typeof n!="object"||en(n))&&!Be(n)&&(n={}),J(u,(c=>{J(c,((i,d)=>{const f=c[d];if(n===f)return!0;const p=Ne(f);if(f&&qt(f)){const _=n[d];let v=_;p&&!Ne(_)?v=[]:!p&&!qt(_)&&(v={}),n[d]=X(v,f)}else n[d]=p?f.slice():f}))})),n},pr=(n,t)=>J(X({},n),((o,r,s)=>{o===void 0?delete s[r]:o&&qt(o)&&(s[r]=pr(o))})),Yn=n=>!Ce(n).length,gt=()=>{},_r=(n,t,o)=>nr(n,uu(t,o)),Qe=n=>Vn((Ne(n)?n:(n||"").split(" ")).filter((t=>t))),Wn=(n,t)=>n&&n.getAttribute(t),ko=(n,t)=>n&&n.hasAttribute(t),Fe=(n,t,o)=>{J(Qe(t),(r=>{n&&n.setAttribute(r,String(o||""))}))},$e=(n,t)=>{J(Qe(t),(o=>n&&n.removeAttribute(o)))},ln=(n,t)=>{const o=Qe(Wn(n,t)),r=G(Fe,n,t),s=(l,a)=>{const u=new Set(o);return J(Qe(l),(c=>{u[a](c)})),Ge(u).join(" ")};return{C:l=>r(s(l,"delete")),$:l=>r(s(l,"add")),H:l=>{const a=Qe(l);return a.reduce(((u,c)=>u&&o.includes(c)),a.length>0)}}},hr=(n,t,o)=>(ln(n,t).C(o),G(Xn,n,t,o)),Xn=(n,t,o)=>(ln(n,t).$(o),G(hr,n,t,o)),Wt=(n,t,o,r)=>(r?Xn:hr)(n,t,o),Qn=(n,t,o)=>ln(n,t).H(o),gr=n=>ln(n,"class"),yr=(n,t)=>{gr(n).C(t)},Jn=(n,t)=>(gr(n).$(t),G(yr,n,t)),wr=(n,t)=>{const o=t?nn(t)&&t:document;return o?Ge(o.querySelectorAll(n)):[]},pu=(n,t)=>{const o=t?nn(t)&&t:document;return o&&o.querySelector(n)},Nn=(n,t)=>nn(n)&&n.matches(t),kr=n=>Nn(n,"body"),Cn=n=>n?Ge(n.childNodes):[],yt=n=>n&&n.parentElement,nt=(n,t)=>nn(n)&&n.closest(t),Bn=n=>document.activeElement,_u=(n,t,o)=>{const r=nt(n,t),s=n&&pu(o,r),l=nt(s,t)===r;return r&&s?r===n||s===n||l&&nt(nt(n,o),t)!==r:!1},at=n=>{J(qn(n),(t=>{const o=yt(t);t&&o&&o.removeChild(t)}))},he=(n,t)=>G(at,n&&t&&J(qn(t),(o=>{o&&n.appendChild(o)})));let br;const hu=()=>br,gu=n=>{br=n},rt=n=>{const t=document.createElement("div");return Fe(t,"class",n),t},Er=n=>{const t=rt(),o=hu(),r=n.trim();return t.innerHTML=o?o.createHTML(r):r,J(Cn(t),(s=>at(s)))},bo=(n,t)=>n.getPropertyValue(t)||n[t]||"",Sr=n=>{const t=n||0;return isFinite(t)?t:0},Ot=n=>Sr(parseFloat(n||"")),$n=n=>Math.round(n*1e4)/1e4,xr=n=>`${$n(Sr(n))}px`;function wt(n,t){n&&t&&J(t,((o,r)=>{try{const s=n.style,l=en(o)||tn(o)?"":He(o)?xr(o):o;r.indexOf("--")===0?s.setProperty(r,l):s[r]=l}catch{}}))}function Te(n,t,o){const r=bt(t);let s=r?"":{};if(n){const l=ge.getComputedStyle(n,o)||n.style;s=r?bo(l,t):Ge(t).reduce(((a,u)=>(a[u]=bo(l,u),a)),s)}return s}const Eo=(n,t,o)=>{const r=t?`${t}-`:"",s=o?`-${o}`:"",l=`${r}top${s}`,a=`${r}right${s}`,u=`${r}bottom${s}`,c=`${r}left${s}`,i=Te(n,[l,a,u,c]);return{t:Ot(i[l]),r:Ot(i[a]),b:Ot(i[u]),l:Ot(i[c])}},_n=(n,t)=>`translate${jt(n)?`(${n.x},${n.y})`:`${t?"X":"Y"}(${n})`}`,yu=n=>!!(n.offsetWidth||n.offsetHeight||n.getClientRects().length),wu={w:0,h:0},an=(n,t)=>t?{w:t[`${n}Width`],h:t[`${n}Height`]}:wu,ku=n=>an("inner",n||ge),st=G(an,"offset"),Vr=G(an,"client"),Xt=G(an,"scroll"),Zn=n=>{const t=parseFloat(Te(n,on))||0,o=parseFloat(Te(n,rn))||0;return{w:t-xn(t),h:o-xn(o)}},hn=n=>n.getBoundingClientRect(),bu=n=>!!n&&yu(n),Dn=n=>!!(n&&(n[rn]||n[on])),Nr=(n,t)=>{const o=Dn(n);return!Dn(t)&&o},So=(n,t,o,r)=>{J(Qe(t),(s=>{n&&n.removeEventListener(s,o,r)}))},te=(n,t,o,r)=>{var s;const l=(s=r&&r.T)!=null?s:!0,a=r&&r.I||!1,u=r&&r.A||!1,c={passive:l,capture:a};return G(be,Qe(t).map((i=>{const d=u?f=>{So(n,i,d,a),o&&o(f)}:o;return n&&n.addEventListener(i,d,c),G(So,n,i,d,a)})))},Cr=n=>n.stopPropagation(),Tn=n=>n.preventDefault(),Br=n=>Cr(n)||Tn(n),De=(n,t)=>{const{x:o,y:r}=He(t)?{x:t,y:t}:t||{};He(o)&&(n.scrollLeft=o),He(r)&&(n.scrollTop=r)},ke=n=>({x:n.scrollLeft,y:n.scrollTop}),$r=()=>({D:{x:0,y:0},M:{x:0,y:0}}),Eu=(n,t)=>{const{D:o,M:r}=n,{w:s,h:l}=t,a=(f,p,_)=>{let v=go(f)*_,m=go(p)*_;if(v===m){const g=Ut(f),x=Ut(p);m=g>x?0:m,v=g<x?0:v}return v=v===m?0:v,[v+0,m+0]},[u,c]=a(o.x,r.x,s),[i,d]=a(o.y,r.y,l);return{D:{x:u,y:i},M:{x:c,y:d}}},gn=({D:n,M:t})=>{const o=(r,s)=>r===0&&r<=s;return{x:o(n.x,t.x),y:o(n.y,t.y)}},xo=({D:n,M:t},o)=>{const r=(s,l,a)=>_r(0,1,(s-a)/(s-l)||0);return{x:r(n.x,t.x,o.x),y:r(n.y,t.y,o.y)}},Mn=n=>{n&&n.focus&&n.focus({preventScroll:!0})},Vo=(n,t)=>{J(qn(t),n)},An=n=>{const t=new Map,o=(l,a)=>{if(l){const u=t.get(l);Vo((c=>{u&&u[c?"delete":"clear"](c)}),a)}else t.forEach((u=>{u.clear()})),t.clear()},r=(l,a)=>{if(bt(l)){const i=t.get(l)||new Set;return t.set(l,i),Vo((d=>{Be(d)&&i.add(d)}),a),G(o,l,a)}tn(a)&&a&&o();const u=Ce(l),c=[];return J(u,(i=>{const d=l[i];d&&se(c,r(i,d))})),G(be,c)},s=(l,a)=>{J(Ge(t.get(l)),(u=>{a&&!Gt(a)?u.apply(0,a):u()}))};return r(n||{}),[r,o,s]},Dr={},Tr={},Su=n=>{J(n,(t=>J(t,((o,r)=>{Dr[r]=t[r]}))))},Mr=(n,t,o)=>Ce(n).map((r=>{const{static:s,instance:l}=n[r],[a,u,c]=o||[],i=o?l:s;if(i){const d=o?i(a,u,t):i(t);return(c||Tr)[r]=d}})),it=n=>Tr[n],xu="__osOptionsValidationPlugin",ct="data-overlayscrollbars",zt="os-environment",Rt=`${zt}-scrollbar-hidden`,yn=`${ct}-initialize`,Pt="noClipping",No=`${ct}-body`,Ke=ct,Vu="host",Oe=`${ct}-viewport`,Nu=Kn,Cu=Gn,Bu="arrange",Ar="measuring",$u="scrolling",Ir="scrollbarHidden",Du="noContent",In=`${ct}-padding`,Co=`${ct}-content`,eo="os-size-observer",Tu=`${eo}-appear`,Mu=`${eo}-listener`,Au="os-trinsic-observer",Iu="os-theme-none",Ee="os-scrollbar",Lu=`${Ee}-rtl`,Fu=`${Ee}-horizontal`,Ou=`${Ee}-vertical`,Lr=`${Ee}-track`,to=`${Ee}-handle`,Ru=`${Ee}-visible`,Hu=`${Ee}-cornerless`,Bo=`${Ee}-interaction`,$o=`${Ee}-unusable`,Ln=`${Ee}-auto-hide`,Do=`${Ln}-hidden`,To=`${Ee}-wheel`,zu=`${Lr}-interactive`,Pu=`${to}-interactive`,Uu="__osSizeObserverPlugin",ju=(n,t)=>{const{k:o}=t,[r,s]=n("showNativeOverlaidScrollbars");return[r&&o.x&&o.y,s]},ot=n=>n.indexOf(Re)===0,qu=n=>n.replace(`${Re}-`,""),Fn=(n,t)=>{if(n==="auto")return t?lt:Ve;const o=n||Ve;return[Ve,lt,Re].includes(o)?o:Ve},Ku=(n,t)=>{const{overflowX:o,overflowY:r}=Te(n,[Kn,Gn]);return{x:Fn(o,t.x),y:Fn(r,t.y)}},no="__osScrollbarsHidingPlugin",Gu="__osClickScrollPlugin",Mo=n=>JSON.stringify(n,((t,o)=>{if(Be(o))throw 0;return o})),Ao=(n,t)=>n?`${t}`.split(".").reduce(((o,r)=>o&&vr(o,r)?o[r]:void 0),n):void 0,Yu={paddingAbsolute:!1,showNativeOverlaidScrollbars:!1,update:{elementEvents:[["img","load"]],debounce:[0,33],attributes:null,ignoreMutation:null},overflow:{x:"scroll",y:"scroll"},scrollbars:{theme:"os-theme-dark",visibility:"auto",autoHide:"never",autoHideDelay:1300,autoHideSuspend:!1,dragScroll:!0,clickScroll:!1,pointers:["mouse","touch","pen"]}},Fr=(n,t)=>{const o={},r=ht(Ce(t),Ce(n));return J(r,(s=>{const l=n[s],a=t[s];if(jt(l)&&jt(a))X(o[s]={},Fr(l,a)),Yn(o[s])&&delete o[s];else if(vr(t,s)&&a!==l){let u=!0;if(Ne(l)||Ne(a))try{Mo(l)===Mo(a)&&(u=!1)}catch{}u&&(o[s]=a)}})),o},Io=(n,t,o)=>r=>[Ao(n,r),o||Ao(t,r)!==void 0];let Or;const Wu=()=>Or,Xu=n=>{Or=n};let wn;const Qu=()=>{const n=(E,P,L)=>{he(document.body,E),he(document.body,E);const T=Vr(E),I=st(E),U=Zn(P);return L&&at(E),{x:I.h-T.h+U.h,y:I.w-T.w+U.w}},t=E=>{let P=!1;const L=Jn(E,Rt);try{P=Te(E,"scrollbar-width")==="none"||Te(E,"display","::-webkit-scrollbar")==="none"}catch{}return L(),P},o=`.${zt}{scroll-behavior:auto!important;position:fixed;opacity:0;visibility:hidden;overflow:scroll;height:200px;width:200px;z-index:-1}.${zt} div{width:200%;height:200%;margin:10px 0}.${Rt}{scrollbar-width:none!important}.${Rt}::-webkit-scrollbar,.${Rt}::-webkit-scrollbar-corner{appearance:none!important;display:none!important;width:0!important;height:0!important}`,s=Er(`<div class="${zt}"><div></div><style>${o}</style></div>`)[0],l=s.firstChild,a=s.lastChild,u=Wu();u&&(a.nonce=u);const[c,,i]=An(),[d,f]=we({o:n(s,l),i:Ht},G(n,s,l,!0)),[p]=f(),_=t(s),v={x:p.x===0,y:p.y===0},m={elements:{host:null,padding:!_,viewport:E=>_&&kr(E)&&E,content:!1},scrollbars:{slot:!0},cancel:{nativeScrollbarsOverlaid:!1,body:null}},g=X({},Yu),x=G(X,{},g),H=G(X,{},m),N={P:p,k:v,U:_,J:!!_t,G:G(c,"r"),K:H,Z:E=>X(m,E)&&H(),tt:x,nt:E=>X(g,E)&&x(),ot:X({},m),st:X({},g)};if($e(s,"style"),at(s),te(ge,"resize",(()=>{i("r",[])})),Be(ge.matchMedia)&&!_&&(!v.x||!v.y)){const E=P=>{const L=ge.matchMedia(`(resolution: ${ge.devicePixelRatio}dppx)`);te(L,"change",(()=>{P(),E(P)}),{A:!0})};E((()=>{const[P,L]=d();X(N.P,P),i("r",[L])}))}return N},Le=()=>(wn||(wn=Qu()),wn),Ju=(n,t,o)=>{let r=!1;const s=o?new WeakMap:!1,l=()=>{r=!0},a=u=>{if(s&&o){const c=o.map((i=>{const[d,f]=i||[];return[f&&d?(u||wr)(d,n):[],f]}));J(c,(i=>J(i[0],(d=>{const f=i[1],p=s.get(d)||[];if(n.contains(d)&&f){const v=te(d,f,(m=>{r?(v(),s.delete(d)):t(m)}));s.set(d,se(p,v))}else be(p),s.delete(d)}))))}};return a(),[l,a]},Lo=(n,t,o,r)=>{let s=!1;const{et:l,ct:a,rt:u,it:c,lt:i,ut:d}=r||{},f=Yt((()=>s&&o(!0)),{p:33,v:99}),[p,_]=Ju(n,f,u),v=l||[],m=a||[],g=ht(v,m),x=(N,E)=>{if(!Gt(E)){const P=i||gt,L=d||gt,T=[],I=[];let U=!1,S=!1;if(J(E,(w=>{const{attributeName:y,target:V,type:$,oldValue:M,addedNodes:j,removedNodes:F}=w,A=$==="attributes",z=$==="childList",D=n===V,O=A&&y,K=O&&Wn(V,y||""),k=bt(K)?K:null,R=O&&M!==k,B=sr(m,y)&&R;if(t&&(z||!D)){const h=A&&R,b=h&&c&&Nn(V,c),q=(b?!P(V,y,M,k):!A||h)&&!L(w,!!b,n,r);J(j,(Y=>se(T,Y))),J(F,(Y=>se(T,Y))),S=S||q}!t&&D&&R&&!P(V,y,M,k)&&(se(I,y),U=U||B)})),_((w=>Vn(T).reduce(((y,V)=>(se(y,wr(w,V)),Nn(V,w)?se(y,V):y)),[]))),t)return!N&&S&&o(!1),[!1];if(!Gt(I)||U){const w=[Vn(I),U];return N||o.apply(0,w),w}}},H=new fu(G(x,!1));return[()=>(H.observe(n,{attributes:!0,attributeOldValue:!0,attributeFilter:g,subtree:t,childList:t,characterData:t}),s=!0,()=>{s&&(p(),H.disconnect(),s=!1)}),()=>{if(s)return f.O(),x(!0,H.takeRecords())}]};let Xe=null;const Rr=(n,t,o)=>{const{ft:r}=o||{},s=it(Uu),[l]=we({o:!1,u:!0});return()=>{const a=[],c=Er(`<div class="${eo}"><div class="${Mu}"></div></div>`)[0],i=c.firstChild,d=f=>{const p=Ne(f)&&!Gt(f);let _=!1,v=!1;if(p){const m=f[0],[g,,x]=l(m.contentRect),H=Dn(g);v=Nr(g,x),_=!v&&!H}else v=f===!0;_||t({_t:!0,ft:v})};if(et){if(!tn(Xe)){const v=new et(gt);v.observe(n,{get box(){Xe=!0}}),Xe=Xe||!1,v.disconnect()}const f=Yt(d,{p:0,v:0}),p=v=>f(v),_=new et(p);if(_.observe(Xe?n:i),se(a,[()=>{_.disconnect()},!Xe&&he(n,c)]),Xe){const v=new et(p);v.observe(n,{box:"border-box"}),se(a,(()=>v.disconnect()))}}else if(s){const[f,p]=s(i,d,r);se(a,ht([Jn(c,Tu),te(c,"animationstart",f),he(n,c)],p))}else return gt;return G(be,a)}},Zu=(n,t)=>{let o;const r=c=>c.h===0||c.isIntersecting||c.intersectionRatio>0,s=rt(Au),[l]=we({o:!1}),a=(c,i)=>{if(c){const d=l(r(c)),[,f]=d;return f&&!i&&t(d)&&[d]}},u=(c,i)=>a(i.pop(),c);return[()=>{const c=[];if(yo)o=new yo(G(u,!1),{root:n}),o.observe(s),se(c,(()=>{o.disconnect()}));else{const i=()=>{const d=st(s);a(d)};se(c,Rr(s,i)()),i()}return G(be,se(c,he(n,s)))},()=>o&&u(!0,o.takeRecords())]},ef=(n,t,o,r)=>{let s,l,a,u,c,i;const d=`[${Ke}]`,f=`[${Oe}]`,p=["id","class","style","open","wrap","cols","rows"],{dt:_,vt:v,L:m,gt:g,ht:x,V:H,bt:N,wt:E,yt:P,St:L}=n,T=B=>Te(B,"direction")==="rtl",I={Ot:!1,B:T(_)},U=Le(),S=it(no),[w]=we({i:mr,o:{w:0,h:0}},(()=>{const B=S&&S.R(n,t,I,U,o).Y,b=!(N&&H)&&Qn(v,Ke,Pt),C=!H&&E(Bu),q=C&&ke(g),Y=q&&L(),ne=P(Ar,b),Q=C&&B&&B(),oe=Xt(m),W=Zn(m);return Q&&Q(),De(g,q),Y&&Y(),b&&ne(),{w:oe.w+W.w,h:oe.h+W.h}})),y=Yt(r,{p:()=>s,v:()=>l,m(B,h){const[b]=B,[C]=h;return[ht(Ce(b),Ce(C)).reduce(((q,Y)=>(q[Y]=b[Y]||C[Y],q)),{})]}}),V=B=>{const h=T(_);X(B,{Ct:i!==h}),X(I,{B:h}),i=h},$=(B,h)=>{const[b,C]=B,q={$t:C};return X(I,{Ot:b}),h||r(q),q},M=({_t:B,ft:h})=>{const C=!(B&&!h)&&U.U?y:r,q={_t:B||h,ft:h};V(q),C(q)},j=(B,h)=>{const[,b]=w(),C={xt:b};return V(C),b&&!h&&(B?r:y)(C),C},F=(B,h,b)=>{const C={Ht:h};return V(C),h&&!b&&y(C),C},[A,z]=x?Zu(v,$):[],D=!H&&Rr(v,M,{ft:!0}),[O,K]=Lo(v,!1,F,{ct:p,et:p}),k=H&&et&&new et((B=>{const h=B[B.length-1].contentRect;M({_t:!0,ft:Nr(h,c)}),c=h})),R=Yt((()=>{const[,B]=w();r({xt:B,_t:N})}),{p:222,S:!0});return[()=>{k&&k.observe(v);const B=D&&D(),h=A&&A(),b=O(),C=U.G((q=>{q?y({Et:q}):R()}));return()=>{k&&k.disconnect(),B&&B(),h&&h(),u&&u(),b(),C()}},({zt:B,Tt:h,It:b})=>{const C={},[q]=B("update.ignoreMutation"),[Y,ne]=B("update.attributes"),[Q,oe]=B("update.elementEvents"),[W,de]=B("update.debounce"),fe=oe||ne,ie=h||b,pe=re=>Be(q)&&q(re);if(fe){a&&a(),u&&u();const[re,le]=Lo(x||m,!0,j,{et:ht(p,Y||[]),rt:Q,it:d,ut:(ae,ee)=>{const{target:ce,attributeName:me}=ae;return(!ee&&me&&!H?_u(ce,d,f):!1)||!!nt(ce,`.${Ee}`)||!!pe(ae)}});u=re(),a=le}if(de)if(y.O(),Ne(W)){const re=W[0],le=W[1];s=He(re)&&re,l=He(le)&&le}else He(W)?(s=W,l=!1):(s=!1,l=!1);if(ie){const re=K(),le=z&&z(),ae=a&&a();re&&X(C,F(re[0],re[1],ie)),le&&X(C,$(le[0],ie)),ae&&X(C,j(ae[0],ie))}return V(C),C},I]},Hr=(n,t)=>Be(t)?t.apply(0,n):t,tf=(n,t,o,r)=>{const s=Un(r)?o:r;return Hr(n,s)||t.apply(0,n)},zr=(n,t,o,r)=>{const s=Un(r)?o:r,l=Hr(n,s);return!!l&&(Kt(l)?l:t.apply(0,n))},nf=(n,t)=>{const{nativeScrollbarsOverlaid:o,body:r}=t||{},{k:s,U:l,K:a}=Le(),{nativeScrollbarsOverlaid:u,body:c}=a().cancel,i=o??u,d=Un(r)?c:r,f=(s.x||s.y)&&i,p=n&&(en(d)?!l:d);return!!f||!!p},of=(n,t,o,r)=>{const s="--os-viewport-percent",l="--os-scroll-percent",a="--os-scroll-direction",{K:u}=Le(),{scrollbars:c}=u(),{slot:i}=c,{dt:d,vt:f,L:p,At:_,gt:v,bt:m,V:g}=t,{scrollbars:x}=_?{}:n,{slot:H}=x||{},N=[],E=[],P=[],L=zr([d,f,p],(()=>g&&m?d:f),i,H),T=O=>{if(_t){let K=null,k=[];const R=new _t({source:v,axis:O}),B=()=>{K&&K.cancel(),K=null};return{kt:b=>{const{Dt:C}=o,q=gn(C)[O],Y=O==="x",ne=[_n(0,Y),_n(`calc(100cq${Y?"w":"h"} + -100%)`,Y)],Q=q?ne:ne.reverse();return k[0]===Q[0]&&k[1]===Q[1]||(B(),k=Q,K=b.Mt.animate({clear:["left"],transform:Q},{timeline:R})),B}}}},I={x:T("x"),y:T("y")},U=()=>{const{Rt:O,Vt:K}=o,k=(R,B)=>_r(0,1,R/(R+B)||0);return{x:k(K.x,O.x),y:k(K.y,O.y)}},S=(O,K,k)=>{const R=k?Jn:yr;J(O,(B=>{R(B.Lt,K)}))},w=(O,K)=>{J(O,(k=>{const[R,B]=K(k);wt(R,B)}))},y=(O,K,k)=>{const R=tn(k),B=R?k:!0,h=R?!k:!0;B&&S(E,O,K),h&&S(P,O,K)},V=()=>{const O=U(),K=k=>R=>[R.Lt,{[s]:$n(k)+""}];w(E,K(O.x)),w(P,K(O.y))},$=()=>{if(!_t){const{Dt:O}=o,K=xo(O,ke(v)),k=R=>B=>[B.Lt,{[l]:$n(R)+""}];w(E,k(K.x)),w(P,k(K.y))}},M=()=>{const{Dt:O}=o,K=gn(O),k=R=>B=>[B.Lt,{[a]:R?"0":"1"}];w(E,k(K.x)),w(P,k(K.y)),_t&&(E.forEach(I.x.kt),P.forEach(I.y.kt))},j=()=>{if(g&&!m){const{Rt:O,Dt:K}=o,k=gn(K),R=xo(K,ke(v)),B=h=>{const{Lt:b}=h,C=yt(b)===p&&b,q=(Y,ne,Q)=>{const oe=ne*Y;return xr(Q?oe:-oe)};return[C,C&&{transform:_n({x:q(R.x,O.x,k.x),y:q(R.y,O.y,k.y)})}]};w(E,B),w(P,B)}},F=O=>{const K=O?"x":"y",R=rt(`${Ee} ${O?Fu:Ou}`),B=rt(Lr),h=rt(to),b={Lt:R,Ut:B,Mt:h},C=I[K];return se(O?E:P,b),se(N,[he(R,B),he(B,h),G(at,R),C&&C.kt(b),r(b,y,O)]),b},A=G(F,!0),z=G(F,!1),D=()=>(he(L,E[0].Lt),he(L,P[0].Lt),G(be,N));return A(),z(),[{Pt:V,Nt:$,qt:M,Bt:j,Ft:y,jt:{Xt:E,Yt:A,Wt:G(w,E)},Jt:{Xt:P,Yt:z,Wt:G(w,P)}},D]},rf=(n,t,o,r)=>(s,l,a)=>{const{vt:u,L:c,V:i,gt:d,Gt:f,St:p}=t,{Lt:_,Ut:v,Mt:m}=s,[g,x]=tt(333),[H,N]=tt(444),E=T=>{Be(d.scrollBy)&&d.scrollBy({behavior:"smooth",left:T.x,top:T.y})},P=()=>{const T="pointerup pointercancel lostpointercapture",I=`client${a?"X":"Y"}`,U=a?on:rn,S=a?"left":"top",w=a?"w":"h",y=a?"x":"y",V=(M,j)=>F=>{const{Rt:A}=o,z=st(v)[w]-st(m)[w],O=j*F/z*A[y];De(d,{[y]:M+O})},$=[];return te(v,"pointerdown",(M=>{const j=nt(M.target,`.${to}`)===m,F=j?m:v,A=n.scrollbars,z=A[j?"dragScroll":"clickScroll"],{button:D,isPrimary:O,pointerType:K}=M,{pointers:k}=A;if(D===0&&O&&z&&(k||[]).includes(K)){be($),N();const B=!j&&(M.shiftKey||z==="instant"),h=G(hn,m),b=G(hn,v),C=(ee,ce)=>(ee||h())[S]-(ce||b())[S],q=xn(hn(d)[U])/st(d)[w]||1,Y=V(ke(d)[y],1/q),ne=M[I],Q=h(),oe=b(),W=Q[U],de=C(Q,oe)+W/2,fe=ne-oe[S],ie=j?0:fe-de,pe=ee=>{be(ae),F.releasePointerCapture(ee.pointerId)},re=j||B,le=p(),ae=[te(f,T,pe),te(f,"selectstart",(ee=>Tn(ee)),{T:!1}),te(v,T,pe),re&&te(v,"pointermove",(ee=>Y(ie+(ee[I]-ne)))),re&&(()=>{const ee=ke(d);le();const ce=ke(d),me={x:ce.x-ee.x,y:ce.y-ee.y};(Ut(me.x)>3||Ut(me.y)>3)&&(p(),De(d,ee),E(me),H(le))})];if(F.setPointerCapture(M.pointerId),B)Y(ie);else if(!j){const ee=it(Gu);if(ee){const ce=ee(Y,ie,W,(me=>{me?le():se(ae,le)}));se(ae,ce),se($,G(ce,!0))}}}}))};let L=!0;return G(be,[te(m,"pointermove pointerleave",r),te(_,"pointerenter",(()=>{l(Bo,!0)})),te(_,"pointerleave pointercancel",(()=>{l(Bo,!1)})),!i&&te(_,"mousedown",(()=>{const T=Bn();(ko(T,Oe)||ko(T,Ke)||T===document.body)&&Pn(G(Mn,c),25)})),te(_,"wheel",(T=>{const{deltaX:I,deltaY:U,deltaMode:S}=T;L&&S===0&&yt(_)===u&&E({x:I,y:U}),L=!1,l(To,!0),g((()=>{L=!0,l(To)})),Tn(T)}),{T:!1,I:!0}),te(_,"pointerdown",(()=>{const T=te(f,"click",(U=>{I(),Br(U)}),{A:!0,I:!0,T:!1}),I=te(f,"pointerup pointercancel",(()=>{I(),setTimeout(T,150)}),{I:!0,T:!0})}),{I:!0,T:!0}),P(),x,N])},sf=(n,t,o,r,s,l)=>{let a,u,c,i,d,f=gt,p=0;const _=["mouse","pen"],v=k=>_.includes(k.pointerType),[m,g]=tt(),[x,H]=tt(100),[N,E]=tt(100),[P,L]=tt((()=>p)),[T,I]=of(n,s,r,rf(t,s,r,(k=>v(k)&&A()))),{vt:U,Kt:S,bt:w}=s,{Ft:y,Pt:V,Nt:$,qt:M,Bt:j}=T,F=(k,R)=>{if(L(),k)y(Do);else{const B=G(y,Do,!0);p>0&&!R?P(B):B()}},A=()=>{(c?!a:!i)&&(F(!0),x((()=>{F(!1)})))},z=k=>{y(Ln,k,!0),y(Ln,k,!1)},D=k=>{v(k)&&(a=c,c&&F(!0))},O=[L,H,E,g,()=>f(),te(U,"pointerover",D,{A:!0}),te(U,"pointerenter",D),te(U,"pointerleave",(k=>{v(k)&&(a=!1,c&&F(!1))})),te(U,"pointermove",(k=>{v(k)&&u&&A()})),te(S,"scroll",(k=>{m((()=>{$(),A()})),l(k),j()}))],K=it(no);return[()=>G(be,se(O,I())),({zt:k,It:R,Qt:B,Zt:h})=>{const{tn:b,nn:C,sn:q,en:Y}=h||{},{Ct:ne,ft:Q}=B||{},{B:oe}=o,{k:W,U:de}=Le(),{cn:fe,j:ie}=r,[pe,re]=k("showNativeOverlaidScrollbars"),[le,ae]=k("scrollbars.theme"),[ee,ce]=k("scrollbars.visibility"),[me,dt]=k("scrollbars.autoHide"),[ut,Et]=k("scrollbars.autoHideSuspend"),[St]=k("scrollbars.autoHideDelay"),[xt,Vt]=k("scrollbars.dragScroll"),[Ye,ft]=k("scrollbars.clickScroll"),[Nt,cn]=k("overflow"),dn=Q&&!R,un=ie.x||ie.y,Se=b||C||Y||ne||R,fn=q||ce||cn,Ct=pe&&W.x&&W.y,Bt=!de&&!K,mn=Ct||Bt,$t=(mt,vt,Dt)=>{const Pe=mt.includes(lt)&&(ee===Re||ee==="auto"&&vt===lt);return y(Ru,Pe,Dt),Pe};if(p=St,dn&&(ut&&un?(z(!1),f(),N((()=>{f=te(S,"scroll",G(z,!0),{A:!0})}))):z(!0)),(re||Bt)&&y(Iu,mn),ae&&(y(d),y(le,!0),d=le),Et&&!ut&&z(!0),dt&&(u=me==="move",c=me==="leave",i=me==="never",F(i,!0)),Vt&&y(Pu,xt),ft&&y(zu,!!Ye),fn){const mt=$t(Nt.x,fe.x,!0),vt=$t(Nt.y,fe.y,!1);y(Hu,!(mt&&vt))}Se&&($(),V(),j(),Y&&M(),y($o,!ie.x,!0),y($o,!ie.y,!1),y(Lu,oe&&!w))},{},T]},lf=n=>{const t=Le(),{K:o,U:r}=t,{elements:s}=o(),{padding:l,viewport:a,content:u}=s,c=Kt(n),i=c?{}:n,{elements:d}=i,{padding:f,viewport:p,content:_}=d||{},v=c?n:i.target,m=kr(v),g=v.ownerDocument,x=g.documentElement,H=()=>g.defaultView||ge,N=G(tf,[v]),E=G(zr,[v]),P=G(rt,""),L=G(N,P,a),T=G(E,P,u),I=W=>{const de=st(W),fe=Xt(W),ie=Te(W,Kn),pe=Te(W,Gn);return fe.w-de.w>0&&!ot(ie)||fe.h-de.h>0&&!ot(pe)},U=L(p),S=U===v,w=S&&m,y=!S&&T(_),V=!S&&U===y,$=w?x:U,M=w?$:v,j=!S&&E(P,l,f),F=!V&&y,A=[F,$,j,M].map((W=>Kt(W)&&!yt(W)&&W)),z=W=>W&&sr(A,W),D=!z($)&&I($)?$:v,O=w?x:$,k={dt:v,vt:M,L:$,rn:j,ht:F,gt:O,Kt:w?g:$,ln:m?x:D,Gt:g,bt:m,At:c,V:S,an:H,wt:W=>Qn($,Oe,W),yt:(W,de)=>Wt($,Oe,W,de),St:()=>Wt(O,Oe,$u,!0)},{dt:R,vt:B,rn:h,L:b,ht:C}=k,q=[()=>{$e(B,[Ke,yn]),$e(R,yn),m&&$e(x,[yn,Ke])}];let Y=Cn([C,b,h,B,R].find((W=>W&&!z(W))));const ne=w?R:C||b,Q=G(be,q);return[k,()=>{const W=H(),de=Bn(),fe=ae=>{he(yt(ae),Cn(ae)),at(ae)},ie=ae=>te(ae,"focusin focusout focus blur",Br,{I:!0,T:!1}),pe="tabindex",re=Wn(b,pe),le=ie(de);return Fe(B,Ke,S?"":Vu),Fe(h,In,""),Fe(b,Oe,""),Fe(C,Co,""),S||(Fe(b,pe,re||"-1"),m&&Fe(x,No,"")),he(ne,Y),he(B,h),he(h||B,!S&&b),he(b,C),se(q,[le,()=>{const ae=Bn(),ee=z(b),ce=ee&&ae===b?R:ae,me=ie(ce);$e(h,In),$e(C,Co),$e(b,Oe),m&&$e(x,No),re?Fe(b,pe,re):$e(b,pe),z(C)&&fe(C),ee&&fe(b),z(h)&&fe(h),Mn(ce),me()}]),r&&!S&&(Xn(b,Oe,Ir),se(q,G($e,b,Oe))),Mn(!S&&m&&de===R&&W.top===W?b:de),le(),Y=0,Q},Q]},af=({ht:n})=>({Qt:t,un:o,It:r})=>{const{$t:s}=t||{},{Ot:l}=o;n&&(s||r)&&wt(n,{[rn]:l&&"100%"})},cf=({vt:n,rn:t,L:o,V:r},s)=>{const[l,a]=we({i:vu,o:Eo()},G(Eo,n,"padding",""));return({zt:u,Qt:c,un:i,It:d})=>{let[f,p]=a(d);const{U:_}=Le(),{_t:v,xt:m,Ct:g}=c||{},{B:x}=i,[H,N]=u("paddingAbsolute");(v||p||(d||m))&&([f,p]=l(d));const P=!r&&(N||g||p);if(P){const L=!H||!t&&!_,T=f.r+f.l,I=f.t+f.b,U={[ur]:L&&!x?-T:0,[fr]:L?-I:0,[dr]:L&&x?-T:0,top:L?-f.t:0,right:L?x?-f.r:"auto":0,left:L?x?"auto":-f.l:0,[on]:L&&`calc(100% + ${T}px)`},S={[lr]:L?f.t:0,[ar]:L?f.r:0,[cr]:L?f.b:0,[ir]:L?f.l:0};wt(t||o,U),wt(o,S),X(s,{rn:f,fn:!L,F:t?S:X({},U,S)})}return{_n:P}}},df=(n,t)=>{const o=Le(),{vt:r,rn:s,L:l,V:a,Kt:u,gt:c,bt:i,yt:d,an:f}=n,{U:p}=o,_=i&&a,v=G(nr,0),m={display:()=>!1,direction:k=>k!=="ltr",flexDirection:k=>k.endsWith("-reverse"),writingMode:k=>k!=="horizontal-tb"},g=Ce(m),x={i:mr,o:{w:0,h:0}},H={i:Ht,o:{}},N=k=>{d(Ar,!_&&k)},E=k=>{if(!g.some((Q=>{const oe=k[Q];return oe&&m[Q](oe)})))return{D:{x:0,y:0},M:{x:1,y:1}};N(!0);const B=ke(c),h=d(Du,!0),b=te(u,lt,(Q=>{const oe=ke(c);Q.isTrusted&&oe.x===B.x&&oe.y===B.y&&Cr(Q)}),{I:!0,A:!0});De(c,{x:0,y:0}),h();const C=ke(c),q=Xt(c);De(c,{x:q.w,y:q.h});const Y=ke(c);De(c,{x:Y.x-C.x<1&&-q.w,y:Y.y-C.y<1&&-q.h});const ne=ke(c);return De(c,B),zn((()=>b())),{D:C,M:ne}},P=(k,R)=>{const B=ge.devicePixelRatio%1!==0?1:0,h={w:v(k.w-R.w),h:v(k.h-R.h)};return{w:h.w>B?h.w:0,h:h.h>B?h.h:0}},L=(k,R)=>{const B=(h,b,C,q)=>{const Y=h===Re?Ve:qu(h),ne=ot(h),Q=ot(C);return!b&&!q?Ve:ne&&Q?Re:ne?b&&q?Y:b?Re:Ve:b?Y:Q&&q?Re:Ve};return{x:B(R.x,k.x,R.y,k.y),y:B(R.y,k.y,R.x,k.x)}},T=k=>{const R=h=>[Re,Ve,lt].map((b=>K(Fn(b),h))),B=R(!0).concat(R()).join(" ");d(B),d(Ce(k).map((h=>K(k[h],h==="x"))).join(" "),!0)},[I,U]=we(x,G(Zn,l)),[S,w]=we(x,G(Xt,l)),[y,V]=we(x),[$]=we(H),[M,j]=we(x),[F]=we(H),[A]=we({i:(k,R)=>sn(k,R,g),o:{}},(()=>bu(l)?Te(l,g):{})),[z,D]=we({i:(k,R)=>Ht(k.D,R.D)&&Ht(k.M,R.M),o:$r()}),O=it(no),K=(k,R)=>`${R?Nu:Cu}${mu(k)}`;return({zt:k,Qt:R,un:B,It:h},{_n:b})=>{const{_t:C,Ht:q,xt:Y,Ct:ne,ft:Q,Et:oe}=R||{},W=O&&O.R(n,t,B,o,k),{X:de,Y:fe,W:ie}=W||{},[pe,re]=ju(k,o),[le,ae]=k("overflow"),ee=ot(le.x),ce=ot(le.y),me=C||b||Y||ne||oe||re;let dt=U(h),ut=w(h),Et=V(h),St=j(h);if(re&&p&&d(Ir,!pe),me){Qn(r,Ke,Pt)&&N(!0);const so=fe&&fe(),[Tt]=dt=I(h),[Mt]=ut=S(h),At=Vr(l),It=_&&ku(f()),os={w:v(Mt.w+Tt.w),h:v(Mt.h+Tt.h)},lo={w:v((It?It.w:At.w+v(At.w-Mt.w))+Tt.w),h:v((It?It.h:At.h+v(At.h-Mt.h))+Tt.h)};so&&so(),St=M(lo),Et=y(P(os,lo),h)}const[xt,Vt]=St,[Ye,ft]=Et,[Nt,cn]=ut,[dn,un]=dt,[Se,fn]=$({x:Ye.w>0,y:Ye.h>0}),Ct=ee&&ce&&(Se.x||Se.y)||ee&&Se.x&&!Se.y||ce&&Se.y&&!Se.x,Bt=b||ne||oe||un||cn||Vt||ft||ae||re||me||q&&_,[mn,$t]=A(h),mt=ne||Q||$t||fn||h,[vt,Dt]=mt?z(E(mn),h):D();let Pe=L(Se,le);N(!1),Bt&&(T(Pe),Pe=Ku(l,Se),ie&&de&&(de(Pe,Nt,dn),wt(l,ie(Pe))));const[ts,ns]=F(Pe);return Wt(r,Ke,Pt,Ct),Wt(s,In,Pt,Ct),X(t,{cn:ts,Vt:{x:xt.w,y:xt.h},Rt:{x:Ye.w,y:Ye.h},j:Se,Dt:Eu(vt,Ye)}),{sn:ns,tn:Vt,nn:ft,en:Dt||ft}}},uf=n=>{const[t,o,r]=lf(n),s={rn:{t:0,r:0,b:0,l:0},fn:!1,F:{[ur]:0,[fr]:0,[dr]:0,[lr]:0,[ar]:0,[cr]:0,[ir]:0},Vt:{x:0,y:0},Rt:{x:0,y:0},cn:{x:Ve,y:Ve},j:{x:!1,y:!1},Dt:$r()},{dt:l,gt:a,V:u,St:c}=t,{U:i,k:d}=Le(),f=!i&&(d.x||d.y),p=[af(t),cf(t,s),df(t,s)];return[o,_=>{const v={},g=f&&ke(a),x=g&&c();return J(p,(H=>{X(v,H(_,v)||{})})),De(a,g),x&&x(),u||De(l,0),v},s,t,r]},ff=(n,t,o,r,s)=>{let l=!1;const a=Io(t,{}),[u,c,i,d,f]=uf(n),[p,_,v]=ef(d,i,a,(E=>{N({},E)})),[m,g,,x]=sf(n,t,v,i,d,s),H=E=>Ce(E).some((P=>!!E[P])),N=(E,P)=>{if(o())return!1;const{dn:L,It:T,Tt:I,pn:U}=E,S=L||{},w=!!T||!l,y={zt:Io(t,S,w),dn:S,It:w};if(U)return g(y),!1;const V=P||_(X({},y,{Tt:I})),$=c(X({},y,{un:v,Qt:V}));g(X({},y,{Qt:V,Zt:$}));const M=H(V),j=H($),F=M||j||!Yn(S)||w;return l=!0,F&&r(E,{Qt:V,Zt:$}),F};return[()=>{const{ln:E,gt:P,St:L}=d,T=ke(E),I=[p(),u(),m()],U=L();return De(P,T),U(),G(be,I)},N,()=>({vn:v,gn:i}),{hn:d,bn:x},f]},oo=new WeakMap,mf=(n,t)=>{oo.set(n,t)},vf=n=>{oo.delete(n)},Pr=n=>oo.get(n),Me=(n,t,o)=>{const{tt:r}=Le(),s=Kt(n),l=s?n:n.target,a=Pr(l);if(t&&!a){let u=!1;const c=[],i={},d=S=>{const w=pr(S),y=it(xu);return y?y(w,!0):w},f=X({},r(),d(t)),[p,_,v]=An(),[m,g,x]=An(o),H=(S,w)=>{x(S,w),v(S,w)},[N,E,P,L,T]=ff(n,f,(()=>u),(({dn:S,It:w},{Qt:y,Zt:V})=>{const{_t:$,Ct:M,$t:j,xt:F,Ht:A,ft:z}=y,{tn:D,nn:O,sn:K,en:k}=V;H("updated",[U,{updateHints:{sizeChanged:!!$,directionChanged:!!M,heightIntrinsicChanged:!!j,overflowEdgeChanged:!!D,overflowAmountChanged:!!O,overflowStyleChanged:!!K,scrollCoordinatesChanged:!!k,contentMutation:!!F,hostMutation:!!A,appear:!!z},changedOptions:S||{},force:!!w}])}),(S=>H("scroll",[U,S]))),I=S=>{vf(l),be(c),u=!0,H("destroyed",[U,S]),_(),g()},U={options(S,w){if(S){const y=w?r():{},V=Fr(f,X(y,d(S)));Yn(V)||(X(f,V),E({dn:V}))}return X({},f)},on:m,off:(S,w)=>{S&&w&&g(S,w)},state(){const{vn:S,gn:w}=P(),{B:y}=S,{Vt:V,Rt:$,cn:M,j,rn:F,fn:A,Dt:z}=w;return X({},{overflowEdge:V,overflowAmount:$,overflowStyle:M,hasOverflow:j,scrollCoordinates:{start:z.D,end:z.M},padding:F,paddingAbsolute:A,directionRTL:y,destroyed:u})},elements(){const{dt:S,vt:w,rn:y,L:V,ht:$,gt:M,Kt:j}=L.hn,{jt:F,Jt:A}=L.bn,z=O=>{const{Mt:K,Ut:k,Lt:R}=O;return{scrollbar:R,track:k,handle:K}},D=O=>{const{Xt:K,Yt:k}=O,R=z(K[0]);return X({},R,{clone:()=>{const B=z(k());return E({pn:!0}),B}})};return X({},{target:S,host:w,padding:y||V,viewport:V,content:$||V,scrollOffsetElement:M,scrollEventElement:j,scrollbarHorizontal:D(F),scrollbarVertical:D(A)})},update:S=>E({It:S,Tt:!0}),destroy:G(I,!1),plugin:S=>i[Ce(S)[0]]};return se(c,[T]),mf(l,U),Mr(Dr,Me,[U,p,i]),nf(L.hn.bt,!s&&n.cancel)?(I(!0),U):(se(c,N()),H("initialized",[U]),U.update(),U)}return a};Me.plugin=n=>{const t=Ne(n),o=t?n:[n],r=o.map((s=>Mr(s,Me)[0]));return Su(o),t?r:r[0]};Me.valid=n=>{const t=n&&n.elements,o=Be(t)&&t();return qt(o)&&!!Pr(o.target)};Me.env=()=>{const{P:n,k:t,U:o,J:r,ot:s,st:l,K:a,Z:u,tt:c,nt:i}=Le();return X({},{scrollbarsSize:n,scrollbarsOverlaid:t,scrollbarsHiding:o,scrollTimeline:r,staticDefaultInitialization:s,staticDefaultOptions:l,getDefaultInitialization:a,setDefaultInitialization:u,getDefaultOptions:c,setDefaultOptions:i})};Me.nonce=Xu;Me.trustedTypePolicy=gu;const pf={class:"vuefinder__explorer__container"},_f={ref:"customScrollBar",class:"vuefinder__explorer__scrollbar"},hf={key:0,class:"vuefinder__explorer__header"},gf={key:0,class:"vuefinder__linear-loader"},yf=e.defineComponent({__name:"Explorer",setup(n){const t=e.inject("ServiceContainer"),o=kt(t,["bg-blue-200","dark:bg-slate-600"]),r=e.useTemplateRef("dragImage"),s=e.shallowRef(null),l=e.useTemplateRef("scrollContainer"),a=e.useTemplateRef("scrollContent"),{searchMode:u,query:c,hasQuery:i}=t.search,d=t.fs,f=t.config;let p=null;const _=e.ref(null),v=e.useTemplateRef("customScrollBar"),m=e.useTemplateRef("customScrollBarContainer"),g=e.computed(()=>f.view==="grid"&&!(u&&c.value.length)?88:f.compactListView?24:50),{t:x}=t.i18n,{itemsPerRow:H,totalHeight:N,visibleRows:E,handleScroll:P,getRowItems:L,getItemsInRange:T,getItemPosition:I,updateItemsPerRow:U}=Nd(e.computed(()=>d.files),{scrollContainer:l,itemWidth:104,rowHeight:g,overscan:2,containerPadding:0}),{explorerId:S,isDragging:w,initializeSelectionArea:y,destroySelectionArea:V,handleContentClick:$}=Cd({getItemPosition:I,getItemsInRange:T,getKey:h=>h.path,selectionObject:s,rowHeight:g,itemWidth:104}),M=e.ref(null),j=h=>{if(!h||!M.value)return!1;const b=d.selectedKeys.has(M.value);return w.value&&(b?d.selectedKeys.has(h):h===M.value)};e.watch(()=>f.view,h=>{h==="list"?H.value=1:U()},{immediate:!0}),e.watch(H,h=>{f.view==="list"&&h!==1&&(H.value=1)});const F=h=>d.sortedFiles[h];e.onMounted(()=>{if(y(),s.value&&s.value.on("beforestart",({event:h})=>{const b=h?.target===a.value;if(!h?.metaKey&&!h?.ctrlKey&&!h?.altKey&&!b)return!1}),l.value&&(p=new is({elements_selector:".lazy",container:l.value})),e.watch(()=>c.value,h=>{console.log("query changed",h);const b=d.path.storage,C=d.path.path;!b||!C||(h?t.emitter.emit("vf-fetch",{params:{q:"search",storage:b,path:C,filter:h},onSuccess:q=>{q.files.length||t.emitter.emit("vf-toast-push",{label:x("No search result found.")})}}):t.emitter.emit("vf-fetch",{params:{q:"index",storage:b,path:C}}))}),m.value){const h=Me(m.value,{scrollbars:{theme:"vf-scrollbars-theme"}},{initialized:b=>{_.value=b},scroll:b=>{const{scrollOffsetElement:C}=b.elements();l.value&&l.value.scrollTo({top:C.scrollTop,left:0})}});_.value=h}l.value&&l.value.addEventListener("scroll",()=>{const h=_.value;if(!h)return;const{scrollOffsetElement:b}=h.elements();b.scrollTo({top:l.value.scrollTop,left:0})})}),e.onUpdated(()=>{if(p&&p.update(),_.value&&v.value&&l.value){const b=l.value.scrollHeight>l.value.clientHeight,C=v.value;C.style.display=b?"block":"none",C.style.height=`${N.value}px`}}),e.onUnmounted(()=>{V(),p&&(p.destroy(),p=null),_.value&&(_.value.destroy(),_.value=null)});const A=h=>{const b=h.target?.closest(".file-item-"+S),C=h;if(!C?.ctrlKey&&!C?.metaKey&&(d.clearSelection(),s.value?.clearSelection(!0,!0)),b){const q=String(b.getAttribute("data-key"));s.value?.resolveSelectables(),d.toggleSelect(q)}d.setSelectedCount(d.selectedKeys.size)},z=h=>{const b=t.contextMenuItems.find(C=>C.show(t,{searchQuery:"",items:[h],target:h}));b&&b.action(t,[h])},D=h=>{const b=h.target?.closest(".file-item-"+S),C=b?String(b.getAttribute("data-key")):null;if(!C)return;const q=d.sortedFiles.find(Y=>Y.path===C);q&&z(q)},O=()=>{const h=new Set(d.selectedKeys);return d.sortedFiles.filter(b=>h.has(b.path))},K=h=>{h.preventDefault();const b=h.target?.closest(".file-item-"+S);if(b){const C=String(b.getAttribute("data-key")),q=d.sortedFiles.find(Y=>Y.path===C);d.selectedKeys.has(C)||(d.clearSelection(),d.select(C)),t.emitter.emit("vf-contextmenu-show",{event:h,items:O(),target:q})}},k=h=>{h.preventDefault(),t.emitter.emit("vf-contextmenu-show",{event:h,items:O()})},R=h=>{if(h.altKey||h.ctrlKey||h.metaKey)return h.preventDefault(),!1;w.value=!0;const b=h.target?.closest(".file-item-"+S);if(M.value=b?String(b.dataset.key):null,h.dataTransfer&&M.value){h.dataTransfer.setDragImage(r.value,0,15),h.dataTransfer.effectAllowed="all",h.dataTransfer.dropEffect="copy";const C=d.selectedKeys.has(M.value)?Array.from(d.selectedKeys):[M.value];h.dataTransfer.setData("items",JSON.stringify(C)),d.setDraggedItem(M.value)}},B=()=>{M.value=null};return(h,b)=>(e.openBlock(),e.createElementBlock("div",pf,[e.createElementVNode("div",{ref:"customScrollBarContainer",class:e.normalizeClass(["vuefinder__explorer__scrollbar-container",[{"grid-view":e.unref(f).view==="grid"},{"search-active":e.unref(i)}]])},[e.createElementVNode("div",_f,null,512)],2),e.unref(f).view==="list"||e.unref(c).length?(e.openBlock(),e.createElementBlock("div",hf,[e.createElementVNode("div",{onClick:b[0]||(b[0]=C=>e.unref(d).toggleSort("basename")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--name vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(x)("Name"))+" ",1),e.withDirectives(e.createVNode(Ft,{direction:e.unref(d).sort.order},null,8,["direction"]),[[e.vShow,e.unref(d).sort.active&&e.unref(d).sort.column==="basename"]])]),e.unref(c).length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,onClick:b[1]||(b[1]=C=>e.unref(d).toggleSort("file_size")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--size vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(x)("Size"))+" ",1),e.withDirectives(e.createVNode(Ft,{direction:e.unref(d).sort.order},null,8,["direction"]),[[e.vShow,e.unref(d).sort.active&&e.unref(d).sort.column==="file_size"]])])),e.unref(c).length?(e.openBlock(),e.createElementBlock("div",{key:1,onClick:b[2]||(b[2]=C=>e.unref(d).toggleSort("path")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--path vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(x)("Filepath"))+" ",1),e.withDirectives(e.createVNode(Ft,{direction:e.unref(d).sort.order},null,8,["direction"]),[[e.vShow,e.unref(d).sort.active&&e.unref(d).sort.column==="path"]])])):e.createCommentVNode("",!0),e.unref(c).length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:2,onClick:b[3]||(b[3]=C=>e.unref(d).toggleSort("last_modified")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--date vf-sort-button"},[e.createTextVNode(e.toDisplayString(e.unref(x)("Date"))+" ",1),e.withDirectives(e.createVNode(Ft,{direction:e.unref(d).sort.order},null,8,["direction"]),[[e.vShow,e.unref(d).sort.active&&e.unref(d).sort.column==="last_modified"]])]))])):e.createCommentVNode("",!0),e.createElementVNode("div",{ref_key:"scrollContainer",ref:l,class:e.normalizeClass(["vuefinder__explorer__selector-area","scroller-"+e.unref(S)]),onScroll:b[5]||(b[5]=(...C)=>e.unref(P)&&e.unref(P)(...C))},[e.unref(f).loadingIndicator==="linear"&&e.unref(d).isLoading()?(e.openBlock(),e.createElementBlock("div",gf)):e.createCommentVNode("",!0),e.createElementVNode("div",{ref_key:"scrollContent",ref:a,class:"scrollContent min-h-full",style:e.normalizeStyle({height:`${e.unref(N)}px`,position:"relative",width:"100%"}),onContextmenu:e.withModifiers(k,["self","prevent"]),onClick:b[4]||(b[4]=e.withModifiers((...C)=>e.unref($)&&e.unref($)(...C),["self"]))},[e.createElementVNode("div",{ref_key:"dragImage",ref:r,class:"vuefinder__explorer__drag-item"},[e.createVNode(Hd,{count:M.value&&e.unref(d).selectedKeys.has(M.value)?e.unref(d).selectedKeys.size:1},null,8,["count"])],512),e.unref(c).length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(e.unref(E),C=>(e.openBlock(),e.createBlock(pn,{key:C,"row-index":C,"row-height":g.value,view:"list",items:F(C)?[F(C)]:[],compact:e.unref(f).compactListView,"show-path":!0,"is-dragging-item":j,"is-selected":q=>e.unref(d).selectedKeys.has(q),"drag-n-drop-events":q=>e.unref(o).events(q),explorerId:e.unref(S),onClick:A,onDblclick:D,onContextmenu:K,onDragstart:R,onDragend:B},null,8,["row-index","row-height","items","compact","is-selected","drag-n-drop-events","explorerId"]))),128)):e.unref(f).view==="grid"?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(e.unref(E),C=>(e.openBlock(),e.createBlock(pn,{key:C,"row-index":C,"row-height":g.value,view:"grid","items-per-row":e.unref(H),items:e.unref(L)(e.unref(d).sortedFiles,C),"show-thumbnails":e.unref(f).showThumbnails,"is-dragging-item":j,"is-selected":q=>e.unref(d).selectedKeys.has(q),"drag-n-drop-events":q=>e.unref(o).events(q),explorerId:e.unref(S),onClick:A,onDblclick:D,onContextmenu:K,onDragstart:R,onDragend:B},null,8,["row-index","row-height","items-per-row","items","show-thumbnails","is-selected","drag-n-drop-events","explorerId"]))),128)):(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:2},e.renderList(e.unref(E),C=>(e.openBlock(),e.createBlock(pn,{key:C,"row-index":C,"row-height":g.value,view:"list",items:F(C)?[F(C)]:[],compact:e.unref(f).compactListView,"is-dragging-item":j,"is-selected":q=>e.unref(d).selectedKeys.has(q),"drag-n-drop-events":q=>e.unref(o).events(q),explorerId:e.unref(S),onClick:A,onDblclick:D,onContextmenu:K,onDragstart:R,onDragend:B},null,8,["row-index","row-height","items","compact","is-selected","drag-n-drop-events","explorerId"]))),128))],36)],34),e.createVNode(cu)]))}}),wf=["href","download"],kf=["onClick"],bf=e.defineComponent({__name:"ContextMenu",setup(n){const t=e.inject("ServiceContainer"),o=e.ref(null),r=e.ref([]),{query:s}=t.search,l=e.reactive({active:!1,items:[],positions:{left:"0px",top:"0px"}});t.emitter.on("vf-context-selected",i=>{r.value=i});const a=i=>i.link(t,r.value),u=i=>{t.emitter.emit("vf-contextmenu-hide"),i.action(t,r.value)};t.emitter.on("vf-contextmenu-show",({event:i,items:d,target:f=null})=>{if(l.items=t.contextMenuItems.filter(p=>p.show(t,{searchQuery:s.value,items:d,target:f})),s.value)if(f)t.emitter.emit("vf-context-selected",[f]);else return;else!f&&!s.value?t.emitter.emit("vf-context-selected",[]):d.length>1&&d.some(p=>p.path===f.path)?t.emitter.emit("vf-context-selected",d):t.emitter.emit("vf-context-selected",[f]);c(i)}),t.emitter.on("vf-contextmenu-hide",()=>{l.active=!1});const c=i=>{const d=t.root,f=t.root.getBoundingClientRect(),p=d.getBoundingClientRect();let _=i.clientX-f.left,v=i.clientY-f.top;l.active=!0,e.nextTick(()=>{const m=o.value?.getBoundingClientRect();let g=m?.height??0,x=m?.width??0;_=p.right-i.pageX+window.scrollX<x?_-x:_,v=p.bottom-i.pageY+window.scrollY<g?v-g:v,l.positions={left:String(_)+"px",top:String(v)+"px"}})};return(i,d)=>e.withDirectives((e.openBlock(),e.createElementBlock("ul",{ref_key:"contextmenu",ref:o,class:e.normalizeClass([l.active?"vuefinder__context-menu--active":"vuefinder__context-menu--inactive","vuefinder__context-menu"]),style:e.normalizeStyle(l.positions)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.items,f=>(e.openBlock(),e.createElementBlock("li",{class:"vuefinder__context-menu__item",key:f.title},[f.link?(e.openBlock(),e.createElementBlock("a",{key:0,class:"vuefinder__context-menu__link",target:"_blank",href:a(f),download:a(f),onClick:d[0]||(d[0]=p=>e.unref(t).emitter.emit("vf-contextmenu-hide"))},[e.createElementVNode("span",null,e.toDisplayString(f.title(e.unref(t).i18n)),1)],8,wf)):(e.openBlock(),e.createElementBlock("div",{key:1,class:"vuefinder__context-menu__action",onClick:p=>u(f)},[e.createElementVNode("span",null,e.toDisplayString(f.title(e.unref(t).i18n)),1)],8,kf))]))),128))],6)),[[e.vShow,l.active]])}}),Ef={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"h-5 w-5",viewBox:"0 0 24 24"};function Sf(n,t){return e.openBlock(),e.createElementBlock("svg",Ef,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"},null,-1)])])}const Ur={render:Sf},xf={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"2",class:"h-5 w-5 stroke-slate-500 cursor-pointer",viewBox:"0 0 24 24"};function Vf(n,t){return e.openBlock(),e.createElementBlock("svg",xf,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0"},null,-1)])])}const Nf={render:Vf},Cf={class:"vuefinder__status-bar__wrapper"},Bf={class:"vuefinder__status-bar__storage"},$f=["title"],Df={class:"vuefinder__status-bar__storage-icon"},Tf=["value"],Mf=["value"],Af={class:"vuefinder__status-bar__info"},If={key:0},Lf={class:"vuefinder__status-bar__selected-count"},Ff={class:"vuefinder__status-bar__actions"},Of=["disabled"],Rf=["title"],Hf=e.defineComponent({__name:"Statusbar",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,r=t.fs,{hasQuery:s}=t.search,l=u=>{const c=u.target.value;t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",storage:c}})},a=e.computed(()=>{const u=t.selectButton.multiple?r.selectedCount>0:r.selectedCount===1;return t.selectButton.active&&u});return(u,c)=>(e.openBlock(),e.createElementBlock("div",Cf,[e.createElementVNode("div",Bf,[e.createElementVNode("div",{class:"vuefinder__status-bar__storage-container",title:e.unref(o)("Storage")},[e.createElementVNode("div",Df,[e.createVNode(e.unref(Ur))]),e.createElementVNode("select",{name:"vuefinder-media-selector",value:e.unref(r).path.storage,onChange:l,class:"vuefinder__status-bar__storage-select",tabindex:"-1"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(r).storages,i=>(e.openBlock(),e.createElementBlock("option",{value:i,key:i},e.toDisplayString(i),9,Mf))),128))],40,Tf)],8,$f),e.createElementVNode("div",Af,[e.unref(s)?(e.openBlock(),e.createElementBlock("span",If,e.toDisplayString(e.unref(r).files.length)+" items found. ",1)):e.createCommentVNode("",!0),e.createElementVNode("span",Lf,e.toDisplayString(e.unref(r).selectedCount>0?e.unref(o)("%s item(s) selected.",e.unref(r).selectedCount):""),1)])]),e.createElementVNode("div",Ff,[e.unref(t).selectButton.active?(e.openBlock(),e.createElementBlock("button",{key:0,class:e.normalizeClass(["vf-btn vf-btn-primary vf-btn-small",{disabled:!a.value}]),disabled:!a.value,onClick:c[0]||(c[0]=i=>e.unref(t).selectButton.click(e.unref(r).selectedItems,i))},e.toDisplayString(e.unref(o)("Select")),11,Of)):e.createCommentVNode("",!0),e.createElementVNode("span",{class:"vuefinder__status-bar__about",title:e.unref(o)("About"),onClick:c[1]||(c[1]=i=>e.unref(t).modal.open(zo))},[e.createVNode(e.unref(Nf))],8,Rf)])]))}}),zf={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"text-neutral-500 fill-sky-500 stroke-gray-100/50 dark:stroke-slate-700/50 dark:fill-slate-500",viewBox:"0 0 24 24"};function Pf(n,t){return e.openBlock(),e.createElementBlock("svg",zf,[...t[0]||(t[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 9.776q.168-.026.344-.026h15.812q.176 0 .344.026m-16.5 0a2.25 2.25 0 0 0-1.883 2.542l.857 6a2.25 2.25 0 0 0 2.227 1.932H19.05a2.25 2.25 0 0 0 2.227-1.932l.857-6a2.25 2.25 0 0 0-1.883-2.542m-16.5 0V6A2.25 2.25 0 0 1 6 3.75h3.879a1.5 1.5 0 0 1 1.06.44l2.122 2.12a1.5 1.5 0 0 0 1.06.44H18A2.25 2.25 0 0 1 20.25 9v.776"},null,-1)])])}const jr={render:Pf},Uf={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 24 24"};function jf(n,t){return e.openBlock(),e.createElementBlock("svg",Uf,[...t[0]||(t[0]=[e.createElementVNode("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2m3.6 5.2a1 1 0 0 0-1.4.2L12 10.333 9.8 7.4a1 1 0 1 0-1.6 1.2l2.55 3.4-2.55 3.4a1 1 0 1 0 1.6 1.2l2.2-2.933 2.2 2.933a1 1 0 0 0 1.6-1.2L13.25 12l2.55-3.4a1 1 0 0 0-.2-1.4"},null,-1)])])}const qf={render:jf},Kf={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"};function Gf(n,t){return e.openBlock(),e.createElementBlock("svg",Kf,[...t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M15 12H9M12 9v6"},null,-1)])])}const qr={render:Gf},Yf={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"};function Wf(n,t){return e.openBlock(),e.createElementBlock("svg",Yf,[...t[0]||(t[0]=[e.createElementVNode("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),e.createElementVNode("path",{d:"M9 12h6"},null,-1)])])}const Kr={render:Wf};function Gr(n,t){const o=n.findIndex(r=>r.path===t.path);o>-1?n[o]=t:n.push(t)}const Xf={class:"vuefinder__folder-loader-indicator"},Qf={key:1,class:"vuefinder__folder-loader-indicator--icon"},Yr=e.defineComponent({__name:"FolderLoaderIndicator",props:e.mergeModels({storage:{},path:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const t=n,o=e.inject("ServiceContainer"),{t:r}=o.i18n,s=e.useModel(n,"modelValue"),l=e.ref(!1);e.watch(()=>s.value,()=>a()?.folders.length||u());function a(){return o.treeViewData.find(c=>c.path===t.path)}const u=()=>{l.value=!0,o.requester.send({url:"",method:"get",params:{q:"subfolders",storage:t.storage,path:t.path}}).then(c=>{Gr(o.treeViewData,{path:t.path,type:"dir",...c})}).catch(c=>{}).finally(()=>{l.value=!1})};return(c,i)=>(e.openBlock(),e.createElementBlock("div",Xf,[l.value?(e.openBlock(),e.createBlock(e.unref(Hn),{key:0,class:"vuefinder__folder-loader-indicator--loading"})):(e.openBlock(),e.createElementBlock("div",Qf,[s.value&&a()?.folders.length?(e.openBlock(),e.createBlock(e.unref(Kr),{key:0,class:"vuefinder__folder-loader-indicator--minus"})):e.createCommentVNode("",!0),s.value?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(qr),{key:1,class:"vuefinder__folder-loader-indicator--plus"}))]))]))}}),Jf=["onClick"],Zf=["title","onDblclick","onClick"],em={class:"vuefinder__treesubfolderlist__item-icon"},tm={class:"vuefinder__treesubfolderlist__subfolder"},nm=e.defineComponent({__name:"TreeSubfolderList",props:{storage:{},path:{}},setup(n){const t=e.inject("ServiceContainer"),o=t.fs,r=kt(t,["bg-blue-200","dark:bg-slate-600"]),s=e.ref({}),l=n,a=e.ref(null);e.onMounted(()=>{l.path===l.storage+"://"&&a.value&&Me(a.value,{scrollbars:{theme:"vf-theme-dark dark:vf-theme-light"}})});const u=e.computed(()=>t.treeViewData.find(c=>c.path===l.path)?.folders||[]);return(c,i)=>{const d=e.resolveComponent("TreeSubfolderList",!0);return e.openBlock(),e.createElementBlock("ul",{ref_key:"parentSubfolderList",ref:a,class:"vuefinder__treesubfolderlist__container"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value,(f,p)=>(e.openBlock(),e.createElementBlock("li",{key:f.path,class:"vuefinder__treesubfolderlist__item"},[e.createElementVNode("div",e.mergeProps(e.toHandlers(e.unref(r).events({...f,type:"dir"}),!0),{class:"vuefinder__treesubfolderlist__item-content"}),[e.createElementVNode("div",{class:"vuefinder__treesubfolderlist__item-toggle",onClick:_=>s.value[f.path]=!s.value[f.path]},[e.createVNode(Yr,{storage:n.storage,path:f.path,modelValue:s.value[f.path],"onUpdate:modelValue":_=>s.value[f.path]=_},null,8,["storage","path","modelValue","onUpdate:modelValue"])],8,Jf),e.createElementVNode("div",{class:"vuefinder__treesubfolderlist__item-link",title:f.path,onDblclick:_=>s.value[f.path]=!s.value[f.path],onClick:_=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",storage:l.storage,path:f.path}})},[e.createElementVNode("div",em,[e.unref(o).path.path===f.path?(e.openBlock(),e.createBlock(e.unref(jr),{key:0})):(e.openBlock(),e.createBlock(e.unref(Jt),{key:1}))]),e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__treesubfolderlist__item-text",{"vuefinder__treesubfolderlist__item-text--active":e.unref(o).path.path===f.path}])},e.toDisplayString(f.basename),3)],40,Zf)],16),e.createElementVNode("div",tm,[e.withDirectives(e.createVNode(d,{storage:l.storage,path:f.path},null,8,["storage","path"]),[[e.vShow,s.value[f.path]]])])]))),128))],512)}}}),om=e.defineComponent({__name:"TreeStorageItem",props:{storage:{}},setup(n){const t=e.inject("ServiceContainer"),o=t.fs,r=e.ref(!1),s=n,l=kt(t,["bg-blue-200","dark:bg-slate-600"]),a={storage:s.storage,path:s.storage+"://",type:"dir",basename:s.storage,extension:"",file_size:null,last_modified:null,mime_type:null,visibility:"public"};function u(c){c===o.path.storage?r.value=!r.value:(t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",storage:c}}))}return(c,i)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",{onClick:i[2]||(i[2]=d=>u(n.storage)),class:"vuefinder__treestorageitem__header"},[e.createElementVNode("div",e.mergeProps(e.toHandlers(e.unref(l).events(a),!0),{class:["vuefinder__treestorageitem__info",n.storage===e.unref(o).path.storage?"vuefinder__treestorageitem__info--active":""]}),[e.createElementVNode("div",{class:e.normalizeClass(["vuefinder__treestorageitem__icon",n.storage===e.unref(o).path.storage?"vuefinder__treestorageitem__icon--active":""])},[e.createVNode(e.unref(Ur))],2),e.createElementVNode("div",null,e.toDisplayString(n.storage),1)],16),e.createElementVNode("div",{class:"vuefinder__treestorageitem__loader",onClick:i[1]||(i[1]=e.withModifiers(d=>r.value=!r.value,["stop"]))},[e.createVNode(Yr,{storage:n.storage,path:n.storage+"://",modelValue:r.value,"onUpdate:modelValue":i[0]||(i[0]=d=>r.value=d)},null,8,["storage","path","modelValue"])])]),e.withDirectives(e.createVNode(nm,{storage:n.storage,path:n.storage+"://",class:"vuefinder__treestorageitem__subfolder"},null,8,["storage","path"]),[[e.vShow,r.value]])],64))}}),rm={class:"vuefinder__folder-indicator"},sm={class:"vuefinder__folder-indicator--icon"},lm=e.defineComponent({__name:"FolderIndicator",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(n){const t=e.useModel(n,"modelValue");return(o,r)=>(e.openBlock(),e.createElementBlock("div",rm,[e.createElementVNode("div",sm,[t.value?(e.openBlock(),e.createBlock(e.unref(Kr),{key:0,class:"vuefinder__folder-indicator--minus"})):e.createCommentVNode("",!0),t.value?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(qr),{key:1,class:"vuefinder__folder-indicator--plus"}))])]))}}),am={class:"vuefinder__treeview__header"},im={class:"vuefinder__treeview__pinned-label"},cm={class:"vuefinder__treeview__pin-text text-nowrap"},dm={key:0,class:"vuefinder__treeview__pinned-list"},um=["onClick"],fm=["title"],mm=["onClick"],vm={key:0},pm={class:"vuefinder__treeview__no-pinned"},_m=e.defineComponent({__name:"TreeView",setup(n){const t=e.inject("ServiceContainer"),{t:o}=t.i18n,{getStore:r,setStore:s}=t.storage,l=t.fs,a=t.config,u=kt(t,["bg-blue-200","dark:bg-slate-600"]),c=e.ref(190),i=e.ref(r("pinned-folders-opened",!0));e.watch(i,_=>s("pinned-folders-opened",_));const d=_=>{a.pinnedFolders=a.pinnedFolders.filter(v=>v.path!==_.path)},f=_=>{const v=_.clientX,m=_.target.parentElement;if(!m)return;const g=m.getBoundingClientRect().width;m.classList.remove("transition-[width]"),m.classList.add("transition-none");const x=N=>{c.value=g+N.clientX-v,c.value<50&&(c.value=0,a.set("showTreeView",!1)),c.value>50&&a.set("showTreeView",!0)},H=()=>{const N=m.getBoundingClientRect();c.value=N.width,m.classList.add("transition-[width]"),m.classList.remove("transition-none"),window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",H)};window.addEventListener("mousemove",x),window.addEventListener("mouseup",H)},p=e.ref(null);return e.onMounted(()=>{p.value&&Me(p.value,{overflow:{x:"hidden"},scrollbars:{theme:"vf-theme-dark dark:vf-theme-light"}})}),e.watch(l.files,_=>{const v=_.filter(m=>m.type==="dir");Gr(t.treeViewData,{path:l.path.path,folders:v.map(m=>({storage:m.storage,path:m.path,basename:m.basename,type:"dir"}))})}),(_,v)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",{onClick:v[0]||(v[0]=m=>e.unref(a).toggle("showTreeView")),class:e.normalizeClass(["vuefinder__treeview__overlay",e.unref(a).showTreeView?"vuefinder__treeview__backdrop":"hidden"])},null,2),e.createElementVNode("div",{style:e.normalizeStyle(e.unref(a).showTreeView?"min-width:100px;max-width:75%; width: "+c.value+"px":"width: 0"),class:"vuefinder__treeview__container"},[e.createElementVNode("div",{ref_key:"treeViewScrollElement",ref:p,class:"vuefinder__treeview__scroll"},[e.createElementVNode("div",am,[e.createElementVNode("div",{onClick:v[2]||(v[2]=m=>i.value=!i.value),class:"vuefinder__treeview__pinned-toggle"},[e.createElementVNode("div",im,[e.createVNode(e.unref(tr),{class:"vuefinder__treeview__pin-icon"}),e.createElementVNode("div",cm,e.toDisplayString(e.unref(o)("Pinned Folders")),1)]),e.createVNode(lm,{modelValue:i.value,"onUpdate:modelValue":v[1]||(v[1]=m=>i.value=m)},null,8,["modelValue"])]),i.value?(e.openBlock(),e.createElementBlock("ul",dm,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a).pinnedFolders,m=>(e.openBlock(),e.createElementBlock("li",{key:m.path,class:"vuefinder__treeview__pinned-item"},[e.createElementVNode("div",e.mergeProps(e.toHandlers(e.unref(u).events(m),!0),{class:"vuefinder__treeview__pinned-folder",onClick:g=>e.unref(t).emitter.emit("vf-fetch",{params:{q:"index",storage:m.storage,path:m.path}})}),[e.unref(l).path.path!==m.path?(e.openBlock(),e.createBlock(e.unref(Jt),{key:0,class:"vuefinder__treeview__folder-icon"})):e.createCommentVNode("",!0),e.unref(l).path.path===m.path?(e.openBlock(),e.createBlock(e.unref(jr),{key:1,class:"vuefinder__treeview__open-folder-icon"})):e.createCommentVNode("",!0),e.createElementVNode("div",{title:m.path,class:e.normalizeClass(["vuefinder__treeview__folder-name",{"vuefinder__treeview__folder-name--active":e.unref(l).path.path===m.path}])},e.toDisplayString(m.basename),11,fm)],16,um),e.createElementVNode("div",{class:"vuefinder__treeview__remove-folder",onClick:g=>d(m)},[e.createVNode(e.unref(qf),{class:"vuefinder__treeview__remove-icon"})],8,mm)]))),128)),e.unref(a).pinnedFolders.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("li",vm,[e.createElementVNode("div",pm,e.toDisplayString(e.unref(o)("No folders pinned")),1)]))])):e.createCommentVNode("",!0)]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(l).storages,m=>(e.openBlock(),e.createElementBlock("div",{class:"vuefinder__treeview__storage",key:m},[e.createVNode(om,{storage:m},null,8,["storage"])]))),128))],512),e.createElementVNode("div",{onMousedown:f,class:"vuefinder__treeview__resize-handle"},null,32)],4)],64))}}),_e={newfolder:"newfolder",selectAll:"selectAll",pinFolder:"pinFolder",unpinFolder:"unpinFolder",delete:"delete",refresh:"refresh",preview:"preview",open:"open",openDir:"openDir",download:"download",download_archive:"download_archive",archive:"archive",unarchive:"unarchive",rename:"rename",move:"move"};function hm(n){return n.items.length>1&&n.items.some(t=>t.path===n.target?.path)?"many":n.target?"one":"none"}function ve(n){const t=Object.assign({needsSearchQuery:!1},n);return(o,r)=>!(t.needsSearchQuery!==!!r.searchQuery||t.target!==void 0&&t.target!==hm(r)||t.targetType!==void 0&&t.targetType!==r.target?.type||t.mimeType!==void 0&&t.mimeType!==r.target?.mime_type||t.feature!==void 0&&!o.features.includes(t.feature))}function kn(...n){return(t,o)=>n.some(r=>r(t,o))}function pt(...n){return(t,o)=>n.every(r=>r(t,o))}const Wr=[{id:_e.openDir,title:({t:n})=>n("Open containing folder"),action:(n,t)=>{n.emitter.emit("vf-search-exit"),n.emitter.emit("vf-fetch",{params:{q:"index",storage:t[0]?.storage,path:t[0]?.path}})},show:ve({target:"one",needsSearchQuery:!0})},{id:_e.refresh,title:({t:n})=>n("Refresh"),action:n=>{const t=n.fs;n.emitter.emit("vf-fetch",{params:{q:"index",storage:t.path.storage,path:t.path.path}})},show:kn(ve({target:"none"}),ve({target:"many"}))},{id:_e.selectAll,title:({t:n})=>n("Select All"),action:n=>{n.fs.selectAll()},show:ve({target:"none"})},{id:_e.newfolder,title:({t:n})=>n("New Folder"),action:n=>n.modal.open(Ko),show:ve({target:"none",feature:Z.NEW_FOLDER})},{id:_e.open,title:({t:n})=>n("Open"),action:(n,t)=>{n.emitter.emit("vf-search-exit"),t[0]&&n.emitter.emit("vf-fetch",{params:{q:"index",storage:t[0].storage,path:t[0].path}})},show:ve({target:"one",targetType:"dir"})},{id:_e.pinFolder,title:({t:n})=>n("Pin Folder"),action:(n,t)=>{const o=n.config;o.set("pinnedFolders",o.pinnedFolders.concat(t.filter(r=>o.pinnedFolders.findIndex(s=>s.path===r.path)===-1)))},show:pt(ve({target:"one",targetType:"dir"}),(n,t)=>n.config.pinnedFolders.findIndex(r=>r.path===t.target?.path)===-1)},{id:_e.unpinFolder,title:({t:n})=>n("Unpin Folder"),action:(n,t)=>{const o=n.config;o.set("pinnedFolders",o.pinnedFolders.filter(r=>!t.find(s=>s.path===r.path)))},show:pt(ve({target:"one",targetType:"dir"}),(n,t)=>n.config.pinnedFolders.findIndex(r=>r.path===t.target?.path)!==-1)},{id:_e.preview,title:({t:n})=>n("Preview"),action:(n,t)=>n.modal.open(jo,{storage:t[0]?.storage,item:t[0]}),show:pt(ve({target:"one",feature:Z.PREVIEW}),(n,t)=>t.target?.type!=="dir")},{id:_e.download,link:(n,t)=>n.requester.getDownloadUrl(t[0]?.storage,t[0]),title:({t:n})=>n("Download"),action:()=>{},show:pt(ve({target:"one",feature:Z.DOWNLOAD}),(n,t)=>t.target?.type!=="dir")},{id:_e.rename,title:({t:n})=>n("Rename"),action:(n,t)=>n.modal.open(Rn,{items:t}),show:ve({target:"one",feature:Z.RENAME})},{id:_e.archive,title:({t:n})=>n("Archive"),action:(n,t)=>n.modal.open(Jo,{items:t}),show:kn(ve({target:"many",feature:Z.ARCHIVE}),pt(ve({target:"one",feature:Z.ARCHIVE}),(n,t)=>t.target?.mime_type!=="application/zip"))},{id:_e.unarchive,title:({t:n})=>n("Unarchive"),action:(n,t)=>n.modal.open(Xo,{items:t}),show:ve({target:"one",feature:Z.UNARCHIVE,mimeType:"application/zip"})},{id:_e.delete,title:({t:n})=>n("Delete"),action:(n,t)=>{n.modal.open(On,{items:t})},show:kn(ve({feature:Z.DELETE,target:"one"}),ve({feature:Z.DELETE,target:"many"}))}],gm={class:"vuefinder",ref:"root",tabindex:"0"},ym={class:"vuefinder__main__content"},Xr=e.defineComponent({__name:"VueFinder",props:{id:{default:"vf"},request:{},persist:{type:Boolean,default:!1},path:{default:""},features:{type:[Boolean,Array],default:!0},debug:{type:Boolean,default:!1},theme:{default:"system"},locale:{default:void 0},maxHeight:{default:"600px"},maxFileSize:{default:"10mb"},fullScreen:{type:Boolean,default:!1},showTreeView:{type:Boolean,default:!1},pinnedFolders:{default:()=>[]},showThumbnails:{type:Boolean,default:!0},selectButton:{default:()=>({active:!1,multiple:!1,click:()=>{}})},loadingIndicator:{default:"linear"},contextMenuItems:{default:()=>Wr},onError:{},onSelect:{},"onUpdate:path":{},icon:{}},emits:["select","update:path"],setup(n,{emit:t}){const o=t,r=n,s=Es(r,e.inject("VueFinderOptions"));e.provide("ServiceContainer",s);const l=s.config,a=s.fs;si(s);let u=null;s.emitter.on("vf-fetch-abort",()=>{u&&u.abort(),a.setLoading(!1)}),s.emitter.on("vf-fetch",({params:i,body:d=null,onSuccess:f=null,onError:p=null,noCloseModal:_=!1})=>{["index","search"].includes(i.q)&&(u&&u.abort(),a.setLoading(!0)),u=new AbortController;const v=u.signal;s.requester.send({url:"",method:i.m||"get",params:i,body:d,abortSignal:v}).then(m=>{a.setPath(m.dirname),l.persist&&l.set("path",m.dirname),_||s.modal.close(),a.setFiles(m.files),a.clearSelection(),a.setSelectedCount(0),a.setStorages(m.storages),f&&f(m)}).catch(m=>{console.error(m),p?p(m):m&&typeof m=="object"&&"message"in m&&s.emitter.emit("vf-toast-push",{label:m.message,type:"error"})}).finally(()=>{["index","search"].includes(i.q)&&a.setLoading(!1)})});function c(i){let d={};i&&i.includes("://")&&(d={storage:i.split("://")[0],path:i}),s.emitter.emit("vf-fetch",{params:{q:"index",storage:a.path.storage,...d},onError:r.onError??(f=>{f&&typeof f=="object"&&"message"in f&&s.emitter.emit("vf-toast-push",{label:f.message,type:"error"})})})}return e.onMounted(()=>{e.watch(()=>r.path,d=>{c(d)});const i=l.persist?l.path:r.path;a.setPath(i),c(i),s.emitter.on("vf-select",d=>{s.selectedItems=d,o("select",d)}),e.watch(()=>a.path.path,d=>{o("update:path",d)}),e.watch(()=>a.selectedItems,d=>{o("select",d)})}),(i,d)=>(e.openBlock(),e.createElementBlock("div",gm,[e.createElementVNode("div",{class:e.normalizeClass(e.unref(s).theme.actualValue)},[e.createElementVNode("div",{class:e.normalizeClass([e.unref(l).fullScreen?"vuefinder__main__fixed":"vuefinder__main__relative","vuefinder__main__container"]),style:e.normalizeStyle(e.unref(l).fullScreen?"":"max-height: "+n.maxHeight),onMousedown:d[0]||(d[0]=f=>e.unref(s).emitter.emit("vf-contextmenu-hide")),onTouchstart:d[1]||(d[1]=f=>e.unref(s).emitter.emit("vf-contextmenu-hide"))},[e.createVNode($c),e.createVNode(wd),e.createElementVNode("div",ym,[e.createVNode(_m),e.createVNode(yf)]),e.createVNode(Hf)],38),e.createVNode(e.Transition,{name:"fade"},{default:e.withCtx(()=>[e.unref(s).modal.visible?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(s).modal.type),{key:0})):e.createCommentVNode("",!0)]),_:1}),e.createVNode(bf)],2)],512))}}),wm=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,km=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,bm=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Em(n,t){if(n==="__proto__"||n==="constructor"&&t&&typeof t=="object"&&"prototype"in t){Sm(n);return}return t}function Sm(n){console.warn(`[destr] Dropping "${n}" key to prevent prototype pollution.`)}function xm(n,t={}){if(typeof n!="string")return n;if(n[0]==='"'&&n[n.length-1]==='"'&&n.indexOf("\\")===-1)return n.slice(1,-1);const o=n.trim();if(o.length<=9)switch(o.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!bm.test(n)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return n}try{if(wm.test(n)||km.test(n)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(n,Em)}return JSON.parse(n)}catch(r){if(t.strict)throw r;return n}}function Vm(n,t){if(n==null)return;let o=n;for(let r=0;r<t.length;r++){if(o==null||o[t[r]]==null)return;o=o[t[r]]}return o}function ro(n,t,o){if(o.length===0)return t;const r=o[0];return o.length>1&&(t=ro(typeof n!="object"||n===null||!Object.prototype.hasOwnProperty.call(n,r)?Number.isInteger(Number(o[1]))?[]:{}:n[r],t,Array.prototype.slice.call(o,1))),Number.isInteger(Number(r))&&Array.isArray(n)?n.slice()[r]:Object.assign({},n,{[r]:t})}function Qr(n,t){if(n==null||t.length===0)return n;if(t.length===1){if(n==null)return n;if(Number.isInteger(t[0])&&Array.isArray(n))return Array.prototype.slice.call(n,0).splice(t[0],1);const o={};for(const r in n)o[r]=n[r];return delete o[t[0]],o}if(n[t[0]]==null){if(Number.isInteger(t[0])&&Array.isArray(n))return Array.prototype.concat.call([],n);const o={};for(const r in n)o[r]=n[r];return o}return ro(n,Qr(n[t[0]],Array.prototype.slice.call(t,1)),[t[0]])}function Jr(n,t){return t.map(o=>o.split(".")).map(o=>[o,Vm(n,o)]).filter(o=>o[1]!==void 0).reduce((o,r)=>ro(o,r[1],r[0]),{})}function Zr(n,t){return t.map(o=>o.split(".")).reduce((o,r)=>Qr(o,r),n)}function Fo(n,{storage:t,serializer:o,key:r,debug:s,pick:l,omit:a,beforeHydrate:u,afterHydrate:c},i,d=!0){try{d&&u?.(i);const f=t.getItem(r);if(f){const p=o.deserialize(f),_=l?Jr(p,l):p,v=a?Zr(_,a):_;n.$patch(v)}d&&c?.(i)}catch(f){s&&console.error("[pinia-plugin-persistedstate]",f)}}function Oo(n,{storage:t,serializer:o,key:r,debug:s,pick:l,omit:a}){try{const u=l?Jr(n,l):n,c=a?Zr(u,a):u,i=o.serialize(c);t.setItem(r,i)}catch(u){s&&console.error("[pinia-plugin-persistedstate]",u)}}function Nm(n,t,o){const{pinia:r,store:s,options:{persist:l=o}}=n;if(!l)return;if(!(s.$id in r.state.value)){const c=r._s.get(s.$id.replace("__hot:",""));c&&Promise.resolve().then(()=>c.$persist());return}const u=(Array.isArray(l)?l:l===!0?[{}]:[l]).map(t);s.$hydrate=({runHooks:c=!0}={})=>{u.forEach(i=>{Fo(s,i,n,c)})},s.$persist=()=>{u.forEach(c=>{Oo(s.$state,c)})},u.forEach(c=>{Fo(s,c,n),s.$subscribe((i,d)=>Oo(d,c),{detached:!0})})}function Cm(n={}){return function(t){Nm(t,o=>({key:(n.key?n.key:r=>r)(o.key??t.store.$id),debug:o.debug??n.debug??!1,serializer:o.serializer??n.serializer??{serialize:r=>JSON.stringify(r),deserialize:r=>xm(r)},storage:o.storage??n.storage??window.localStorage,beforeHydrate:o.beforeHydrate,afterHydrate:o.afterHydrate,pick:o.pick,omit:o.omit}),n.auto??!1)}}var Bm=Cm();const es={install(n,t={}){const o=n.config&&n.config.globalProperties?n.config.globalProperties.$pinia:null,r=o||Qt.createPinia();r.__vf_persisted||(r.use(Bm),r.__vf_persisted=!0),o||n.use(r),t.i18n=t.i18n??{};let[s]=Object.keys(t.i18n);t.locale=t.locale??s??"en",n.provide("VueFinderOptions",t),n.component("VueFinder",Xr)}};exports.ContextMenuIds=_e;exports.VueFinder=Xr;exports.VueFinderPlugin=es;exports.contextMenuItems=Wr;exports.default=es;
